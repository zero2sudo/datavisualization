var RG=Object.defineProperty;var QM=e=>{throw TypeError(e)};var LG=(e,t,n)=>t in e?RG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var re=(e,t,n)=>LG(e,typeof t!="symbol"?t+"":t,n),KM=(e,t,n)=>t.has(e)||QM("Cannot "+n);var ZM=(e,t,n)=>(KM(e,t,"read from private field"),n?n.call(e):t.get(e)),eN=(e,t,n)=>t.has(e)?QM("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),E_=(e,t,n,r)=>(KM(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var A_={exports:{}},Vd={},C_={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tN;function PG(){if(tN)return Ve;tN=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.iterator;function p(L){return L===null||typeof L!="object"?null:(L=h&&L[h]||L["@@iterator"],typeof L=="function"?L:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,v={};function _(L,Y,ye){this.props=L,this.context=Y,this.refs=v,this.updater=ye||m}_.prototype.isReactComponent={},_.prototype.setState=function(L,Y){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,Y,"setState")},_.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function b(){}b.prototype=_.prototype;function S(L,Y,ye){this.props=L,this.context=Y,this.refs=v,this.updater=ye||m}var A=S.prototype=new b;A.constructor=S,y(A,_.prototype),A.isPureReactComponent=!0;var C=Array.isArray,k=Object.prototype.hasOwnProperty,N={current:null},$={key:!0,ref:!0,__self:!0,__source:!0};function O(L,Y,ye){var Ae,be={},Ie=null,et=null;if(Y!=null)for(Ae in Y.ref!==void 0&&(et=Y.ref),Y.key!==void 0&&(Ie=""+Y.key),Y)k.call(Y,Ae)&&!$.hasOwnProperty(Ae)&&(be[Ae]=Y[Ae]);var qe=arguments.length-2;if(qe===1)be.children=ye;else if(1<qe){for(var de=Array(qe),Te=0;Te<qe;Te++)de[Te]=arguments[Te+2];be.children=de}if(L&&L.defaultProps)for(Ae in qe=L.defaultProps,qe)be[Ae]===void 0&&(be[Ae]=qe[Ae]);return{$$typeof:e,type:L,key:Ie,ref:et,props:be,_owner:N.current}}function D(L,Y){return{$$typeof:e,type:L.type,key:Y,ref:L.ref,props:L.props,_owner:L._owner}}function P(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function R(L){var Y={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ye){return Y[ye]})}var X=/\/+/g;function B(L,Y){return typeof L=="object"&&L!==null&&L.key!=null?R(""+L.key):Y.toString(36)}function I(L,Y,ye,Ae,be){var Ie=typeof L;(Ie==="undefined"||Ie==="boolean")&&(L=null);var et=!1;if(L===null)et=!0;else switch(Ie){case"string":case"number":et=!0;break;case"object":switch(L.$$typeof){case e:case t:et=!0}}if(et)return et=L,be=be(et),L=Ae===""?"."+B(et,0):Ae,C(be)?(ye="",L!=null&&(ye=L.replace(X,"$&/")+"/"),I(be,Y,ye,"",function(Te){return Te})):be!=null&&(P(be)&&(be=D(be,ye+(!be.key||et&&et.key===be.key?"":(""+be.key).replace(X,"$&/")+"/")+L)),Y.push(be)),1;if(et=0,Ae=Ae===""?".":Ae+":",C(L))for(var qe=0;qe<L.length;qe++){Ie=L[qe];var de=Ae+B(Ie,qe);et+=I(Ie,Y,ye,de,be)}else if(de=p(L),typeof de=="function")for(L=de.call(L),qe=0;!(Ie=L.next()).done;)Ie=Ie.value,de=Ae+B(Ie,qe++),et+=I(Ie,Y,ye,de,be);else if(Ie==="object")throw Y=String(L),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return et}function F(L,Y,ye){if(L==null)return L;var Ae=[],be=0;return I(L,Ae,"","",function(Ie){return Y.call(ye,Ie,be++)}),Ae}function W(L){if(L._status===-1){var Y=L._result;Y=Y(),Y.then(function(ye){(L._status===0||L._status===-1)&&(L._status=1,L._result=ye)},function(ye){(L._status===0||L._status===-1)&&(L._status=2,L._result=ye)}),L._status===-1&&(L._status=0,L._result=Y)}if(L._status===1)return L._result.default;throw L._result}var V={current:null},j={transition:null},H={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:j,ReactCurrentOwner:N};function Q(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:F,forEach:function(L,Y,ye){F(L,function(){Y.apply(this,arguments)},ye)},count:function(L){var Y=0;return F(L,function(){Y++}),Y},toArray:function(L){return F(L,function(Y){return Y})||[]},only:function(L){if(!P(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Ve.Component=_,Ve.Fragment=n,Ve.Profiler=i,Ve.PureComponent=S,Ve.StrictMode=r,Ve.Suspense=l,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,Ve.act=Q,Ve.cloneElement=function(L,Y,ye){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ae=y({},L.props),be=L.key,Ie=L.ref,et=L._owner;if(Y!=null){if(Y.ref!==void 0&&(Ie=Y.ref,et=N.current),Y.key!==void 0&&(be=""+Y.key),L.type&&L.type.defaultProps)var qe=L.type.defaultProps;for(de in Y)k.call(Y,de)&&!$.hasOwnProperty(de)&&(Ae[de]=Y[de]===void 0&&qe!==void 0?qe[de]:Y[de])}var de=arguments.length-2;if(de===1)Ae.children=ye;else if(1<de){qe=Array(de);for(var Te=0;Te<de;Te++)qe[Te]=arguments[Te+2];Ae.children=qe}return{$$typeof:e,type:L.type,key:be,ref:Ie,props:Ae,_owner:et}},Ve.createContext=function(L){return L={$$typeof:s,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:o,_context:L},L.Consumer=L},Ve.createElement=O,Ve.createFactory=function(L){var Y=O.bind(null,L);return Y.type=L,Y},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(L){return{$$typeof:a,render:L}},Ve.isValidElement=P,Ve.lazy=function(L){return{$$typeof:f,_payload:{_status:-1,_result:L},_init:W}},Ve.memo=function(L,Y){return{$$typeof:c,type:L,compare:Y===void 0?null:Y}},Ve.startTransition=function(L){var Y=j.transition;j.transition={};try{L()}finally{j.transition=Y}},Ve.unstable_act=Q,Ve.useCallback=function(L,Y){return V.current.useCallback(L,Y)},Ve.useContext=function(L){return V.current.useContext(L)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(L){return V.current.useDeferredValue(L)},Ve.useEffect=function(L,Y){return V.current.useEffect(L,Y)},Ve.useId=function(){return V.current.useId()},Ve.useImperativeHandle=function(L,Y,ye){return V.current.useImperativeHandle(L,Y,ye)},Ve.useInsertionEffect=function(L,Y){return V.current.useInsertionEffect(L,Y)},Ve.useLayoutEffect=function(L,Y){return V.current.useLayoutEffect(L,Y)},Ve.useMemo=function(L,Y){return V.current.useMemo(L,Y)},Ve.useReducer=function(L,Y,ye){return V.current.useReducer(L,Y,ye)},Ve.useRef=function(L){return V.current.useRef(L)},Ve.useState=function(L){return V.current.useState(L)},Ve.useSyncExternalStore=function(L,Y,ye){return V.current.useSyncExternalStore(L,Y,ye)},Ve.useTransition=function(){return V.current.useTransition()},Ve.version="18.3.1",Ve}var nN;function RE(){return nN||(nN=1,C_.exports=PG()),C_.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rN;function zG(){if(rN)return Vd;rN=1;var e=RE(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(a,l,c){var f,h={},p=null,m=null;c!==void 0&&(p=""+c),l.key!==void 0&&(p=""+l.key),l.ref!==void 0&&(m=l.ref);for(f in l)r.call(l,f)&&!o.hasOwnProperty(f)&&(h[f]=l[f]);if(a&&a.defaultProps)for(f in l=a.defaultProps,l)h[f]===void 0&&(h[f]=l[f]);return{$$typeof:t,type:a,key:p,ref:m,props:h,_owner:i.current}}return Vd.Fragment=n,Vd.jsx=s,Vd.jsxs=s,Vd}var iN;function IG(){return iN||(iN=1,A_.exports=zG()),A_.exports}var ee=IG(),yi=RE(),T0={},k_={exports:{}},_r={},$_={exports:{}},M_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oN;function UG(){return oN||(oN=1,(function(e){function t(j,H){var Q=j.length;j.push(H);e:for(;0<Q;){var L=Q-1>>>1,Y=j[L];if(0<i(Y,H))j[L]=H,j[Q]=Y,Q=L;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var H=j[0],Q=j.pop();if(Q!==H){j[0]=Q;e:for(var L=0,Y=j.length,ye=Y>>>1;L<ye;){var Ae=2*(L+1)-1,be=j[Ae],Ie=Ae+1,et=j[Ie];if(0>i(be,Q))Ie<Y&&0>i(et,be)?(j[L]=et,j[Ie]=Q,L=Ie):(j[L]=be,j[Ae]=Q,L=Ae);else if(Ie<Y&&0>i(et,Q))j[L]=et,j[Ie]=Q,L=Ie;else break e}}return H}function i(j,H){var Q=j.sortIndex-H.sortIndex;return Q!==0?Q:j.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],c=[],f=1,h=null,p=3,m=!1,y=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(j){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=j)r(c),H.sortIndex=H.expirationTime,t(l,H);else break;H=n(c)}}function C(j){if(v=!1,A(j),!y)if(n(l)!==null)y=!0,W(k);else{var H=n(c);H!==null&&V(C,H.startTime-j)}}function k(j,H){y=!1,v&&(v=!1,b(O),O=-1),m=!0;var Q=p;try{for(A(H),h=n(l);h!==null&&(!(h.expirationTime>H)||j&&!R());){var L=h.callback;if(typeof L=="function"){h.callback=null,p=h.priorityLevel;var Y=L(h.expirationTime<=H);H=e.unstable_now(),typeof Y=="function"?h.callback=Y:h===n(l)&&r(l),A(H)}else r(l);h=n(l)}if(h!==null)var ye=!0;else{var Ae=n(c);Ae!==null&&V(C,Ae.startTime-H),ye=!1}return ye}finally{h=null,p=Q,m=!1}}var N=!1,$=null,O=-1,D=5,P=-1;function R(){return!(e.unstable_now()-P<D)}function X(){if($!==null){var j=e.unstable_now();P=j;var H=!0;try{H=$(!0,j)}finally{H?B():(N=!1,$=null)}}else N=!1}var B;if(typeof S=="function")B=function(){S(X)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,F=I.port2;I.port1.onmessage=X,B=function(){F.postMessage(null)}}else B=function(){_(X,0)};function W(j){$=j,N||(N=!0,B())}function V(j,H){O=_(function(){j(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){y||m||(y=!0,W(k))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(j){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var Q=p;p=H;try{return j()}finally{p=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,H){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Q=p;p=j;try{return H()}finally{p=Q}},e.unstable_scheduleCallback=function(j,H,Q){var L=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?L+Q:L):Q=L,j){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=Q+Y,j={id:f++,callback:H,priorityLevel:j,startTime:Q,expirationTime:Y,sortIndex:-1},Q>L?(j.sortIndex=Q,t(c,j),n(l)===null&&j===n(c)&&(v?(b(O),O=-1):v=!0,V(C,Q-L))):(j.sortIndex=Y,t(l,j),y||m||(y=!0,W(k))),j},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(j){var H=p;return function(){var Q=p;p=H;try{return j.apply(this,arguments)}finally{p=Q}}}})(M_)),M_}var sN;function WG(){return sN||(sN=1,$_.exports=UG()),$_.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aN;function jG(){if(aN)return _r;aN=1;var e=RE(),t=WG();function n(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,g=1;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(u,d){s(u,d),s(u+"Capture",d)}function s(u,d){for(i[u]=d,u=0;u<d.length;u++)r.add(d[u])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},h={};function p(u){return l.call(h,u)?!0:l.call(f,u)?!1:c.test(u)?h[u]=!0:(f[u]=!0,!1)}function m(u,d,g,x){if(g!==null&&g.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return x?!1:g!==null?!g.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function y(u,d,g,x){if(d===null||typeof d>"u"||m(u,d,g,x))return!0;if(x)return!1;if(g!==null)switch(g.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function v(u,d,g,x,w,E,M){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=x,this.attributeNamespace=w,this.mustUseProperty=g,this.propertyName=u,this.type=d,this.sanitizeURL=E,this.removeEmptyString=M}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){_[u]=new v(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var d=u[0];_[d]=new v(d,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){_[u]=new v(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){_[u]=new v(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){_[u]=new v(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){_[u]=new v(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){_[u]=new v(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){_[u]=new v(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){_[u]=new v(u,5,!1,u.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function S(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var d=u.replace(b,S);_[d]=new v(d,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var d=u.replace(b,S);_[d]=new v(d,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var d=u.replace(b,S);_[d]=new v(d,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){_[u]=new v(u,1,!1,u.toLowerCase(),null,!1,!1)}),_.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){_[u]=new v(u,1,!1,u.toLowerCase(),null,!0,!0)});function A(u,d,g,x){var w=_.hasOwnProperty(d)?_[d]:null;(w!==null?w.type!==0:x||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(y(d,g,w,x)&&(g=null),x||w===null?p(d)&&(g===null?u.removeAttribute(d):u.setAttribute(d,""+g)):w.mustUseProperty?u[w.propertyName]=g===null?w.type===3?!1:"":g:(d=w.attributeName,x=w.attributeNamespace,g===null?u.removeAttribute(d):(w=w.type,g=w===3||w===4&&g===!0?"":""+g,x?u.setAttributeNS(x,d,g):u.setAttribute(d,g))))}var C=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),N=Symbol.for("react.portal"),$=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),R=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),V=Symbol.for("react.offscreen"),j=Symbol.iterator;function H(u){return u===null||typeof u!="object"?null:(u=j&&u[j]||u["@@iterator"],typeof u=="function"?u:null)}var Q=Object.assign,L;function Y(u){if(L===void 0)try{throw Error()}catch(g){var d=g.stack.trim().match(/\n( *(at )?)/);L=d&&d[1]||""}return`
`+L+u}var ye=!1;function Ae(u,d){if(!u||ye)return"";ye=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(J){var x=J}Reflect.construct(u,[],d)}else{try{d.call()}catch(J){x=J}u.call(d.prototype)}else{try{throw Error()}catch(J){x=J}u()}}catch(J){if(J&&x&&typeof J.stack=="string"){for(var w=J.stack.split(`
`),E=x.stack.split(`
`),M=w.length-1,T=E.length-1;1<=M&&0<=T&&w[M]!==E[T];)T--;for(;1<=M&&0<=T;M--,T--)if(w[M]!==E[T]){if(M!==1||T!==1)do if(M--,T--,0>T||w[M]!==E[T]){var z=`
`+w[M].replace(" at new "," at ");return u.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",u.displayName)),z}while(1<=M&&0<=T);break}}}finally{ye=!1,Error.prepareStackTrace=g}return(u=u?u.displayName||u.name:"")?Y(u):""}function be(u){switch(u.tag){case 5:return Y(u.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return u=Ae(u.type,!1),u;case 11:return u=Ae(u.type.render,!1),u;case 1:return u=Ae(u.type,!0),u;default:return""}}function Ie(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case $:return"Fragment";case N:return"Portal";case D:return"Profiler";case O:return"StrictMode";case B:return"Suspense";case I:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case R:return(u.displayName||"Context")+".Consumer";case P:return(u._context.displayName||"Context")+".Provider";case X:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case F:return d=u.displayName||null,d!==null?d:Ie(u.type)||"Memo";case W:d=u._payload,u=u._init;try{return Ie(u(d))}catch{}}return null}function et(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ie(d);case 8:return d===O?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function qe(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function de(u){var d=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Te(u){var d=de(u)?"checked":"value",g=Object.getOwnPropertyDescriptor(u.constructor.prototype,d),x=""+u[d];if(!u.hasOwnProperty(d)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var w=g.get,E=g.set;return Object.defineProperty(u,d,{configurable:!0,get:function(){return w.call(this)},set:function(M){x=""+M,E.call(this,M)}}),Object.defineProperty(u,d,{enumerable:g.enumerable}),{getValue:function(){return x},setValue:function(M){x=""+M},stopTracking:function(){u._valueTracker=null,delete u[d]}}}}function Be(u){u._valueTracker||(u._valueTracker=Te(u))}function le(u){if(!u)return!1;var d=u._valueTracker;if(!d)return!0;var g=d.getValue(),x="";return u&&(x=de(u)?u.checked?"true":"false":u.value),u=x,u!==g?(d.setValue(u),!0):!1}function Rt(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function nt(u,d){var g=d.checked;return Q({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??u._wrapperState.initialChecked})}function Wt(u,d){var g=d.defaultValue==null?"":d.defaultValue,x=d.checked!=null?d.checked:d.defaultChecked;g=qe(d.value!=null?d.value:g),u._wrapperState={initialChecked:x,initialValue:g,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Qt(u,d){d=d.checked,d!=null&&A(u,"checked",d,!1)}function Rr(u,d){Qt(u,d);var g=qe(d.value),x=d.type;if(g!=null)x==="number"?(g===0&&u.value===""||u.value!=g)&&(u.value=""+g):u.value!==""+g&&(u.value=""+g);else if(x==="submit"||x==="reset"){u.removeAttribute("value");return}d.hasOwnProperty("value")?F2(u,d.type,g):d.hasOwnProperty("defaultValue")&&F2(u,d.type,qe(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(u.defaultChecked=!!d.defaultChecked)}function ld(u,d,g){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var x=d.type;if(!(x!=="submit"&&x!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+u._wrapperState.initialValue,g||d===u.value||(u.value=d),u.defaultValue=d}g=u.name,g!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,g!==""&&(u.name=g)}function F2(u,d,g){(d!=="number"||Rt(u.ownerDocument)!==u)&&(g==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+g&&(u.defaultValue=""+g))}var ud=Array.isArray;function Vu(u,d,g,x){if(u=u.options,d){d={};for(var w=0;w<g.length;w++)d["$"+g[w]]=!0;for(g=0;g<u.length;g++)w=d.hasOwnProperty("$"+u[g].value),u[g].selected!==w&&(u[g].selected=w),w&&x&&(u[g].defaultSelected=!0)}else{for(g=""+qe(g),d=null,w=0;w<u.length;w++){if(u[w].value===g){u[w].selected=!0,x&&(u[w].defaultSelected=!0);return}d!==null||u[w].disabled||(d=u[w])}d!==null&&(d.selected=!0)}}function T2(u,d){if(d.dangerouslySetInnerHTML!=null)throw Error(n(91));return Q({},d,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function a4(u,d){var g=d.value;if(g==null){if(g=d.children,d=d.defaultValue,g!=null){if(d!=null)throw Error(n(92));if(ud(g)){if(1<g.length)throw Error(n(93));g=g[0]}d=g}d==null&&(d=""),g=d}u._wrapperState={initialValue:qe(g)}}function l4(u,d){var g=qe(d.value),x=qe(d.defaultValue);g!=null&&(g=""+g,g!==u.value&&(u.value=g),d.defaultValue==null&&u.defaultValue!==g&&(u.defaultValue=g)),x!=null&&(u.defaultValue=""+x)}function u4(u){var d=u.textContent;d===u._wrapperState.initialValue&&d!==""&&d!==null&&(u.value=d)}function c4(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function R2(u,d){return u==null||u==="http://www.w3.org/1999/xhtml"?c4(d):u==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var Cg,f4=(function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,g,x,w){MSApp.execUnsafeLocalFunction(function(){return u(d,g,x,w)})}:u})(function(u,d){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=d;else{for(Cg=Cg||document.createElement("div"),Cg.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=Cg.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;d.firstChild;)u.appendChild(d.firstChild)}});function cd(u,d){if(d){var g=u.firstChild;if(g&&g===u.lastChild&&g.nodeType===3){g.nodeValue=d;return}}u.textContent=d}var fd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IB=["Webkit","ms","Moz","O"];Object.keys(fd).forEach(function(u){IB.forEach(function(d){d=d+u.charAt(0).toUpperCase()+u.substring(1),fd[d]=fd[u]})});function d4(u,d,g){return d==null||typeof d=="boolean"||d===""?"":g||typeof d!="number"||d===0||fd.hasOwnProperty(u)&&fd[u]?(""+d).trim():d+"px"}function h4(u,d){u=u.style;for(var g in d)if(d.hasOwnProperty(g)){var x=g.indexOf("--")===0,w=d4(g,d[g],x);g==="float"&&(g="cssFloat"),x?u.setProperty(g,w):u[g]=w}}var UB=Q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function L2(u,d){if(d){if(UB[u]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(n(137,u));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(n(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(n(61))}if(d.style!=null&&typeof d.style!="object")throw Error(n(62))}}function P2(u,d){if(u.indexOf("-")===-1)return typeof d.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var z2=null;function I2(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var U2=null,Xu=null,Ju=null;function p4(u){if(u=Fd(u)){if(typeof U2!="function")throw Error(n(280));var d=u.stateNode;d&&(d=Xg(d),U2(u.stateNode,u.type,d))}}function g4(u){Xu?Ju?Ju.push(u):Ju=[u]:Xu=u}function m4(){if(Xu){var u=Xu,d=Ju;if(Ju=Xu=null,p4(u),d)for(u=0;u<d.length;u++)p4(d[u])}}function y4(u,d){return u(d)}function v4(){}var W2=!1;function x4(u,d,g){if(W2)return u(d,g);W2=!0;try{return y4(u,d,g)}finally{W2=!1,(Xu!==null||Ju!==null)&&(v4(),m4())}}function dd(u,d){var g=u.stateNode;if(g===null)return null;var x=Xg(g);if(x===null)return null;g=x[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(u=u.type,x=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!x;break e;default:u=!1}if(u)return null;if(g&&typeof g!="function")throw Error(n(231,d,typeof g));return g}var j2=!1;if(a)try{var hd={};Object.defineProperty(hd,"passive",{get:function(){j2=!0}}),window.addEventListener("test",hd,hd),window.removeEventListener("test",hd,hd)}catch{j2=!1}function WB(u,d,g,x,w,E,M,T,z){var J=Array.prototype.slice.call(arguments,3);try{d.apply(g,J)}catch(oe){this.onError(oe)}}var pd=!1,kg=null,$g=!1,B2=null,jB={onError:function(u){pd=!0,kg=u}};function BB(u,d,g,x,w,E,M,T,z){pd=!1,kg=null,WB.apply(jB,arguments)}function HB(u,d,g,x,w,E,M,T,z){if(BB.apply(this,arguments),pd){if(pd){var J=kg;pd=!1,kg=null}else throw Error(n(198));$g||($g=!0,B2=J)}}function gl(u){var d=u,g=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,(d.flags&4098)!==0&&(g=d.return),u=d.return;while(u)}return d.tag===3?g:null}function _4(u){if(u.tag===13){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function b4(u){if(gl(u)!==u)throw Error(n(188))}function GB(u){var d=u.alternate;if(!d){if(d=gl(u),d===null)throw Error(n(188));return d!==u?null:u}for(var g=u,x=d;;){var w=g.return;if(w===null)break;var E=w.alternate;if(E===null){if(x=w.return,x!==null){g=x;continue}break}if(w.child===E.child){for(E=w.child;E;){if(E===g)return b4(w),u;if(E===x)return b4(w),d;E=E.sibling}throw Error(n(188))}if(g.return!==x.return)g=w,x=E;else{for(var M=!1,T=w.child;T;){if(T===g){M=!0,g=w,x=E;break}if(T===x){M=!0,x=w,g=E;break}T=T.sibling}if(!M){for(T=E.child;T;){if(T===g){M=!0,g=E,x=w;break}if(T===x){M=!0,x=E,g=w;break}T=T.sibling}if(!M)throw Error(n(189))}}if(g.alternate!==x)throw Error(n(190))}if(g.tag!==3)throw Error(n(188));return g.stateNode.current===g?u:d}function w4(u){return u=GB(u),u!==null?S4(u):null}function S4(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=S4(u);if(d!==null)return d;u=u.sibling}return null}var E4=t.unstable_scheduleCallback,A4=t.unstable_cancelCallback,YB=t.unstable_shouldYield,qB=t.unstable_requestPaint,jt=t.unstable_now,VB=t.unstable_getCurrentPriorityLevel,H2=t.unstable_ImmediatePriority,C4=t.unstable_UserBlockingPriority,Mg=t.unstable_NormalPriority,XB=t.unstable_LowPriority,k4=t.unstable_IdlePriority,Ng=null,fo=null;function JB(u){if(fo&&typeof fo.onCommitFiberRoot=="function")try{fo.onCommitFiberRoot(Ng,u,void 0,(u.current.flags&128)===128)}catch{}}var $i=Math.clz32?Math.clz32:ZB,QB=Math.log,KB=Math.LN2;function ZB(u){return u>>>=0,u===0?32:31-(QB(u)/KB|0)|0}var Og=64,Dg=4194304;function gd(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Fg(u,d){var g=u.pendingLanes;if(g===0)return 0;var x=0,w=u.suspendedLanes,E=u.pingedLanes,M=g&268435455;if(M!==0){var T=M&~w;T!==0?x=gd(T):(E&=M,E!==0&&(x=gd(E)))}else M=g&~w,M!==0?x=gd(M):E!==0&&(x=gd(E));if(x===0)return 0;if(d!==0&&d!==x&&(d&w)===0&&(w=x&-x,E=d&-d,w>=E||w===16&&(E&4194240)!==0))return d;if((x&4)!==0&&(x|=g&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=x;0<d;)g=31-$i(d),w=1<<g,x|=u[g],d&=~w;return x}function eH(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tH(u,d){for(var g=u.suspendedLanes,x=u.pingedLanes,w=u.expirationTimes,E=u.pendingLanes;0<E;){var M=31-$i(E),T=1<<M,z=w[M];z===-1?((T&g)===0||(T&x)!==0)&&(w[M]=eH(T,d)):z<=d&&(u.expiredLanes|=T),E&=~T}}function G2(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function $4(){var u=Og;return Og<<=1,(Og&4194240)===0&&(Og=64),u}function Y2(u){for(var d=[],g=0;31>g;g++)d.push(u);return d}function md(u,d,g){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-$i(d),u[d]=g}function nH(u,d){var g=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var x=u.eventTimes;for(u=u.expirationTimes;0<g;){var w=31-$i(g),E=1<<w;d[w]=0,x[w]=-1,u[w]=-1,g&=~E}}function q2(u,d){var g=u.entangledLanes|=d;for(u=u.entanglements;g;){var x=31-$i(g),w=1<<x;w&d|u[x]&d&&(u[x]|=d),g&=~w}}var ht=0;function M4(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var N4,V2,O4,D4,F4,X2=!1,Tg=[],Xs=null,Js=null,Qs=null,yd=new Map,vd=new Map,Ks=[],rH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function T4(u,d){switch(u){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":yd.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":vd.delete(d.pointerId)}}function xd(u,d,g,x,w,E){return u===null||u.nativeEvent!==E?(u={blockedOn:d,domEventName:g,eventSystemFlags:x,nativeEvent:E,targetContainers:[w]},d!==null&&(d=Fd(d),d!==null&&V2(d)),u):(u.eventSystemFlags|=x,d=u.targetContainers,w!==null&&d.indexOf(w)===-1&&d.push(w),u)}function iH(u,d,g,x,w){switch(d){case"focusin":return Xs=xd(Xs,u,d,g,x,w),!0;case"dragenter":return Js=xd(Js,u,d,g,x,w),!0;case"mouseover":return Qs=xd(Qs,u,d,g,x,w),!0;case"pointerover":var E=w.pointerId;return yd.set(E,xd(yd.get(E)||null,u,d,g,x,w)),!0;case"gotpointercapture":return E=w.pointerId,vd.set(E,xd(vd.get(E)||null,u,d,g,x,w)),!0}return!1}function R4(u){var d=ml(u.target);if(d!==null){var g=gl(d);if(g!==null){if(d=g.tag,d===13){if(d=_4(g),d!==null){u.blockedOn=d,F4(u.priority,function(){O4(g)});return}}else if(d===3&&g.stateNode.current.memoizedState.isDehydrated){u.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Rg(u){if(u.blockedOn!==null)return!1;for(var d=u.targetContainers;0<d.length;){var g=Q2(u.domEventName,u.eventSystemFlags,d[0],u.nativeEvent);if(g===null){g=u.nativeEvent;var x=new g.constructor(g.type,g);z2=x,g.target.dispatchEvent(x),z2=null}else return d=Fd(g),d!==null&&V2(d),u.blockedOn=g,!1;d.shift()}return!0}function L4(u,d,g){Rg(u)&&g.delete(d)}function oH(){X2=!1,Xs!==null&&Rg(Xs)&&(Xs=null),Js!==null&&Rg(Js)&&(Js=null),Qs!==null&&Rg(Qs)&&(Qs=null),yd.forEach(L4),vd.forEach(L4)}function _d(u,d){u.blockedOn===d&&(u.blockedOn=null,X2||(X2=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,oH)))}function bd(u){function d(w){return _d(w,u)}if(0<Tg.length){_d(Tg[0],u);for(var g=1;g<Tg.length;g++){var x=Tg[g];x.blockedOn===u&&(x.blockedOn=null)}}for(Xs!==null&&_d(Xs,u),Js!==null&&_d(Js,u),Qs!==null&&_d(Qs,u),yd.forEach(d),vd.forEach(d),g=0;g<Ks.length;g++)x=Ks[g],x.blockedOn===u&&(x.blockedOn=null);for(;0<Ks.length&&(g=Ks[0],g.blockedOn===null);)R4(g),g.blockedOn===null&&Ks.shift()}var Qu=C.ReactCurrentBatchConfig,Lg=!0;function sH(u,d,g,x){var w=ht,E=Qu.transition;Qu.transition=null;try{ht=1,J2(u,d,g,x)}finally{ht=w,Qu.transition=E}}function aH(u,d,g,x){var w=ht,E=Qu.transition;Qu.transition=null;try{ht=4,J2(u,d,g,x)}finally{ht=w,Qu.transition=E}}function J2(u,d,g,x){if(Lg){var w=Q2(u,d,g,x);if(w===null)px(u,d,x,Pg,g),T4(u,x);else if(iH(w,u,d,g,x))x.stopPropagation();else if(T4(u,x),d&4&&-1<rH.indexOf(u)){for(;w!==null;){var E=Fd(w);if(E!==null&&N4(E),E=Q2(u,d,g,x),E===null&&px(u,d,x,Pg,g),E===w)break;w=E}w!==null&&x.stopPropagation()}else px(u,d,x,null,g)}}var Pg=null;function Q2(u,d,g,x){if(Pg=null,u=I2(x),u=ml(u),u!==null)if(d=gl(u),d===null)u=null;else if(g=d.tag,g===13){if(u=_4(d),u!==null)return u;u=null}else if(g===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;u=null}else d!==u&&(u=null);return Pg=u,null}function P4(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VB()){case H2:return 1;case C4:return 4;case Mg:case XB:return 16;case k4:return 536870912;default:return 16}default:return 16}}var Zs=null,K2=null,zg=null;function z4(){if(zg)return zg;var u,d=K2,g=d.length,x,w="value"in Zs?Zs.value:Zs.textContent,E=w.length;for(u=0;u<g&&d[u]===w[u];u++);var M=g-u;for(x=1;x<=M&&d[g-x]===w[E-x];x++);return zg=w.slice(u,1<x?1-x:void 0)}function Ig(u){var d=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&d===13&&(u=13)):u=d,u===10&&(u=13),32<=u||u===13?u:0}function Ug(){return!0}function I4(){return!1}function Lr(u){function d(g,x,w,E,M){this._reactName=g,this._targetInst=w,this.type=x,this.nativeEvent=E,this.target=M,this.currentTarget=null;for(var T in u)u.hasOwnProperty(T)&&(g=u[T],this[T]=g?g(E):E[T]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Ug:I4,this.isPropagationStopped=I4,this}return Q(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Ug)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Ug)},persist:function(){},isPersistent:Ug}),d}var Ku={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Z2=Lr(Ku),wd=Q({},Ku,{view:0,detail:0}),lH=Lr(wd),ex,tx,Sd,Wg=Q({},wd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rx,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Sd&&(Sd&&u.type==="mousemove"?(ex=u.screenX-Sd.screenX,tx=u.screenY-Sd.screenY):tx=ex=0,Sd=u),ex)},movementY:function(u){return"movementY"in u?u.movementY:tx}}),U4=Lr(Wg),uH=Q({},Wg,{dataTransfer:0}),cH=Lr(uH),fH=Q({},wd,{relatedTarget:0}),nx=Lr(fH),dH=Q({},Ku,{animationName:0,elapsedTime:0,pseudoElement:0}),hH=Lr(dH),pH=Q({},Ku,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),gH=Lr(pH),mH=Q({},Ku,{data:0}),W4=Lr(mH),yH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _H(u){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(u):(u=xH[u])?!!d[u]:!1}function rx(){return _H}var bH=Q({},wd,{key:function(u){if(u.key){var d=yH[u.key]||u.key;if(d!=="Unidentified")return d}return u.type==="keypress"?(u=Ig(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?vH[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rx,charCode:function(u){return u.type==="keypress"?Ig(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Ig(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),wH=Lr(bH),SH=Q({},Wg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),j4=Lr(SH),EH=Q({},wd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rx}),AH=Lr(EH),CH=Q({},Ku,{propertyName:0,elapsedTime:0,pseudoElement:0}),kH=Lr(CH),$H=Q({},Wg,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),MH=Lr($H),NH=[9,13,27,32],ix=a&&"CompositionEvent"in window,Ed=null;a&&"documentMode"in document&&(Ed=document.documentMode);var OH=a&&"TextEvent"in window&&!Ed,B4=a&&(!ix||Ed&&8<Ed&&11>=Ed),H4=" ",G4=!1;function Y4(u,d){switch(u){case"keyup":return NH.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function q4(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Zu=!1;function DH(u,d){switch(u){case"compositionend":return q4(d);case"keypress":return d.which!==32?null:(G4=!0,H4);case"textInput":return u=d.data,u===H4&&G4?null:u;default:return null}}function FH(u,d){if(Zu)return u==="compositionend"||!ix&&Y4(u,d)?(u=z4(),zg=K2=Zs=null,Zu=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return B4&&d.locale!=="ko"?null:d.data;default:return null}}var TH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function V4(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d==="input"?!!TH[u.type]:d==="textarea"}function X4(u,d,g,x){g4(x),d=Yg(d,"onChange"),0<d.length&&(g=new Z2("onChange","change",null,g,x),u.push({event:g,listeners:d}))}var Ad=null,Cd=null;function RH(u){h$(u,0)}function jg(u){var d=ic(u);if(le(d))return u}function LH(u,d){if(u==="change")return d}var J4=!1;if(a){var ox;if(a){var sx="oninput"in document;if(!sx){var Q4=document.createElement("div");Q4.setAttribute("oninput","return;"),sx=typeof Q4.oninput=="function"}ox=sx}else ox=!1;J4=ox&&(!document.documentMode||9<document.documentMode)}function K4(){Ad&&(Ad.detachEvent("onpropertychange",Z4),Cd=Ad=null)}function Z4(u){if(u.propertyName==="value"&&jg(Cd)){var d=[];X4(d,Cd,u,I2(u)),x4(RH,d)}}function PH(u,d,g){u==="focusin"?(K4(),Ad=d,Cd=g,Ad.attachEvent("onpropertychange",Z4)):u==="focusout"&&K4()}function zH(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return jg(Cd)}function IH(u,d){if(u==="click")return jg(d)}function UH(u,d){if(u==="input"||u==="change")return jg(d)}function WH(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var Mi=typeof Object.is=="function"?Object.is:WH;function kd(u,d){if(Mi(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var g=Object.keys(u),x=Object.keys(d);if(g.length!==x.length)return!1;for(x=0;x<g.length;x++){var w=g[x];if(!l.call(d,w)||!Mi(u[w],d[w]))return!1}return!0}function e$(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function t$(u,d){var g=e$(u);u=0;for(var x;g;){if(g.nodeType===3){if(x=u+g.textContent.length,u<=d&&x>=d)return{node:g,offset:d-u};u=x}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=e$(g)}}function n$(u,d){return u&&d?u===d?!0:u&&u.nodeType===3?!1:d&&d.nodeType===3?n$(u,d.parentNode):"contains"in u?u.contains(d):u.compareDocumentPosition?!!(u.compareDocumentPosition(d)&16):!1:!1}function r$(){for(var u=window,d=Rt();d instanceof u.HTMLIFrameElement;){try{var g=typeof d.contentWindow.location.href=="string"}catch{g=!1}if(g)u=d.contentWindow;else break;d=Rt(u.document)}return d}function ax(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d&&(d==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||d==="textarea"||u.contentEditable==="true")}function jH(u){var d=r$(),g=u.focusedElem,x=u.selectionRange;if(d!==g&&g&&g.ownerDocument&&n$(g.ownerDocument.documentElement,g)){if(x!==null&&ax(g)){if(d=x.start,u=x.end,u===void 0&&(u=d),"selectionStart"in g)g.selectionStart=d,g.selectionEnd=Math.min(u,g.value.length);else if(u=(d=g.ownerDocument||document)&&d.defaultView||window,u.getSelection){u=u.getSelection();var w=g.textContent.length,E=Math.min(x.start,w);x=x.end===void 0?E:Math.min(x.end,w),!u.extend&&E>x&&(w=x,x=E,E=w),w=t$(g,E);var M=t$(g,x);w&&M&&(u.rangeCount!==1||u.anchorNode!==w.node||u.anchorOffset!==w.offset||u.focusNode!==M.node||u.focusOffset!==M.offset)&&(d=d.createRange(),d.setStart(w.node,w.offset),u.removeAllRanges(),E>x?(u.addRange(d),u.extend(M.node,M.offset)):(d.setEnd(M.node,M.offset),u.addRange(d)))}}for(d=[],u=g;u=u.parentNode;)u.nodeType===1&&d.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<d.length;g++)u=d[g],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var BH=a&&"documentMode"in document&&11>=document.documentMode,ec=null,lx=null,$d=null,ux=!1;function i$(u,d,g){var x=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;ux||ec==null||ec!==Rt(x)||(x=ec,"selectionStart"in x&&ax(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),$d&&kd($d,x)||($d=x,x=Yg(lx,"onSelect"),0<x.length&&(d=new Z2("onSelect","select",null,d,g),u.push({event:d,listeners:x}),d.target=ec)))}function Bg(u,d){var g={};return g[u.toLowerCase()]=d.toLowerCase(),g["Webkit"+u]="webkit"+d,g["Moz"+u]="moz"+d,g}var tc={animationend:Bg("Animation","AnimationEnd"),animationiteration:Bg("Animation","AnimationIteration"),animationstart:Bg("Animation","AnimationStart"),transitionend:Bg("Transition","TransitionEnd")},cx={},o$={};a&&(o$=document.createElement("div").style,"AnimationEvent"in window||(delete tc.animationend.animation,delete tc.animationiteration.animation,delete tc.animationstart.animation),"TransitionEvent"in window||delete tc.transitionend.transition);function Hg(u){if(cx[u])return cx[u];if(!tc[u])return u;var d=tc[u],g;for(g in d)if(d.hasOwnProperty(g)&&g in o$)return cx[u]=d[g];return u}var s$=Hg("animationend"),a$=Hg("animationiteration"),l$=Hg("animationstart"),u$=Hg("transitionend"),c$=new Map,f$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ea(u,d){c$.set(u,d),o(d,[u])}for(var fx=0;fx<f$.length;fx++){var dx=f$[fx],HH=dx.toLowerCase(),GH=dx[0].toUpperCase()+dx.slice(1);ea(HH,"on"+GH)}ea(s$,"onAnimationEnd"),ea(a$,"onAnimationIteration"),ea(l$,"onAnimationStart"),ea("dblclick","onDoubleClick"),ea("focusin","onFocus"),ea("focusout","onBlur"),ea(u$,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Md="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Md));function d$(u,d,g){var x=u.type||"unknown-event";u.currentTarget=g,HB(x,d,void 0,u),u.currentTarget=null}function h$(u,d){d=(d&4)!==0;for(var g=0;g<u.length;g++){var x=u[g],w=x.event;x=x.listeners;e:{var E=void 0;if(d)for(var M=x.length-1;0<=M;M--){var T=x[M],z=T.instance,J=T.currentTarget;if(T=T.listener,z!==E&&w.isPropagationStopped())break e;d$(w,T,J),E=z}else for(M=0;M<x.length;M++){if(T=x[M],z=T.instance,J=T.currentTarget,T=T.listener,z!==E&&w.isPropagationStopped())break e;d$(w,T,J),E=z}}}if($g)throw u=B2,$g=!1,B2=null,u}function wt(u,d){var g=d[_x];g===void 0&&(g=d[_x]=new Set);var x=u+"__bubble";g.has(x)||(p$(d,u,2,!1),g.add(x))}function hx(u,d,g){var x=0;d&&(x|=4),p$(g,u,x,d)}var Gg="_reactListening"+Math.random().toString(36).slice(2);function Nd(u){if(!u[Gg]){u[Gg]=!0,r.forEach(function(g){g!=="selectionchange"&&(YH.has(g)||hx(g,!1,u),hx(g,!0,u))});var d=u.nodeType===9?u:u.ownerDocument;d===null||d[Gg]||(d[Gg]=!0,hx("selectionchange",!1,d))}}function p$(u,d,g,x){switch(P4(d)){case 1:var w=sH;break;case 4:w=aH;break;default:w=J2}g=w.bind(null,d,g,u),w=void 0,!j2||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(w=!0),x?w!==void 0?u.addEventListener(d,g,{capture:!0,passive:w}):u.addEventListener(d,g,!0):w!==void 0?u.addEventListener(d,g,{passive:w}):u.addEventListener(d,g,!1)}function px(u,d,g,x,w){var E=x;if((d&1)===0&&(d&2)===0&&x!==null)e:for(;;){if(x===null)return;var M=x.tag;if(M===3||M===4){var T=x.stateNode.containerInfo;if(T===w||T.nodeType===8&&T.parentNode===w)break;if(M===4)for(M=x.return;M!==null;){var z=M.tag;if((z===3||z===4)&&(z=M.stateNode.containerInfo,z===w||z.nodeType===8&&z.parentNode===w))return;M=M.return}for(;T!==null;){if(M=ml(T),M===null)return;if(z=M.tag,z===5||z===6){x=E=M;continue e}T=T.parentNode}}x=x.return}x4(function(){var J=E,oe=I2(g),ue=[];e:{var ie=c$.get(u);if(ie!==void 0){var Se=Z2,Ce=u;switch(u){case"keypress":if(Ig(g)===0)break e;case"keydown":case"keyup":Se=wH;break;case"focusin":Ce="focus",Se=nx;break;case"focusout":Ce="blur",Se=nx;break;case"beforeblur":case"afterblur":Se=nx;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=U4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=cH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=AH;break;case s$:case a$:case l$:Se=hH;break;case u$:Se=kH;break;case"scroll":Se=lH;break;case"wheel":Se=MH;break;case"copy":case"cut":case"paste":Se=gH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=j4}var ke=(d&4)!==0,Bt=!ke&&u==="scroll",G=ke?ie!==null?ie+"Capture":null:ie;ke=[];for(var U=J,q;U!==null;){q=U;var pe=q.stateNode;if(q.tag===5&&pe!==null&&(q=pe,G!==null&&(pe=dd(U,G),pe!=null&&ke.push(Od(U,pe,q)))),Bt)break;U=U.return}0<ke.length&&(ie=new Se(ie,Ce,null,g,oe),ue.push({event:ie,listeners:ke}))}}if((d&7)===0){e:{if(ie=u==="mouseover"||u==="pointerover",Se=u==="mouseout"||u==="pointerout",ie&&g!==z2&&(Ce=g.relatedTarget||g.fromElement)&&(ml(Ce)||Ce[rs]))break e;if((Se||ie)&&(ie=oe.window===oe?oe:(ie=oe.ownerDocument)?ie.defaultView||ie.parentWindow:window,Se?(Ce=g.relatedTarget||g.toElement,Se=J,Ce=Ce?ml(Ce):null,Ce!==null&&(Bt=gl(Ce),Ce!==Bt||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(Se=null,Ce=J),Se!==Ce)){if(ke=U4,pe="onMouseLeave",G="onMouseEnter",U="mouse",(u==="pointerout"||u==="pointerover")&&(ke=j4,pe="onPointerLeave",G="onPointerEnter",U="pointer"),Bt=Se==null?ie:ic(Se),q=Ce==null?ie:ic(Ce),ie=new ke(pe,U+"leave",Se,g,oe),ie.target=Bt,ie.relatedTarget=q,pe=null,ml(oe)===J&&(ke=new ke(G,U+"enter",Ce,g,oe),ke.target=q,ke.relatedTarget=Bt,pe=ke),Bt=pe,Se&&Ce)t:{for(ke=Se,G=Ce,U=0,q=ke;q;q=nc(q))U++;for(q=0,pe=G;pe;pe=nc(pe))q++;for(;0<U-q;)ke=nc(ke),U--;for(;0<q-U;)G=nc(G),q--;for(;U--;){if(ke===G||G!==null&&ke===G.alternate)break t;ke=nc(ke),G=nc(G)}ke=null}else ke=null;Se!==null&&g$(ue,ie,Se,ke,!1),Ce!==null&&Bt!==null&&g$(ue,Bt,Ce,ke,!0)}}e:{if(ie=J?ic(J):window,Se=ie.nodeName&&ie.nodeName.toLowerCase(),Se==="select"||Se==="input"&&ie.type==="file")var Ne=LH;else if(V4(ie))if(J4)Ne=UH;else{Ne=zH;var Pe=PH}else(Se=ie.nodeName)&&Se.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(Ne=IH);if(Ne&&(Ne=Ne(u,J))){X4(ue,Ne,g,oe);break e}Pe&&Pe(u,ie,J),u==="focusout"&&(Pe=ie._wrapperState)&&Pe.controlled&&ie.type==="number"&&F2(ie,"number",ie.value)}switch(Pe=J?ic(J):window,u){case"focusin":(V4(Pe)||Pe.contentEditable==="true")&&(ec=Pe,lx=J,$d=null);break;case"focusout":$d=lx=ec=null;break;case"mousedown":ux=!0;break;case"contextmenu":case"mouseup":case"dragend":ux=!1,i$(ue,g,oe);break;case"selectionchange":if(BH)break;case"keydown":case"keyup":i$(ue,g,oe)}var ze;if(ix)e:{switch(u){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else Zu?Y4(u,g)&&(Ue="onCompositionEnd"):u==="keydown"&&g.keyCode===229&&(Ue="onCompositionStart");Ue&&(B4&&g.locale!=="ko"&&(Zu||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&Zu&&(ze=z4()):(Zs=oe,K2="value"in Zs?Zs.value:Zs.textContent,Zu=!0)),Pe=Yg(J,Ue),0<Pe.length&&(Ue=new W4(Ue,u,null,g,oe),ue.push({event:Ue,listeners:Pe}),ze?Ue.data=ze:(ze=q4(g),ze!==null&&(Ue.data=ze)))),(ze=OH?DH(u,g):FH(u,g))&&(J=Yg(J,"onBeforeInput"),0<J.length&&(oe=new W4("onBeforeInput","beforeinput",null,g,oe),ue.push({event:oe,listeners:J}),oe.data=ze))}h$(ue,d)})}function Od(u,d,g){return{instance:u,listener:d,currentTarget:g}}function Yg(u,d){for(var g=d+"Capture",x=[];u!==null;){var w=u,E=w.stateNode;w.tag===5&&E!==null&&(w=E,E=dd(u,g),E!=null&&x.unshift(Od(u,E,w)),E=dd(u,d),E!=null&&x.push(Od(u,E,w))),u=u.return}return x}function nc(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function g$(u,d,g,x,w){for(var E=d._reactName,M=[];g!==null&&g!==x;){var T=g,z=T.alternate,J=T.stateNode;if(z!==null&&z===x)break;T.tag===5&&J!==null&&(T=J,w?(z=dd(g,E),z!=null&&M.unshift(Od(g,z,T))):w||(z=dd(g,E),z!=null&&M.push(Od(g,z,T)))),g=g.return}M.length!==0&&u.push({event:d,listeners:M})}var qH=/\r\n?/g,VH=/\u0000|\uFFFD/g;function m$(u){return(typeof u=="string"?u:""+u).replace(qH,`
`).replace(VH,"")}function qg(u,d,g){if(d=m$(d),m$(u)!==d&&g)throw Error(n(425))}function Vg(){}var gx=null,mx=null;function yx(u,d){return u==="textarea"||u==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var vx=typeof setTimeout=="function"?setTimeout:void 0,XH=typeof clearTimeout=="function"?clearTimeout:void 0,y$=typeof Promise=="function"?Promise:void 0,JH=typeof queueMicrotask=="function"?queueMicrotask:typeof y$<"u"?function(u){return y$.resolve(null).then(u).catch(QH)}:vx;function QH(u){setTimeout(function(){throw u})}function xx(u,d){var g=d,x=0;do{var w=g.nextSibling;if(u.removeChild(g),w&&w.nodeType===8)if(g=w.data,g==="/$"){if(x===0){u.removeChild(w),bd(d);return}x--}else g!=="$"&&g!=="$?"&&g!=="$!"||x++;g=w}while(g);bd(d)}function ta(u){for(;u!=null;u=u.nextSibling){var d=u.nodeType;if(d===1||d===3)break;if(d===8){if(d=u.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return u}function v$(u){u=u.previousSibling;for(var d=0;u;){if(u.nodeType===8){var g=u.data;if(g==="$"||g==="$!"||g==="$?"){if(d===0)return u;d--}else g==="/$"&&d++}u=u.previousSibling}return null}var rc=Math.random().toString(36).slice(2),ho="__reactFiber$"+rc,Dd="__reactProps$"+rc,rs="__reactContainer$"+rc,_x="__reactEvents$"+rc,KH="__reactListeners$"+rc,ZH="__reactHandles$"+rc;function ml(u){var d=u[ho];if(d)return d;for(var g=u.parentNode;g;){if(d=g[rs]||g[ho]){if(g=d.alternate,d.child!==null||g!==null&&g.child!==null)for(u=v$(u);u!==null;){if(g=u[ho])return g;u=v$(u)}return d}u=g,g=u.parentNode}return null}function Fd(u){return u=u[ho]||u[rs],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function ic(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(n(33))}function Xg(u){return u[Dd]||null}var bx=[],oc=-1;function na(u){return{current:u}}function St(u){0>oc||(u.current=bx[oc],bx[oc]=null,oc--)}function _t(u,d){oc++,bx[oc]=u.current,u.current=d}var ra={},Dn=na(ra),gr=na(!1),yl=ra;function sc(u,d){var g=u.type.contextTypes;if(!g)return ra;var x=u.stateNode;if(x&&x.__reactInternalMemoizedUnmaskedChildContext===d)return x.__reactInternalMemoizedMaskedChildContext;var w={},E;for(E in g)w[E]=d[E];return x&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=w),w}function mr(u){return u=u.childContextTypes,u!=null}function Jg(){St(gr),St(Dn)}function x$(u,d,g){if(Dn.current!==ra)throw Error(n(168));_t(Dn,d),_t(gr,g)}function _$(u,d,g){var x=u.stateNode;if(d=d.childContextTypes,typeof x.getChildContext!="function")return g;x=x.getChildContext();for(var w in x)if(!(w in d))throw Error(n(108,et(u)||"Unknown",w));return Q({},g,x)}function Qg(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||ra,yl=Dn.current,_t(Dn,u),_t(gr,gr.current),!0}function b$(u,d,g){var x=u.stateNode;if(!x)throw Error(n(169));g?(u=_$(u,d,yl),x.__reactInternalMemoizedMergedChildContext=u,St(gr),St(Dn),_t(Dn,u)):St(gr),_t(gr,g)}var is=null,Kg=!1,wx=!1;function w$(u){is===null?is=[u]:is.push(u)}function eG(u){Kg=!0,w$(u)}function ia(){if(!wx&&is!==null){wx=!0;var u=0,d=ht;try{var g=is;for(ht=1;u<g.length;u++){var x=g[u];do x=x(!0);while(x!==null)}is=null,Kg=!1}catch(w){throw is!==null&&(is=is.slice(u+1)),E4(H2,ia),w}finally{ht=d,wx=!1}}return null}var ac=[],lc=0,Zg=null,e0=0,ti=[],ni=0,vl=null,os=1,ss="";function xl(u,d){ac[lc++]=e0,ac[lc++]=Zg,Zg=u,e0=d}function S$(u,d,g){ti[ni++]=os,ti[ni++]=ss,ti[ni++]=vl,vl=u;var x=os;u=ss;var w=32-$i(x)-1;x&=~(1<<w),g+=1;var E=32-$i(d)+w;if(30<E){var M=w-w%5;E=(x&(1<<M)-1).toString(32),x>>=M,w-=M,os=1<<32-$i(d)+w|g<<w|x,ss=E+u}else os=1<<E|g<<w|x,ss=u}function Sx(u){u.return!==null&&(xl(u,1),S$(u,1,0))}function Ex(u){for(;u===Zg;)Zg=ac[--lc],ac[lc]=null,e0=ac[--lc],ac[lc]=null;for(;u===vl;)vl=ti[--ni],ti[ni]=null,ss=ti[--ni],ti[ni]=null,os=ti[--ni],ti[ni]=null}var Pr=null,zr=null,Ct=!1,Ni=null;function E$(u,d){var g=si(5,null,null,0);g.elementType="DELETED",g.stateNode=d,g.return=u,d=u.deletions,d===null?(u.deletions=[g],u.flags|=16):d.push(g)}function A$(u,d){switch(u.tag){case 5:var g=u.type;return d=d.nodeType!==1||g.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(u.stateNode=d,Pr=u,zr=ta(d.firstChild),!0):!1;case 6:return d=u.pendingProps===""||d.nodeType!==3?null:d,d!==null?(u.stateNode=d,Pr=u,zr=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(g=vl!==null?{id:os,overflow:ss}:null,u.memoizedState={dehydrated:d,treeContext:g,retryLane:1073741824},g=si(18,null,null,0),g.stateNode=d,g.return=u,u.child=g,Pr=u,zr=null,!0):!1;default:return!1}}function Ax(u){return(u.mode&1)!==0&&(u.flags&128)===0}function Cx(u){if(Ct){var d=zr;if(d){var g=d;if(!A$(u,d)){if(Ax(u))throw Error(n(418));d=ta(g.nextSibling);var x=Pr;d&&A$(u,d)?E$(x,g):(u.flags=u.flags&-4097|2,Ct=!1,Pr=u)}}else{if(Ax(u))throw Error(n(418));u.flags=u.flags&-4097|2,Ct=!1,Pr=u}}}function C$(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Pr=u}function t0(u){if(u!==Pr)return!1;if(!Ct)return C$(u),Ct=!0,!1;var d;if((d=u.tag!==3)&&!(d=u.tag!==5)&&(d=u.type,d=d!=="head"&&d!=="body"&&!yx(u.type,u.memoizedProps)),d&&(d=zr)){if(Ax(u))throw k$(),Error(n(418));for(;d;)E$(u,d),d=ta(d.nextSibling)}if(C$(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));e:{for(u=u.nextSibling,d=0;u;){if(u.nodeType===8){var g=u.data;if(g==="/$"){if(d===0){zr=ta(u.nextSibling);break e}d--}else g!=="$"&&g!=="$!"&&g!=="$?"||d++}u=u.nextSibling}zr=null}}else zr=Pr?ta(u.stateNode.nextSibling):null;return!0}function k$(){for(var u=zr;u;)u=ta(u.nextSibling)}function uc(){zr=Pr=null,Ct=!1}function kx(u){Ni===null?Ni=[u]:Ni.push(u)}var tG=C.ReactCurrentBatchConfig;function Td(u,d,g){if(u=g.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(n(309));var x=g.stateNode}if(!x)throw Error(n(147,u));var w=x,E=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===E?d.ref:(d=function(M){var T=w.refs;M===null?delete T[E]:T[E]=M},d._stringRef=E,d)}if(typeof u!="string")throw Error(n(284));if(!g._owner)throw Error(n(290,u))}return u}function n0(u,d){throw u=Object.prototype.toString.call(d),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function $$(u){var d=u._init;return d(u._payload)}function M$(u){function d(G,U){if(u){var q=G.deletions;q===null?(G.deletions=[U],G.flags|=16):q.push(U)}}function g(G,U){if(!u)return null;for(;U!==null;)d(G,U),U=U.sibling;return null}function x(G,U){for(G=new Map;U!==null;)U.key!==null?G.set(U.key,U):G.set(U.index,U),U=U.sibling;return G}function w(G,U){return G=da(G,U),G.index=0,G.sibling=null,G}function E(G,U,q){return G.index=q,u?(q=G.alternate,q!==null?(q=q.index,q<U?(G.flags|=2,U):q):(G.flags|=2,U)):(G.flags|=1048576,U)}function M(G){return u&&G.alternate===null&&(G.flags|=2),G}function T(G,U,q,pe){return U===null||U.tag!==6?(U=v_(q,G.mode,pe),U.return=G,U):(U=w(U,q),U.return=G,U)}function z(G,U,q,pe){var Ne=q.type;return Ne===$?oe(G,U,q.props.children,pe,q.key):U!==null&&(U.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===W&&$$(Ne)===U.type)?(pe=w(U,q.props),pe.ref=Td(G,U,q),pe.return=G,pe):(pe=C0(q.type,q.key,q.props,null,G.mode,pe),pe.ref=Td(G,U,q),pe.return=G,pe)}function J(G,U,q,pe){return U===null||U.tag!==4||U.stateNode.containerInfo!==q.containerInfo||U.stateNode.implementation!==q.implementation?(U=x_(q,G.mode,pe),U.return=G,U):(U=w(U,q.children||[]),U.return=G,U)}function oe(G,U,q,pe,Ne){return U===null||U.tag!==7?(U=kl(q,G.mode,pe,Ne),U.return=G,U):(U=w(U,q),U.return=G,U)}function ue(G,U,q){if(typeof U=="string"&&U!==""||typeof U=="number")return U=v_(""+U,G.mode,q),U.return=G,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case k:return q=C0(U.type,U.key,U.props,null,G.mode,q),q.ref=Td(G,null,U),q.return=G,q;case N:return U=x_(U,G.mode,q),U.return=G,U;case W:var pe=U._init;return ue(G,pe(U._payload),q)}if(ud(U)||H(U))return U=kl(U,G.mode,q,null),U.return=G,U;n0(G,U)}return null}function ie(G,U,q,pe){var Ne=U!==null?U.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return Ne!==null?null:T(G,U,""+q,pe);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case k:return q.key===Ne?z(G,U,q,pe):null;case N:return q.key===Ne?J(G,U,q,pe):null;case W:return Ne=q._init,ie(G,U,Ne(q._payload),pe)}if(ud(q)||H(q))return Ne!==null?null:oe(G,U,q,pe,null);n0(G,q)}return null}function Se(G,U,q,pe,Ne){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return G=G.get(q)||null,T(U,G,""+pe,Ne);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case k:return G=G.get(pe.key===null?q:pe.key)||null,z(U,G,pe,Ne);case N:return G=G.get(pe.key===null?q:pe.key)||null,J(U,G,pe,Ne);case W:var Pe=pe._init;return Se(G,U,q,Pe(pe._payload),Ne)}if(ud(pe)||H(pe))return G=G.get(q)||null,oe(U,G,pe,Ne,null);n0(U,pe)}return null}function Ce(G,U,q,pe){for(var Ne=null,Pe=null,ze=U,Ue=U=0,cn=null;ze!==null&&Ue<q.length;Ue++){ze.index>Ue?(cn=ze,ze=null):cn=ze.sibling;var it=ie(G,ze,q[Ue],pe);if(it===null){ze===null&&(ze=cn);break}u&&ze&&it.alternate===null&&d(G,ze),U=E(it,U,Ue),Pe===null?Ne=it:Pe.sibling=it,Pe=it,ze=cn}if(Ue===q.length)return g(G,ze),Ct&&xl(G,Ue),Ne;if(ze===null){for(;Ue<q.length;Ue++)ze=ue(G,q[Ue],pe),ze!==null&&(U=E(ze,U,Ue),Pe===null?Ne=ze:Pe.sibling=ze,Pe=ze);return Ct&&xl(G,Ue),Ne}for(ze=x(G,ze);Ue<q.length;Ue++)cn=Se(ze,G,Ue,q[Ue],pe),cn!==null&&(u&&cn.alternate!==null&&ze.delete(cn.key===null?Ue:cn.key),U=E(cn,U,Ue),Pe===null?Ne=cn:Pe.sibling=cn,Pe=cn);return u&&ze.forEach(function(ha){return d(G,ha)}),Ct&&xl(G,Ue),Ne}function ke(G,U,q,pe){var Ne=H(q);if(typeof Ne!="function")throw Error(n(150));if(q=Ne.call(q),q==null)throw Error(n(151));for(var Pe=Ne=null,ze=U,Ue=U=0,cn=null,it=q.next();ze!==null&&!it.done;Ue++,it=q.next()){ze.index>Ue?(cn=ze,ze=null):cn=ze.sibling;var ha=ie(G,ze,it.value,pe);if(ha===null){ze===null&&(ze=cn);break}u&&ze&&ha.alternate===null&&d(G,ze),U=E(ha,U,Ue),Pe===null?Ne=ha:Pe.sibling=ha,Pe=ha,ze=cn}if(it.done)return g(G,ze),Ct&&xl(G,Ue),Ne;if(ze===null){for(;!it.done;Ue++,it=q.next())it=ue(G,it.value,pe),it!==null&&(U=E(it,U,Ue),Pe===null?Ne=it:Pe.sibling=it,Pe=it);return Ct&&xl(G,Ue),Ne}for(ze=x(G,ze);!it.done;Ue++,it=q.next())it=Se(ze,G,Ue,it.value,pe),it!==null&&(u&&it.alternate!==null&&ze.delete(it.key===null?Ue:it.key),U=E(it,U,Ue),Pe===null?Ne=it:Pe.sibling=it,Pe=it);return u&&ze.forEach(function(TG){return d(G,TG)}),Ct&&xl(G,Ue),Ne}function Bt(G,U,q,pe){if(typeof q=="object"&&q!==null&&q.type===$&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case k:e:{for(var Ne=q.key,Pe=U;Pe!==null;){if(Pe.key===Ne){if(Ne=q.type,Ne===$){if(Pe.tag===7){g(G,Pe.sibling),U=w(Pe,q.props.children),U.return=G,G=U;break e}}else if(Pe.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===W&&$$(Ne)===Pe.type){g(G,Pe.sibling),U=w(Pe,q.props),U.ref=Td(G,Pe,q),U.return=G,G=U;break e}g(G,Pe);break}else d(G,Pe);Pe=Pe.sibling}q.type===$?(U=kl(q.props.children,G.mode,pe,q.key),U.return=G,G=U):(pe=C0(q.type,q.key,q.props,null,G.mode,pe),pe.ref=Td(G,U,q),pe.return=G,G=pe)}return M(G);case N:e:{for(Pe=q.key;U!==null;){if(U.key===Pe)if(U.tag===4&&U.stateNode.containerInfo===q.containerInfo&&U.stateNode.implementation===q.implementation){g(G,U.sibling),U=w(U,q.children||[]),U.return=G,G=U;break e}else{g(G,U);break}else d(G,U);U=U.sibling}U=x_(q,G.mode,pe),U.return=G,G=U}return M(G);case W:return Pe=q._init,Bt(G,U,Pe(q._payload),pe)}if(ud(q))return Ce(G,U,q,pe);if(H(q))return ke(G,U,q,pe);n0(G,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,U!==null&&U.tag===6?(g(G,U.sibling),U=w(U,q),U.return=G,G=U):(g(G,U),U=v_(q,G.mode,pe),U.return=G,G=U),M(G)):g(G,U)}return Bt}var cc=M$(!0),N$=M$(!1),r0=na(null),i0=null,fc=null,$x=null;function Mx(){$x=fc=i0=null}function Nx(u){var d=r0.current;St(r0),u._currentValue=d}function Ox(u,d,g){for(;u!==null;){var x=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,x!==null&&(x.childLanes|=d)):x!==null&&(x.childLanes&d)!==d&&(x.childLanes|=d),u===g)break;u=u.return}}function dc(u,d){i0=u,$x=fc=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&d)!==0&&(yr=!0),u.firstContext=null)}function ri(u){var d=u._currentValue;if($x!==u)if(u={context:u,memoizedValue:d,next:null},fc===null){if(i0===null)throw Error(n(308));fc=u,i0.dependencies={lanes:0,firstContext:u}}else fc=fc.next=u;return d}var _l=null;function Dx(u){_l===null?_l=[u]:_l.push(u)}function O$(u,d,g,x){var w=d.interleaved;return w===null?(g.next=g,Dx(d)):(g.next=w.next,w.next=g),d.interleaved=g,as(u,x)}function as(u,d){u.lanes|=d;var g=u.alternate;for(g!==null&&(g.lanes|=d),g=u,u=u.return;u!==null;)u.childLanes|=d,g=u.alternate,g!==null&&(g.childLanes|=d),g=u,u=u.return;return g.tag===3?g.stateNode:null}var oa=!1;function Fx(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function D$(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function ls(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function sa(u,d,g){var x=u.updateQueue;if(x===null)return null;if(x=x.shared,(rt&2)!==0){var w=x.pending;return w===null?d.next=d:(d.next=w.next,w.next=d),x.pending=d,as(u,g)}return w=x.interleaved,w===null?(d.next=d,Dx(x)):(d.next=w.next,w.next=d),x.interleaved=d,as(u,g)}function o0(u,d,g){if(d=d.updateQueue,d!==null&&(d=d.shared,(g&4194240)!==0)){var x=d.lanes;x&=u.pendingLanes,g|=x,d.lanes=g,q2(u,g)}}function F$(u,d){var g=u.updateQueue,x=u.alternate;if(x!==null&&(x=x.updateQueue,g===x)){var w=null,E=null;if(g=g.firstBaseUpdate,g!==null){do{var M={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};E===null?w=E=M:E=E.next=M,g=g.next}while(g!==null);E===null?w=E=d:E=E.next=d}else w=E=d;g={baseState:x.baseState,firstBaseUpdate:w,lastBaseUpdate:E,shared:x.shared,effects:x.effects},u.updateQueue=g;return}u=g.lastBaseUpdate,u===null?g.firstBaseUpdate=d:u.next=d,g.lastBaseUpdate=d}function s0(u,d,g,x){var w=u.updateQueue;oa=!1;var E=w.firstBaseUpdate,M=w.lastBaseUpdate,T=w.shared.pending;if(T!==null){w.shared.pending=null;var z=T,J=z.next;z.next=null,M===null?E=J:M.next=J,M=z;var oe=u.alternate;oe!==null&&(oe=oe.updateQueue,T=oe.lastBaseUpdate,T!==M&&(T===null?oe.firstBaseUpdate=J:T.next=J,oe.lastBaseUpdate=z))}if(E!==null){var ue=w.baseState;M=0,oe=J=z=null,T=E;do{var ie=T.lane,Se=T.eventTime;if((x&ie)===ie){oe!==null&&(oe=oe.next={eventTime:Se,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var Ce=u,ke=T;switch(ie=d,Se=g,ke.tag){case 1:if(Ce=ke.payload,typeof Ce=="function"){ue=Ce.call(Se,ue,ie);break e}ue=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=ke.payload,ie=typeof Ce=="function"?Ce.call(Se,ue,ie):Ce,ie==null)break e;ue=Q({},ue,ie);break e;case 2:oa=!0}}T.callback!==null&&T.lane!==0&&(u.flags|=64,ie=w.effects,ie===null?w.effects=[T]:ie.push(T))}else Se={eventTime:Se,lane:ie,tag:T.tag,payload:T.payload,callback:T.callback,next:null},oe===null?(J=oe=Se,z=ue):oe=oe.next=Se,M|=ie;if(T=T.next,T===null){if(T=w.shared.pending,T===null)break;ie=T,T=ie.next,ie.next=null,w.lastBaseUpdate=ie,w.shared.pending=null}}while(!0);if(oe===null&&(z=ue),w.baseState=z,w.firstBaseUpdate=J,w.lastBaseUpdate=oe,d=w.shared.interleaved,d!==null){w=d;do M|=w.lane,w=w.next;while(w!==d)}else E===null&&(w.shared.lanes=0);Sl|=M,u.lanes=M,u.memoizedState=ue}}function T$(u,d,g){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var x=u[d],w=x.callback;if(w!==null){if(x.callback=null,x=g,typeof w!="function")throw Error(n(191,w));w.call(x)}}}var Rd={},po=na(Rd),Ld=na(Rd),Pd=na(Rd);function bl(u){if(u===Rd)throw Error(n(174));return u}function Tx(u,d){switch(_t(Pd,d),_t(Ld,u),_t(po,Rd),u=d.nodeType,u){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:R2(null,"");break;default:u=u===8?d.parentNode:d,d=u.namespaceURI||null,u=u.tagName,d=R2(d,u)}St(po),_t(po,d)}function hc(){St(po),St(Ld),St(Pd)}function R$(u){bl(Pd.current);var d=bl(po.current),g=R2(d,u.type);d!==g&&(_t(Ld,u),_t(po,g))}function Rx(u){Ld.current===u&&(St(po),St(Ld))}var Nt=na(0);function a0(u){for(var d=u;d!==null;){if(d.tag===13){var g=d.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Lx=[];function Px(){for(var u=0;u<Lx.length;u++)Lx[u]._workInProgressVersionPrimary=null;Lx.length=0}var l0=C.ReactCurrentDispatcher,zx=C.ReactCurrentBatchConfig,wl=0,Ot=null,Kt=null,ln=null,u0=!1,zd=!1,Id=0,nG=0;function Fn(){throw Error(n(321))}function Ix(u,d){if(d===null)return!1;for(var g=0;g<d.length&&g<u.length;g++)if(!Mi(u[g],d[g]))return!1;return!0}function Ux(u,d,g,x,w,E){if(wl=E,Ot=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,l0.current=u===null||u.memoizedState===null?sG:aG,u=g(x,w),zd){E=0;do{if(zd=!1,Id=0,25<=E)throw Error(n(301));E+=1,ln=Kt=null,d.updateQueue=null,l0.current=lG,u=g(x,w)}while(zd)}if(l0.current=d0,d=Kt!==null&&Kt.next!==null,wl=0,ln=Kt=Ot=null,u0=!1,d)throw Error(n(300));return u}function Wx(){var u=Id!==0;return Id=0,u}function go(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?Ot.memoizedState=ln=u:ln=ln.next=u,ln}function ii(){if(Kt===null){var u=Ot.alternate;u=u!==null?u.memoizedState:null}else u=Kt.next;var d=ln===null?Ot.memoizedState:ln.next;if(d!==null)ln=d,Kt=u;else{if(u===null)throw Error(n(310));Kt=u,u={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},ln===null?Ot.memoizedState=ln=u:ln=ln.next=u}return ln}function Ud(u,d){return typeof d=="function"?d(u):d}function jx(u){var d=ii(),g=d.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=u;var x=Kt,w=x.baseQueue,E=g.pending;if(E!==null){if(w!==null){var M=w.next;w.next=E.next,E.next=M}x.baseQueue=w=E,g.pending=null}if(w!==null){E=w.next,x=x.baseState;var T=M=null,z=null,J=E;do{var oe=J.lane;if((wl&oe)===oe)z!==null&&(z=z.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),x=J.hasEagerState?J.eagerState:u(x,J.action);else{var ue={lane:oe,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};z===null?(T=z=ue,M=x):z=z.next=ue,Ot.lanes|=oe,Sl|=oe}J=J.next}while(J!==null&&J!==E);z===null?M=x:z.next=T,Mi(x,d.memoizedState)||(yr=!0),d.memoizedState=x,d.baseState=M,d.baseQueue=z,g.lastRenderedState=x}if(u=g.interleaved,u!==null){w=u;do E=w.lane,Ot.lanes|=E,Sl|=E,w=w.next;while(w!==u)}else w===null&&(g.lanes=0);return[d.memoizedState,g.dispatch]}function Bx(u){var d=ii(),g=d.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=u;var x=g.dispatch,w=g.pending,E=d.memoizedState;if(w!==null){g.pending=null;var M=w=w.next;do E=u(E,M.action),M=M.next;while(M!==w);Mi(E,d.memoizedState)||(yr=!0),d.memoizedState=E,d.baseQueue===null&&(d.baseState=E),g.lastRenderedState=E}return[E,x]}function L$(){}function P$(u,d){var g=Ot,x=ii(),w=d(),E=!Mi(x.memoizedState,w);if(E&&(x.memoizedState=w,yr=!0),x=x.queue,Hx(U$.bind(null,g,x,u),[u]),x.getSnapshot!==d||E||ln!==null&&ln.memoizedState.tag&1){if(g.flags|=2048,Wd(9,I$.bind(null,g,x,w,d),void 0,null),un===null)throw Error(n(349));(wl&30)!==0||z$(g,d,w)}return w}function z$(u,d,g){u.flags|=16384,u={getSnapshot:d,value:g},d=Ot.updateQueue,d===null?(d={lastEffect:null,stores:null},Ot.updateQueue=d,d.stores=[u]):(g=d.stores,g===null?d.stores=[u]:g.push(u))}function I$(u,d,g,x){d.value=g,d.getSnapshot=x,W$(d)&&j$(u)}function U$(u,d,g){return g(function(){W$(d)&&j$(u)})}function W$(u){var d=u.getSnapshot;u=u.value;try{var g=d();return!Mi(u,g)}catch{return!0}}function j$(u){var d=as(u,1);d!==null&&Ti(d,u,1,-1)}function B$(u){var d=go();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ud,lastRenderedState:u},d.queue=u,u=u.dispatch=oG.bind(null,Ot,u),[d.memoizedState,u]}function Wd(u,d,g,x){return u={tag:u,create:d,destroy:g,deps:x,next:null},d=Ot.updateQueue,d===null?(d={lastEffect:null,stores:null},Ot.updateQueue=d,d.lastEffect=u.next=u):(g=d.lastEffect,g===null?d.lastEffect=u.next=u:(x=g.next,g.next=u,u.next=x,d.lastEffect=u)),u}function H$(){return ii().memoizedState}function c0(u,d,g,x){var w=go();Ot.flags|=u,w.memoizedState=Wd(1|d,g,void 0,x===void 0?null:x)}function f0(u,d,g,x){var w=ii();x=x===void 0?null:x;var E=void 0;if(Kt!==null){var M=Kt.memoizedState;if(E=M.destroy,x!==null&&Ix(x,M.deps)){w.memoizedState=Wd(d,g,E,x);return}}Ot.flags|=u,w.memoizedState=Wd(1|d,g,E,x)}function G$(u,d){return c0(8390656,8,u,d)}function Hx(u,d){return f0(2048,8,u,d)}function Y$(u,d){return f0(4,2,u,d)}function q$(u,d){return f0(4,4,u,d)}function V$(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function X$(u,d,g){return g=g!=null?g.concat([u]):null,f0(4,4,V$.bind(null,d,u),g)}function Gx(){}function J$(u,d){var g=ii();d=d===void 0?null:d;var x=g.memoizedState;return x!==null&&d!==null&&Ix(d,x[1])?x[0]:(g.memoizedState=[u,d],u)}function Q$(u,d){var g=ii();d=d===void 0?null:d;var x=g.memoizedState;return x!==null&&d!==null&&Ix(d,x[1])?x[0]:(u=u(),g.memoizedState=[u,d],u)}function K$(u,d,g){return(wl&21)===0?(u.baseState&&(u.baseState=!1,yr=!0),u.memoizedState=g):(Mi(g,d)||(g=$4(),Ot.lanes|=g,Sl|=g,u.baseState=!0),d)}function rG(u,d){var g=ht;ht=g!==0&&4>g?g:4,u(!0);var x=zx.transition;zx.transition={};try{u(!1),d()}finally{ht=g,zx.transition=x}}function Z$(){return ii().memoizedState}function iG(u,d,g){var x=ca(u);if(g={lane:x,action:g,hasEagerState:!1,eagerState:null,next:null},eM(u))tM(d,g);else if(g=O$(u,d,g,x),g!==null){var w=Qn();Ti(g,u,x,w),nM(g,d,x)}}function oG(u,d,g){var x=ca(u),w={lane:x,action:g,hasEagerState:!1,eagerState:null,next:null};if(eM(u))tM(d,w);else{var E=u.alternate;if(u.lanes===0&&(E===null||E.lanes===0)&&(E=d.lastRenderedReducer,E!==null))try{var M=d.lastRenderedState,T=E(M,g);if(w.hasEagerState=!0,w.eagerState=T,Mi(T,M)){var z=d.interleaved;z===null?(w.next=w,Dx(d)):(w.next=z.next,z.next=w),d.interleaved=w;return}}catch{}finally{}g=O$(u,d,w,x),g!==null&&(w=Qn(),Ti(g,u,x,w),nM(g,d,x))}}function eM(u){var d=u.alternate;return u===Ot||d!==null&&d===Ot}function tM(u,d){zd=u0=!0;var g=u.pending;g===null?d.next=d:(d.next=g.next,g.next=d),u.pending=d}function nM(u,d,g){if((g&4194240)!==0){var x=d.lanes;x&=u.pendingLanes,g|=x,d.lanes=g,q2(u,g)}}var d0={readContext:ri,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useInsertionEffect:Fn,useLayoutEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useMutableSource:Fn,useSyncExternalStore:Fn,useId:Fn,unstable_isNewReconciler:!1},sG={readContext:ri,useCallback:function(u,d){return go().memoizedState=[u,d===void 0?null:d],u},useContext:ri,useEffect:G$,useImperativeHandle:function(u,d,g){return g=g!=null?g.concat([u]):null,c0(4194308,4,V$.bind(null,d,u),g)},useLayoutEffect:function(u,d){return c0(4194308,4,u,d)},useInsertionEffect:function(u,d){return c0(4,2,u,d)},useMemo:function(u,d){var g=go();return d=d===void 0?null:d,u=u(),g.memoizedState=[u,d],u},useReducer:function(u,d,g){var x=go();return d=g!==void 0?g(d):d,x.memoizedState=x.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},x.queue=u,u=u.dispatch=iG.bind(null,Ot,u),[x.memoizedState,u]},useRef:function(u){var d=go();return u={current:u},d.memoizedState=u},useState:B$,useDebugValue:Gx,useDeferredValue:function(u){return go().memoizedState=u},useTransition:function(){var u=B$(!1),d=u[0];return u=rG.bind(null,u[1]),go().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,g){var x=Ot,w=go();if(Ct){if(g===void 0)throw Error(n(407));g=g()}else{if(g=d(),un===null)throw Error(n(349));(wl&30)!==0||z$(x,d,g)}w.memoizedState=g;var E={value:g,getSnapshot:d};return w.queue=E,G$(U$.bind(null,x,E,u),[u]),x.flags|=2048,Wd(9,I$.bind(null,x,E,g,d),void 0,null),g},useId:function(){var u=go(),d=un.identifierPrefix;if(Ct){var g=ss,x=os;g=(x&~(1<<32-$i(x)-1)).toString(32)+g,d=":"+d+"R"+g,g=Id++,0<g&&(d+="H"+g.toString(32)),d+=":"}else g=nG++,d=":"+d+"r"+g.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},aG={readContext:ri,useCallback:J$,useContext:ri,useEffect:Hx,useImperativeHandle:X$,useInsertionEffect:Y$,useLayoutEffect:q$,useMemo:Q$,useReducer:jx,useRef:H$,useState:function(){return jx(Ud)},useDebugValue:Gx,useDeferredValue:function(u){var d=ii();return K$(d,Kt.memoizedState,u)},useTransition:function(){var u=jx(Ud)[0],d=ii().memoizedState;return[u,d]},useMutableSource:L$,useSyncExternalStore:P$,useId:Z$,unstable_isNewReconciler:!1},lG={readContext:ri,useCallback:J$,useContext:ri,useEffect:Hx,useImperativeHandle:X$,useInsertionEffect:Y$,useLayoutEffect:q$,useMemo:Q$,useReducer:Bx,useRef:H$,useState:function(){return Bx(Ud)},useDebugValue:Gx,useDeferredValue:function(u){var d=ii();return Kt===null?d.memoizedState=u:K$(d,Kt.memoizedState,u)},useTransition:function(){var u=Bx(Ud)[0],d=ii().memoizedState;return[u,d]},useMutableSource:L$,useSyncExternalStore:P$,useId:Z$,unstable_isNewReconciler:!1};function Oi(u,d){if(u&&u.defaultProps){d=Q({},d),u=u.defaultProps;for(var g in u)d[g]===void 0&&(d[g]=u[g]);return d}return d}function Yx(u,d,g,x){d=u.memoizedState,g=g(x,d),g=g==null?d:Q({},d,g),u.memoizedState=g,u.lanes===0&&(u.updateQueue.baseState=g)}var h0={isMounted:function(u){return(u=u._reactInternals)?gl(u)===u:!1},enqueueSetState:function(u,d,g){u=u._reactInternals;var x=Qn(),w=ca(u),E=ls(x,w);E.payload=d,g!=null&&(E.callback=g),d=sa(u,E,w),d!==null&&(Ti(d,u,w,x),o0(d,u,w))},enqueueReplaceState:function(u,d,g){u=u._reactInternals;var x=Qn(),w=ca(u),E=ls(x,w);E.tag=1,E.payload=d,g!=null&&(E.callback=g),d=sa(u,E,w),d!==null&&(Ti(d,u,w,x),o0(d,u,w))},enqueueForceUpdate:function(u,d){u=u._reactInternals;var g=Qn(),x=ca(u),w=ls(g,x);w.tag=2,d!=null&&(w.callback=d),d=sa(u,w,x),d!==null&&(Ti(d,u,x,g),o0(d,u,x))}};function rM(u,d,g,x,w,E,M){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(x,E,M):d.prototype&&d.prototype.isPureReactComponent?!kd(g,x)||!kd(w,E):!0}function iM(u,d,g){var x=!1,w=ra,E=d.contextType;return typeof E=="object"&&E!==null?E=ri(E):(w=mr(d)?yl:Dn.current,x=d.contextTypes,E=(x=x!=null)?sc(u,w):ra),d=new d(g,E),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=h0,u.stateNode=d,d._reactInternals=u,x&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=w,u.__reactInternalMemoizedMaskedChildContext=E),d}function oM(u,d,g,x){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(g,x),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(g,x),d.state!==u&&h0.enqueueReplaceState(d,d.state,null)}function qx(u,d,g,x){var w=u.stateNode;w.props=g,w.state=u.memoizedState,w.refs={},Fx(u);var E=d.contextType;typeof E=="object"&&E!==null?w.context=ri(E):(E=mr(d)?yl:Dn.current,w.context=sc(u,E)),w.state=u.memoizedState,E=d.getDerivedStateFromProps,typeof E=="function"&&(Yx(u,d,E,g),w.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(d=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),d!==w.state&&h0.enqueueReplaceState(w,w.state,null),s0(u,g,w,x),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308)}function pc(u,d){try{var g="",x=d;do g+=be(x),x=x.return;while(x);var w=g}catch(E){w=`
Error generating stack: `+E.message+`
`+E.stack}return{value:u,source:d,stack:w,digest:null}}function Vx(u,d,g){return{value:u,source:null,stack:g??null,digest:d??null}}function Xx(u,d){try{console.error(d.value)}catch(g){setTimeout(function(){throw g})}}var uG=typeof WeakMap=="function"?WeakMap:Map;function sM(u,d,g){g=ls(-1,g),g.tag=3,g.payload={element:null};var x=d.value;return g.callback=function(){_0||(_0=!0,c_=x),Xx(u,d)},g}function aM(u,d,g){g=ls(-1,g),g.tag=3;var x=u.type.getDerivedStateFromError;if(typeof x=="function"){var w=d.value;g.payload=function(){return x(w)},g.callback=function(){Xx(u,d)}}var E=u.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(g.callback=function(){Xx(u,d),typeof x!="function"&&(la===null?la=new Set([this]):la.add(this));var M=d.stack;this.componentDidCatch(d.value,{componentStack:M!==null?M:""})}),g}function lM(u,d,g){var x=u.pingCache;if(x===null){x=u.pingCache=new uG;var w=new Set;x.set(d,w)}else w=x.get(d),w===void 0&&(w=new Set,x.set(d,w));w.has(g)||(w.add(g),u=SG.bind(null,u,d,g),d.then(u,u))}function uM(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function cM(u,d,g,x,w){return(u.mode&1)===0?(u===d?u.flags|=65536:(u.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(d=ls(-1,1),d.tag=2,sa(g,d,1))),g.lanes|=1),u):(u.flags|=65536,u.lanes=w,u)}var cG=C.ReactCurrentOwner,yr=!1;function Jn(u,d,g,x){d.child=u===null?N$(d,null,g,x):cc(d,u.child,g,x)}function fM(u,d,g,x,w){g=g.render;var E=d.ref;return dc(d,w),x=Ux(u,d,g,x,E,w),g=Wx(),u!==null&&!yr?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~w,us(u,d,w)):(Ct&&g&&Sx(d),d.flags|=1,Jn(u,d,x,w),d.child)}function dM(u,d,g,x,w){if(u===null){var E=g.type;return typeof E=="function"&&!y_(E)&&E.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(d.tag=15,d.type=E,hM(u,d,E,x,w)):(u=C0(g.type,null,x,d,d.mode,w),u.ref=d.ref,u.return=d,d.child=u)}if(E=u.child,(u.lanes&w)===0){var M=E.memoizedProps;if(g=g.compare,g=g!==null?g:kd,g(M,x)&&u.ref===d.ref)return us(u,d,w)}return d.flags|=1,u=da(E,x),u.ref=d.ref,u.return=d,d.child=u}function hM(u,d,g,x,w){if(u!==null){var E=u.memoizedProps;if(kd(E,x)&&u.ref===d.ref)if(yr=!1,d.pendingProps=x=E,(u.lanes&w)!==0)(u.flags&131072)!==0&&(yr=!0);else return d.lanes=u.lanes,us(u,d,w)}return Jx(u,d,g,x,w)}function pM(u,d,g){var x=d.pendingProps,w=x.children,E=u!==null?u.memoizedState:null;if(x.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(mc,Ir),Ir|=g;else{if((g&1073741824)===0)return u=E!==null?E.baseLanes|g:g,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null,transitions:null},d.updateQueue=null,_t(mc,Ir),Ir|=u,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},x=E!==null?E.baseLanes:g,_t(mc,Ir),Ir|=x}else E!==null?(x=E.baseLanes|g,d.memoizedState=null):x=g,_t(mc,Ir),Ir|=x;return Jn(u,d,w,g),d.child}function gM(u,d){var g=d.ref;(u===null&&g!==null||u!==null&&u.ref!==g)&&(d.flags|=512,d.flags|=2097152)}function Jx(u,d,g,x,w){var E=mr(g)?yl:Dn.current;return E=sc(d,E),dc(d,w),g=Ux(u,d,g,x,E,w),x=Wx(),u!==null&&!yr?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~w,us(u,d,w)):(Ct&&x&&Sx(d),d.flags|=1,Jn(u,d,g,w),d.child)}function mM(u,d,g,x,w){if(mr(g)){var E=!0;Qg(d)}else E=!1;if(dc(d,w),d.stateNode===null)g0(u,d),iM(d,g,x),qx(d,g,x,w),x=!0;else if(u===null){var M=d.stateNode,T=d.memoizedProps;M.props=T;var z=M.context,J=g.contextType;typeof J=="object"&&J!==null?J=ri(J):(J=mr(g)?yl:Dn.current,J=sc(d,J));var oe=g.getDerivedStateFromProps,ue=typeof oe=="function"||typeof M.getSnapshotBeforeUpdate=="function";ue||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(T!==x||z!==J)&&oM(d,M,x,J),oa=!1;var ie=d.memoizedState;M.state=ie,s0(d,x,M,w),z=d.memoizedState,T!==x||ie!==z||gr.current||oa?(typeof oe=="function"&&(Yx(d,g,oe,x),z=d.memoizedState),(T=oa||rM(d,g,T,x,ie,z,J))?(ue||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(d.flags|=4194308)):(typeof M.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=x,d.memoizedState=z),M.props=x,M.state=z,M.context=J,x=T):(typeof M.componentDidMount=="function"&&(d.flags|=4194308),x=!1)}else{M=d.stateNode,D$(u,d),T=d.memoizedProps,J=d.type===d.elementType?T:Oi(d.type,T),M.props=J,ue=d.pendingProps,ie=M.context,z=g.contextType,typeof z=="object"&&z!==null?z=ri(z):(z=mr(g)?yl:Dn.current,z=sc(d,z));var Se=g.getDerivedStateFromProps;(oe=typeof Se=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(T!==ue||ie!==z)&&oM(d,M,x,z),oa=!1,ie=d.memoizedState,M.state=ie,s0(d,x,M,w);var Ce=d.memoizedState;T!==ue||ie!==Ce||gr.current||oa?(typeof Se=="function"&&(Yx(d,g,Se,x),Ce=d.memoizedState),(J=oa||rM(d,g,J,x,ie,Ce,z)||!1)?(oe||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(x,Ce,z),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(x,Ce,z)),typeof M.componentDidUpdate=="function"&&(d.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof M.componentDidUpdate!="function"||T===u.memoizedProps&&ie===u.memoizedState||(d.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||T===u.memoizedProps&&ie===u.memoizedState||(d.flags|=1024),d.memoizedProps=x,d.memoizedState=Ce),M.props=x,M.state=Ce,M.context=z,x=J):(typeof M.componentDidUpdate!="function"||T===u.memoizedProps&&ie===u.memoizedState||(d.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||T===u.memoizedProps&&ie===u.memoizedState||(d.flags|=1024),x=!1)}return Qx(u,d,g,x,E,w)}function Qx(u,d,g,x,w,E){gM(u,d);var M=(d.flags&128)!==0;if(!x&&!M)return w&&b$(d,g,!1),us(u,d,E);x=d.stateNode,cG.current=d;var T=M&&typeof g.getDerivedStateFromError!="function"?null:x.render();return d.flags|=1,u!==null&&M?(d.child=cc(d,u.child,null,E),d.child=cc(d,null,T,E)):Jn(u,d,T,E),d.memoizedState=x.state,w&&b$(d,g,!0),d.child}function yM(u){var d=u.stateNode;d.pendingContext?x$(u,d.pendingContext,d.pendingContext!==d.context):d.context&&x$(u,d.context,!1),Tx(u,d.containerInfo)}function vM(u,d,g,x,w){return uc(),kx(w),d.flags|=256,Jn(u,d,g,x),d.child}var Kx={dehydrated:null,treeContext:null,retryLane:0};function Zx(u){return{baseLanes:u,cachePool:null,transitions:null}}function xM(u,d,g){var x=d.pendingProps,w=Nt.current,E=!1,M=(d.flags&128)!==0,T;if((T=M)||(T=u!==null&&u.memoizedState===null?!1:(w&2)!==0),T?(E=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(w|=1),_t(Nt,w&1),u===null)return Cx(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((d.mode&1)===0?d.lanes=1:u.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(M=x.children,u=x.fallback,E?(x=d.mode,E=d.child,M={mode:"hidden",children:M},(x&1)===0&&E!==null?(E.childLanes=0,E.pendingProps=M):E=k0(M,x,0,null),u=kl(u,x,g,null),E.return=d,u.return=d,E.sibling=u,d.child=E,d.child.memoizedState=Zx(g),d.memoizedState=Kx,u):e_(d,M));if(w=u.memoizedState,w!==null&&(T=w.dehydrated,T!==null))return fG(u,d,M,x,T,w,g);if(E){E=x.fallback,M=d.mode,w=u.child,T=w.sibling;var z={mode:"hidden",children:x.children};return(M&1)===0&&d.child!==w?(x=d.child,x.childLanes=0,x.pendingProps=z,d.deletions=null):(x=da(w,z),x.subtreeFlags=w.subtreeFlags&14680064),T!==null?E=da(T,E):(E=kl(E,M,g,null),E.flags|=2),E.return=d,x.return=d,x.sibling=E,d.child=x,x=E,E=d.child,M=u.child.memoizedState,M=M===null?Zx(g):{baseLanes:M.baseLanes|g,cachePool:null,transitions:M.transitions},E.memoizedState=M,E.childLanes=u.childLanes&~g,d.memoizedState=Kx,x}return E=u.child,u=E.sibling,x=da(E,{mode:"visible",children:x.children}),(d.mode&1)===0&&(x.lanes=g),x.return=d,x.sibling=null,u!==null&&(g=d.deletions,g===null?(d.deletions=[u],d.flags|=16):g.push(u)),d.child=x,d.memoizedState=null,x}function e_(u,d){return d=k0({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function p0(u,d,g,x){return x!==null&&kx(x),cc(d,u.child,null,g),u=e_(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function fG(u,d,g,x,w,E,M){if(g)return d.flags&256?(d.flags&=-257,x=Vx(Error(n(422))),p0(u,d,M,x)):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):(E=x.fallback,w=d.mode,x=k0({mode:"visible",children:x.children},w,0,null),E=kl(E,w,M,null),E.flags|=2,x.return=d,E.return=d,x.sibling=E,d.child=x,(d.mode&1)!==0&&cc(d,u.child,null,M),d.child.memoizedState=Zx(M),d.memoizedState=Kx,E);if((d.mode&1)===0)return p0(u,d,M,null);if(w.data==="$!"){if(x=w.nextSibling&&w.nextSibling.dataset,x)var T=x.dgst;return x=T,E=Error(n(419)),x=Vx(E,x,void 0),p0(u,d,M,x)}if(T=(M&u.childLanes)!==0,yr||T){if(x=un,x!==null){switch(M&-M){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(x.suspendedLanes|M))!==0?0:w,w!==0&&w!==E.retryLane&&(E.retryLane=w,as(u,w),Ti(x,u,w,-1))}return m_(),x=Vx(Error(n(421))),p0(u,d,M,x)}return w.data==="$?"?(d.flags|=128,d.child=u.child,d=EG.bind(null,u),w._reactRetry=d,null):(u=E.treeContext,zr=ta(w.nextSibling),Pr=d,Ct=!0,Ni=null,u!==null&&(ti[ni++]=os,ti[ni++]=ss,ti[ni++]=vl,os=u.id,ss=u.overflow,vl=d),d=e_(d,x.children),d.flags|=4096,d)}function _M(u,d,g){u.lanes|=d;var x=u.alternate;x!==null&&(x.lanes|=d),Ox(u.return,d,g)}function t_(u,d,g,x,w){var E=u.memoizedState;E===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:x,tail:g,tailMode:w}:(E.isBackwards=d,E.rendering=null,E.renderingStartTime=0,E.last=x,E.tail=g,E.tailMode=w)}function bM(u,d,g){var x=d.pendingProps,w=x.revealOrder,E=x.tail;if(Jn(u,d,x.children,g),x=Nt.current,(x&2)!==0)x=x&1|2,d.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&_M(u,g,d);else if(u.tag===19)_M(u,g,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}x&=1}if(_t(Nt,x),(d.mode&1)===0)d.memoizedState=null;else switch(w){case"forwards":for(g=d.child,w=null;g!==null;)u=g.alternate,u!==null&&a0(u)===null&&(w=g),g=g.sibling;g=w,g===null?(w=d.child,d.child=null):(w=g.sibling,g.sibling=null),t_(d,!1,w,g,E);break;case"backwards":for(g=null,w=d.child,d.child=null;w!==null;){if(u=w.alternate,u!==null&&a0(u)===null){d.child=w;break}u=w.sibling,w.sibling=g,g=w,w=u}t_(d,!0,g,null,E);break;case"together":t_(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function g0(u,d){(d.mode&1)===0&&u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2)}function us(u,d,g){if(u!==null&&(d.dependencies=u.dependencies),Sl|=d.lanes,(g&d.childLanes)===0)return null;if(u!==null&&d.child!==u.child)throw Error(n(153));if(d.child!==null){for(u=d.child,g=da(u,u.pendingProps),d.child=g,g.return=d;u.sibling!==null;)u=u.sibling,g=g.sibling=da(u,u.pendingProps),g.return=d;g.sibling=null}return d.child}function dG(u,d,g){switch(d.tag){case 3:yM(d),uc();break;case 5:R$(d);break;case 1:mr(d.type)&&Qg(d);break;case 4:Tx(d,d.stateNode.containerInfo);break;case 10:var x=d.type._context,w=d.memoizedProps.value;_t(r0,x._currentValue),x._currentValue=w;break;case 13:if(x=d.memoizedState,x!==null)return x.dehydrated!==null?(_t(Nt,Nt.current&1),d.flags|=128,null):(g&d.child.childLanes)!==0?xM(u,d,g):(_t(Nt,Nt.current&1),u=us(u,d,g),u!==null?u.sibling:null);_t(Nt,Nt.current&1);break;case 19:if(x=(g&d.childLanes)!==0,(u.flags&128)!==0){if(x)return bM(u,d,g);d.flags|=128}if(w=d.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),_t(Nt,Nt.current),x)break;return null;case 22:case 23:return d.lanes=0,pM(u,d,g)}return us(u,d,g)}var wM,n_,SM,EM;wM=function(u,d){for(var g=d.child;g!==null;){if(g.tag===5||g.tag===6)u.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===d)break;for(;g.sibling===null;){if(g.return===null||g.return===d)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},n_=function(){},SM=function(u,d,g,x){var w=u.memoizedProps;if(w!==x){u=d.stateNode,bl(po.current);var E=null;switch(g){case"input":w=nt(u,w),x=nt(u,x),E=[];break;case"select":w=Q({},w,{value:void 0}),x=Q({},x,{value:void 0}),E=[];break;case"textarea":w=T2(u,w),x=T2(u,x),E=[];break;default:typeof w.onClick!="function"&&typeof x.onClick=="function"&&(u.onclick=Vg)}L2(g,x);var M;g=null;for(J in w)if(!x.hasOwnProperty(J)&&w.hasOwnProperty(J)&&w[J]!=null)if(J==="style"){var T=w[J];for(M in T)T.hasOwnProperty(M)&&(g||(g={}),g[M]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(i.hasOwnProperty(J)?E||(E=[]):(E=E||[]).push(J,null));for(J in x){var z=x[J];if(T=w!=null?w[J]:void 0,x.hasOwnProperty(J)&&z!==T&&(z!=null||T!=null))if(J==="style")if(T){for(M in T)!T.hasOwnProperty(M)||z&&z.hasOwnProperty(M)||(g||(g={}),g[M]="");for(M in z)z.hasOwnProperty(M)&&T[M]!==z[M]&&(g||(g={}),g[M]=z[M])}else g||(E||(E=[]),E.push(J,g)),g=z;else J==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,T=T?T.__html:void 0,z!=null&&T!==z&&(E=E||[]).push(J,z)):J==="children"?typeof z!="string"&&typeof z!="number"||(E=E||[]).push(J,""+z):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(i.hasOwnProperty(J)?(z!=null&&J==="onScroll"&&wt("scroll",u),E||T===z||(E=[])):(E=E||[]).push(J,z))}g&&(E=E||[]).push("style",g);var J=E;(d.updateQueue=J)&&(d.flags|=4)}},EM=function(u,d,g,x){g!==x&&(d.flags|=4)};function jd(u,d){if(!Ct)switch(u.tailMode){case"hidden":d=u.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?u.tail=null:g.sibling=null;break;case"collapsed":g=u.tail;for(var x=null;g!==null;)g.alternate!==null&&(x=g),g=g.sibling;x===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:x.sibling=null}}function Tn(u){var d=u.alternate!==null&&u.alternate.child===u.child,g=0,x=0;if(d)for(var w=u.child;w!==null;)g|=w.lanes|w.childLanes,x|=w.subtreeFlags&14680064,x|=w.flags&14680064,w.return=u,w=w.sibling;else for(w=u.child;w!==null;)g|=w.lanes|w.childLanes,x|=w.subtreeFlags,x|=w.flags,w.return=u,w=w.sibling;return u.subtreeFlags|=x,u.childLanes=g,d}function hG(u,d,g){var x=d.pendingProps;switch(Ex(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(d),null;case 1:return mr(d.type)&&Jg(),Tn(d),null;case 3:return x=d.stateNode,hc(),St(gr),St(Dn),Px(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(u===null||u.child===null)&&(t0(d)?d.flags|=4:u===null||u.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Ni!==null&&(h_(Ni),Ni=null))),n_(u,d),Tn(d),null;case 5:Rx(d);var w=bl(Pd.current);if(g=d.type,u!==null&&d.stateNode!=null)SM(u,d,g,x,w),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!x){if(d.stateNode===null)throw Error(n(166));return Tn(d),null}if(u=bl(po.current),t0(d)){x=d.stateNode,g=d.type;var E=d.memoizedProps;switch(x[ho]=d,x[Dd]=E,u=(d.mode&1)!==0,g){case"dialog":wt("cancel",x),wt("close",x);break;case"iframe":case"object":case"embed":wt("load",x);break;case"video":case"audio":for(w=0;w<Md.length;w++)wt(Md[w],x);break;case"source":wt("error",x);break;case"img":case"image":case"link":wt("error",x),wt("load",x);break;case"details":wt("toggle",x);break;case"input":Wt(x,E),wt("invalid",x);break;case"select":x._wrapperState={wasMultiple:!!E.multiple},wt("invalid",x);break;case"textarea":a4(x,E),wt("invalid",x)}L2(g,E),w=null;for(var M in E)if(E.hasOwnProperty(M)){var T=E[M];M==="children"?typeof T=="string"?x.textContent!==T&&(E.suppressHydrationWarning!==!0&&qg(x.textContent,T,u),w=["children",T]):typeof T=="number"&&x.textContent!==""+T&&(E.suppressHydrationWarning!==!0&&qg(x.textContent,T,u),w=["children",""+T]):i.hasOwnProperty(M)&&T!=null&&M==="onScroll"&&wt("scroll",x)}switch(g){case"input":Be(x),ld(x,E,!0);break;case"textarea":Be(x),u4(x);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(x.onclick=Vg)}x=w,d.updateQueue=x,x!==null&&(d.flags|=4)}else{M=w.nodeType===9?w:w.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=c4(g)),u==="http://www.w3.org/1999/xhtml"?g==="script"?(u=M.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof x.is=="string"?u=M.createElement(g,{is:x.is}):(u=M.createElement(g),g==="select"&&(M=u,x.multiple?M.multiple=!0:x.size&&(M.size=x.size))):u=M.createElementNS(u,g),u[ho]=d,u[Dd]=x,wM(u,d,!1,!1),d.stateNode=u;e:{switch(M=P2(g,x),g){case"dialog":wt("cancel",u),wt("close",u),w=x;break;case"iframe":case"object":case"embed":wt("load",u),w=x;break;case"video":case"audio":for(w=0;w<Md.length;w++)wt(Md[w],u);w=x;break;case"source":wt("error",u),w=x;break;case"img":case"image":case"link":wt("error",u),wt("load",u),w=x;break;case"details":wt("toggle",u),w=x;break;case"input":Wt(u,x),w=nt(u,x),wt("invalid",u);break;case"option":w=x;break;case"select":u._wrapperState={wasMultiple:!!x.multiple},w=Q({},x,{value:void 0}),wt("invalid",u);break;case"textarea":a4(u,x),w=T2(u,x),wt("invalid",u);break;default:w=x}L2(g,w),T=w;for(E in T)if(T.hasOwnProperty(E)){var z=T[E];E==="style"?h4(u,z):E==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&f4(u,z)):E==="children"?typeof z=="string"?(g!=="textarea"||z!=="")&&cd(u,z):typeof z=="number"&&cd(u,""+z):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(i.hasOwnProperty(E)?z!=null&&E==="onScroll"&&wt("scroll",u):z!=null&&A(u,E,z,M))}switch(g){case"input":Be(u),ld(u,x,!1);break;case"textarea":Be(u),u4(u);break;case"option":x.value!=null&&u.setAttribute("value",""+qe(x.value));break;case"select":u.multiple=!!x.multiple,E=x.value,E!=null?Vu(u,!!x.multiple,E,!1):x.defaultValue!=null&&Vu(u,!!x.multiple,x.defaultValue,!0);break;default:typeof w.onClick=="function"&&(u.onclick=Vg)}switch(g){case"button":case"input":case"select":case"textarea":x=!!x.autoFocus;break e;case"img":x=!0;break e;default:x=!1}}x&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Tn(d),null;case 6:if(u&&d.stateNode!=null)EM(u,d,u.memoizedProps,x);else{if(typeof x!="string"&&d.stateNode===null)throw Error(n(166));if(g=bl(Pd.current),bl(po.current),t0(d)){if(x=d.stateNode,g=d.memoizedProps,x[ho]=d,(E=x.nodeValue!==g)&&(u=Pr,u!==null))switch(u.tag){case 3:qg(x.nodeValue,g,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&qg(x.nodeValue,g,(u.mode&1)!==0)}E&&(d.flags|=4)}else x=(g.nodeType===9?g:g.ownerDocument).createTextNode(x),x[ho]=d,d.stateNode=x}return Tn(d),null;case 13:if(St(Nt),x=d.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(Ct&&zr!==null&&(d.mode&1)!==0&&(d.flags&128)===0)k$(),uc(),d.flags|=98560,E=!1;else if(E=t0(d),x!==null&&x.dehydrated!==null){if(u===null){if(!E)throw Error(n(318));if(E=d.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(n(317));E[ho]=d}else uc(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;Tn(d),E=!1}else Ni!==null&&(h_(Ni),Ni=null),E=!0;if(!E)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=g,d):(x=x!==null,x!==(u!==null&&u.memoizedState!==null)&&x&&(d.child.flags|=8192,(d.mode&1)!==0&&(u===null||(Nt.current&1)!==0?Zt===0&&(Zt=3):m_())),d.updateQueue!==null&&(d.flags|=4),Tn(d),null);case 4:return hc(),n_(u,d),u===null&&Nd(d.stateNode.containerInfo),Tn(d),null;case 10:return Nx(d.type._context),Tn(d),null;case 17:return mr(d.type)&&Jg(),Tn(d),null;case 19:if(St(Nt),E=d.memoizedState,E===null)return Tn(d),null;if(x=(d.flags&128)!==0,M=E.rendering,M===null)if(x)jd(E,!1);else{if(Zt!==0||u!==null&&(u.flags&128)!==0)for(u=d.child;u!==null;){if(M=a0(u),M!==null){for(d.flags|=128,jd(E,!1),x=M.updateQueue,x!==null&&(d.updateQueue=x,d.flags|=4),d.subtreeFlags=0,x=g,g=d.child;g!==null;)E=g,u=x,E.flags&=14680066,M=E.alternate,M===null?(E.childLanes=0,E.lanes=u,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=M.childLanes,E.lanes=M.lanes,E.child=M.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=M.memoizedProps,E.memoizedState=M.memoizedState,E.updateQueue=M.updateQueue,E.type=M.type,u=M.dependencies,E.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),g=g.sibling;return _t(Nt,Nt.current&1|2),d.child}u=u.sibling}E.tail!==null&&jt()>yc&&(d.flags|=128,x=!0,jd(E,!1),d.lanes=4194304)}else{if(!x)if(u=a0(M),u!==null){if(d.flags|=128,x=!0,g=u.updateQueue,g!==null&&(d.updateQueue=g,d.flags|=4),jd(E,!0),E.tail===null&&E.tailMode==="hidden"&&!M.alternate&&!Ct)return Tn(d),null}else 2*jt()-E.renderingStartTime>yc&&g!==1073741824&&(d.flags|=128,x=!0,jd(E,!1),d.lanes=4194304);E.isBackwards?(M.sibling=d.child,d.child=M):(g=E.last,g!==null?g.sibling=M:d.child=M,E.last=M)}return E.tail!==null?(d=E.tail,E.rendering=d,E.tail=d.sibling,E.renderingStartTime=jt(),d.sibling=null,g=Nt.current,_t(Nt,x?g&1|2:g&1),d):(Tn(d),null);case 22:case 23:return g_(),x=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==x&&(d.flags|=8192),x&&(d.mode&1)!==0?(Ir&1073741824)!==0&&(Tn(d),d.subtreeFlags&6&&(d.flags|=8192)):Tn(d),null;case 24:return null;case 25:return null}throw Error(n(156,d.tag))}function pG(u,d){switch(Ex(d),d.tag){case 1:return mr(d.type)&&Jg(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return hc(),St(gr),St(Dn),Px(),u=d.flags,(u&65536)!==0&&(u&128)===0?(d.flags=u&-65537|128,d):null;case 5:return Rx(d),null;case 13:if(St(Nt),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(n(340));uc()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return St(Nt),null;case 4:return hc(),null;case 10:return Nx(d.type._context),null;case 22:case 23:return g_(),null;case 24:return null;default:return null}}var m0=!1,Rn=!1,gG=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function gc(u,d){var g=u.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(x){Lt(u,d,x)}else g.current=null}function r_(u,d,g){try{g()}catch(x){Lt(u,d,x)}}var AM=!1;function mG(u,d){if(gx=Lg,u=r$(),ax(u)){if("selectionStart"in u)var g={start:u.selectionStart,end:u.selectionEnd};else e:{g=(g=u.ownerDocument)&&g.defaultView||window;var x=g.getSelection&&g.getSelection();if(x&&x.rangeCount!==0){g=x.anchorNode;var w=x.anchorOffset,E=x.focusNode;x=x.focusOffset;try{g.nodeType,E.nodeType}catch{g=null;break e}var M=0,T=-1,z=-1,J=0,oe=0,ue=u,ie=null;t:for(;;){for(var Se;ue!==g||w!==0&&ue.nodeType!==3||(T=M+w),ue!==E||x!==0&&ue.nodeType!==3||(z=M+x),ue.nodeType===3&&(M+=ue.nodeValue.length),(Se=ue.firstChild)!==null;)ie=ue,ue=Se;for(;;){if(ue===u)break t;if(ie===g&&++J===w&&(T=M),ie===E&&++oe===x&&(z=M),(Se=ue.nextSibling)!==null)break;ue=ie,ie=ue.parentNode}ue=Se}g=T===-1||z===-1?null:{start:T,end:z}}else g=null}g=g||{start:0,end:0}}else g=null;for(mx={focusedElem:u,selectionRange:g},Lg=!1,Ee=d;Ee!==null;)if(d=Ee,u=d.child,(d.subtreeFlags&1028)!==0&&u!==null)u.return=d,Ee=u;else for(;Ee!==null;){d=Ee;try{var Ce=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var ke=Ce.memoizedProps,Bt=Ce.memoizedState,G=d.stateNode,U=G.getSnapshotBeforeUpdate(d.elementType===d.type?ke:Oi(d.type,ke),Bt);G.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var q=d.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(pe){Lt(d,d.return,pe)}if(u=d.sibling,u!==null){u.return=d.return,Ee=u;break}Ee=d.return}return Ce=AM,AM=!1,Ce}function Bd(u,d,g){var x=d.updateQueue;if(x=x!==null?x.lastEffect:null,x!==null){var w=x=x.next;do{if((w.tag&u)===u){var E=w.destroy;w.destroy=void 0,E!==void 0&&r_(d,g,E)}w=w.next}while(w!==x)}}function y0(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&u)===u){var x=g.create;g.destroy=x()}g=g.next}while(g!==d)}}function i_(u){var d=u.ref;if(d!==null){var g=u.stateNode;switch(u.tag){case 5:u=g;break;default:u=g}typeof d=="function"?d(u):d.current=u}}function CM(u){var d=u.alternate;d!==null&&(u.alternate=null,CM(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&(delete d[ho],delete d[Dd],delete d[_x],delete d[KH],delete d[ZH])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function kM(u){return u.tag===5||u.tag===3||u.tag===4}function $M(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||kM(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function o_(u,d,g){var x=u.tag;if(x===5||x===6)u=u.stateNode,d?g.nodeType===8?g.parentNode.insertBefore(u,d):g.insertBefore(u,d):(g.nodeType===8?(d=g.parentNode,d.insertBefore(u,g)):(d=g,d.appendChild(u)),g=g._reactRootContainer,g!=null||d.onclick!==null||(d.onclick=Vg));else if(x!==4&&(u=u.child,u!==null))for(o_(u,d,g),u=u.sibling;u!==null;)o_(u,d,g),u=u.sibling}function s_(u,d,g){var x=u.tag;if(x===5||x===6)u=u.stateNode,d?g.insertBefore(u,d):g.appendChild(u);else if(x!==4&&(u=u.child,u!==null))for(s_(u,d,g),u=u.sibling;u!==null;)s_(u,d,g),u=u.sibling}var bn=null,Di=!1;function aa(u,d,g){for(g=g.child;g!==null;)MM(u,d,g),g=g.sibling}function MM(u,d,g){if(fo&&typeof fo.onCommitFiberUnmount=="function")try{fo.onCommitFiberUnmount(Ng,g)}catch{}switch(g.tag){case 5:Rn||gc(g,d);case 6:var x=bn,w=Di;bn=null,aa(u,d,g),bn=x,Di=w,bn!==null&&(Di?(u=bn,g=g.stateNode,u.nodeType===8?u.parentNode.removeChild(g):u.removeChild(g)):bn.removeChild(g.stateNode));break;case 18:bn!==null&&(Di?(u=bn,g=g.stateNode,u.nodeType===8?xx(u.parentNode,g):u.nodeType===1&&xx(u,g),bd(u)):xx(bn,g.stateNode));break;case 4:x=bn,w=Di,bn=g.stateNode.containerInfo,Di=!0,aa(u,d,g),bn=x,Di=w;break;case 0:case 11:case 14:case 15:if(!Rn&&(x=g.updateQueue,x!==null&&(x=x.lastEffect,x!==null))){w=x=x.next;do{var E=w,M=E.destroy;E=E.tag,M!==void 0&&((E&2)!==0||(E&4)!==0)&&r_(g,d,M),w=w.next}while(w!==x)}aa(u,d,g);break;case 1:if(!Rn&&(gc(g,d),x=g.stateNode,typeof x.componentWillUnmount=="function"))try{x.props=g.memoizedProps,x.state=g.memoizedState,x.componentWillUnmount()}catch(T){Lt(g,d,T)}aa(u,d,g);break;case 21:aa(u,d,g);break;case 22:g.mode&1?(Rn=(x=Rn)||g.memoizedState!==null,aa(u,d,g),Rn=x):aa(u,d,g);break;default:aa(u,d,g)}}function NM(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var g=u.stateNode;g===null&&(g=u.stateNode=new gG),d.forEach(function(x){var w=AG.bind(null,u,x);g.has(x)||(g.add(x),x.then(w,w))})}}function Fi(u,d){var g=d.deletions;if(g!==null)for(var x=0;x<g.length;x++){var w=g[x];try{var E=u,M=d,T=M;e:for(;T!==null;){switch(T.tag){case 5:bn=T.stateNode,Di=!1;break e;case 3:bn=T.stateNode.containerInfo,Di=!0;break e;case 4:bn=T.stateNode.containerInfo,Di=!0;break e}T=T.return}if(bn===null)throw Error(n(160));MM(E,M,w),bn=null,Di=!1;var z=w.alternate;z!==null&&(z.return=null),w.return=null}catch(J){Lt(w,d,J)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)OM(d,u),d=d.sibling}function OM(u,d){var g=u.alternate,x=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(Fi(d,u),mo(u),x&4){try{Bd(3,u,u.return),y0(3,u)}catch(ke){Lt(u,u.return,ke)}try{Bd(5,u,u.return)}catch(ke){Lt(u,u.return,ke)}}break;case 1:Fi(d,u),mo(u),x&512&&g!==null&&gc(g,g.return);break;case 5:if(Fi(d,u),mo(u),x&512&&g!==null&&gc(g,g.return),u.flags&32){var w=u.stateNode;try{cd(w,"")}catch(ke){Lt(u,u.return,ke)}}if(x&4&&(w=u.stateNode,w!=null)){var E=u.memoizedProps,M=g!==null?g.memoizedProps:E,T=u.type,z=u.updateQueue;if(u.updateQueue=null,z!==null)try{T==="input"&&E.type==="radio"&&E.name!=null&&Qt(w,E),P2(T,M);var J=P2(T,E);for(M=0;M<z.length;M+=2){var oe=z[M],ue=z[M+1];oe==="style"?h4(w,ue):oe==="dangerouslySetInnerHTML"?f4(w,ue):oe==="children"?cd(w,ue):A(w,oe,ue,J)}switch(T){case"input":Rr(w,E);break;case"textarea":l4(w,E);break;case"select":var ie=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!E.multiple;var Se=E.value;Se!=null?Vu(w,!!E.multiple,Se,!1):ie!==!!E.multiple&&(E.defaultValue!=null?Vu(w,!!E.multiple,E.defaultValue,!0):Vu(w,!!E.multiple,E.multiple?[]:"",!1))}w[Dd]=E}catch(ke){Lt(u,u.return,ke)}}break;case 6:if(Fi(d,u),mo(u),x&4){if(u.stateNode===null)throw Error(n(162));w=u.stateNode,E=u.memoizedProps;try{w.nodeValue=E}catch(ke){Lt(u,u.return,ke)}}break;case 3:if(Fi(d,u),mo(u),x&4&&g!==null&&g.memoizedState.isDehydrated)try{bd(d.containerInfo)}catch(ke){Lt(u,u.return,ke)}break;case 4:Fi(d,u),mo(u);break;case 13:Fi(d,u),mo(u),w=u.child,w.flags&8192&&(E=w.memoizedState!==null,w.stateNode.isHidden=E,!E||w.alternate!==null&&w.alternate.memoizedState!==null||(u_=jt())),x&4&&NM(u);break;case 22:if(oe=g!==null&&g.memoizedState!==null,u.mode&1?(Rn=(J=Rn)||oe,Fi(d,u),Rn=J):Fi(d,u),mo(u),x&8192){if(J=u.memoizedState!==null,(u.stateNode.isHidden=J)&&!oe&&(u.mode&1)!==0)for(Ee=u,oe=u.child;oe!==null;){for(ue=Ee=oe;Ee!==null;){switch(ie=Ee,Se=ie.child,ie.tag){case 0:case 11:case 14:case 15:Bd(4,ie,ie.return);break;case 1:gc(ie,ie.return);var Ce=ie.stateNode;if(typeof Ce.componentWillUnmount=="function"){x=ie,g=ie.return;try{d=x,Ce.props=d.memoizedProps,Ce.state=d.memoizedState,Ce.componentWillUnmount()}catch(ke){Lt(x,g,ke)}}break;case 5:gc(ie,ie.return);break;case 22:if(ie.memoizedState!==null){TM(ue);continue}}Se!==null?(Se.return=ie,Ee=Se):TM(ue)}oe=oe.sibling}e:for(oe=null,ue=u;;){if(ue.tag===5){if(oe===null){oe=ue;try{w=ue.stateNode,J?(E=w.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(T=ue.stateNode,z=ue.memoizedProps.style,M=z!=null&&z.hasOwnProperty("display")?z.display:null,T.style.display=d4("display",M))}catch(ke){Lt(u,u.return,ke)}}}else if(ue.tag===6){if(oe===null)try{ue.stateNode.nodeValue=J?"":ue.memoizedProps}catch(ke){Lt(u,u.return,ke)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===u)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===u)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===u)break e;oe===ue&&(oe=null),ue=ue.return}oe===ue&&(oe=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:Fi(d,u),mo(u),x&4&&NM(u);break;case 21:break;default:Fi(d,u),mo(u)}}function mo(u){var d=u.flags;if(d&2){try{e:{for(var g=u.return;g!==null;){if(kM(g)){var x=g;break e}g=g.return}throw Error(n(160))}switch(x.tag){case 5:var w=x.stateNode;x.flags&32&&(cd(w,""),x.flags&=-33);var E=$M(u);s_(u,E,w);break;case 3:case 4:var M=x.stateNode.containerInfo,T=$M(u);o_(u,T,M);break;default:throw Error(n(161))}}catch(z){Lt(u,u.return,z)}u.flags&=-3}d&4096&&(u.flags&=-4097)}function yG(u,d,g){Ee=u,DM(u)}function DM(u,d,g){for(var x=(u.mode&1)!==0;Ee!==null;){var w=Ee,E=w.child;if(w.tag===22&&x){var M=w.memoizedState!==null||m0;if(!M){var T=w.alternate,z=T!==null&&T.memoizedState!==null||Rn;T=m0;var J=Rn;if(m0=M,(Rn=z)&&!J)for(Ee=w;Ee!==null;)M=Ee,z=M.child,M.tag===22&&M.memoizedState!==null?RM(w):z!==null?(z.return=M,Ee=z):RM(w);for(;E!==null;)Ee=E,DM(E),E=E.sibling;Ee=w,m0=T,Rn=J}FM(u)}else(w.subtreeFlags&8772)!==0&&E!==null?(E.return=w,Ee=E):FM(u)}}function FM(u){for(;Ee!==null;){var d=Ee;if((d.flags&8772)!==0){var g=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:Rn||y0(5,d);break;case 1:var x=d.stateNode;if(d.flags&4&&!Rn)if(g===null)x.componentDidMount();else{var w=d.elementType===d.type?g.memoizedProps:Oi(d.type,g.memoizedProps);x.componentDidUpdate(w,g.memoizedState,x.__reactInternalSnapshotBeforeUpdate)}var E=d.updateQueue;E!==null&&T$(d,E,x);break;case 3:var M=d.updateQueue;if(M!==null){if(g=null,d.child!==null)switch(d.child.tag){case 5:g=d.child.stateNode;break;case 1:g=d.child.stateNode}T$(d,M,g)}break;case 5:var T=d.stateNode;if(g===null&&d.flags&4){g=T;var z=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&g.focus();break;case"img":z.src&&(g.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var J=d.alternate;if(J!==null){var oe=J.memoizedState;if(oe!==null){var ue=oe.dehydrated;ue!==null&&bd(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Rn||d.flags&512&&i_(d)}catch(ie){Lt(d,d.return,ie)}}if(d===u){Ee=null;break}if(g=d.sibling,g!==null){g.return=d.return,Ee=g;break}Ee=d.return}}function TM(u){for(;Ee!==null;){var d=Ee;if(d===u){Ee=null;break}var g=d.sibling;if(g!==null){g.return=d.return,Ee=g;break}Ee=d.return}}function RM(u){for(;Ee!==null;){var d=Ee;try{switch(d.tag){case 0:case 11:case 15:var g=d.return;try{y0(4,d)}catch(z){Lt(d,g,z)}break;case 1:var x=d.stateNode;if(typeof x.componentDidMount=="function"){var w=d.return;try{x.componentDidMount()}catch(z){Lt(d,w,z)}}var E=d.return;try{i_(d)}catch(z){Lt(d,E,z)}break;case 5:var M=d.return;try{i_(d)}catch(z){Lt(d,M,z)}}}catch(z){Lt(d,d.return,z)}if(d===u){Ee=null;break}var T=d.sibling;if(T!==null){T.return=d.return,Ee=T;break}Ee=d.return}}var vG=Math.ceil,v0=C.ReactCurrentDispatcher,a_=C.ReactCurrentOwner,oi=C.ReactCurrentBatchConfig,rt=0,un=null,Vt=null,wn=0,Ir=0,mc=na(0),Zt=0,Hd=null,Sl=0,x0=0,l_=0,Gd=null,vr=null,u_=0,yc=1/0,cs=null,_0=!1,c_=null,la=null,b0=!1,ua=null,w0=0,Yd=0,f_=null,S0=-1,E0=0;function Qn(){return(rt&6)!==0?jt():S0!==-1?S0:S0=jt()}function ca(u){return(u.mode&1)===0?1:(rt&2)!==0&&wn!==0?wn&-wn:tG.transition!==null?(E0===0&&(E0=$4()),E0):(u=ht,u!==0||(u=window.event,u=u===void 0?16:P4(u.type)),u)}function Ti(u,d,g,x){if(50<Yd)throw Yd=0,f_=null,Error(n(185));md(u,g,x),((rt&2)===0||u!==un)&&(u===un&&((rt&2)===0&&(x0|=g),Zt===4&&fa(u,wn)),xr(u,x),g===1&&rt===0&&(d.mode&1)===0&&(yc=jt()+500,Kg&&ia()))}function xr(u,d){var g=u.callbackNode;tH(u,d);var x=Fg(u,u===un?wn:0);if(x===0)g!==null&&A4(g),u.callbackNode=null,u.callbackPriority=0;else if(d=x&-x,u.callbackPriority!==d){if(g!=null&&A4(g),d===1)u.tag===0?eG(PM.bind(null,u)):w$(PM.bind(null,u)),JH(function(){(rt&6)===0&&ia()}),g=null;else{switch(M4(x)){case 1:g=H2;break;case 4:g=C4;break;case 16:g=Mg;break;case 536870912:g=k4;break;default:g=Mg}g=GM(g,LM.bind(null,u))}u.callbackPriority=d,u.callbackNode=g}}function LM(u,d){if(S0=-1,E0=0,(rt&6)!==0)throw Error(n(327));var g=u.callbackNode;if(vc()&&u.callbackNode!==g)return null;var x=Fg(u,u===un?wn:0);if(x===0)return null;if((x&30)!==0||(x&u.expiredLanes)!==0||d)d=A0(u,x);else{d=x;var w=rt;rt|=2;var E=IM();(un!==u||wn!==d)&&(cs=null,yc=jt()+500,Al(u,d));do try{bG();break}catch(T){zM(u,T)}while(!0);Mx(),v0.current=E,rt=w,Vt!==null?d=0:(un=null,wn=0,d=Zt)}if(d!==0){if(d===2&&(w=G2(u),w!==0&&(x=w,d=d_(u,w))),d===1)throw g=Hd,Al(u,0),fa(u,x),xr(u,jt()),g;if(d===6)fa(u,x);else{if(w=u.current.alternate,(x&30)===0&&!xG(w)&&(d=A0(u,x),d===2&&(E=G2(u),E!==0&&(x=E,d=d_(u,E))),d===1))throw g=Hd,Al(u,0),fa(u,x),xr(u,jt()),g;switch(u.finishedWork=w,u.finishedLanes=x,d){case 0:case 1:throw Error(n(345));case 2:Cl(u,vr,cs);break;case 3:if(fa(u,x),(x&130023424)===x&&(d=u_+500-jt(),10<d)){if(Fg(u,0)!==0)break;if(w=u.suspendedLanes,(w&x)!==x){Qn(),u.pingedLanes|=u.suspendedLanes&w;break}u.timeoutHandle=vx(Cl.bind(null,u,vr,cs),d);break}Cl(u,vr,cs);break;case 4:if(fa(u,x),(x&4194240)===x)break;for(d=u.eventTimes,w=-1;0<x;){var M=31-$i(x);E=1<<M,M=d[M],M>w&&(w=M),x&=~E}if(x=w,x=jt()-x,x=(120>x?120:480>x?480:1080>x?1080:1920>x?1920:3e3>x?3e3:4320>x?4320:1960*vG(x/1960))-x,10<x){u.timeoutHandle=vx(Cl.bind(null,u,vr,cs),x);break}Cl(u,vr,cs);break;case 5:Cl(u,vr,cs);break;default:throw Error(n(329))}}}return xr(u,jt()),u.callbackNode===g?LM.bind(null,u):null}function d_(u,d){var g=Gd;return u.current.memoizedState.isDehydrated&&(Al(u,d).flags|=256),u=A0(u,d),u!==2&&(d=vr,vr=g,d!==null&&h_(d)),u}function h_(u){vr===null?vr=u:vr.push.apply(vr,u)}function xG(u){for(var d=u;;){if(d.flags&16384){var g=d.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var x=0;x<g.length;x++){var w=g[x],E=w.getSnapshot;w=w.value;try{if(!Mi(E(),w))return!1}catch{return!1}}}if(g=d.child,d.subtreeFlags&16384&&g!==null)g.return=d,d=g;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function fa(u,d){for(d&=~l_,d&=~x0,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var g=31-$i(d),x=1<<g;u[g]=-1,d&=~x}}function PM(u){if((rt&6)!==0)throw Error(n(327));vc();var d=Fg(u,0);if((d&1)===0)return xr(u,jt()),null;var g=A0(u,d);if(u.tag!==0&&g===2){var x=G2(u);x!==0&&(d=x,g=d_(u,x))}if(g===1)throw g=Hd,Al(u,0),fa(u,d),xr(u,jt()),g;if(g===6)throw Error(n(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,Cl(u,vr,cs),xr(u,jt()),null}function p_(u,d){var g=rt;rt|=1;try{return u(d)}finally{rt=g,rt===0&&(yc=jt()+500,Kg&&ia())}}function El(u){ua!==null&&ua.tag===0&&(rt&6)===0&&vc();var d=rt;rt|=1;var g=oi.transition,x=ht;try{if(oi.transition=null,ht=1,u)return u()}finally{ht=x,oi.transition=g,rt=d,(rt&6)===0&&ia()}}function g_(){Ir=mc.current,St(mc)}function Al(u,d){u.finishedWork=null,u.finishedLanes=0;var g=u.timeoutHandle;if(g!==-1&&(u.timeoutHandle=-1,XH(g)),Vt!==null)for(g=Vt.return;g!==null;){var x=g;switch(Ex(x),x.tag){case 1:x=x.type.childContextTypes,x!=null&&Jg();break;case 3:hc(),St(gr),St(Dn),Px();break;case 5:Rx(x);break;case 4:hc();break;case 13:St(Nt);break;case 19:St(Nt);break;case 10:Nx(x.type._context);break;case 22:case 23:g_()}g=g.return}if(un=u,Vt=u=da(u.current,null),wn=Ir=d,Zt=0,Hd=null,l_=x0=Sl=0,vr=Gd=null,_l!==null){for(d=0;d<_l.length;d++)if(g=_l[d],x=g.interleaved,x!==null){g.interleaved=null;var w=x.next,E=g.pending;if(E!==null){var M=E.next;E.next=w,x.next=M}g.pending=x}_l=null}return u}function zM(u,d){do{var g=Vt;try{if(Mx(),l0.current=d0,u0){for(var x=Ot.memoizedState;x!==null;){var w=x.queue;w!==null&&(w.pending=null),x=x.next}u0=!1}if(wl=0,ln=Kt=Ot=null,zd=!1,Id=0,a_.current=null,g===null||g.return===null){Zt=1,Hd=d,Vt=null;break}e:{var E=u,M=g.return,T=g,z=d;if(d=wn,T.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var J=z,oe=T,ue=oe.tag;if((oe.mode&1)===0&&(ue===0||ue===11||ue===15)){var ie=oe.alternate;ie?(oe.updateQueue=ie.updateQueue,oe.memoizedState=ie.memoizedState,oe.lanes=ie.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var Se=uM(M);if(Se!==null){Se.flags&=-257,cM(Se,M,T,E,d),Se.mode&1&&lM(E,J,d),d=Se,z=J;var Ce=d.updateQueue;if(Ce===null){var ke=new Set;ke.add(z),d.updateQueue=ke}else Ce.add(z);break e}else{if((d&1)===0){lM(E,J,d),m_();break e}z=Error(n(426))}}else if(Ct&&T.mode&1){var Bt=uM(M);if(Bt!==null){(Bt.flags&65536)===0&&(Bt.flags|=256),cM(Bt,M,T,E,d),kx(pc(z,T));break e}}E=z=pc(z,T),Zt!==4&&(Zt=2),Gd===null?Gd=[E]:Gd.push(E),E=M;do{switch(E.tag){case 3:E.flags|=65536,d&=-d,E.lanes|=d;var G=sM(E,z,d);F$(E,G);break e;case 1:T=z;var U=E.type,q=E.stateNode;if((E.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(la===null||!la.has(q)))){E.flags|=65536,d&=-d,E.lanes|=d;var pe=aM(E,T,d);F$(E,pe);break e}}E=E.return}while(E!==null)}WM(g)}catch(Ne){d=Ne,Vt===g&&g!==null&&(Vt=g=g.return);continue}break}while(!0)}function IM(){var u=v0.current;return v0.current=d0,u===null?d0:u}function m_(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),un===null||(Sl&268435455)===0&&(x0&268435455)===0||fa(un,wn)}function A0(u,d){var g=rt;rt|=2;var x=IM();(un!==u||wn!==d)&&(cs=null,Al(u,d));do try{_G();break}catch(w){zM(u,w)}while(!0);if(Mx(),rt=g,v0.current=x,Vt!==null)throw Error(n(261));return un=null,wn=0,Zt}function _G(){for(;Vt!==null;)UM(Vt)}function bG(){for(;Vt!==null&&!YB();)UM(Vt)}function UM(u){var d=HM(u.alternate,u,Ir);u.memoizedProps=u.pendingProps,d===null?WM(u):Vt=d,a_.current=null}function WM(u){var d=u;do{var g=d.alternate;if(u=d.return,(d.flags&32768)===0){if(g=hG(g,d,Ir),g!==null){Vt=g;return}}else{if(g=pG(g,d),g!==null){g.flags&=32767,Vt=g;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{Zt=6,Vt=null;return}}if(d=d.sibling,d!==null){Vt=d;return}Vt=d=u}while(d!==null);Zt===0&&(Zt=5)}function Cl(u,d,g){var x=ht,w=oi.transition;try{oi.transition=null,ht=1,wG(u,d,g,x)}finally{oi.transition=w,ht=x}return null}function wG(u,d,g,x){do vc();while(ua!==null);if((rt&6)!==0)throw Error(n(327));g=u.finishedWork;var w=u.finishedLanes;if(g===null)return null;if(u.finishedWork=null,u.finishedLanes=0,g===u.current)throw Error(n(177));u.callbackNode=null,u.callbackPriority=0;var E=g.lanes|g.childLanes;if(nH(u,E),u===un&&(Vt=un=null,wn=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||b0||(b0=!0,GM(Mg,function(){return vc(),null})),E=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||E){E=oi.transition,oi.transition=null;var M=ht;ht=1;var T=rt;rt|=4,a_.current=null,mG(u,g),OM(g,u),jH(mx),Lg=!!gx,mx=gx=null,u.current=g,yG(g),qB(),rt=T,ht=M,oi.transition=E}else u.current=g;if(b0&&(b0=!1,ua=u,w0=w),E=u.pendingLanes,E===0&&(la=null),JB(g.stateNode),xr(u,jt()),d!==null)for(x=u.onRecoverableError,g=0;g<d.length;g++)w=d[g],x(w.value,{componentStack:w.stack,digest:w.digest});if(_0)throw _0=!1,u=c_,c_=null,u;return(w0&1)!==0&&u.tag!==0&&vc(),E=u.pendingLanes,(E&1)!==0?u===f_?Yd++:(Yd=0,f_=u):Yd=0,ia(),null}function vc(){if(ua!==null){var u=M4(w0),d=oi.transition,g=ht;try{if(oi.transition=null,ht=16>u?16:u,ua===null)var x=!1;else{if(u=ua,ua=null,w0=0,(rt&6)!==0)throw Error(n(331));var w=rt;for(rt|=4,Ee=u.current;Ee!==null;){var E=Ee,M=E.child;if((Ee.flags&16)!==0){var T=E.deletions;if(T!==null){for(var z=0;z<T.length;z++){var J=T[z];for(Ee=J;Ee!==null;){var oe=Ee;switch(oe.tag){case 0:case 11:case 15:Bd(8,oe,E)}var ue=oe.child;if(ue!==null)ue.return=oe,Ee=ue;else for(;Ee!==null;){oe=Ee;var ie=oe.sibling,Se=oe.return;if(CM(oe),oe===J){Ee=null;break}if(ie!==null){ie.return=Se,Ee=ie;break}Ee=Se}}}var Ce=E.alternate;if(Ce!==null){var ke=Ce.child;if(ke!==null){Ce.child=null;do{var Bt=ke.sibling;ke.sibling=null,ke=Bt}while(ke!==null)}}Ee=E}}if((E.subtreeFlags&2064)!==0&&M!==null)M.return=E,Ee=M;else e:for(;Ee!==null;){if(E=Ee,(E.flags&2048)!==0)switch(E.tag){case 0:case 11:case 15:Bd(9,E,E.return)}var G=E.sibling;if(G!==null){G.return=E.return,Ee=G;break e}Ee=E.return}}var U=u.current;for(Ee=U;Ee!==null;){M=Ee;var q=M.child;if((M.subtreeFlags&2064)!==0&&q!==null)q.return=M,Ee=q;else e:for(M=U;Ee!==null;){if(T=Ee,(T.flags&2048)!==0)try{switch(T.tag){case 0:case 11:case 15:y0(9,T)}}catch(Ne){Lt(T,T.return,Ne)}if(T===M){Ee=null;break e}var pe=T.sibling;if(pe!==null){pe.return=T.return,Ee=pe;break e}Ee=T.return}}if(rt=w,ia(),fo&&typeof fo.onPostCommitFiberRoot=="function")try{fo.onPostCommitFiberRoot(Ng,u)}catch{}x=!0}return x}finally{ht=g,oi.transition=d}}return!1}function jM(u,d,g){d=pc(g,d),d=sM(u,d,1),u=sa(u,d,1),d=Qn(),u!==null&&(md(u,1,d),xr(u,d))}function Lt(u,d,g){if(u.tag===3)jM(u,u,g);else for(;d!==null;){if(d.tag===3){jM(d,u,g);break}else if(d.tag===1){var x=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(la===null||!la.has(x))){u=pc(g,u),u=aM(d,u,1),d=sa(d,u,1),u=Qn(),d!==null&&(md(d,1,u),xr(d,u));break}}d=d.return}}function SG(u,d,g){var x=u.pingCache;x!==null&&x.delete(d),d=Qn(),u.pingedLanes|=u.suspendedLanes&g,un===u&&(wn&g)===g&&(Zt===4||Zt===3&&(wn&130023424)===wn&&500>jt()-u_?Al(u,0):l_|=g),xr(u,d)}function BM(u,d){d===0&&((u.mode&1)===0?d=1:(d=Dg,Dg<<=1,(Dg&130023424)===0&&(Dg=4194304)));var g=Qn();u=as(u,d),u!==null&&(md(u,d,g),xr(u,g))}function EG(u){var d=u.memoizedState,g=0;d!==null&&(g=d.retryLane),BM(u,g)}function AG(u,d){var g=0;switch(u.tag){case 13:var x=u.stateNode,w=u.memoizedState;w!==null&&(g=w.retryLane);break;case 19:x=u.stateNode;break;default:throw Error(n(314))}x!==null&&x.delete(d),BM(u,g)}var HM;HM=function(u,d,g){if(u!==null)if(u.memoizedProps!==d.pendingProps||gr.current)yr=!0;else{if((u.lanes&g)===0&&(d.flags&128)===0)return yr=!1,dG(u,d,g);yr=(u.flags&131072)!==0}else yr=!1,Ct&&(d.flags&1048576)!==0&&S$(d,e0,d.index);switch(d.lanes=0,d.tag){case 2:var x=d.type;g0(u,d),u=d.pendingProps;var w=sc(d,Dn.current);dc(d,g),w=Ux(null,d,x,u,w,g);var E=Wx();return d.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,mr(x)?(E=!0,Qg(d)):E=!1,d.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Fx(d),w.updater=h0,d.stateNode=w,w._reactInternals=d,qx(d,x,u,g),d=Qx(null,d,x,!0,E,g)):(d.tag=0,Ct&&E&&Sx(d),Jn(null,d,w,g),d=d.child),d;case 16:x=d.elementType;e:{switch(g0(u,d),u=d.pendingProps,w=x._init,x=w(x._payload),d.type=x,w=d.tag=kG(x),u=Oi(x,u),w){case 0:d=Jx(null,d,x,u,g);break e;case 1:d=mM(null,d,x,u,g);break e;case 11:d=fM(null,d,x,u,g);break e;case 14:d=dM(null,d,x,Oi(x.type,u),g);break e}throw Error(n(306,x,""))}return d;case 0:return x=d.type,w=d.pendingProps,w=d.elementType===x?w:Oi(x,w),Jx(u,d,x,w,g);case 1:return x=d.type,w=d.pendingProps,w=d.elementType===x?w:Oi(x,w),mM(u,d,x,w,g);case 3:e:{if(yM(d),u===null)throw Error(n(387));x=d.pendingProps,E=d.memoizedState,w=E.element,D$(u,d),s0(d,x,null,g);var M=d.memoizedState;if(x=M.element,E.isDehydrated)if(E={element:x,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},d.updateQueue.baseState=E,d.memoizedState=E,d.flags&256){w=pc(Error(n(423)),d),d=vM(u,d,x,g,w);break e}else if(x!==w){w=pc(Error(n(424)),d),d=vM(u,d,x,g,w);break e}else for(zr=ta(d.stateNode.containerInfo.firstChild),Pr=d,Ct=!0,Ni=null,g=N$(d,null,x,g),d.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(uc(),x===w){d=us(u,d,g);break e}Jn(u,d,x,g)}d=d.child}return d;case 5:return R$(d),u===null&&Cx(d),x=d.type,w=d.pendingProps,E=u!==null?u.memoizedProps:null,M=w.children,yx(x,w)?M=null:E!==null&&yx(x,E)&&(d.flags|=32),gM(u,d),Jn(u,d,M,g),d.child;case 6:return u===null&&Cx(d),null;case 13:return xM(u,d,g);case 4:return Tx(d,d.stateNode.containerInfo),x=d.pendingProps,u===null?d.child=cc(d,null,x,g):Jn(u,d,x,g),d.child;case 11:return x=d.type,w=d.pendingProps,w=d.elementType===x?w:Oi(x,w),fM(u,d,x,w,g);case 7:return Jn(u,d,d.pendingProps,g),d.child;case 8:return Jn(u,d,d.pendingProps.children,g),d.child;case 12:return Jn(u,d,d.pendingProps.children,g),d.child;case 10:e:{if(x=d.type._context,w=d.pendingProps,E=d.memoizedProps,M=w.value,_t(r0,x._currentValue),x._currentValue=M,E!==null)if(Mi(E.value,M)){if(E.children===w.children&&!gr.current){d=us(u,d,g);break e}}else for(E=d.child,E!==null&&(E.return=d);E!==null;){var T=E.dependencies;if(T!==null){M=E.child;for(var z=T.firstContext;z!==null;){if(z.context===x){if(E.tag===1){z=ls(-1,g&-g),z.tag=2;var J=E.updateQueue;if(J!==null){J=J.shared;var oe=J.pending;oe===null?z.next=z:(z.next=oe.next,oe.next=z),J.pending=z}}E.lanes|=g,z=E.alternate,z!==null&&(z.lanes|=g),Ox(E.return,g,d),T.lanes|=g;break}z=z.next}}else if(E.tag===10)M=E.type===d.type?null:E.child;else if(E.tag===18){if(M=E.return,M===null)throw Error(n(341));M.lanes|=g,T=M.alternate,T!==null&&(T.lanes|=g),Ox(M,g,d),M=E.sibling}else M=E.child;if(M!==null)M.return=E;else for(M=E;M!==null;){if(M===d){M=null;break}if(E=M.sibling,E!==null){E.return=M.return,M=E;break}M=M.return}E=M}Jn(u,d,w.children,g),d=d.child}return d;case 9:return w=d.type,x=d.pendingProps.children,dc(d,g),w=ri(w),x=x(w),d.flags|=1,Jn(u,d,x,g),d.child;case 14:return x=d.type,w=Oi(x,d.pendingProps),w=Oi(x.type,w),dM(u,d,x,w,g);case 15:return hM(u,d,d.type,d.pendingProps,g);case 17:return x=d.type,w=d.pendingProps,w=d.elementType===x?w:Oi(x,w),g0(u,d),d.tag=1,mr(x)?(u=!0,Qg(d)):u=!1,dc(d,g),iM(d,x,w),qx(d,x,w,g),Qx(null,d,x,!0,u,g);case 19:return bM(u,d,g);case 22:return pM(u,d,g)}throw Error(n(156,d.tag))};function GM(u,d){return E4(u,d)}function CG(u,d,g,x){this.tag=u,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(u,d,g,x){return new CG(u,d,g,x)}function y_(u){return u=u.prototype,!(!u||!u.isReactComponent)}function kG(u){if(typeof u=="function")return y_(u)?1:0;if(u!=null){if(u=u.$$typeof,u===X)return 11;if(u===F)return 14}return 2}function da(u,d){var g=u.alternate;return g===null?(g=si(u.tag,d,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g.alternate=u,u.alternate=g):(g.pendingProps=d,g.type=u.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=u.flags&14680064,g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue,d=u.dependencies,g.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g}function C0(u,d,g,x,w,E){var M=2;if(x=u,typeof u=="function")y_(u)&&(M=1);else if(typeof u=="string")M=5;else e:switch(u){case $:return kl(g.children,w,E,d);case O:M=8,w|=8;break;case D:return u=si(12,g,d,w|2),u.elementType=D,u.lanes=E,u;case B:return u=si(13,g,d,w),u.elementType=B,u.lanes=E,u;case I:return u=si(19,g,d,w),u.elementType=I,u.lanes=E,u;case V:return k0(g,w,E,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case P:M=10;break e;case R:M=9;break e;case X:M=11;break e;case F:M=14;break e;case W:M=16,x=null;break e}throw Error(n(130,u==null?u:typeof u,""))}return d=si(M,g,d,w),d.elementType=u,d.type=x,d.lanes=E,d}function kl(u,d,g,x){return u=si(7,u,x,d),u.lanes=g,u}function k0(u,d,g,x){return u=si(22,u,x,d),u.elementType=V,u.lanes=g,u.stateNode={isHidden:!1},u}function v_(u,d,g){return u=si(6,u,null,d),u.lanes=g,u}function x_(u,d,g){return d=si(4,u.children!==null?u.children:[],u.key,d),d.lanes=g,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function $G(u,d,g,x,w){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Y2(0),this.expirationTimes=Y2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Y2(0),this.identifierPrefix=x,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function __(u,d,g,x,w,E,M,T,z){return u=new $G(u,d,g,T,z),d===1?(d=1,E===!0&&(d|=8)):d=0,E=si(3,null,null,d),u.current=E,E.stateNode=u,E.memoizedState={element:x,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fx(E),u}function MG(u,d,g){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:N,key:x==null?null:""+x,children:u,containerInfo:d,implementation:g}}function YM(u){if(!u)return ra;u=u._reactInternals;e:{if(gl(u)!==u||u.tag!==1)throw Error(n(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(mr(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(n(171))}if(u.tag===1){var g=u.type;if(mr(g))return _$(u,g,d)}return d}function qM(u,d,g,x,w,E,M,T,z){return u=__(g,x,!0,u,w,E,M,T,z),u.context=YM(null),g=u.current,x=Qn(),w=ca(g),E=ls(x,w),E.callback=d??null,sa(g,E,w),u.current.lanes=w,md(u,w,x),xr(u,x),u}function $0(u,d,g,x){var w=d.current,E=Qn(),M=ca(w);return g=YM(g),d.context===null?d.context=g:d.pendingContext=g,d=ls(E,M),d.payload={element:u},x=x===void 0?null:x,x!==null&&(d.callback=x),u=sa(w,d,M),u!==null&&(Ti(u,w,M,E),o0(u,w,M)),M}function M0(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function VM(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var g=u.retryLane;u.retryLane=g!==0&&g<d?g:d}}function b_(u,d){VM(u,d),(u=u.alternate)&&VM(u,d)}function NG(){return null}var XM=typeof reportError=="function"?reportError:function(u){console.error(u)};function w_(u){this._internalRoot=u}N0.prototype.render=w_.prototype.render=function(u){var d=this._internalRoot;if(d===null)throw Error(n(409));$0(u,d,null,null)},N0.prototype.unmount=w_.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var d=u.containerInfo;El(function(){$0(null,u,null,null)}),d[rs]=null}};function N0(u){this._internalRoot=u}N0.prototype.unstable_scheduleHydration=function(u){if(u){var d=D4();u={blockedOn:null,target:u,priority:d};for(var g=0;g<Ks.length&&d!==0&&d<Ks[g].priority;g++);Ks.splice(g,0,u),g===0&&R4(u)}};function S_(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function O0(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function JM(){}function OG(u,d,g,x,w){if(w){if(typeof x=="function"){var E=x;x=function(){var J=M0(M);E.call(J)}}var M=qM(d,x,u,0,null,!1,!1,"",JM);return u._reactRootContainer=M,u[rs]=M.current,Nd(u.nodeType===8?u.parentNode:u),El(),M}for(;w=u.lastChild;)u.removeChild(w);if(typeof x=="function"){var T=x;x=function(){var J=M0(z);T.call(J)}}var z=__(u,0,!1,null,null,!1,!1,"",JM);return u._reactRootContainer=z,u[rs]=z.current,Nd(u.nodeType===8?u.parentNode:u),El(function(){$0(d,z,g,x)}),z}function D0(u,d,g,x,w){var E=g._reactRootContainer;if(E){var M=E;if(typeof w=="function"){var T=w;w=function(){var z=M0(M);T.call(z)}}$0(d,M,u,w)}else M=OG(g,d,u,w,x);return M0(M)}N4=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var g=gd(d.pendingLanes);g!==0&&(q2(d,g|1),xr(d,jt()),(rt&6)===0&&(yc=jt()+500,ia()))}break;case 13:El(function(){var x=as(u,1);if(x!==null){var w=Qn();Ti(x,u,1,w)}}),b_(u,1)}},V2=function(u){if(u.tag===13){var d=as(u,134217728);if(d!==null){var g=Qn();Ti(d,u,134217728,g)}b_(u,134217728)}},O4=function(u){if(u.tag===13){var d=ca(u),g=as(u,d);if(g!==null){var x=Qn();Ti(g,u,d,x)}b_(u,d)}},D4=function(){return ht},F4=function(u,d){var g=ht;try{return ht=u,d()}finally{ht=g}},U2=function(u,d,g){switch(d){case"input":if(Rr(u,g),d=g.name,g.type==="radio"&&d!=null){for(g=u;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<g.length;d++){var x=g[d];if(x!==u&&x.form===u.form){var w=Xg(x);if(!w)throw Error(n(90));le(x),Rr(x,w)}}}break;case"textarea":l4(u,g);break;case"select":d=g.value,d!=null&&Vu(u,!!g.multiple,d,!1)}},y4=p_,v4=El;var DG={usingClientEntryPoint:!1,Events:[Fd,ic,Xg,g4,m4,p_]},qd={findFiberByHostInstance:ml,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FG={bundleType:qd.bundleType,version:qd.version,rendererPackageName:qd.rendererPackageName,rendererConfig:qd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=w4(u),u===null?null:u.stateNode},findFiberByHostInstance:qd.findFiberByHostInstance||NG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var F0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!F0.isDisabled&&F0.supportsFiber)try{Ng=F0.inject(FG),fo=F0}catch{}}return _r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DG,_r.createPortal=function(u,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S_(d))throw Error(n(200));return MG(u,d,null,g)},_r.createRoot=function(u,d){if(!S_(u))throw Error(n(299));var g=!1,x="",w=XM;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(x=d.identifierPrefix),d.onRecoverableError!==void 0&&(w=d.onRecoverableError)),d=__(u,1,!1,null,null,g,!1,x,w),u[rs]=d.current,Nd(u.nodeType===8?u.parentNode:u),new w_(d)},_r.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=w4(d),u=u===null?null:u.stateNode,u},_r.flushSync=function(u){return El(u)},_r.hydrate=function(u,d,g){if(!O0(d))throw Error(n(200));return D0(null,u,d,!0,g)},_r.hydrateRoot=function(u,d,g){if(!S_(u))throw Error(n(405));var x=g!=null&&g.hydratedSources||null,w=!1,E="",M=XM;if(g!=null&&(g.unstable_strictMode===!0&&(w=!0),g.identifierPrefix!==void 0&&(E=g.identifierPrefix),g.onRecoverableError!==void 0&&(M=g.onRecoverableError)),d=qM(d,null,u,1,g??null,w,!1,E,M),u[rs]=d.current,Nd(u),x)for(u=0;u<x.length;u++)g=x[u],w=g._getVersion,w=w(g._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[g,w]:d.mutableSourceEagerHydrationData.push(g,w);return new N0(d)},_r.render=function(u,d,g){if(!O0(d))throw Error(n(200));return D0(null,u,d,!1,g)},_r.unmountComponentAtNode=function(u){if(!O0(u))throw Error(n(40));return u._reactRootContainer?(El(function(){D0(null,null,u,!1,function(){u._reactRootContainer=null,u[rs]=null})}),!0):!1},_r.unstable_batchedUpdates=p_,_r.unstable_renderSubtreeIntoContainer=function(u,d,g,x){if(!O0(g))throw Error(n(200));if(u==null||u._reactInternals===void 0)throw Error(n(38));return D0(u,d,g,!1,x)},_r.version="18.3.1-next-f1338f8080-20240426",_r}var lN;function BG(){if(lN)return k_.exports;lN=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),k_.exports=jG(),k_.exports}var uN;function HG(){if(uN)return T0;uN=1;var e=BG();return T0.createRoot=e.createRoot,T0.hydrateRoot=e.hydrateRoot,T0}var GG=HG();const YG=20,qG=[/^\d{4}-\d{2}-\d{2}$/,/^\d{4}-\d{2}-\d{2}T/,/^\d{1,2}\/\d{1,2}\/\d{2,4}$/];function VG(e){const t=e.filter(r=>typeof r=="string");return t.length<e.length*.8?!1:t.filter(r=>qG.some(i=>i.test(r))||!isNaN(Date.parse(r))).length>=t.length*.8}function XG(e){const t=e.filter(a=>a!=null&&a!=="");if(t.length===0)return"nominal";const n=t.slice(0,100),i=new Set(n).size;return VG(n)?"temporal":n.filter(a=>typeof a=="number"||typeof a=="string"&&!isNaN(Number(a))).length===n.length?i<=YG?"ordinal":"quantitative":"nominal"}function JG(e){return e.length===0?[]:Object.keys(e[0]).map(n=>{const r=e.map(s=>s[n]),i=XG(r),o=new Set(r.filter(s=>s!=null)).size;return{name:n,type:i,uniqueCount:o}})}const QG=JSON.parse(`[{"Name":"chevrolet chevelle malibu","Miles_per_Gallon":18,"Cylinders":8,"Displacement":307,"Horsepower":130,"Weight_in_lbs":3504,"Acceleration":12,"Year":"1970-01-01","Origin":"USA"},{"Name":"buick skylark 320","Miles_per_Gallon":15,"Cylinders":8,"Displacement":350,"Horsepower":165,"Weight_in_lbs":3693,"Acceleration":11.5,"Year":"1970-01-01","Origin":"USA"},{"Name":"plymouth satellite","Miles_per_Gallon":18,"Cylinders":8,"Displacement":318,"Horsepower":150,"Weight_in_lbs":3436,"Acceleration":11,"Year":"1970-01-01","Origin":"USA"},{"Name":"amc rebel sst","Miles_per_Gallon":16,"Cylinders":8,"Displacement":304,"Horsepower":150,"Weight_in_lbs":3433,"Acceleration":12,"Year":"1970-01-01","Origin":"USA"},{"Name":"ford torino","Miles_per_Gallon":17,"Cylinders":8,"Displacement":302,"Horsepower":140,"Weight_in_lbs":3449,"Acceleration":10.5,"Year":"1970-01-01","Origin":"USA"},{"Name":"ford galaxie 500","Miles_per_Gallon":15,"Cylinders":8,"Displacement":429,"Horsepower":198,"Weight_in_lbs":4341,"Acceleration":10,"Year":"1970-01-01","Origin":"USA"},{"Name":"chevrolet impala","Miles_per_Gallon":14,"Cylinders":8,"Displacement":454,"Horsepower":220,"Weight_in_lbs":4354,"Acceleration":9,"Year":"1970-01-01","Origin":"USA"},{"Name":"plymouth fury iii","Miles_per_Gallon":14,"Cylinders":8,"Displacement":440,"Horsepower":215,"Weight_in_lbs":4312,"Acceleration":8.5,"Year":"1970-01-01","Origin":"USA"},{"Name":"pontiac catalina","Miles_per_Gallon":14,"Cylinders":8,"Displacement":455,"Horsepower":225,"Weight_in_lbs":4425,"Acceleration":10,"Year":"1970-01-01","Origin":"USA"},{"Name":"amc ambassador dpl","Miles_per_Gallon":15,"Cylinders":8,"Displacement":390,"Horsepower":190,"Weight_in_lbs":3850,"Acceleration":8.5,"Year":"1970-01-01","Origin":"USA"},{"Name":"citroen ds-21 pallas","Miles_per_Gallon":null,"Cylinders":4,"Displacement":133,"Horsepower":115,"Weight_in_lbs":3090,"Acceleration":17.5,"Year":"1970-01-01","Origin":"Europe"},{"Name":"chevrolet chevelle concours (sw)","Miles_per_Gallon":null,"Cylinders":8,"Displacement":350,"Horsepower":165,"Weight_in_lbs":4142,"Acceleration":11.5,"Year":"1970-01-01","Origin":"USA"},{"Name":"ford torino (sw)","Miles_per_Gallon":null,"Cylinders":8,"Displacement":351,"Horsepower":153,"Weight_in_lbs":4034,"Acceleration":11,"Year":"1970-01-01","Origin":"USA"},{"Name":"plymouth satellite (sw)","Miles_per_Gallon":null,"Cylinders":8,"Displacement":383,"Horsepower":175,"Weight_in_lbs":4166,"Acceleration":10.5,"Year":"1970-01-01","Origin":"USA"},{"Name":"amc rebel sst (sw)","Miles_per_Gallon":null,"Cylinders":8,"Displacement":360,"Horsepower":175,"Weight_in_lbs":3850,"Acceleration":11,"Year":"1970-01-01","Origin":"USA"},{"Name":"dodge challenger se","Miles_per_Gallon":15,"Cylinders":8,"Displacement":383,"Horsepower":170,"Weight_in_lbs":3563,"Acceleration":10,"Year":"1970-01-01","Origin":"USA"},{"Name":"plymouth 'cuda 340","Miles_per_Gallon":14,"Cylinders":8,"Displacement":340,"Horsepower":160,"Weight_in_lbs":3609,"Acceleration":8,"Year":"1970-01-01","Origin":"USA"},{"Name":"ford mustang boss 302","Miles_per_Gallon":null,"Cylinders":8,"Displacement":302,"Horsepower":140,"Weight_in_lbs":3353,"Acceleration":8,"Year":"1970-01-01","Origin":"USA"},{"Name":"chevrolet monte carlo","Miles_per_Gallon":15,"Cylinders":8,"Displacement":400,"Horsepower":150,"Weight_in_lbs":3761,"Acceleration":9.5,"Year":"1970-01-01","Origin":"USA"},{"Name":"buick estate wagon (sw)","Miles_per_Gallon":14,"Cylinders":8,"Displacement":455,"Horsepower":225,"Weight_in_lbs":3086,"Acceleration":10,"Year":"1970-01-01","Origin":"USA"},{"Name":"toyota corona mark ii","Miles_per_Gallon":24,"Cylinders":4,"Displacement":113,"Horsepower":95,"Weight_in_lbs":2372,"Acceleration":15,"Year":"1970-01-01","Origin":"Japan"},{"Name":"plymouth duster","Miles_per_Gallon":22,"Cylinders":6,"Displacement":198,"Horsepower":95,"Weight_in_lbs":2833,"Acceleration":15.5,"Year":"1970-01-01","Origin":"USA"},{"Name":"amc hornet","Miles_per_Gallon":18,"Cylinders":6,"Displacement":199,"Horsepower":97,"Weight_in_lbs":2774,"Acceleration":15.5,"Year":"1970-01-01","Origin":"USA"},{"Name":"ford maverick","Miles_per_Gallon":21,"Cylinders":6,"Displacement":200,"Horsepower":85,"Weight_in_lbs":2587,"Acceleration":16,"Year":"1970-01-01","Origin":"USA"},{"Name":"datsun pl510","Miles_per_Gallon":27,"Cylinders":4,"Displacement":97,"Horsepower":88,"Weight_in_lbs":2130,"Acceleration":14.5,"Year":"1970-01-01","Origin":"Japan"},{"Name":"volkswagen 1131 deluxe sedan","Miles_per_Gallon":26,"Cylinders":4,"Displacement":97,"Horsepower":46,"Weight_in_lbs":1835,"Acceleration":20.5,"Year":"1970-01-01","Origin":"Europe"},{"Name":"peugeot 504","Miles_per_Gallon":25,"Cylinders":4,"Displacement":110,"Horsepower":87,"Weight_in_lbs":2672,"Acceleration":17.5,"Year":"1970-01-01","Origin":"Europe"},{"Name":"audi 100 ls","Miles_per_Gallon":24,"Cylinders":4,"Displacement":107,"Horsepower":90,"Weight_in_lbs":2430,"Acceleration":14.5,"Year":"1970-01-01","Origin":"Europe"},{"Name":"saab 99e","Miles_per_Gallon":25,"Cylinders":4,"Displacement":104,"Horsepower":95,"Weight_in_lbs":2375,"Acceleration":17.5,"Year":"1970-01-01","Origin":"Europe"},{"Name":"bmw 2002","Miles_per_Gallon":26,"Cylinders":4,"Displacement":121,"Horsepower":113,"Weight_in_lbs":2234,"Acceleration":12.5,"Year":"1970-01-01","Origin":"Europe"},{"Name":"amc gremlin","Miles_per_Gallon":21,"Cylinders":6,"Displacement":199,"Horsepower":90,"Weight_in_lbs":2648,"Acceleration":15,"Year":"1970-01-01","Origin":"USA"},{"Name":"ford f250","Miles_per_Gallon":10,"Cylinders":8,"Displacement":360,"Horsepower":215,"Weight_in_lbs":4615,"Acceleration":14,"Year":"1970-01-01","Origin":"USA"},{"Name":"chevy c20","Miles_per_Gallon":10,"Cylinders":8,"Displacement":307,"Horsepower":200,"Weight_in_lbs":4376,"Acceleration":15,"Year":"1970-01-01","Origin":"USA"},{"Name":"dodge d200","Miles_per_Gallon":11,"Cylinders":8,"Displacement":318,"Horsepower":210,"Weight_in_lbs":4382,"Acceleration":13.5,"Year":"1970-01-01","Origin":"USA"},{"Name":"hi 1200d","Miles_per_Gallon":9,"Cylinders":8,"Displacement":304,"Horsepower":193,"Weight_in_lbs":4732,"Acceleration":18.5,"Year":"1970-01-01","Origin":"USA"},{"Name":"datsun pl510","Miles_per_Gallon":27,"Cylinders":4,"Displacement":97,"Horsepower":88,"Weight_in_lbs":2130,"Acceleration":14.5,"Year":"1971-01-01","Origin":"Japan"},{"Name":"chevrolet vega 2300","Miles_per_Gallon":28,"Cylinders":4,"Displacement":140,"Horsepower":90,"Weight_in_lbs":2264,"Acceleration":15.5,"Year":"1971-01-01","Origin":"USA"},{"Name":"toyota corona","Miles_per_Gallon":25,"Cylinders":4,"Displacement":113,"Horsepower":95,"Weight_in_lbs":2228,"Acceleration":14,"Year":"1971-01-01","Origin":"Japan"},{"Name":"ford pinto","Miles_per_Gallon":25,"Cylinders":4,"Displacement":98,"Horsepower":null,"Weight_in_lbs":2046,"Acceleration":19,"Year":"1971-01-01","Origin":"USA"},{"Name":"volkswagen super beetle 117","Miles_per_Gallon":null,"Cylinders":4,"Displacement":97,"Horsepower":48,"Weight_in_lbs":1978,"Acceleration":20,"Year":"1971-01-01","Origin":"Europe"},{"Name":"amc gremlin","Miles_per_Gallon":19,"Cylinders":6,"Displacement":232,"Horsepower":100,"Weight_in_lbs":2634,"Acceleration":13,"Year":"1971-01-01","Origin":"USA"},{"Name":"plymouth satellite custom","Miles_per_Gallon":16,"Cylinders":6,"Displacement":225,"Horsepower":105,"Weight_in_lbs":3439,"Acceleration":15.5,"Year":"1971-01-01","Origin":"USA"},{"Name":"chevrolet chevelle malibu","Miles_per_Gallon":17,"Cylinders":6,"Displacement":250,"Horsepower":100,"Weight_in_lbs":3329,"Acceleration":15.5,"Year":"1971-01-01","Origin":"USA"},{"Name":"ford torino 500","Miles_per_Gallon":19,"Cylinders":6,"Displacement":250,"Horsepower":88,"Weight_in_lbs":3302,"Acceleration":15.5,"Year":"1971-01-01","Origin":"USA"},{"Name":"amc matador","Miles_per_Gallon":18,"Cylinders":6,"Displacement":232,"Horsepower":100,"Weight_in_lbs":3288,"Acceleration":15.5,"Year":"1971-01-01","Origin":"USA"},{"Name":"chevrolet impala","Miles_per_Gallon":14,"Cylinders":8,"Displacement":350,"Horsepower":165,"Weight_in_lbs":4209,"Acceleration":12,"Year":"1971-01-01","Origin":"USA"},{"Name":"pontiac catalina brougham","Miles_per_Gallon":14,"Cylinders":8,"Displacement":400,"Horsepower":175,"Weight_in_lbs":4464,"Acceleration":11.5,"Year":"1971-01-01","Origin":"USA"},{"Name":"ford galaxie 500","Miles_per_Gallon":14,"Cylinders":8,"Displacement":351,"Horsepower":153,"Weight_in_lbs":4154,"Acceleration":13.5,"Year":"1971-01-01","Origin":"USA"},{"Name":"plymouth fury iii","Miles_per_Gallon":14,"Cylinders":8,"Displacement":318,"Horsepower":150,"Weight_in_lbs":4096,"Acceleration":13,"Year":"1971-01-01","Origin":"USA"},{"Name":"dodge monaco (sw)","Miles_per_Gallon":12,"Cylinders":8,"Displacement":383,"Horsepower":180,"Weight_in_lbs":4955,"Acceleration":11.5,"Year":"1971-01-01","Origin":"USA"},{"Name":"ford country squire (sw)","Miles_per_Gallon":13,"Cylinders":8,"Displacement":400,"Horsepower":170,"Weight_in_lbs":4746,"Acceleration":12,"Year":"1971-01-01","Origin":"USA"},{"Name":"pontiac safari (sw)","Miles_per_Gallon":13,"Cylinders":8,"Displacement":400,"Horsepower":175,"Weight_in_lbs":5140,"Acceleration":12,"Year":"1971-01-01","Origin":"USA"},{"Name":"amc hornet sportabout (sw)","Miles_per_Gallon":18,"Cylinders":6,"Displacement":258,"Horsepower":110,"Weight_in_lbs":2962,"Acceleration":13.5,"Year":"1971-01-01","Origin":"USA"},{"Name":"chevrolet vega (sw)","Miles_per_Gallon":22,"Cylinders":4,"Displacement":140,"Horsepower":72,"Weight_in_lbs":2408,"Acceleration":19,"Year":"1971-01-01","Origin":"USA"},{"Name":"pontiac firebird","Miles_per_Gallon":19,"Cylinders":6,"Displacement":250,"Horsepower":100,"Weight_in_lbs":3282,"Acceleration":15,"Year":"1971-01-01","Origin":"USA"},{"Name":"ford mustang","Miles_per_Gallon":18,"Cylinders":6,"Displacement":250,"Horsepower":88,"Weight_in_lbs":3139,"Acceleration":14.5,"Year":"1971-01-01","Origin":"USA"},{"Name":"mercury capri 2000","Miles_per_Gallon":23,"Cylinders":4,"Displacement":122,"Horsepower":86,"Weight_in_lbs":2220,"Acceleration":14,"Year":"1971-01-01","Origin":"USA"},{"Name":"opel 1900","Miles_per_Gallon":28,"Cylinders":4,"Displacement":116,"Horsepower":90,"Weight_in_lbs":2123,"Acceleration":14,"Year":"1971-01-01","Origin":"Europe"},{"Name":"peugeot 304","Miles_per_Gallon":30,"Cylinders":4,"Displacement":79,"Horsepower":70,"Weight_in_lbs":2074,"Acceleration":19.5,"Year":"1971-01-01","Origin":"Europe"},{"Name":"fiat 124b","Miles_per_Gallon":30,"Cylinders":4,"Displacement":88,"Horsepower":76,"Weight_in_lbs":2065,"Acceleration":14.5,"Year":"1971-01-01","Origin":"Europe"},{"Name":"toyota corolla 1200","Miles_per_Gallon":31,"Cylinders":4,"Displacement":71,"Horsepower":65,"Weight_in_lbs":1773,"Acceleration":19,"Year":"1971-01-01","Origin":"Japan"},{"Name":"datsun 1200","Miles_per_Gallon":35,"Cylinders":4,"Displacement":72,"Horsepower":69,"Weight_in_lbs":1613,"Acceleration":18,"Year":"1971-01-01","Origin":"Japan"},{"Name":"volkswagen model 111","Miles_per_Gallon":27,"Cylinders":4,"Displacement":97,"Horsepower":60,"Weight_in_lbs":1834,"Acceleration":19,"Year":"1971-01-01","Origin":"Europe"},{"Name":"plymouth cricket","Miles_per_Gallon":26,"Cylinders":4,"Displacement":91,"Horsepower":70,"Weight_in_lbs":1955,"Acceleration":20.5,"Year":"1971-01-01","Origin":"USA"},{"Name":"toyota corona hardtop","Miles_per_Gallon":24,"Cylinders":4,"Displacement":113,"Horsepower":95,"Weight_in_lbs":2278,"Acceleration":15.5,"Year":"1972-01-01","Origin":"Japan"},{"Name":"dodge colt hardtop","Miles_per_Gallon":25,"Cylinders":4,"Displacement":97.5,"Horsepower":80,"Weight_in_lbs":2126,"Acceleration":17,"Year":"1972-01-01","Origin":"USA"},{"Name":"volkswagen type 3","Miles_per_Gallon":23,"Cylinders":4,"Displacement":97,"Horsepower":54,"Weight_in_lbs":2254,"Acceleration":23.5,"Year":"1972-01-01","Origin":"Europe"},{"Name":"chevrolet vega","Miles_per_Gallon":20,"Cylinders":4,"Displacement":140,"Horsepower":90,"Weight_in_lbs":2408,"Acceleration":19.5,"Year":"1972-01-01","Origin":"USA"},{"Name":"ford pinto runabout","Miles_per_Gallon":21,"Cylinders":4,"Displacement":122,"Horsepower":86,"Weight_in_lbs":2226,"Acceleration":16.5,"Year":"1972-01-01","Origin":"USA"},{"Name":"chevrolet impala","Miles_per_Gallon":13,"Cylinders":8,"Displacement":350,"Horsepower":165,"Weight_in_lbs":4274,"Acceleration":12,"Year":"1972-01-01","Origin":"USA"},{"Name":"pontiac catalina","Miles_per_Gallon":14,"Cylinders":8,"Displacement":400,"Horsepower":175,"Weight_in_lbs":4385,"Acceleration":12,"Year":"1972-01-01","Origin":"USA"},{"Name":"plymouth fury iii","Miles_per_Gallon":15,"Cylinders":8,"Displacement":318,"Horsepower":150,"Weight_in_lbs":4135,"Acceleration":13.5,"Year":"1972-01-01","Origin":"USA"},{"Name":"ford galaxie 500","Miles_per_Gallon":14,"Cylinders":8,"Displacement":351,"Horsepower":153,"Weight_in_lbs":4129,"Acceleration":13,"Year":"1972-01-01","Origin":"USA"},{"Name":"amc ambassador sst","Miles_per_Gallon":17,"Cylinders":8,"Displacement":304,"Horsepower":150,"Weight_in_lbs":3672,"Acceleration":11.5,"Year":"1972-01-01","Origin":"USA"},{"Name":"mercury marquis","Miles_per_Gallon":11,"Cylinders":8,"Displacement":429,"Horsepower":208,"Weight_in_lbs":4633,"Acceleration":11,"Year":"1972-01-01","Origin":"USA"},{"Name":"buick lesabre custom","Miles_per_Gallon":13,"Cylinders":8,"Displacement":350,"Horsepower":155,"Weight_in_lbs":4502,"Acceleration":13.5,"Year":"1972-01-01","Origin":"USA"},{"Name":"oldsmobile delta 88 royale","Miles_per_Gallon":12,"Cylinders":8,"Displacement":350,"Horsepower":160,"Weight_in_lbs":4456,"Acceleration":13.5,"Year":"1972-01-01","Origin":"USA"},{"Name":"chrysler newport royal","Miles_per_Gallon":13,"Cylinders":8,"Displacement":400,"Horsepower":190,"Weight_in_lbs":4422,"Acceleration":12.5,"Year":"1972-01-01","Origin":"USA"},{"Name":"mazda rx2 coupe","Miles_per_Gallon":19,"Cylinders":3,"Displacement":70,"Horsepower":97,"Weight_in_lbs":2330,"Acceleration":13.5,"Year":"1972-01-01","Origin":"Japan"},{"Name":"amc matador (sw)","Miles_per_Gallon":15,"Cylinders":8,"Displacement":304,"Horsepower":150,"Weight_in_lbs":3892,"Acceleration":12.5,"Year":"1972-01-01","Origin":"USA"},{"Name":"chevrolet chevelle concours (sw)","Miles_per_Gallon":13,"Cylinders":8,"Displacement":307,"Horsepower":130,"Weight_in_lbs":4098,"Acceleration":14,"Year":"1972-01-01","Origin":"USA"},{"Name":"ford gran torino (sw)","Miles_per_Gallon":13,"Cylinders":8,"Displacement":302,"Horsepower":140,"Weight_in_lbs":4294,"Acceleration":16,"Year":"1972-01-01","Origin":"USA"},{"Name":"plymouth satellite custom (sw)","Miles_per_Gallon":14,"Cylinders":8,"Displacement":318,"Horsepower":150,"Weight_in_lbs":4077,"Acceleration":14,"Year":"1972-01-01","Origin":"USA"},{"Name":"volvo 145e (sw)","Miles_per_Gallon":18,"Cylinders":4,"Displacement":121,"Horsepower":112,"Weight_in_lbs":2933,"Acceleration":14.5,"Year":"1972-01-01","Origin":"Europe"},{"Name":"volkswagen 411 (sw)","Miles_per_Gallon":22,"Cylinders":4,"Displacement":121,"Horsepower":76,"Weight_in_lbs":2511,"Acceleration":18,"Year":"1972-01-01","Origin":"Europe"},{"Name":"peugeot 504 (sw)","Miles_per_Gallon":21,"Cylinders":4,"Displacement":120,"Horsepower":87,"Weight_in_lbs":2979,"Acceleration":19.5,"Year":"1972-01-01","Origin":"Europe"},{"Name":"renault 12 (sw)","Miles_per_Gallon":26,"Cylinders":4,"Displacement":96,"Horsepower":69,"Weight_in_lbs":2189,"Acceleration":18,"Year":"1972-01-01","Origin":"Europe"},{"Name":"ford pinto (sw)","Miles_per_Gallon":22,"Cylinders":4,"Displacement":122,"Horsepower":86,"Weight_in_lbs":2395,"Acceleration":16,"Year":"1972-01-01","Origin":"USA"},{"Name":"datsun 510 (sw)","Miles_per_Gallon":28,"Cylinders":4,"Displacement":97,"Horsepower":92,"Weight_in_lbs":2288,"Acceleration":17,"Year":"1972-01-01","Origin":"Japan"},{"Name":"toyouta corona mark ii (sw)","Miles_per_Gallon":23,"Cylinders":4,"Displacement":120,"Horsepower":97,"Weight_in_lbs":2506,"Acceleration":14.5,"Year":"1972-01-01","Origin":"Japan"},{"Name":"dodge colt (sw)","Miles_per_Gallon":28,"Cylinders":4,"Displacement":98,"Horsepower":80,"Weight_in_lbs":2164,"Acceleration":15,"Year":"1972-01-01","Origin":"USA"},{"Name":"toyota corolla 1600 (sw)","Miles_per_Gallon":27,"Cylinders":4,"Displacement":97,"Horsepower":88,"Weight_in_lbs":2100,"Acceleration":16.5,"Year":"1972-01-01","Origin":"Japan"},{"Name":"buick century 350","Miles_per_Gallon":13,"Cylinders":8,"Displacement":350,"Horsepower":175,"Weight_in_lbs":4100,"Acceleration":13,"Year":"1973-01-01","Origin":"USA"},{"Name":"amc matador","Miles_per_Gallon":14,"Cylinders":8,"Displacement":304,"Horsepower":150,"Weight_in_lbs":3672,"Acceleration":11.5,"Year":"1973-01-01","Origin":"USA"},{"Name":"chevrolet malibu","Miles_per_Gallon":13,"Cylinders":8,"Displacement":350,"Horsepower":145,"Weight_in_lbs":3988,"Acceleration":13,"Year":"1973-01-01","Origin":"USA"},{"Name":"ford gran torino","Miles_per_Gallon":14,"Cylinders":8,"Displacement":302,"Horsepower":137,"Weight_in_lbs":4042,"Acceleration":14.5,"Year":"1973-01-01","Origin":"USA"},{"Name":"dodge coronet custom","Miles_per_Gallon":15,"Cylinders":8,"Displacement":318,"Horsepower":150,"Weight_in_lbs":3777,"Acceleration":12.5,"Year":"1973-01-01","Origin":"USA"},{"Name":"mercury marquis brougham","Miles_per_Gallon":12,"Cylinders":8,"Displacement":429,"Horsepower":198,"Weight_in_lbs":4952,"Acceleration":11.5,"Year":"1973-01-01","Origin":"USA"},{"Name":"chevrolet caprice classic","Miles_per_Gallon":13,"Cylinders":8,"Displacement":400,"Horsepower":150,"Weight_in_lbs":4464,"Acceleration":12,"Year":"1973-01-01","Origin":"USA"},{"Name":"ford ltd","Miles_per_Gallon":13,"Cylinders":8,"Displacement":351,"Horsepower":158,"Weight_in_lbs":4363,"Acceleration":13,"Year":"1973-01-01","Origin":"USA"},{"Name":"plymouth fury gran sedan","Miles_per_Gallon":14,"Cylinders":8,"Displacement":318,"Horsepower":150,"Weight_in_lbs":4237,"Acceleration":14.5,"Year":"1973-01-01","Origin":"USA"},{"Name":"chrysler new yorker brougham","Miles_per_Gallon":13,"Cylinders":8,"Displacement":440,"Horsepower":215,"Weight_in_lbs":4735,"Acceleration":11,"Year":"1973-01-01","Origin":"USA"},{"Name":"buick electra 225 custom","Miles_per_Gallon":12,"Cylinders":8,"Displacement":455,"Horsepower":225,"Weight_in_lbs":4951,"Acceleration":11,"Year":"1973-01-01","Origin":"USA"},{"Name":"amc ambassador brougham","Miles_per_Gallon":13,"Cylinders":8,"Displacement":360,"Horsepower":175,"Weight_in_lbs":3821,"Acceleration":11,"Year":"1973-01-01","Origin":"USA"},{"Name":"plymouth valiant","Miles_per_Gallon":18,"Cylinders":6,"Displacement":225,"Horsepower":105,"Weight_in_lbs":3121,"Acceleration":16.5,"Year":"1973-01-01","Origin":"USA"},{"Name":"chevrolet nova custom","Miles_per_Gallon":16,"Cylinders":6,"Displacement":250,"Horsepower":100,"Weight_in_lbs":3278,"Acceleration":18,"Year":"1973-01-01","Origin":"USA"},{"Name":"amc hornet","Miles_per_Gallon":18,"Cylinders":6,"Displacement":232,"Horsepower":100,"Weight_in_lbs":2945,"Acceleration":16,"Year":"1973-01-01","Origin":"USA"},{"Name":"ford maverick","Miles_per_Gallon":18,"Cylinders":6,"Displacement":250,"Horsepower":88,"Weight_in_lbs":3021,"Acceleration":16.5,"Year":"1973-01-01","Origin":"USA"},{"Name":"plymouth duster","Miles_per_Gallon":23,"Cylinders":6,"Displacement":198,"Horsepower":95,"Weight_in_lbs":2904,"Acceleration":16,"Year":"1973-01-01","Origin":"USA"},{"Name":"volkswagen super beetle","Miles_per_Gallon":26,"Cylinders":4,"Displacement":97,"Horsepower":46,"Weight_in_lbs":1950,"Acceleration":21,"Year":"1973-01-01","Origin":"Europe"},{"Name":"chevrolet impala","Miles_per_Gallon":11,"Cylinders":8,"Displacement":400,"Horsepower":150,"Weight_in_lbs":4997,"Acceleration":14,"Year":"1973-01-01","Origin":"USA"},{"Name":"ford country","Miles_per_Gallon":12,"Cylinders":8,"Displacement":400,"Horsepower":167,"Weight_in_lbs":4906,"Acceleration":12.5,"Year":"1973-01-01","Origin":"USA"},{"Name":"plymouth custom suburb","Miles_per_Gallon":13,"Cylinders":8,"Displacement":360,"Horsepower":170,"Weight_in_lbs":4654,"Acceleration":13,"Year":"1973-01-01","Origin":"USA"},{"Name":"oldsmobile vista cruiser","Miles_per_Gallon":12,"Cylinders":8,"Displacement":350,"Horsepower":180,"Weight_in_lbs":4499,"Acceleration":12.5,"Year":"1973-01-01","Origin":"USA"},{"Name":"amc gremlin","Miles_per_Gallon":18,"Cylinders":6,"Displacement":232,"Horsepower":100,"Weight_in_lbs":2789,"Acceleration":15,"Year":"1973-01-01","Origin":"USA"},{"Name":"toyota carina","Miles_per_Gallon":20,"Cylinders":4,"Displacement":97,"Horsepower":88,"Weight_in_lbs":2279,"Acceleration":19,"Year":"1973-01-01","Origin":"Japan"},{"Name":"chevrolet vega","Miles_per_Gallon":21,"Cylinders":4,"Displacement":140,"Horsepower":72,"Weight_in_lbs":2401,"Acceleration":19.5,"Year":"1973-01-01","Origin":"USA"},{"Name":"datsun 610","Miles_per_Gallon":22,"Cylinders":4,"Displacement":108,"Horsepower":94,"Weight_in_lbs":2379,"Acceleration":16.5,"Year":"1973-01-01","Origin":"Japan"},{"Name":"maxda rx3","Miles_per_Gallon":18,"Cylinders":3,"Displacement":70,"Horsepower":90,"Weight_in_lbs":2124,"Acceleration":13.5,"Year":"1973-01-01","Origin":"Japan"},{"Name":"ford pinto","Miles_per_Gallon":19,"Cylinders":4,"Displacement":122,"Horsepower":85,"Weight_in_lbs":2310,"Acceleration":18.5,"Year":"1973-01-01","Origin":"USA"},{"Name":"mercury capri v6","Miles_per_Gallon":21,"Cylinders":6,"Displacement":155,"Horsepower":107,"Weight_in_lbs":2472,"Acceleration":14,"Year":"1973-01-01","Origin":"USA"},{"Name":"fiat 124 sport coupe","Miles_per_Gallon":26,"Cylinders":4,"Displacement":98,"Horsepower":90,"Weight_in_lbs":2265,"Acceleration":15.5,"Year":"1973-01-01","Origin":"Europe"},{"Name":"chevrolet monte carlo s","Miles_per_Gallon":15,"Cylinders":8,"Displacement":350,"Horsepower":145,"Weight_in_lbs":4082,"Acceleration":13,"Year":"1973-01-01","Origin":"USA"},{"Name":"pontiac grand prix","Miles_per_Gallon":16,"Cylinders":8,"Displacement":400,"Horsepower":230,"Weight_in_lbs":4278,"Acceleration":9.5,"Year":"1973-01-01","Origin":"USA"},{"Name":"fiat 128","Miles_per_Gallon":29,"Cylinders":4,"Displacement":68,"Horsepower":49,"Weight_in_lbs":1867,"Acceleration":19.5,"Year":"1973-01-01","Origin":"Europe"},{"Name":"opel manta","Miles_per_Gallon":24,"Cylinders":4,"Displacement":116,"Horsepower":75,"Weight_in_lbs":2158,"Acceleration":15.5,"Year":"1973-01-01","Origin":"Europe"},{"Name":"audi 100ls","Miles_per_Gallon":20,"Cylinders":4,"Displacement":114,"Horsepower":91,"Weight_in_lbs":2582,"Acceleration":14,"Year":"1973-01-01","Origin":"Europe"},{"Name":"volvo 144ea","Miles_per_Gallon":19,"Cylinders":4,"Displacement":121,"Horsepower":112,"Weight_in_lbs":2868,"Acceleration":15.5,"Year":"1973-01-01","Origin":"Europe"},{"Name":"dodge dart custom","Miles_per_Gallon":15,"Cylinders":8,"Displacement":318,"Horsepower":150,"Weight_in_lbs":3399,"Acceleration":11,"Year":"1973-01-01","Origin":"USA"},{"Name":"saab 99le","Miles_per_Gallon":24,"Cylinders":4,"Displacement":121,"Horsepower":110,"Weight_in_lbs":2660,"Acceleration":14,"Year":"1973-01-01","Origin":"Europe"},{"Name":"toyota mark ii","Miles_per_Gallon":20,"Cylinders":6,"Displacement":156,"Horsepower":122,"Weight_in_lbs":2807,"Acceleration":13.5,"Year":"1973-01-01","Origin":"Japan"},{"Name":"oldsmobile omega","Miles_per_Gallon":11,"Cylinders":8,"Displacement":350,"Horsepower":180,"Weight_in_lbs":3664,"Acceleration":11,"Year":"1973-01-01","Origin":"USA"},{"Name":"plymouth duster","Miles_per_Gallon":20,"Cylinders":6,"Displacement":198,"Horsepower":95,"Weight_in_lbs":3102,"Acceleration":16.5,"Year":"1974-01-01","Origin":"USA"},{"Name":"ford maverick","Miles_per_Gallon":21,"Cylinders":6,"Displacement":200,"Horsepower":null,"Weight_in_lbs":2875,"Acceleration":17,"Year":"1974-01-01","Origin":"USA"},{"Name":"amc hornet","Miles_per_Gallon":19,"Cylinders":6,"Displacement":232,"Horsepower":100,"Weight_in_lbs":2901,"Acceleration":16,"Year":"1974-01-01","Origin":"USA"},{"Name":"chevrolet nova","Miles_per_Gallon":15,"Cylinders":6,"Displacement":250,"Horsepower":100,"Weight_in_lbs":3336,"Acceleration":17,"Year":"1974-01-01","Origin":"USA"},{"Name":"datsun b210","Miles_per_Gallon":31,"Cylinders":4,"Displacement":79,"Horsepower":67,"Weight_in_lbs":1950,"Acceleration":19,"Year":"1974-01-01","Origin":"Japan"},{"Name":"ford pinto","Miles_per_Gallon":26,"Cylinders":4,"Displacement":122,"Horsepower":80,"Weight_in_lbs":2451,"Acceleration":16.5,"Year":"1974-01-01","Origin":"USA"},{"Name":"toyota corolla 1200","Miles_per_Gallon":32,"Cylinders":4,"Displacement":71,"Horsepower":65,"Weight_in_lbs":1836,"Acceleration":21,"Year":"1974-01-01","Origin":"Japan"},{"Name":"chevrolet vega","Miles_per_Gallon":25,"Cylinders":4,"Displacement":140,"Horsepower":75,"Weight_in_lbs":2542,"Acceleration":17,"Year":"1974-01-01","Origin":"USA"},{"Name":"chevrolet chevelle malibu classic","Miles_per_Gallon":16,"Cylinders":6,"Displacement":250,"Horsepower":100,"Weight_in_lbs":3781,"Acceleration":17,"Year":"1974-01-01","Origin":"USA"},{"Name":"amc matador","Miles_per_Gallon":16,"Cylinders":6,"Displacement":258,"Horsepower":110,"Weight_in_lbs":3632,"Acceleration":18,"Year":"1974-01-01","Origin":"USA"},{"Name":"plymouth satellite sebring","Miles_per_Gallon":18,"Cylinders":6,"Displacement":225,"Horsepower":105,"Weight_in_lbs":3613,"Acceleration":16.5,"Year":"1974-01-01","Origin":"USA"},{"Name":"ford gran torino","Miles_per_Gallon":16,"Cylinders":8,"Displacement":302,"Horsepower":140,"Weight_in_lbs":4141,"Acceleration":14,"Year":"1974-01-01","Origin":"USA"},{"Name":"buick century luxus (sw)","Miles_per_Gallon":13,"Cylinders":8,"Displacement":350,"Horsepower":150,"Weight_in_lbs":4699,"Acceleration":14.5,"Year":"1974-01-01","Origin":"USA"},{"Name":"dodge coronet custom (sw)","Miles_per_Gallon":14,"Cylinders":8,"Displacement":318,"Horsepower":150,"Weight_in_lbs":4457,"Acceleration":13.5,"Year":"1974-01-01","Origin":"USA"},{"Name":"ford gran torino (sw)","Miles_per_Gallon":14,"Cylinders":8,"Displacement":302,"Horsepower":140,"Weight_in_lbs":4638,"Acceleration":16,"Year":"1974-01-01","Origin":"USA"},{"Name":"amc matador (sw)","Miles_per_Gallon":14,"Cylinders":8,"Displacement":304,"Horsepower":150,"Weight_in_lbs":4257,"Acceleration":15.5,"Year":"1974-01-01","Origin":"USA"},{"Name":"audi fox","Miles_per_Gallon":29,"Cylinders":4,"Displacement":98,"Horsepower":83,"Weight_in_lbs":2219,"Acceleration":16.5,"Year":"1974-01-01","Origin":"Europe"},{"Name":"volkswagen dasher","Miles_per_Gallon":26,"Cylinders":4,"Displacement":79,"Horsepower":67,"Weight_in_lbs":1963,"Acceleration":15.5,"Year":"1974-01-01","Origin":"Europe"},{"Name":"opel manta","Miles_per_Gallon":26,"Cylinders":4,"Displacement":97,"Horsepower":78,"Weight_in_lbs":2300,"Acceleration":14.5,"Year":"1974-01-01","Origin":"Europe"},{"Name":"toyota corona","Miles_per_Gallon":31,"Cylinders":4,"Displacement":76,"Horsepower":52,"Weight_in_lbs":1649,"Acceleration":16.5,"Year":"1974-01-01","Origin":"Japan"},{"Name":"datsun 710","Miles_per_Gallon":32,"Cylinders":4,"Displacement":83,"Horsepower":61,"Weight_in_lbs":2003,"Acceleration":19,"Year":"1974-01-01","Origin":"Japan"},{"Name":"dodge colt","Miles_per_Gallon":28,"Cylinders":4,"Displacement":90,"Horsepower":75,"Weight_in_lbs":2125,"Acceleration":14.5,"Year":"1974-01-01","Origin":"USA"},{"Name":"fiat 128","Miles_per_Gallon":24,"Cylinders":4,"Displacement":90,"Horsepower":75,"Weight_in_lbs":2108,"Acceleration":15.5,"Year":"1974-01-01","Origin":"Europe"},{"Name":"fiat 124 tc","Miles_per_Gallon":26,"Cylinders":4,"Displacement":116,"Horsepower":75,"Weight_in_lbs":2246,"Acceleration":14,"Year":"1974-01-01","Origin":"Europe"},{"Name":"honda civic","Miles_per_Gallon":24,"Cylinders":4,"Displacement":120,"Horsepower":97,"Weight_in_lbs":2489,"Acceleration":15,"Year":"1974-01-01","Origin":"Japan"},{"Name":"subaru","Miles_per_Gallon":26,"Cylinders":4,"Displacement":108,"Horsepower":93,"Weight_in_lbs":2391,"Acceleration":15.5,"Year":"1974-01-01","Origin":"Japan"},{"Name":"fiat x1.9","Miles_per_Gallon":31,"Cylinders":4,"Displacement":79,"Horsepower":67,"Weight_in_lbs":2000,"Acceleration":16,"Year":"1974-01-01","Origin":"Europe"},{"Name":"plymouth valiant custom","Miles_per_Gallon":19,"Cylinders":6,"Displacement":225,"Horsepower":95,"Weight_in_lbs":3264,"Acceleration":16,"Year":"1975-01-01","Origin":"USA"},{"Name":"chevrolet nova","Miles_per_Gallon":18,"Cylinders":6,"Displacement":250,"Horsepower":105,"Weight_in_lbs":3459,"Acceleration":16,"Year":"1975-01-01","Origin":"USA"},{"Name":"mercury monarch","Miles_per_Gallon":15,"Cylinders":6,"Displacement":250,"Horsepower":72,"Weight_in_lbs":3432,"Acceleration":21,"Year":"1975-01-01","Origin":"USA"},{"Name":"ford maverick","Miles_per_Gallon":15,"Cylinders":6,"Displacement":250,"Horsepower":72,"Weight_in_lbs":3158,"Acceleration":19.5,"Year":"1975-01-01","Origin":"USA"},{"Name":"pontiac catalina","Miles_per_Gallon":16,"Cylinders":8,"Displacement":400,"Horsepower":170,"Weight_in_lbs":4668,"Acceleration":11.5,"Year":"1975-01-01","Origin":"USA"},{"Name":"chevrolet bel air","Miles_per_Gallon":15,"Cylinders":8,"Displacement":350,"Horsepower":145,"Weight_in_lbs":4440,"Acceleration":14,"Year":"1975-01-01","Origin":"USA"},{"Name":"plymouth grand fury","Miles_per_Gallon":16,"Cylinders":8,"Displacement":318,"Horsepower":150,"Weight_in_lbs":4498,"Acceleration":14.5,"Year":"1975-01-01","Origin":"USA"},{"Name":"ford ltd","Miles_per_Gallon":14,"Cylinders":8,"Displacement":351,"Horsepower":148,"Weight_in_lbs":4657,"Acceleration":13.5,"Year":"1975-01-01","Origin":"USA"},{"Name":"buick century","Miles_per_Gallon":17,"Cylinders":6,"Displacement":231,"Horsepower":110,"Weight_in_lbs":3907,"Acceleration":21,"Year":"1975-01-01","Origin":"USA"},{"Name":"chevroelt chevelle malibu","Miles_per_Gallon":16,"Cylinders":6,"Displacement":250,"Horsepower":105,"Weight_in_lbs":3897,"Acceleration":18.5,"Year":"1975-01-01","Origin":"USA"},{"Name":"amc matador","Miles_per_Gallon":15,"Cylinders":6,"Displacement":258,"Horsepower":110,"Weight_in_lbs":3730,"Acceleration":19,"Year":"1975-01-01","Origin":"USA"},{"Name":"plymouth fury","Miles_per_Gallon":18,"Cylinders":6,"Displacement":225,"Horsepower":95,"Weight_in_lbs":3785,"Acceleration":19,"Year":"1975-01-01","Origin":"USA"},{"Name":"buick skyhawk","Miles_per_Gallon":21,"Cylinders":6,"Displacement":231,"Horsepower":110,"Weight_in_lbs":3039,"Acceleration":15,"Year":"1975-01-01","Origin":"USA"},{"Name":"chevrolet monza 2+2","Miles_per_Gallon":20,"Cylinders":8,"Displacement":262,"Horsepower":110,"Weight_in_lbs":3221,"Acceleration":13.5,"Year":"1975-01-01","Origin":"USA"},{"Name":"ford mustang ii","Miles_per_Gallon":13,"Cylinders":8,"Displacement":302,"Horsepower":129,"Weight_in_lbs":3169,"Acceleration":12,"Year":"1975-01-01","Origin":"USA"},{"Name":"toyota corolla","Miles_per_Gallon":29,"Cylinders":4,"Displacement":97,"Horsepower":75,"Weight_in_lbs":2171,"Acceleration":16,"Year":"1975-01-01","Origin":"Japan"},{"Name":"ford pinto","Miles_per_Gallon":23,"Cylinders":4,"Displacement":140,"Horsepower":83,"Weight_in_lbs":2639,"Acceleration":17,"Year":"1975-01-01","Origin":"USA"},{"Name":"amc gremlin","Miles_per_Gallon":20,"Cylinders":6,"Displacement":232,"Horsepower":100,"Weight_in_lbs":2914,"Acceleration":16,"Year":"1975-01-01","Origin":"USA"},{"Name":"pontiac astro","Miles_per_Gallon":23,"Cylinders":4,"Displacement":140,"Horsepower":78,"Weight_in_lbs":2592,"Acceleration":18.5,"Year":"1975-01-01","Origin":"USA"},{"Name":"toyota corona","Miles_per_Gallon":24,"Cylinders":4,"Displacement":134,"Horsepower":96,"Weight_in_lbs":2702,"Acceleration":13.5,"Year":"1975-01-01","Origin":"Japan"},{"Name":"volkswagen dasher","Miles_per_Gallon":25,"Cylinders":4,"Displacement":90,"Horsepower":71,"Weight_in_lbs":2223,"Acceleration":16.5,"Year":"1975-01-01","Origin":"Europe"},{"Name":"datsun 710","Miles_per_Gallon":24,"Cylinders":4,"Displacement":119,"Horsepower":97,"Weight_in_lbs":2545,"Acceleration":17,"Year":"1975-01-01","Origin":"Japan"},{"Name":"ford pinto","Miles_per_Gallon":18,"Cylinders":6,"Displacement":171,"Horsepower":97,"Weight_in_lbs":2984,"Acceleration":14.5,"Year":"1975-01-01","Origin":"USA"},{"Name":"volkswagen rabbit","Miles_per_Gallon":29,"Cylinders":4,"Displacement":90,"Horsepower":70,"Weight_in_lbs":1937,"Acceleration":14,"Year":"1975-01-01","Origin":"Europe"},{"Name":"amc pacer","Miles_per_Gallon":19,"Cylinders":6,"Displacement":232,"Horsepower":90,"Weight_in_lbs":3211,"Acceleration":17,"Year":"1975-01-01","Origin":"USA"},{"Name":"audi 100ls","Miles_per_Gallon":23,"Cylinders":4,"Displacement":115,"Horsepower":95,"Weight_in_lbs":2694,"Acceleration":15,"Year":"1975-01-01","Origin":"Europe"},{"Name":"peugeot 504","Miles_per_Gallon":23,"Cylinders":4,"Displacement":120,"Horsepower":88,"Weight_in_lbs":2957,"Acceleration":17,"Year":"1975-01-01","Origin":"Europe"},{"Name":"volvo 244dl","Miles_per_Gallon":22,"Cylinders":4,"Displacement":121,"Horsepower":98,"Weight_in_lbs":2945,"Acceleration":14.5,"Year":"1975-01-01","Origin":"Europe"},{"Name":"saab 99le","Miles_per_Gallon":25,"Cylinders":4,"Displacement":121,"Horsepower":115,"Weight_in_lbs":2671,"Acceleration":13.5,"Year":"1975-01-01","Origin":"Europe"},{"Name":"honda civic cvcc","Miles_per_Gallon":33,"Cylinders":4,"Displacement":91,"Horsepower":53,"Weight_in_lbs":1795,"Acceleration":17.5,"Year":"1975-01-01","Origin":"Japan"},{"Name":"fiat 131","Miles_per_Gallon":28,"Cylinders":4,"Displacement":107,"Horsepower":86,"Weight_in_lbs":2464,"Acceleration":15.5,"Year":"1976-01-01","Origin":"Europe"},{"Name":"opel 1900","Miles_per_Gallon":25,"Cylinders":4,"Displacement":116,"Horsepower":81,"Weight_in_lbs":2220,"Acceleration":16.9,"Year":"1976-01-01","Origin":"Europe"},{"Name":"capri ii","Miles_per_Gallon":25,"Cylinders":4,"Displacement":140,"Horsepower":92,"Weight_in_lbs":2572,"Acceleration":14.9,"Year":"1976-01-01","Origin":"USA"},{"Name":"dodge colt","Miles_per_Gallon":26,"Cylinders":4,"Displacement":98,"Horsepower":79,"Weight_in_lbs":2255,"Acceleration":17.7,"Year":"1976-01-01","Origin":"USA"},{"Name":"renault 12tl","Miles_per_Gallon":27,"Cylinders":4,"Displacement":101,"Horsepower":83,"Weight_in_lbs":2202,"Acceleration":15.3,"Year":"1976-01-01","Origin":"Europe"},{"Name":"chevrolet chevelle malibu classic","Miles_per_Gallon":17.5,"Cylinders":8,"Displacement":305,"Horsepower":140,"Weight_in_lbs":4215,"Acceleration":13,"Year":"1976-01-01","Origin":"USA"},{"Name":"dodge coronet brougham","Miles_per_Gallon":16,"Cylinders":8,"Displacement":318,"Horsepower":150,"Weight_in_lbs":4190,"Acceleration":13,"Year":"1976-01-01","Origin":"USA"},{"Name":"amc matador","Miles_per_Gallon":15.5,"Cylinders":8,"Displacement":304,"Horsepower":120,"Weight_in_lbs":3962,"Acceleration":13.9,"Year":"1976-01-01","Origin":"USA"},{"Name":"ford gran torino","Miles_per_Gallon":14.5,"Cylinders":8,"Displacement":351,"Horsepower":152,"Weight_in_lbs":4215,"Acceleration":12.8,"Year":"1976-01-01","Origin":"USA"},{"Name":"plymouth valiant","Miles_per_Gallon":22,"Cylinders":6,"Displacement":225,"Horsepower":100,"Weight_in_lbs":3233,"Acceleration":15.4,"Year":"1976-01-01","Origin":"USA"},{"Name":"chevrolet nova","Miles_per_Gallon":22,"Cylinders":6,"Displacement":250,"Horsepower":105,"Weight_in_lbs":3353,"Acceleration":14.5,"Year":"1976-01-01","Origin":"USA"},{"Name":"ford maverick","Miles_per_Gallon":24,"Cylinders":6,"Displacement":200,"Horsepower":81,"Weight_in_lbs":3012,"Acceleration":17.6,"Year":"1976-01-01","Origin":"USA"},{"Name":"amc hornet","Miles_per_Gallon":22.5,"Cylinders":6,"Displacement":232,"Horsepower":90,"Weight_in_lbs":3085,"Acceleration":17.6,"Year":"1976-01-01","Origin":"USA"},{"Name":"chevrolet chevette","Miles_per_Gallon":29,"Cylinders":4,"Displacement":85,"Horsepower":52,"Weight_in_lbs":2035,"Acceleration":22.2,"Year":"1976-01-01","Origin":"USA"},{"Name":"chevrolet woody","Miles_per_Gallon":24.5,"Cylinders":4,"Displacement":98,"Horsepower":60,"Weight_in_lbs":2164,"Acceleration":22.1,"Year":"1976-01-01","Origin":"USA"},{"Name":"vw rabbit","Miles_per_Gallon":29,"Cylinders":4,"Displacement":90,"Horsepower":70,"Weight_in_lbs":1937,"Acceleration":14.2,"Year":"1976-01-01","Origin":"Europe"},{"Name":"honda civic","Miles_per_Gallon":33,"Cylinders":4,"Displacement":91,"Horsepower":53,"Weight_in_lbs":1795,"Acceleration":17.4,"Year":"1976-01-01","Origin":"Japan"},{"Name":"dodge aspen se","Miles_per_Gallon":20,"Cylinders":6,"Displacement":225,"Horsepower":100,"Weight_in_lbs":3651,"Acceleration":17.7,"Year":"1976-01-01","Origin":"USA"},{"Name":"ford granada ghia","Miles_per_Gallon":18,"Cylinders":6,"Displacement":250,"Horsepower":78,"Weight_in_lbs":3574,"Acceleration":21,"Year":"1976-01-01","Origin":"USA"},{"Name":"pontiac ventura sj","Miles_per_Gallon":18.5,"Cylinders":6,"Displacement":250,"Horsepower":110,"Weight_in_lbs":3645,"Acceleration":16.2,"Year":"1976-01-01","Origin":"USA"},{"Name":"amc pacer d/l","Miles_per_Gallon":17.5,"Cylinders":6,"Displacement":258,"Horsepower":95,"Weight_in_lbs":3193,"Acceleration":17.8,"Year":"1976-01-01","Origin":"USA"},{"Name":"volkswagen rabbit","Miles_per_Gallon":29.5,"Cylinders":4,"Displacement":97,"Horsepower":71,"Weight_in_lbs":1825,"Acceleration":12.2,"Year":"1976-01-01","Origin":"Europe"},{"Name":"datsun b-210","Miles_per_Gallon":32,"Cylinders":4,"Displacement":85,"Horsepower":70,"Weight_in_lbs":1990,"Acceleration":17,"Year":"1976-01-01","Origin":"Japan"},{"Name":"toyota corolla","Miles_per_Gallon":28,"Cylinders":4,"Displacement":97,"Horsepower":75,"Weight_in_lbs":2155,"Acceleration":16.4,"Year":"1976-01-01","Origin":"Japan"},{"Name":"ford pinto","Miles_per_Gallon":26.5,"Cylinders":4,"Displacement":140,"Horsepower":72,"Weight_in_lbs":2565,"Acceleration":13.6,"Year":"1976-01-01","Origin":"USA"},{"Name":"volvo 245","Miles_per_Gallon":20,"Cylinders":4,"Displacement":130,"Horsepower":102,"Weight_in_lbs":3150,"Acceleration":15.7,"Year":"1976-01-01","Origin":"Europe"},{"Name":"plymouth volare premier v8","Miles_per_Gallon":13,"Cylinders":8,"Displacement":318,"Horsepower":150,"Weight_in_lbs":3940,"Acceleration":13.2,"Year":"1976-01-01","Origin":"USA"},{"Name":"peugeot 504","Miles_per_Gallon":19,"Cylinders":4,"Displacement":120,"Horsepower":88,"Weight_in_lbs":3270,"Acceleration":21.9,"Year":"1976-01-01","Origin":"Europe"},{"Name":"toyota mark ii","Miles_per_Gallon":19,"Cylinders":6,"Displacement":156,"Horsepower":108,"Weight_in_lbs":2930,"Acceleration":15.5,"Year":"1976-01-01","Origin":"Japan"},{"Name":"mercedes-benz 280s","Miles_per_Gallon":16.5,"Cylinders":6,"Displacement":168,"Horsepower":120,"Weight_in_lbs":3820,"Acceleration":16.7,"Year":"1976-01-01","Origin":"Europe"},{"Name":"cadillac seville","Miles_per_Gallon":16.5,"Cylinders":8,"Displacement":350,"Horsepower":180,"Weight_in_lbs":4380,"Acceleration":12.1,"Year":"1976-01-01","Origin":"USA"},{"Name":"chevy c10","Miles_per_Gallon":13,"Cylinders":8,"Displacement":350,"Horsepower":145,"Weight_in_lbs":4055,"Acceleration":12,"Year":"1976-01-01","Origin":"USA"},{"Name":"ford f108","Miles_per_Gallon":13,"Cylinders":8,"Displacement":302,"Horsepower":130,"Weight_in_lbs":3870,"Acceleration":15,"Year":"1976-01-01","Origin":"USA"},{"Name":"dodge d100","Miles_per_Gallon":13,"Cylinders":8,"Displacement":318,"Horsepower":150,"Weight_in_lbs":3755,"Acceleration":14,"Year":"1976-01-01","Origin":"USA"},{"Name":"honda Accelerationord cvcc","Miles_per_Gallon":31.5,"Cylinders":4,"Displacement":98,"Horsepower":68,"Weight_in_lbs":2045,"Acceleration":18.5,"Year":"1977-01-01","Origin":"Japan"},{"Name":"buick opel isuzu deluxe","Miles_per_Gallon":30,"Cylinders":4,"Displacement":111,"Horsepower":80,"Weight_in_lbs":2155,"Acceleration":14.8,"Year":"1977-01-01","Origin":"USA"},{"Name":"renault 5 gtl","Miles_per_Gallon":36,"Cylinders":4,"Displacement":79,"Horsepower":58,"Weight_in_lbs":1825,"Acceleration":18.6,"Year":"1977-01-01","Origin":"Europe"},{"Name":"plymouth arrow gs","Miles_per_Gallon":25.5,"Cylinders":4,"Displacement":122,"Horsepower":96,"Weight_in_lbs":2300,"Acceleration":15.5,"Year":"1977-01-01","Origin":"USA"},{"Name":"datsun f-10 hatchback","Miles_per_Gallon":33.5,"Cylinders":4,"Displacement":85,"Horsepower":70,"Weight_in_lbs":1945,"Acceleration":16.8,"Year":"1977-01-01","Origin":"Japan"},{"Name":"chevrolet caprice classic","Miles_per_Gallon":17.5,"Cylinders":8,"Displacement":305,"Horsepower":145,"Weight_in_lbs":3880,"Acceleration":12.5,"Year":"1977-01-01","Origin":"USA"},{"Name":"oldsmobile cutlass supreme","Miles_per_Gallon":17,"Cylinders":8,"Displacement":260,"Horsepower":110,"Weight_in_lbs":4060,"Acceleration":19,"Year":"1977-01-01","Origin":"USA"},{"Name":"dodge monaco brougham","Miles_per_Gallon":15.5,"Cylinders":8,"Displacement":318,"Horsepower":145,"Weight_in_lbs":4140,"Acceleration":13.7,"Year":"1977-01-01","Origin":"USA"},{"Name":"mercury cougar brougham","Miles_per_Gallon":15,"Cylinders":8,"Displacement":302,"Horsepower":130,"Weight_in_lbs":4295,"Acceleration":14.9,"Year":"1977-01-01","Origin":"USA"},{"Name":"chevrolet concours","Miles_per_Gallon":17.5,"Cylinders":6,"Displacement":250,"Horsepower":110,"Weight_in_lbs":3520,"Acceleration":16.4,"Year":"1977-01-01","Origin":"USA"},{"Name":"buick skylark","Miles_per_Gallon":20.5,"Cylinders":6,"Displacement":231,"Horsepower":105,"Weight_in_lbs":3425,"Acceleration":16.9,"Year":"1977-01-01","Origin":"USA"},{"Name":"plymouth volare custom","Miles_per_Gallon":19,"Cylinders":6,"Displacement":225,"Horsepower":100,"Weight_in_lbs":3630,"Acceleration":17.7,"Year":"1977-01-01","Origin":"USA"},{"Name":"ford granada","Miles_per_Gallon":18.5,"Cylinders":6,"Displacement":250,"Horsepower":98,"Weight_in_lbs":3525,"Acceleration":19,"Year":"1977-01-01","Origin":"USA"},{"Name":"pontiac grand prix lj","Miles_per_Gallon":16,"Cylinders":8,"Displacement":400,"Horsepower":180,"Weight_in_lbs":4220,"Acceleration":11.1,"Year":"1977-01-01","Origin":"USA"},{"Name":"chevrolet monte carlo landau","Miles_per_Gallon":15.5,"Cylinders":8,"Displacement":350,"Horsepower":170,"Weight_in_lbs":4165,"Acceleration":11.4,"Year":"1977-01-01","Origin":"USA"},{"Name":"chrysler cordoba","Miles_per_Gallon":15.5,"Cylinders":8,"Displacement":400,"Horsepower":190,"Weight_in_lbs":4325,"Acceleration":12.2,"Year":"1977-01-01","Origin":"USA"},{"Name":"ford thunderbird","Miles_per_Gallon":16,"Cylinders":8,"Displacement":351,"Horsepower":149,"Weight_in_lbs":4335,"Acceleration":14.5,"Year":"1977-01-01","Origin":"USA"},{"Name":"volkswagen rabbit custom","Miles_per_Gallon":29,"Cylinders":4,"Displacement":97,"Horsepower":78,"Weight_in_lbs":1940,"Acceleration":14.5,"Year":"1977-01-01","Origin":"Europe"},{"Name":"pontiac sunbird coupe","Miles_per_Gallon":24.5,"Cylinders":4,"Displacement":151,"Horsepower":88,"Weight_in_lbs":2740,"Acceleration":16,"Year":"1977-01-01","Origin":"USA"},{"Name":"toyota corolla liftback","Miles_per_Gallon":26,"Cylinders":4,"Displacement":97,"Horsepower":75,"Weight_in_lbs":2265,"Acceleration":18.2,"Year":"1977-01-01","Origin":"Japan"},{"Name":"ford mustang ii 2+2","Miles_per_Gallon":25.5,"Cylinders":4,"Displacement":140,"Horsepower":89,"Weight_in_lbs":2755,"Acceleration":15.8,"Year":"1977-01-01","Origin":"USA"},{"Name":"chevrolet chevette","Miles_per_Gallon":30.5,"Cylinders":4,"Displacement":98,"Horsepower":63,"Weight_in_lbs":2051,"Acceleration":17,"Year":"1977-01-01","Origin":"USA"},{"Name":"dodge colt m/m","Miles_per_Gallon":33.5,"Cylinders":4,"Displacement":98,"Horsepower":83,"Weight_in_lbs":2075,"Acceleration":15.9,"Year":"1977-01-01","Origin":"USA"},{"Name":"subaru dl","Miles_per_Gallon":30,"Cylinders":4,"Displacement":97,"Horsepower":67,"Weight_in_lbs":1985,"Acceleration":16.4,"Year":"1977-01-01","Origin":"Japan"},{"Name":"volkswagen dasher","Miles_per_Gallon":30.5,"Cylinders":4,"Displacement":97,"Horsepower":78,"Weight_in_lbs":2190,"Acceleration":14.1,"Year":"1977-01-01","Origin":"Europe"},{"Name":"datsun 810","Miles_per_Gallon":22,"Cylinders":6,"Displacement":146,"Horsepower":97,"Weight_in_lbs":2815,"Acceleration":14.5,"Year":"1977-01-01","Origin":"Japan"},{"Name":"bmw 320i","Miles_per_Gallon":21.5,"Cylinders":4,"Displacement":121,"Horsepower":110,"Weight_in_lbs":2600,"Acceleration":12.8,"Year":"1977-01-01","Origin":"Europe"},{"Name":"mazda rx-4","Miles_per_Gallon":21.5,"Cylinders":3,"Displacement":80,"Horsepower":110,"Weight_in_lbs":2720,"Acceleration":13.5,"Year":"1977-01-01","Origin":"Japan"},{"Name":"volkswagen rabbit custom diesel","Miles_per_Gallon":43.1,"Cylinders":4,"Displacement":90,"Horsepower":48,"Weight_in_lbs":1985,"Acceleration":21.5,"Year":"1978-01-01","Origin":"Europe"},{"Name":"ford fiesta","Miles_per_Gallon":36.1,"Cylinders":4,"Displacement":98,"Horsepower":66,"Weight_in_lbs":1800,"Acceleration":14.4,"Year":"1978-01-01","Origin":"USA"},{"Name":"mazda glc deluxe","Miles_per_Gallon":32.8,"Cylinders":4,"Displacement":78,"Horsepower":52,"Weight_in_lbs":1985,"Acceleration":19.4,"Year":"1978-01-01","Origin":"Japan"},{"Name":"datsun b210 gx","Miles_per_Gallon":39.4,"Cylinders":4,"Displacement":85,"Horsepower":70,"Weight_in_lbs":2070,"Acceleration":18.6,"Year":"1978-01-01","Origin":"Japan"},{"Name":"honda civic cvcc","Miles_per_Gallon":36.1,"Cylinders":4,"Displacement":91,"Horsepower":60,"Weight_in_lbs":1800,"Acceleration":16.4,"Year":"1978-01-01","Origin":"Japan"},{"Name":"oldsmobile cutlass salon brougham","Miles_per_Gallon":19.9,"Cylinders":8,"Displacement":260,"Horsepower":110,"Weight_in_lbs":3365,"Acceleration":15.5,"Year":"1978-01-01","Origin":"USA"},{"Name":"dodge diplomat","Miles_per_Gallon":19.4,"Cylinders":8,"Displacement":318,"Horsepower":140,"Weight_in_lbs":3735,"Acceleration":13.2,"Year":"1978-01-01","Origin":"USA"},{"Name":"mercury monarch ghia","Miles_per_Gallon":20.2,"Cylinders":8,"Displacement":302,"Horsepower":139,"Weight_in_lbs":3570,"Acceleration":12.8,"Year":"1978-01-01","Origin":"USA"},{"Name":"pontiac phoenix lj","Miles_per_Gallon":19.2,"Cylinders":6,"Displacement":231,"Horsepower":105,"Weight_in_lbs":3535,"Acceleration":19.2,"Year":"1978-01-01","Origin":"USA"},{"Name":"chevrolet malibu","Miles_per_Gallon":20.5,"Cylinders":6,"Displacement":200,"Horsepower":95,"Weight_in_lbs":3155,"Acceleration":18.2,"Year":"1978-01-01","Origin":"USA"},{"Name":"ford fairmont (auto)","Miles_per_Gallon":20.2,"Cylinders":6,"Displacement":200,"Horsepower":85,"Weight_in_lbs":2965,"Acceleration":15.8,"Year":"1978-01-01","Origin":"USA"},{"Name":"ford fairmont (man)","Miles_per_Gallon":25.1,"Cylinders":4,"Displacement":140,"Horsepower":88,"Weight_in_lbs":2720,"Acceleration":15.4,"Year":"1978-01-01","Origin":"USA"},{"Name":"plymouth volare","Miles_per_Gallon":20.5,"Cylinders":6,"Displacement":225,"Horsepower":100,"Weight_in_lbs":3430,"Acceleration":17.2,"Year":"1978-01-01","Origin":"USA"},{"Name":"amc concord","Miles_per_Gallon":19.4,"Cylinders":6,"Displacement":232,"Horsepower":90,"Weight_in_lbs":3210,"Acceleration":17.2,"Year":"1978-01-01","Origin":"USA"},{"Name":"buick century special","Miles_per_Gallon":20.6,"Cylinders":6,"Displacement":231,"Horsepower":105,"Weight_in_lbs":3380,"Acceleration":15.8,"Year":"1978-01-01","Origin":"USA"},{"Name":"mercury zephyr","Miles_per_Gallon":20.8,"Cylinders":6,"Displacement":200,"Horsepower":85,"Weight_in_lbs":3070,"Acceleration":16.7,"Year":"1978-01-01","Origin":"USA"},{"Name":"dodge aspen","Miles_per_Gallon":18.6,"Cylinders":6,"Displacement":225,"Horsepower":110,"Weight_in_lbs":3620,"Acceleration":18.7,"Year":"1978-01-01","Origin":"USA"},{"Name":"amc concord d/l","Miles_per_Gallon":18.1,"Cylinders":6,"Displacement":258,"Horsepower":120,"Weight_in_lbs":3410,"Acceleration":15.1,"Year":"1978-01-01","Origin":"USA"},{"Name":"chevrolet monte carlo landau","Miles_per_Gallon":19.2,"Cylinders":8,"Displacement":305,"Horsepower":145,"Weight_in_lbs":3425,"Acceleration":13.2,"Year":"1978-01-01","Origin":"USA"},{"Name":"buick regal sport coupe (turbo)","Miles_per_Gallon":17.7,"Cylinders":6,"Displacement":231,"Horsepower":165,"Weight_in_lbs":3445,"Acceleration":13.4,"Year":"1978-01-01","Origin":"USA"},{"Name":"ford futura","Miles_per_Gallon":18.1,"Cylinders":8,"Displacement":302,"Horsepower":139,"Weight_in_lbs":3205,"Acceleration":11.2,"Year":"1978-01-01","Origin":"USA"},{"Name":"dodge magnum xe","Miles_per_Gallon":17.5,"Cylinders":8,"Displacement":318,"Horsepower":140,"Weight_in_lbs":4080,"Acceleration":13.7,"Year":"1978-01-01","Origin":"USA"},{"Name":"chevrolet chevette","Miles_per_Gallon":30,"Cylinders":4,"Displacement":98,"Horsepower":68,"Weight_in_lbs":2155,"Acceleration":16.5,"Year":"1978-01-01","Origin":"USA"},{"Name":"toyota corona","Miles_per_Gallon":27.5,"Cylinders":4,"Displacement":134,"Horsepower":95,"Weight_in_lbs":2560,"Acceleration":14.2,"Year":"1978-01-01","Origin":"Japan"},{"Name":"datsun 510","Miles_per_Gallon":27.2,"Cylinders":4,"Displacement":119,"Horsepower":97,"Weight_in_lbs":2300,"Acceleration":14.7,"Year":"1978-01-01","Origin":"Japan"},{"Name":"dodge omni","Miles_per_Gallon":30.9,"Cylinders":4,"Displacement":105,"Horsepower":75,"Weight_in_lbs":2230,"Acceleration":14.5,"Year":"1978-01-01","Origin":"USA"},{"Name":"toyota celica gt liftback","Miles_per_Gallon":21.1,"Cylinders":4,"Displacement":134,"Horsepower":95,"Weight_in_lbs":2515,"Acceleration":14.8,"Year":"1978-01-01","Origin":"Japan"},{"Name":"plymouth sapporo","Miles_per_Gallon":23.2,"Cylinders":4,"Displacement":156,"Horsepower":105,"Weight_in_lbs":2745,"Acceleration":16.7,"Year":"1978-01-01","Origin":"USA"},{"Name":"oldsmobile starfire sx","Miles_per_Gallon":23.8,"Cylinders":4,"Displacement":151,"Horsepower":85,"Weight_in_lbs":2855,"Acceleration":17.6,"Year":"1978-01-01","Origin":"USA"},{"Name":"datsun 200-sx","Miles_per_Gallon":23.9,"Cylinders":4,"Displacement":119,"Horsepower":97,"Weight_in_lbs":2405,"Acceleration":14.9,"Year":"1978-01-01","Origin":"Japan"},{"Name":"audi 5000","Miles_per_Gallon":20.3,"Cylinders":5,"Displacement":131,"Horsepower":103,"Weight_in_lbs":2830,"Acceleration":15.9,"Year":"1978-01-01","Origin":"Europe"},{"Name":"volvo 264gl","Miles_per_Gallon":17,"Cylinders":6,"Displacement":163,"Horsepower":125,"Weight_in_lbs":3140,"Acceleration":13.6,"Year":"1978-01-01","Origin":"Europe"},{"Name":"saab 99gle","Miles_per_Gallon":21.6,"Cylinders":4,"Displacement":121,"Horsepower":115,"Weight_in_lbs":2795,"Acceleration":15.7,"Year":"1978-01-01","Origin":"Europe"},{"Name":"peugeot 604sl","Miles_per_Gallon":16.2,"Cylinders":6,"Displacement":163,"Horsepower":133,"Weight_in_lbs":3410,"Acceleration":15.8,"Year":"1978-01-01","Origin":"Europe"},{"Name":"volkswagen scirocco","Miles_per_Gallon":31.5,"Cylinders":4,"Displacement":89,"Horsepower":71,"Weight_in_lbs":1990,"Acceleration":14.9,"Year":"1978-01-01","Origin":"Europe"},{"Name":"honda Accelerationord lx","Miles_per_Gallon":29.5,"Cylinders":4,"Displacement":98,"Horsepower":68,"Weight_in_lbs":2135,"Acceleration":16.6,"Year":"1978-01-01","Origin":"Japan"},{"Name":"pontiac lemans v6","Miles_per_Gallon":21.5,"Cylinders":6,"Displacement":231,"Horsepower":115,"Weight_in_lbs":3245,"Acceleration":15.4,"Year":"1979-01-01","Origin":"USA"},{"Name":"mercury zephyr 6","Miles_per_Gallon":19.8,"Cylinders":6,"Displacement":200,"Horsepower":85,"Weight_in_lbs":2990,"Acceleration":18.2,"Year":"1979-01-01","Origin":"USA"},{"Name":"ford fairmont 4","Miles_per_Gallon":22.3,"Cylinders":4,"Displacement":140,"Horsepower":88,"Weight_in_lbs":2890,"Acceleration":17.3,"Year":"1979-01-01","Origin":"USA"},{"Name":"amc concord dl 6","Miles_per_Gallon":20.2,"Cylinders":6,"Displacement":232,"Horsepower":90,"Weight_in_lbs":3265,"Acceleration":18.2,"Year":"1979-01-01","Origin":"USA"},{"Name":"dodge aspen 6","Miles_per_Gallon":20.6,"Cylinders":6,"Displacement":225,"Horsepower":110,"Weight_in_lbs":3360,"Acceleration":16.6,"Year":"1979-01-01","Origin":"USA"},{"Name":"chevrolet caprice classic","Miles_per_Gallon":17,"Cylinders":8,"Displacement":305,"Horsepower":130,"Weight_in_lbs":3840,"Acceleration":15.4,"Year":"1979-01-01","Origin":"USA"},{"Name":"ford ltd landau","Miles_per_Gallon":17.6,"Cylinders":8,"Displacement":302,"Horsepower":129,"Weight_in_lbs":3725,"Acceleration":13.4,"Year":"1979-01-01","Origin":"USA"},{"Name":"mercury grand marquis","Miles_per_Gallon":16.5,"Cylinders":8,"Displacement":351,"Horsepower":138,"Weight_in_lbs":3955,"Acceleration":13.2,"Year":"1979-01-01","Origin":"USA"},{"Name":"dodge st. regis","Miles_per_Gallon":18.2,"Cylinders":8,"Displacement":318,"Horsepower":135,"Weight_in_lbs":3830,"Acceleration":15.2,"Year":"1979-01-01","Origin":"USA"},{"Name":"buick estate wagon (sw)","Miles_per_Gallon":16.9,"Cylinders":8,"Displacement":350,"Horsepower":155,"Weight_in_lbs":4360,"Acceleration":14.9,"Year":"1979-01-01","Origin":"USA"},{"Name":"ford country squire (sw)","Miles_per_Gallon":15.5,"Cylinders":8,"Displacement":351,"Horsepower":142,"Weight_in_lbs":4054,"Acceleration":14.3,"Year":"1979-01-01","Origin":"USA"},{"Name":"chevrolet malibu classic (sw)","Miles_per_Gallon":19.2,"Cylinders":8,"Displacement":267,"Horsepower":125,"Weight_in_lbs":3605,"Acceleration":15,"Year":"1979-01-01","Origin":"USA"},{"Name":"chrysler lebaron town @ country (sw)","Miles_per_Gallon":18.5,"Cylinders":8,"Displacement":360,"Horsepower":150,"Weight_in_lbs":3940,"Acceleration":13,"Year":"1979-01-01","Origin":"USA"},{"Name":"vw rabbit custom","Miles_per_Gallon":31.9,"Cylinders":4,"Displacement":89,"Horsepower":71,"Weight_in_lbs":1925,"Acceleration":14,"Year":"1979-01-01","Origin":"Europe"},{"Name":"maxda glc deluxe","Miles_per_Gallon":34.1,"Cylinders":4,"Displacement":86,"Horsepower":65,"Weight_in_lbs":1975,"Acceleration":15.2,"Year":"1979-01-01","Origin":"Japan"},{"Name":"dodge colt hatchback custom","Miles_per_Gallon":35.7,"Cylinders":4,"Displacement":98,"Horsepower":80,"Weight_in_lbs":1915,"Acceleration":14.4,"Year":"1979-01-01","Origin":"USA"},{"Name":"amc spirit dl","Miles_per_Gallon":27.4,"Cylinders":4,"Displacement":121,"Horsepower":80,"Weight_in_lbs":2670,"Acceleration":15,"Year":"1979-01-01","Origin":"USA"},{"Name":"mercedes benz 300d","Miles_per_Gallon":25.4,"Cylinders":5,"Displacement":183,"Horsepower":77,"Weight_in_lbs":3530,"Acceleration":20.1,"Year":"1979-01-01","Origin":"Europe"},{"Name":"cadillac eldorado","Miles_per_Gallon":23,"Cylinders":8,"Displacement":350,"Horsepower":125,"Weight_in_lbs":3900,"Acceleration":17.4,"Year":"1979-01-01","Origin":"USA"},{"Name":"peugeot 504","Miles_per_Gallon":27.2,"Cylinders":4,"Displacement":141,"Horsepower":71,"Weight_in_lbs":3190,"Acceleration":24.8,"Year":"1979-01-01","Origin":"Europe"},{"Name":"oldsmobile cutlass salon brougham","Miles_per_Gallon":23.9,"Cylinders":8,"Displacement":260,"Horsepower":90,"Weight_in_lbs":3420,"Acceleration":22.2,"Year":"1979-01-01","Origin":"USA"},{"Name":"plymouth horizon","Miles_per_Gallon":34.2,"Cylinders":4,"Displacement":105,"Horsepower":70,"Weight_in_lbs":2200,"Acceleration":13.2,"Year":"1979-01-01","Origin":"USA"},{"Name":"plymouth horizon tc3","Miles_per_Gallon":34.5,"Cylinders":4,"Displacement":105,"Horsepower":70,"Weight_in_lbs":2150,"Acceleration":14.9,"Year":"1979-01-01","Origin":"USA"},{"Name":"datsun 210","Miles_per_Gallon":31.8,"Cylinders":4,"Displacement":85,"Horsepower":65,"Weight_in_lbs":2020,"Acceleration":19.2,"Year":"1979-01-01","Origin":"Japan"},{"Name":"fiat strada custom","Miles_per_Gallon":37.3,"Cylinders":4,"Displacement":91,"Horsepower":69,"Weight_in_lbs":2130,"Acceleration":14.7,"Year":"1979-01-01","Origin":"Europe"},{"Name":"buick skylark limited","Miles_per_Gallon":28.4,"Cylinders":4,"Displacement":151,"Horsepower":90,"Weight_in_lbs":2670,"Acceleration":16,"Year":"1979-01-01","Origin":"USA"},{"Name":"chevrolet citation","Miles_per_Gallon":28.8,"Cylinders":6,"Displacement":173,"Horsepower":115,"Weight_in_lbs":2595,"Acceleration":11.3,"Year":"1979-01-01","Origin":"USA"},{"Name":"oldsmobile omega brougham","Miles_per_Gallon":26.8,"Cylinders":6,"Displacement":173,"Horsepower":115,"Weight_in_lbs":2700,"Acceleration":12.9,"Year":"1979-01-01","Origin":"USA"},{"Name":"pontiac phoenix","Miles_per_Gallon":33.5,"Cylinders":4,"Displacement":151,"Horsepower":90,"Weight_in_lbs":2556,"Acceleration":13.2,"Year":"1979-01-01","Origin":"USA"},{"Name":"vw rabbit","Miles_per_Gallon":41.5,"Cylinders":4,"Displacement":98,"Horsepower":76,"Weight_in_lbs":2144,"Acceleration":14.7,"Year":"1980-01-01","Origin":"Europe"},{"Name":"toyota corolla tercel","Miles_per_Gallon":38.1,"Cylinders":4,"Displacement":89,"Horsepower":60,"Weight_in_lbs":1968,"Acceleration":18.8,"Year":"1980-01-01","Origin":"Japan"},{"Name":"chevrolet chevette","Miles_per_Gallon":32.1,"Cylinders":4,"Displacement":98,"Horsepower":70,"Weight_in_lbs":2120,"Acceleration":15.5,"Year":"1980-01-01","Origin":"USA"},{"Name":"datsun 310","Miles_per_Gallon":37.2,"Cylinders":4,"Displacement":86,"Horsepower":65,"Weight_in_lbs":2019,"Acceleration":16.4,"Year":"1980-01-01","Origin":"Japan"},{"Name":"chevrolet citation","Miles_per_Gallon":28,"Cylinders":4,"Displacement":151,"Horsepower":90,"Weight_in_lbs":2678,"Acceleration":16.5,"Year":"1980-01-01","Origin":"USA"},{"Name":"ford fairmont","Miles_per_Gallon":26.4,"Cylinders":4,"Displacement":140,"Horsepower":88,"Weight_in_lbs":2870,"Acceleration":18.1,"Year":"1980-01-01","Origin":"USA"},{"Name":"amc concord","Miles_per_Gallon":24.3,"Cylinders":4,"Displacement":151,"Horsepower":90,"Weight_in_lbs":3003,"Acceleration":20.1,"Year":"1980-01-01","Origin":"USA"},{"Name":"dodge aspen","Miles_per_Gallon":19.1,"Cylinders":6,"Displacement":225,"Horsepower":90,"Weight_in_lbs":3381,"Acceleration":18.7,"Year":"1980-01-01","Origin":"USA"},{"Name":"audi 4000","Miles_per_Gallon":34.3,"Cylinders":4,"Displacement":97,"Horsepower":78,"Weight_in_lbs":2188,"Acceleration":15.8,"Year":"1980-01-01","Origin":"Europe"},{"Name":"toyota corona liftback","Miles_per_Gallon":29.8,"Cylinders":4,"Displacement":134,"Horsepower":90,"Weight_in_lbs":2711,"Acceleration":15.5,"Year":"1980-01-01","Origin":"Japan"},{"Name":"mazda 626","Miles_per_Gallon":31.3,"Cylinders":4,"Displacement":120,"Horsepower":75,"Weight_in_lbs":2542,"Acceleration":17.5,"Year":"1980-01-01","Origin":"Japan"},{"Name":"datsun 510 hatchback","Miles_per_Gallon":37,"Cylinders":4,"Displacement":119,"Horsepower":92,"Weight_in_lbs":2434,"Acceleration":15,"Year":"1980-01-01","Origin":"Japan"},{"Name":"toyota corolla","Miles_per_Gallon":32.2,"Cylinders":4,"Displacement":108,"Horsepower":75,"Weight_in_lbs":2265,"Acceleration":15.2,"Year":"1980-01-01","Origin":"Japan"},{"Name":"mazda glc","Miles_per_Gallon":46.6,"Cylinders":4,"Displacement":86,"Horsepower":65,"Weight_in_lbs":2110,"Acceleration":17.9,"Year":"1980-01-01","Origin":"Japan"},{"Name":"dodge colt","Miles_per_Gallon":27.9,"Cylinders":4,"Displacement":156,"Horsepower":105,"Weight_in_lbs":2800,"Acceleration":14.4,"Year":"1980-01-01","Origin":"USA"},{"Name":"datsun 210","Miles_per_Gallon":40.8,"Cylinders":4,"Displacement":85,"Horsepower":65,"Weight_in_lbs":2110,"Acceleration":19.2,"Year":"1980-01-01","Origin":"Japan"},{"Name":"vw rabbit c (diesel)","Miles_per_Gallon":44.3,"Cylinders":4,"Displacement":90,"Horsepower":48,"Weight_in_lbs":2085,"Acceleration":21.7,"Year":"1980-01-01","Origin":"Europe"},{"Name":"vw dasher (diesel)","Miles_per_Gallon":43.4,"Cylinders":4,"Displacement":90,"Horsepower":48,"Weight_in_lbs":2335,"Acceleration":23.7,"Year":"1980-01-01","Origin":"Europe"},{"Name":"audi 5000s (diesel)","Miles_per_Gallon":36.4,"Cylinders":5,"Displacement":121,"Horsepower":67,"Weight_in_lbs":2950,"Acceleration":19.9,"Year":"1980-01-01","Origin":"Europe"},{"Name":"mercedes-benz 240d","Miles_per_Gallon":30,"Cylinders":4,"Displacement":146,"Horsepower":67,"Weight_in_lbs":3250,"Acceleration":21.8,"Year":"1980-01-01","Origin":"Europe"},{"Name":"honda civic 1500 gl","Miles_per_Gallon":44.6,"Cylinders":4,"Displacement":91,"Horsepower":67,"Weight_in_lbs":1850,"Acceleration":13.8,"Year":"1980-01-01","Origin":"Japan"},{"Name":"renault lecar deluxe","Miles_per_Gallon":40.9,"Cylinders":4,"Displacement":85,"Horsepower":null,"Weight_in_lbs":1835,"Acceleration":17.3,"Year":"1980-01-01","Origin":"Europe"},{"Name":"subaru dl","Miles_per_Gallon":33.8,"Cylinders":4,"Displacement":97,"Horsepower":67,"Weight_in_lbs":2145,"Acceleration":18,"Year":"1980-01-01","Origin":"Japan"},{"Name":"vokswagen rabbit","Miles_per_Gallon":29.8,"Cylinders":4,"Displacement":89,"Horsepower":62,"Weight_in_lbs":1845,"Acceleration":15.3,"Year":"1980-01-01","Origin":"Europe"},{"Name":"datsun 280-zx","Miles_per_Gallon":32.7,"Cylinders":6,"Displacement":168,"Horsepower":132,"Weight_in_lbs":2910,"Acceleration":11.4,"Year":"1980-01-01","Origin":"Japan"},{"Name":"mazda rx-7 gs","Miles_per_Gallon":23.7,"Cylinders":3,"Displacement":70,"Horsepower":100,"Weight_in_lbs":2420,"Acceleration":12.5,"Year":"1980-01-01","Origin":"Japan"},{"Name":"triumph tr7 coupe","Miles_per_Gallon":35,"Cylinders":4,"Displacement":122,"Horsepower":88,"Weight_in_lbs":2500,"Acceleration":15.1,"Year":"1980-01-01","Origin":"Europe"},{"Name":"ford mustang cobra","Miles_per_Gallon":23.6,"Cylinders":4,"Displacement":140,"Horsepower":null,"Weight_in_lbs":2905,"Acceleration":14.3,"Year":"1980-01-01","Origin":"USA"},{"Name":"honda Accelerationord","Miles_per_Gallon":32.4,"Cylinders":4,"Displacement":107,"Horsepower":72,"Weight_in_lbs":2290,"Acceleration":17,"Year":"1980-01-01","Origin":"Japan"},{"Name":"plymouth reliant","Miles_per_Gallon":27.2,"Cylinders":4,"Displacement":135,"Horsepower":84,"Weight_in_lbs":2490,"Acceleration":15.7,"Year":"1982-01-01","Origin":"USA"},{"Name":"buick skylark","Miles_per_Gallon":26.6,"Cylinders":4,"Displacement":151,"Horsepower":84,"Weight_in_lbs":2635,"Acceleration":16.4,"Year":"1982-01-01","Origin":"USA"},{"Name":"dodge aries wagon (sw)","Miles_per_Gallon":25.8,"Cylinders":4,"Displacement":156,"Horsepower":92,"Weight_in_lbs":2620,"Acceleration":14.4,"Year":"1982-01-01","Origin":"USA"},{"Name":"chevrolet citation","Miles_per_Gallon":23.5,"Cylinders":6,"Displacement":173,"Horsepower":110,"Weight_in_lbs":2725,"Acceleration":12.6,"Year":"1982-01-01","Origin":"USA"},{"Name":"plymouth reliant","Miles_per_Gallon":30,"Cylinders":4,"Displacement":135,"Horsepower":84,"Weight_in_lbs":2385,"Acceleration":12.9,"Year":"1982-01-01","Origin":"USA"},{"Name":"toyota starlet","Miles_per_Gallon":39.1,"Cylinders":4,"Displacement":79,"Horsepower":58,"Weight_in_lbs":1755,"Acceleration":16.9,"Year":"1982-01-01","Origin":"Japan"},{"Name":"plymouth champ","Miles_per_Gallon":39,"Cylinders":4,"Displacement":86,"Horsepower":64,"Weight_in_lbs":1875,"Acceleration":16.4,"Year":"1982-01-01","Origin":"USA"},{"Name":"honda civic 1300","Miles_per_Gallon":35.1,"Cylinders":4,"Displacement":81,"Horsepower":60,"Weight_in_lbs":1760,"Acceleration":16.1,"Year":"1982-01-01","Origin":"Japan"},{"Name":"subaru","Miles_per_Gallon":32.3,"Cylinders":4,"Displacement":97,"Horsepower":67,"Weight_in_lbs":2065,"Acceleration":17.8,"Year":"1982-01-01","Origin":"Japan"},{"Name":"datsun 210","Miles_per_Gallon":37,"Cylinders":4,"Displacement":85,"Horsepower":65,"Weight_in_lbs":1975,"Acceleration":19.4,"Year":"1982-01-01","Origin":"Japan"},{"Name":"toyota tercel","Miles_per_Gallon":37.7,"Cylinders":4,"Displacement":89,"Horsepower":62,"Weight_in_lbs":2050,"Acceleration":17.3,"Year":"1982-01-01","Origin":"Japan"},{"Name":"mazda glc 4","Miles_per_Gallon":34.1,"Cylinders":4,"Displacement":91,"Horsepower":68,"Weight_in_lbs":1985,"Acceleration":16,"Year":"1982-01-01","Origin":"Japan"},{"Name":"plymouth horizon 4","Miles_per_Gallon":34.7,"Cylinders":4,"Displacement":105,"Horsepower":63,"Weight_in_lbs":2215,"Acceleration":14.9,"Year":"1982-01-01","Origin":"USA"},{"Name":"ford escort 4w","Miles_per_Gallon":34.4,"Cylinders":4,"Displacement":98,"Horsepower":65,"Weight_in_lbs":2045,"Acceleration":16.2,"Year":"1982-01-01","Origin":"USA"},{"Name":"ford escort 2h","Miles_per_Gallon":29.9,"Cylinders":4,"Displacement":98,"Horsepower":65,"Weight_in_lbs":2380,"Acceleration":20.7,"Year":"1982-01-01","Origin":"USA"},{"Name":"volkswagen jetta","Miles_per_Gallon":33,"Cylinders":4,"Displacement":105,"Horsepower":74,"Weight_in_lbs":2190,"Acceleration":14.2,"Year":"1982-01-01","Origin":"Europe"},{"Name":"renault 18i","Miles_per_Gallon":34.5,"Cylinders":4,"Displacement":100,"Horsepower":null,"Weight_in_lbs":2320,"Acceleration":15.8,"Year":"1982-01-01","Origin":"Europe"},{"Name":"honda prelude","Miles_per_Gallon":33.7,"Cylinders":4,"Displacement":107,"Horsepower":75,"Weight_in_lbs":2210,"Acceleration":14.4,"Year":"1982-01-01","Origin":"Japan"},{"Name":"toyota corolla","Miles_per_Gallon":32.4,"Cylinders":4,"Displacement":108,"Horsepower":75,"Weight_in_lbs":2350,"Acceleration":16.8,"Year":"1982-01-01","Origin":"Japan"},{"Name":"datsun 200sx","Miles_per_Gallon":32.9,"Cylinders":4,"Displacement":119,"Horsepower":100,"Weight_in_lbs":2615,"Acceleration":14.8,"Year":"1982-01-01","Origin":"Japan"},{"Name":"mazda 626","Miles_per_Gallon":31.6,"Cylinders":4,"Displacement":120,"Horsepower":74,"Weight_in_lbs":2635,"Acceleration":18.3,"Year":"1982-01-01","Origin":"Japan"},{"Name":"peugeot 505s turbo diesel","Miles_per_Gallon":28.1,"Cylinders":4,"Displacement":141,"Horsepower":80,"Weight_in_lbs":3230,"Acceleration":20.4,"Year":"1982-01-01","Origin":"Europe"},{"Name":"saab 900s","Miles_per_Gallon":null,"Cylinders":4,"Displacement":121,"Horsepower":110,"Weight_in_lbs":2800,"Acceleration":15.4,"Year":"1982-01-01","Origin":"Europe"},{"Name":"volvo diesel","Miles_per_Gallon":30.7,"Cylinders":6,"Displacement":145,"Horsepower":76,"Weight_in_lbs":3160,"Acceleration":19.6,"Year":"1982-01-01","Origin":"Europe"},{"Name":"toyota cressida","Miles_per_Gallon":25.4,"Cylinders":6,"Displacement":168,"Horsepower":116,"Weight_in_lbs":2900,"Acceleration":12.6,"Year":"1982-01-01","Origin":"Japan"},{"Name":"datsun 810 maxima","Miles_per_Gallon":24.2,"Cylinders":6,"Displacement":146,"Horsepower":120,"Weight_in_lbs":2930,"Acceleration":13.8,"Year":"1982-01-01","Origin":"Japan"},{"Name":"buick century","Miles_per_Gallon":22.4,"Cylinders":6,"Displacement":231,"Horsepower":110,"Weight_in_lbs":3415,"Acceleration":15.8,"Year":"1982-01-01","Origin":"USA"},{"Name":"oldsmobile cutlass ls","Miles_per_Gallon":26.6,"Cylinders":8,"Displacement":350,"Horsepower":105,"Weight_in_lbs":3725,"Acceleration":19,"Year":"1982-01-01","Origin":"USA"},{"Name":"ford granada gl","Miles_per_Gallon":20.2,"Cylinders":6,"Displacement":200,"Horsepower":88,"Weight_in_lbs":3060,"Acceleration":17.1,"Year":"1982-01-01","Origin":"USA"},{"Name":"chrysler lebaron salon","Miles_per_Gallon":17.6,"Cylinders":6,"Displacement":225,"Horsepower":85,"Weight_in_lbs":3465,"Acceleration":16.6,"Year":"1982-01-01","Origin":"USA"},{"Name":"chevrolet cavalier","Miles_per_Gallon":28,"Cylinders":4,"Displacement":112,"Horsepower":88,"Weight_in_lbs":2605,"Acceleration":19.6,"Year":"1982-01-01","Origin":"USA"},{"Name":"chevrolet cavalier wagon","Miles_per_Gallon":27,"Cylinders":4,"Displacement":112,"Horsepower":88,"Weight_in_lbs":2640,"Acceleration":18.6,"Year":"1982-01-01","Origin":"USA"},{"Name":"chevrolet cavalier 2-door","Miles_per_Gallon":34,"Cylinders":4,"Displacement":112,"Horsepower":88,"Weight_in_lbs":2395,"Acceleration":18,"Year":"1982-01-01","Origin":"USA"},{"Name":"pontiac j2000 se hatchback","Miles_per_Gallon":31,"Cylinders":4,"Displacement":112,"Horsepower":85,"Weight_in_lbs":2575,"Acceleration":16.2,"Year":"1982-01-01","Origin":"USA"},{"Name":"dodge aries se","Miles_per_Gallon":29,"Cylinders":4,"Displacement":135,"Horsepower":84,"Weight_in_lbs":2525,"Acceleration":16,"Year":"1982-01-01","Origin":"USA"},{"Name":"pontiac phoenix","Miles_per_Gallon":27,"Cylinders":4,"Displacement":151,"Horsepower":90,"Weight_in_lbs":2735,"Acceleration":18,"Year":"1982-01-01","Origin":"USA"},{"Name":"ford fairmont futura","Miles_per_Gallon":24,"Cylinders":4,"Displacement":140,"Horsepower":92,"Weight_in_lbs":2865,"Acceleration":16.4,"Year":"1982-01-01","Origin":"USA"},{"Name":"amc concord dl","Miles_per_Gallon":23,"Cylinders":4,"Displacement":151,"Horsepower":null,"Weight_in_lbs":3035,"Acceleration":20.5,"Year":"1982-01-01","Origin":"USA"},{"Name":"volkswagen rabbit l","Miles_per_Gallon":36,"Cylinders":4,"Displacement":105,"Horsepower":74,"Weight_in_lbs":1980,"Acceleration":15.3,"Year":"1982-01-01","Origin":"Europe"},{"Name":"mazda glc custom l","Miles_per_Gallon":37,"Cylinders":4,"Displacement":91,"Horsepower":68,"Weight_in_lbs":2025,"Acceleration":18.2,"Year":"1982-01-01","Origin":"Japan"},{"Name":"mazda glc custom","Miles_per_Gallon":31,"Cylinders":4,"Displacement":91,"Horsepower":68,"Weight_in_lbs":1970,"Acceleration":17.6,"Year":"1982-01-01","Origin":"Japan"},{"Name":"plymouth horizon miser","Miles_per_Gallon":38,"Cylinders":4,"Displacement":105,"Horsepower":63,"Weight_in_lbs":2125,"Acceleration":14.7,"Year":"1982-01-01","Origin":"USA"},{"Name":"mercury lynx l","Miles_per_Gallon":36,"Cylinders":4,"Displacement":98,"Horsepower":70,"Weight_in_lbs":2125,"Acceleration":17.3,"Year":"1982-01-01","Origin":"USA"},{"Name":"nissan stanza xe","Miles_per_Gallon":36,"Cylinders":4,"Displacement":120,"Horsepower":88,"Weight_in_lbs":2160,"Acceleration":14.5,"Year":"1982-01-01","Origin":"Japan"},{"Name":"honda Accelerationord","Miles_per_Gallon":36,"Cylinders":4,"Displacement":107,"Horsepower":75,"Weight_in_lbs":2205,"Acceleration":14.5,"Year":"1982-01-01","Origin":"Japan"},{"Name":"toyota corolla","Miles_per_Gallon":34,"Cylinders":4,"Displacement":108,"Horsepower":70,"Weight_in_lbs":2245,"Acceleration":16.9,"Year":"1982-01-01","Origin":"Japan"},{"Name":"honda civic","Miles_per_Gallon":38,"Cylinders":4,"Displacement":91,"Horsepower":67,"Weight_in_lbs":1965,"Acceleration":15,"Year":"1982-01-01","Origin":"Japan"},{"Name":"honda civic (auto)","Miles_per_Gallon":32,"Cylinders":4,"Displacement":91,"Horsepower":67,"Weight_in_lbs":1965,"Acceleration":15.7,"Year":"1982-01-01","Origin":"Japan"},{"Name":"datsun 310 gx","Miles_per_Gallon":38,"Cylinders":4,"Displacement":91,"Horsepower":67,"Weight_in_lbs":1995,"Acceleration":16.2,"Year":"1982-01-01","Origin":"Japan"},{"Name":"buick century limited","Miles_per_Gallon":25,"Cylinders":6,"Displacement":181,"Horsepower":110,"Weight_in_lbs":2945,"Acceleration":16.4,"Year":"1982-01-01","Origin":"USA"},{"Name":"oldsmobile cutlass ciera (diesel)","Miles_per_Gallon":38,"Cylinders":6,"Displacement":262,"Horsepower":85,"Weight_in_lbs":3015,"Acceleration":17,"Year":"1982-01-01","Origin":"USA"},{"Name":"chrysler lebaron medallion","Miles_per_Gallon":26,"Cylinders":4,"Displacement":156,"Horsepower":92,"Weight_in_lbs":2585,"Acceleration":14.5,"Year":"1982-01-01","Origin":"USA"},{"Name":"ford granada l","Miles_per_Gallon":22,"Cylinders":6,"Displacement":232,"Horsepower":112,"Weight_in_lbs":2835,"Acceleration":14.7,"Year":"1982-01-01","Origin":"USA"},{"Name":"toyota celica gt","Miles_per_Gallon":32,"Cylinders":4,"Displacement":144,"Horsepower":96,"Weight_in_lbs":2665,"Acceleration":13.9,"Year":"1982-01-01","Origin":"Japan"},{"Name":"dodge charger 2.2","Miles_per_Gallon":36,"Cylinders":4,"Displacement":135,"Horsepower":84,"Weight_in_lbs":2370,"Acceleration":13,"Year":"1982-01-01","Origin":"USA"},{"Name":"chevrolet camaro","Miles_per_Gallon":27,"Cylinders":4,"Displacement":151,"Horsepower":90,"Weight_in_lbs":2950,"Acceleration":17.3,"Year":"1982-01-01","Origin":"USA"},{"Name":"ford mustang gl","Miles_per_Gallon":27,"Cylinders":4,"Displacement":140,"Horsepower":86,"Weight_in_lbs":2790,"Acceleration":15.6,"Year":"1982-01-01","Origin":"USA"},{"Name":"vw pickup","Miles_per_Gallon":44,"Cylinders":4,"Displacement":97,"Horsepower":52,"Weight_in_lbs":2130,"Acceleration":24.6,"Year":"1982-01-01","Origin":"Europe"},{"Name":"dodge rampage","Miles_per_Gallon":32,"Cylinders":4,"Displacement":135,"Horsepower":84,"Weight_in_lbs":2295,"Acceleration":11.6,"Year":"1982-01-01","Origin":"USA"},{"Name":"ford ranger","Miles_per_Gallon":28,"Cylinders":4,"Displacement":120,"Horsepower":79,"Weight_in_lbs":2625,"Acceleration":18.6,"Year":"1982-01-01","Origin":"USA"},{"Name":"chevy s-10","Miles_per_Gallon":31,"Cylinders":4,"Displacement":119,"Horsepower":82,"Weight_in_lbs":2720,"Acceleration":19.4,"Year":"1982-01-01","Origin":"USA"}]`),KG={data:[],fields:[],encodings:{},isLoading:!0,error:null};function ZG(e,t){switch(t.type){case"SET_DATA":return{...e,data:t.payload,isLoading:!1};case"SET_FIELDS":return{...e,fields:t.payload};case"ASSIGN_FIELD":return{...e,encodings:{...e.encodings,[t.channel]:t.field}};case"REMOVE_FIELD":{const n={...e.encodings};return delete n[t.channel],{...e,encodings:n}}case"CLEAR_ALL":return{...e,encodings:{}};case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_ERROR":return{...e,error:t.payload,isLoading:!1};case"TOGGLE_FIELD_TYPE":{const n=e.fields.map(i=>{if(i.name===t.fieldName){const o=i.type==="ordinal"?"nominal":"ordinal";return{...i,type:o}}return i}),r={...e.encodings};for(const[i,o]of Object.entries(r))if(o&&o.name===t.fieldName){const s=o.type==="ordinal"?"nominal":"ordinal";r[i]={...o,type:s}}return{...e,fields:n,encodings:r}}default:return e}}const G6=yi.createContext(null);function eY({children:e}){const[t,n]=yi.useReducer(ZG,KG);yi.useEffect(()=>{try{const a=QG;n({type:"SET_DATA",payload:a});const l=JG(a);n({type:"SET_FIELDS",payload:l})}catch(a){n({type:"SET_ERROR",payload:"Failed to load data"}),console.error(a)}},[]);const r=(a,l)=>{n({type:"ASSIGN_FIELD",channel:a,field:l})},i=a=>{n({type:"REMOVE_FIELD",channel:a})},o=()=>{n({type:"CLEAR_ALL"})},s=a=>{n({type:"TOGGLE_FIELD_TYPE",fieldName:a})};return ee.jsx(G6.Provider,{value:{state:t,assignField:r,removeField:i,clearAll:o,toggleFieldType:s},children:e})}function Tf(){const e=yi.useContext(G6);if(!e)throw new Error("useApp must be used within AppProvider");return e}const tY={quantitative:"var(--color-quantitative)",nominal:"var(--color-nominal)",ordinal:"var(--color-ordinal)",temporal:"var(--color-temporal)"},nY={quantitative:"Q",nominal:"N",ordinal:"O",temporal:"T"};function rY({field:e,index:t}){const{toggleFieldType:n}=Tf(),[r,i]=yi.useState(!1),[o,s]=yi.useState(!1),a=h=>{h.dataTransfer.setData("application/json",JSON.stringify(e)),h.dataTransfer.effectAllowed="copy",s(!0)},l=()=>{s(!1)},c=e.type==="ordinal"||e.type==="nominal",f=tY[e.type];return ee.jsxs("div",{className:"field-pill",draggable:!0,onDragStart:a,onDragEnd:l,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 14px",backgroundColor:r?"var(--color-bg-tertiary)":"var(--color-bg-elevated)",border:`1px solid ${r?"var(--color-border-hover)":"var(--color-border)"}`,borderRadius:"8px",cursor:o?"grabbing":"grab",fontSize:"13px",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",transform:r?"translateX(4px)":"translateX(0)",opacity:o?.5:1,animation:`slideIn 0.3s ease-out ${t*.03}s both`},children:[ee.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"22px",height:"22px",backgroundColor:f,color:"white",borderRadius:"5px",fontSize:"10px",fontWeight:600,letterSpacing:"0.02em",boxShadow:r?`0 0 12px ${f}60`:`0 0 6px ${f}30`,transition:"box-shadow 0.2s ease"},children:nY[e.type]}),ee.jsx("span",{style:{color:"var(--color-text-primary)",fontWeight:500,flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name}),c&&r&&ee.jsx("button",{onClick:h=>{h.stopPropagation(),n(e.name)},onMouseDown:h=>h.stopPropagation(),draggable:!1,title:e.type==="ordinal"?"Switch to Nominal (distinct colors)":"Switch to Ordinal (gradient colors)",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px",padding:0,backgroundColor:"var(--color-bg-tertiary)",border:"1px solid var(--color-border)",borderRadius:"4px",cursor:"pointer",color:"var(--color-text-secondary)",fontSize:"10px",fontWeight:600,flexShrink:0,transition:"all 0.15s ease"},onMouseOver:h=>{h.currentTarget.style.backgroundColor="var(--color-accent-glow)",h.currentTarget.style.borderColor="var(--color-accent)",h.currentTarget.style.color="var(--color-accent)"},onMouseOut:h=>{h.currentTarget.style.backgroundColor="var(--color-bg-tertiary)",h.currentTarget.style.borderColor="var(--color-border)",h.currentTarget.style.color="var(--color-text-secondary)"},children:e.type==="ordinal"?"N":"O"}),ee.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"var(--color-text-muted)",opacity:r?1:0,transition:"opacity 0.2s ease",flexShrink:0},children:[ee.jsx("circle",{cx:"9",cy:"5",r:"1",fill:"currentColor"}),ee.jsx("circle",{cx:"9",cy:"12",r:"1",fill:"currentColor"}),ee.jsx("circle",{cx:"9",cy:"19",r:"1",fill:"currentColor"}),ee.jsx("circle",{cx:"15",cy:"5",r:"1",fill:"currentColor"}),ee.jsx("circle",{cx:"15",cy:"12",r:"1",fill:"currentColor"}),ee.jsx("circle",{cx:"15",cy:"19",r:"1",fill:"currentColor"})]})]})}const iY=[{type:"quantitative",label:"Quantitative",color:"var(--color-quantitative)"},{type:"nominal",label:"Nominal",color:"var(--color-nominal)"},{type:"ordinal",label:"Ordinal",color:"var(--color-ordinal)"},{type:"temporal",label:"Temporal",color:"var(--color-temporal)"}];function oY(){const{state:e}=Tf();return ee.jsxs("aside",{style:{padding:"24px",backgroundColor:"var(--color-bg-secondary)",borderRight:"1px solid var(--color-border)",height:"100%",overflow:"auto",display:"flex",flexDirection:"column"},children:[ee.jsxs("div",{style:{marginBottom:"20px"},children:[ee.jsx("h2",{style:{fontFamily:"var(--font-display)",fontSize:"15px",fontWeight:400,color:"var(--color-text-primary)",marginBottom:"4px",fontStyle:"italic"},children:"Data Fields"}),ee.jsx("p",{style:{fontSize:"11px",color:"var(--color-text-muted)",letterSpacing:"0.02em"},children:"Drag fields to encode your chart"})]}),ee.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginBottom:"24px",padding:"12px",backgroundColor:"var(--color-bg-tertiary)",borderRadius:"8px"},children:iY.map(({type:t,label:n,color:r})=>ee.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[ee.jsx("span",{style:{width:"8px",height:"8px",backgroundColor:r,borderRadius:"2px",boxShadow:`0 0 8px ${r}40`}}),ee.jsx("span",{style:{fontSize:"10px",color:"var(--color-text-secondary)",textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:500},children:n})]},t))}),ee.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px",flex:1},children:e.fields.map((t,n)=>ee.jsx(rY,{field:t,index:n},t.name))}),ee.jsxs("div",{style:{marginTop:"24px",paddingTop:"16px",borderTop:"1px solid var(--color-border)",fontSize:"10px",color:"var(--color-text-muted)",textAlign:"center",letterSpacing:"0.1em",textTransform:"uppercase"},children:[e.fields.length," fields available"]})]})}const sY={quantitative:"var(--color-quantitative)",nominal:"var(--color-nominal)",ordinal:"var(--color-ordinal)",temporal:"var(--color-temporal)"},aY={quantitative:"Q",nominal:"N",ordinal:"O",temporal:"T"};function lY({channel:e,label:t}){const{state:n,assignField:r,removeField:i}=Tf(),[o,s]=yi.useState(!1),[a,l]=yi.useState(!1),c=n.encodings[e],f=v=>{v.preventDefault(),v.dataTransfer.dropEffect="copy",s(!0)},h=()=>{s(!1)},p=v=>{v.preventDefault(),s(!1);const _=v.dataTransfer.getData("application/json");if(_){const b=JSON.parse(_);r(e,b)}},m=()=>{i(e)},y=c?sY[c.type]:"var(--color-accent)";return ee.jsxs("div",{children:[ee.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px",fontSize:"11px",fontWeight:500,color:c?"var(--color-text-secondary)":"var(--color-text-muted)",textTransform:"uppercase",letterSpacing:"0.05em",transition:"color 0.2s ease"},children:[t,c&&ee.jsx("span",{style:{width:"4px",height:"4px",borderRadius:"50%",backgroundColor:y,boxShadow:`0 0 6px ${y}`}})]}),ee.jsx("div",{onDragOver:f,onDragLeave:h,onDrop:p,style:{minHeight:"44px",padding:c?"6px":"12px",backgroundColor:o?"var(--color-accent-glow)":c?"var(--color-bg-tertiary)":"var(--color-bg-elevated)",border:`1px ${o?"solid":"dashed"} ${o?"var(--color-accent)":"var(--color-border)"}`,borderRadius:"8px",transition:"all 0.2s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",transform:o?"scale(1.02)":"scale(1)"},children:c?ee.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"6px 10px",backgroundColor:"var(--color-bg-secondary)",border:"1px solid var(--color-border)",borderRadius:"6px",animation:"fadeIn 0.2s ease-out"},children:[ee.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[ee.jsx("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"20px",height:"20px",backgroundColor:y,color:"white",borderRadius:"4px",fontSize:"10px",fontWeight:600,boxShadow:`0 0 8px ${y}40`},children:aY[c.type]}),ee.jsx("span",{style:{fontSize:"12px",fontWeight:500,color:"var(--color-text-primary)"},children:c.name})]}),ee.jsx("button",{onClick:m,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{display:"flex",alignItems:"center",justifyContent:"center",width:"22px",height:"22px",padding:0,backgroundColor:a?"rgba(239, 68, 68, 0.15)":"transparent",border:"none",borderRadius:"4px",cursor:"pointer",color:a?"#ef4444":"var(--color-text-muted)",transition:"all 0.15s ease"},children:ee.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ee.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ee.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}):ee.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:o?"var(--color-accent)":"var(--color-text-muted)",fontSize:"12px",transition:"color 0.2s ease"},children:[ee.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{opacity:o?1:.5,transition:"opacity 0.2s ease"},children:[ee.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),ee.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),ee.jsx("span",{children:o?"Drop to assign":"Drop field here"})]})})]})}const uY=[{title:"Position",icon:ee.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ee.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"5"}),ee.jsx("polyline",{points:"5 12 12 5 19 12"})]}),channels:[{channel:"x",label:"X Axis"},{channel:"y",label:"Y Axis"}]},{title:"Mark Properties",icon:ee.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ee.jsx("circle",{cx:"12",cy:"12",r:"10"}),ee.jsx("circle",{cx:"12",cy:"12",r:"4"})]}),channels:[{channel:"color",label:"Color"},{channel:"size",label:"Size"},{channel:"shape",label:"Shape"}]},{title:"Faceting",icon:ee.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ee.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),ee.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),ee.jsx("rect",{x:"3",y:"14",width:"7",height:"7"}),ee.jsx("rect",{x:"14",y:"14",width:"7",height:"7"})]}),channels:[{channel:"row",label:"Row"},{channel:"column",label:"Column"}]}];function cY(){const{clearAll:e,state:t}=Tf(),[n,r]=yi.useState(!1),i=Object.keys(t.encodings).length>0;return ee.jsxs("aside",{style:{padding:"24px",backgroundColor:"var(--color-bg-secondary)",borderRight:"1px solid var(--color-border)",height:"100%",overflow:"auto",display:"flex",flexDirection:"column"},children:[ee.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"24px"},children:[ee.jsxs("div",{children:[ee.jsx("h2",{style:{fontFamily:"var(--font-display)",fontSize:"15px",fontWeight:400,color:"var(--color-text-primary)",marginBottom:"4px",fontStyle:"italic"},children:"Encoding Channels"}),ee.jsx("p",{style:{fontSize:"11px",color:"var(--color-text-muted)",letterSpacing:"0.02em"},children:"Map data to visual properties"})]}),i&&ee.jsxs("button",{onClick:e,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 10px",fontSize:"11px",fontWeight:500,backgroundColor:n?"rgba(239, 68, 68, 0.15)":"rgba(239, 68, 68, 0.08)",color:"#ef4444",border:"1px solid rgba(239, 68, 68, 0.2)",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease",letterSpacing:"0.02em"},children:[ee.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ee.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ee.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"Clear"]})]}),ee.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"24px",flex:1},children:uY.map((o,s)=>ee.jsxs("div",{style:{animation:`fadeIn 0.4s ease-out ${s*.1}s both`},children:[ee.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px",paddingBottom:"8px",borderBottom:"1px solid var(--color-border)"},children:[ee.jsx("span",{style:{color:"var(--color-accent)",opacity:.8},children:o.icon}),ee.jsx("h3",{style:{fontSize:"10px",fontWeight:600,color:"var(--color-text-secondary)",textTransform:"uppercase",letterSpacing:"0.1em",margin:0},children:o.title})]}),ee.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:o.channels.map(({channel:a,label:l})=>ee.jsx(lY,{channel:a,label:l},a))})]},o.title))}),ee.jsxs("div",{style:{marginTop:"24px",paddingTop:"16px",borderTop:"1px solid var(--color-border)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[ee.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:i?"var(--color-temporal)":"var(--color-text-muted)",boxShadow:i?"0 0 8px var(--color-temporal)":"none",transition:"all 0.3s ease"}}),ee.jsx("span",{style:{fontSize:"10px",color:"var(--color-text-muted)",letterSpacing:"0.1em",textTransform:"uppercase"},children:i?`${Object.keys(t.encodings).length} active`:"No encodings"})]})]})}const fY=/("(?:[^\\"]|\\.)*")|[:,]/g;function N_(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),r=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:i}=t;return(function o(s,a,l){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const c=JSON.stringify(s,i);if(c===void 0)return c;const f=r-a.length-l;if(c.length<=f){const h=c.replace(fY,(p,m)=>m||`${p} `);if(h.length<=f)return h}if(i!=null&&(s=JSON.parse(c),i=void 0),typeof s=="object"&&s!==null){const h=a+n,p=[];let m=0,y,v;if(Array.isArray(s)){y="[",v="]";const{length:_}=s;for(;m<_;m++)p.push(o(s[m],h,m===_-1?0:1)||"null")}else{y="{",v="}";const _=Object.keys(s),{length:b}=_;for(;m<b;m++){const S=_[m],A=`${JSON.stringify(S)}: `,C=o(s[S],h,A.length+(m===b-1?0:1));C!==void 0&&p.push(A+C)}}if(p.length>0)return[y,n+p.join(`,
${h}`),v].join(`
${a}`)}return c})(e,"",0)}function Fr(e,t,n){return e.fields=t||[],e.fname=n,e}function Ut(e){return e==null?null:e.fname}function Hn(e){return e==null?null:e.fields}function Y6(e){return e.length===1?dY(e[0]):hY(e)}const dY=e=>function(t){return t[e]},hY=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Z(e){throw Error(e)}function Ho(e){const t=[],n=e.length;let r=null,i=0,o="",s,a,l;e=e+"";function c(){t.push(o+e.substring(s,a)),o="",s=a+1}for(s=a=0;a<n;++a)if(l=e[a],l==="\\")o+=e.substring(s,a++),s=a;else if(l===r)c(),r=null,i=-1;else{if(r)continue;s===i&&l==='"'||s===i&&l==="'"?(s=a+1,r=l):l==="."&&!i?a>s?c():s=a+1:l==="["?(a>s&&c(),i=s=a+1):l==="]"&&(i||Z("Access path missing open bracket: "+e),i>0&&c(),i=0,s=a+1)}return i&&Z("Access path missing closing bracket: "+e),r&&Z("Access path missing closing quote: "+e),a>s&&(a++,c()),t}function vi(e,t,n){const r=Ho(e);return e=r.length===1?r[0]:e,Fr((n&&n.get||Y6)(r),[e],t||e)}const Tp=vi("id"),Vn=Fr(e=>e,[],"identity"),Sa=Fr(()=>0,[],"zero"),Rf=Fr(()=>1,[],"one"),xi=Fr(()=>!0,[],"true"),ga=Fr(()=>!1,[],"false"),LE=new Set([...Object.getOwnPropertyNames(Object.prototype).filter(e=>typeof Object.prototype[e]=="function"),"__proto__"]);function pY(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const q6=0,PE=1,zE=2,V6=3,X6=4;function ky(e,t,n=pY){let r=e||q6;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=PE&&n(t||"error","ERROR",arguments),this},warn(){return r>=zE&&n(t||"warn","WARN",arguments),this},info(){return r>=V6&&n(t||"log","INFO",arguments),this},debug(){return r>=X6&&n(t||"log","DEBUG",arguments),this}}}var ne=Array.isArray;function ve(e){return e===Object(e)}const cN=e=>e!=="__proto__";function Lf(...e){return e.reduce((t,n)=>{for(const r in n)if(r==="signals")t.signals=gY(t.signals,n.signals);else{const i=r==="legend"?{layout:1}:r==="style"?!0:null;Pf(t,r,n[r],i)}return t},{})}function Pf(e,t,n,r){if(!cN(t))return;let i,o;if(ve(n)&&!ne(n)){o=ve(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Pf(o,i,n[i]):cN(i)&&(o[i]=n[i])}else e[t]=n}function gY(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function Ze(e){return e[e.length-1]}function jn(e){return e==null||e===""?null:+e}const J6=e=>t=>e*Math.exp(t),Q6=e=>t=>Math.log(e*t),K6=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),Z6=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Vm=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function $y(e,t,n,r){const i=n(e[0]),o=n(Ze(e)),s=(o-i)*t;return[r(i-s),r(o-s)]}function eF(e,t){return $y(e,t,jn,Vn)}function tF(e,t){var n=Math.sign(e[0]);return $y(e,t,Q6(n),J6(n))}function nF(e,t,n){return $y(e,t,Vm(n),Vm(1/n))}function rF(e,t,n){return $y(e,t,K6(n),Z6(n))}function My(e,t,n,r,i){const o=r(e[0]),s=r(Ze(e)),a=t!=null?r(t):(o+s)/2;return[i(a+(o-a)*n),i(a+(s-a)*n)]}function IE(e,t,n){return My(e,t,n,jn,Vn)}function UE(e,t,n){const r=Math.sign(e[0]);return My(e,t,n,Q6(r),J6(r))}function Xm(e,t,n,r){return My(e,t,n,Vm(r),Vm(1/r))}function WE(e,t,n,r){return My(e,t,n,K6(r),Z6(r))}function iF(e){return 1+~~(new Date(e).getMonth()/3)}function oF(e){return 1+~~(new Date(e).getUTCMonth()/3)}function _e(e){return e!=null?ne(e)?e:[e]:[]}function sF(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function He(e){return typeof e=="function"}const mY="descending";function jE(e,t,n){n=n||{},t=_e(t)||[];const r=[],i=[],o={},s=n.comparator||yY;return _e(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===mY?-1:1),i.push(a=He(a)?a:vi(a,null,n)),(Hn(a)||[]).forEach(c=>o[c]=1))}),i.length===0?null:Fr(s(i,r),Object.keys(o))}const zf=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),yY=(e,t)=>e.length===1?vY(e[0],t[0]):xY(e,t,e.length),vY=(e,t)=>function(n,r){return zf(e(n),e(r))*t},xY=(e,t,n)=>(t.push(0),function(r,i){let o,s=0,a=-1;for(;s===0&&++a<n;)o=e[a],s=zf(o(r),o(i));return s*t[a]});function Xn(e){return He(e)?e:()=>e}function BE(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Ge(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Ro(e,t){let n=0,r,i,o,s;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=s=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>s&&(s=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=s=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>s&&(s=i))}return[o,s]}function aF(e,t){const n=e.length;let r=-1,i,o,s,a,l;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=s=o;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,a=r),s<o&&(s=o,l=r))}return[a,l]}function we(e,t){return Object.hasOwn(e,t)}const R0={};function If(e){let t={},n;function r(o){return we(t,o)&&t[o]!==R0}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,s){return r(o)||(++i.size,t[o]===R0&&--i.empty),t[o]=s,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=R0),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let s=0;for(const a in t){const l=t[a];l!==R0&&(!n||!n(l))&&(o[a]=l,++s)}i.size=s,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function lF(e,t,n,r,i,o){if(!n&&n!==0)return o;const s=+n;let a=e[0],l=Ze(e),c;l<a&&(c=a,a=l,l=c),c=Math.abs(t-a);const f=Math.abs(l-t);return c<f&&c<=s?r:f<=s?i:o}function ge(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Ge(r,n)}function Tc(e,t,n,r){let i=t[0],o=t[t.length-1],s;return i>o&&(s=i,i=o,o=s),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function el(e){return typeof e=="boolean"}function Fa(e){return Object.prototype.toString.call(e)==="[object Date]"}function uF(e){return e&&He(e[Symbol.iterator])}function st(e){return typeof e=="number"}function HE(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function xe(e){return typeof e=="string"}function GE(e,t,n){e&&(e=t?_e(e).map(a=>a.replace(/\\(.)/g,"$1")):_e(e));const r=e&&e.length,i=n&&n.get||Y6,o=a=>i(t?[a]:Ho(a));let s;if(!r)s=function(){return""};else if(r===1){const a=o(e[0]);s=function(l){return""+a(l)}}else{const a=e.map(o);s=function(l){let c=""+a[0](l),f=0;for(;++f<r;)c+="|"+a[f](l);return c}}return Fr(s,e,"key")}function cF(e,t){const n=e[0],r=Ze(e),i=+t;return i?i===1?r:n+i*(r-n):n}const _Y=1e4;function fF(e){e=+e||_Y;let t,n,r;const i=()=>{t={},n={},r=0},o=(s,a)=>(++r>e&&(n=t,t={},r=1),t[s]=a);return i(),{clear:i,has:s=>we(t,s)||we(n,s),get:s=>we(t,s)?t[s]:we(n,s)?o(s,n[s]):void 0,set:(s,a)=>we(t,s)?t[s]=a:o(s,a)}}function dF(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const s=r||new t.constructor(i+o);let a=0,l=0,c=0;for(;a<i&&l<o;++c)s[c]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++c)s[c]=t[a];for(;l<o;++l,++c)s[c]=n[l];return s}function _h(e,t){let n="";for(;--t>=0;)n+=e;return n}function hF(e,t,n,r){const i=n||" ",o=e+"",s=t-o.length;return s<=0?o:r==="left"?_h(i,s)+o:r==="center"?_h(i,~~(s/2))+o+_h(i,Math.ceil(s/2)):o+_h(i,s)}function Rp(e){return e&&Ze(e)-e[0]||0}function he(e){return ne(e)?`[${e.map(t=>t===null?"null":he(t))}]`:ve(e)||xe(e)?JSON.stringify(e).replaceAll("\u2028","\\u2028").replaceAll("\u2029","\\u2029"):e}function YE(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const bY=e=>st(e)||Fa(e)?e:Date.parse(e);function qE(e,t){return t=t||bY,e==null||e===""?null:t(e)}function VE(e){return e==null||e===""?null:e+""}function Ji(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function pF(e,t,n,r){const i=r??"",o=e+"",s=o.length,a=Math.max(0,t-i.length);return s<=t?o:n==="left"?i+o.slice(s-a):n==="center"?o.slice(0,Math.ceil(a/2))+i+o.slice(s-~~(a/2)):o.slice(0,a)+i}function va(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var fN={},O_={},D_=34,Xd=10,F_=13;function gF(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function wY(e,t){var n=gF(e);return function(r,i){return t(n(r),i,e)}}function dN(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function br(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function SY(e){return e<0?"-"+br(-e,6):e>9999?"+"+br(e,6):br(e,4)}function EY(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":SY(e.getUTCFullYear())+"-"+br(e.getUTCMonth()+1,2)+"-"+br(e.getUTCDate(),2)+(i?"T"+br(t,2)+":"+br(n,2)+":"+br(r,2)+"."+br(i,3)+"Z":r?"T"+br(t,2)+":"+br(n,2)+":"+br(r,2)+"Z":n||t?"T"+br(t,2)+":"+br(n,2)+"Z":"")}function AY(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(h,p){var m,y,v=i(h,function(_,b){if(m)return m(_,b-1);y=_,m=p?wY(_,p):gF(_)});return v.columns=y||[],v}function i(h,p){var m=[],y=h.length,v=0,_=0,b,S=y<=0,A=!1;h.charCodeAt(y-1)===Xd&&--y,h.charCodeAt(y-1)===F_&&--y;function C(){if(S)return O_;if(A)return A=!1,fN;var N,$=v,O;if(h.charCodeAt($)===D_){for(;v++<y&&h.charCodeAt(v)!==D_||h.charCodeAt(++v)===D_;);return(N=v)>=y?S=!0:(O=h.charCodeAt(v++))===Xd?A=!0:O===F_&&(A=!0,h.charCodeAt(v)===Xd&&++v),h.slice($+1,N-1).replace(/""/g,'"')}for(;v<y;){if((O=h.charCodeAt(N=v++))===Xd)A=!0;else if(O===F_)A=!0,h.charCodeAt(v)===Xd&&++v;else if(O!==n)continue;return h.slice($,N)}return S=!0,h.slice($,y)}for(;(b=C())!==O_;){for(var k=[];b!==fN&&b!==O_;)k.push(b),b=C();p&&(k=p(k,_++))==null||m.push(k)}return m}function o(h,p){return h.map(function(m){return p.map(function(y){return f(m[y])}).join(e)})}function s(h,p){return p==null&&(p=dN(h)),[p.map(f).join(e)].concat(o(h,p)).join(`
`)}function a(h,p){return p==null&&(p=dN(h)),o(h,p).join(`
`)}function l(h){return h.map(c).join(`
`)}function c(h){return h.map(f).join(e)}function f(h){return h==null?"":h instanceof Date?EY(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:l,formatRow:c,formatValue:f}}function CY(e){return e}function kY(e){if(e==null)return CY;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],s=e.translate[1];return function(a,l){l||(t=n=0);var c=2,f=a.length,h=new Array(f);for(h[0]=(t+=a[0])*r+o,h[1]=(n+=a[1])*i+s;c<f;)h[c]=a[c],++c;return h}}function $Y(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function MY(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return hN(e,n)})}:hN(e,t)}function hN(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=mF(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function mF(e,t){var n=kY(e.transform),r=e.arcs;function i(f,h){h.length&&h.pop();for(var p=r[f<0?~f:f],m=0,y=p.length;m<y;++m)h.push(n(p[m],m));f<0&&$Y(h,y)}function o(f){return n(f)}function s(f){for(var h=[],p=0,m=f.length;p<m;++p)i(f[p],h);return h.length<2&&h.push(h[0]),h}function a(f){for(var h=s(f);h.length<4;)h.push(h[0]);return h}function l(f){return f.map(a)}function c(f){var h=f.type,p;switch(h){case"GeometryCollection":return{type:h,geometries:f.geometries.map(c)};case"Point":p=o(f.coordinates);break;case"MultiPoint":p=f.coordinates.map(o);break;case"LineString":p=s(f.arcs);break;case"MultiLineString":p=f.arcs.map(s);break;case"Polygon":p=l(f.arcs);break;case"MultiPolygon":p=f.arcs.map(l);break;default:return null}return{type:h,coordinates:p}}return c(t)}function NY(e,t){var n={},r={},i={},o=[],s=-1;t.forEach(function(c,f){var h=e.arcs[c<0?~c:c],p;h.length<3&&!h[1][0]&&!h[1][1]&&(p=t[++s],t[s]=c,t[f]=p)}),t.forEach(function(c){var f=a(c),h=f[0],p=f[1],m,y;if(m=i[h])if(delete i[m.end],m.push(c),m.end=p,y=r[p]){delete r[y.start];var v=y===m?m:m.concat(y);r[v.start=m.start]=i[v.end=y.end]=v}else r[m.start]=i[m.end]=m;else if(m=r[p])if(delete r[m.start],m.unshift(c),m.start=h,y=i[h]){delete i[y.end];var _=y===m?m:y.concat(m);r[_.start=y.start]=i[_.end=m.end]=_}else r[m.start]=i[m.end]=m;else m=[c],r[m.start=h]=i[m.end=p]=m});function a(c){var f=e.arcs[c<0?~c:c],h=f[0],p;return e.transform?(p=[0,0],f.forEach(function(m){p[0]+=m[0],p[1]+=m[1]})):p=f[f.length-1],c<0?[p,h]:[h,p]}function l(c,f){for(var h in c){var p=c[h];delete f[p.start],delete p.start,delete p.end,p.forEach(function(m){n[m<0?~m:m]=1}),o.push(p)}}return l(i,r),l(r,i),t.forEach(function(c){n[c<0?~c:c]||o.push([c])}),o}function OY(e){return mF(e,DY.apply(this,arguments))}function DY(e,t,n){var r,i,o;if(arguments.length>1)r=FY(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:NY(e,r)}}function FY(e,t,n){var r=[],i=[],o;function s(h){var p=h<0?~h:h;(i[p]||(i[p]=[])).push({i:h,g:o})}function a(h){h.forEach(s)}function l(h){h.forEach(a)}function c(h){h.forEach(l)}function f(h){switch(o=h,h.type){case"GeometryCollection":h.geometries.forEach(f);break;case"LineString":a(h.arcs);break;case"MultiLineString":case"Polygon":l(h.arcs);break;case"MultiPolygon":c(h.arcs);break}}return f(t),i.forEach(n==null?function(h){r.push(h[0].i)}:function(h){n(h[0].g,h[h.length-1].g)&&r.push(h[0].i)}),r}function Cs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function TY(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Uf(e){let t,n,r;e.length!==2?(t=Cs,n=(a,l)=>Cs(e(a),l),r=(a,l)=>e(a)-l):(t=e===Cs||e===TY?e:RY,n=e,r=e);function i(a,l,c=0,f=a.length){if(c<f){if(t(l,l)!==0)return f;do{const h=c+f>>>1;n(a[h],l)<0?c=h+1:f=h}while(c<f)}return c}function o(a,l,c=0,f=a.length){if(c<f){if(t(l,l)!==0)return f;do{const h=c+f>>>1;n(a[h],l)<=0?c=h+1:f=h}while(c<f)}return c}function s(a,l,c=0,f=a.length){const h=i(a,l,c,f-1);return h>c&&r(a[h-1],l)>-r(a[h],l)?h-1:h}return{left:i,center:s,right:o}}function RY(){return 0}function yF(e){return e===null?NaN:+e}function*LY(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const vF=Uf(Cs),Ia=vF.right,PY=vF.left;Uf(yF).center;function zY(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i))}if(n>1)return o/(n-1)}function IY(e,t){const n=zY(e,t);return n&&Math.sqrt(n)}class lr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=t+o,a=Math.abs(t)<Math.abs(o)?t-(s-o):o-(s-t);a&&(n[r++]=a),t=s}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=t[--n];n>0&&(r=s,i=t[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}class pN extends Map{constructor(t,n=bF){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(_w(this,t))}has(t){return super.has(_w(this,t))}set(t,n){return super.set(xF(this,t),n)}delete(t){return super.delete(_F(this,t))}}class Jm extends Set{constructor(t,n=bF){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(_w(this,t))}add(t){return super.add(xF(this,t))}delete(t){return super.delete(_F(this,t))}}function _w({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function xF({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function _F({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function bF(e){return e!==null&&typeof e=="object"?e.valueOf():e}function UY(e,t){return Array.from(t,n=>e[n])}function WY(e=Cs){if(e===Cs)return wF;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function wF(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const jY=Math.sqrt(50),BY=Math.sqrt(10),HY=Math.sqrt(2);function Qm(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=jY?10:o>=BY?5:o>=HY?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/s,a=Math.round(e*c),l=Math.round(t*c),a/c<e&&++a,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*s,a=Math.round(e/c),l=Math.round(t/c),a*c<e&&++a,l*c>t&&--l),l<a&&.5<=n&&n<2?Qm(e,t,n*2):[a,l,c]}function bw(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,s]=r?Qm(t,e,n):Qm(e,t,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(i+c)/-s;else for(let c=0;c<a;++c)l[c]=(i+c)*s;return l}function ww(e,t,n){return t=+t,e=+e,n=+n,Qm(e,t,n)[2]}function Ua(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?ww(t,e,n):ww(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Kl(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Sw(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function SF(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?wF:WY(i);r>n;){if(r-n>600){const l=r-n+1,c=t-n+1,f=Math.log(l),h=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*h*(l-h)/l)*(c-l/2<0?-1:1),m=Math.max(n,Math.floor(t-c*h/l+p)),y=Math.min(r,Math.floor(t+(l-c)*h/l+p));SF(e,t,m,y,i)}const o=e[t];let s=n,a=r;for(Jd(e,n,t),i(e[r],o)>0&&Jd(e,n,r);s<a;){for(Jd(e,s,a),++s,--a;i(e[s],o)<0;)++s;for(;i(e[a],o)>0;)--a}i(e[n],o)===0?Jd(e,n,a):(++a,Jd(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function Jd(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Ew(e,t,n){if(e=Float64Array.from(LY(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Sw(e);if(t>=1)return Kl(e);var r,i=(r-1)*t,o=Math.floor(i),s=Kl(SF(e,o).subarray(0,o+1)),a=Sw(e.subarray(o+1));return s+(a-s)*(i-o)}}function EF(e,t,n=yF){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),s=+n(e[o],o,e),a=+n(e[o+1],o+1,e);return s+(a-s)*(i-o)}}function GY(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function AF(e,t){return Ew(e,.5,t)}function*YY(e){for(const t of e)yield*t}function CF(e){return Array.from(YY(e))}function Hr(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function kF(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function qY(e,...t){e=new Jm(e),t=t.map(VY);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function VY(e){return e instanceof Jm?e:new Jm(e)}function XY(...e){const t=new Jm;for(const n of e)for(const r of n)t.add(r);return t}function JY(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Km(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Kc(e){return e=Km(Math.abs(e)),e?e[1]:NaN}function QY(e,t){return function(n,r){for(var i=n.length,o=[],s=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[s=(s+1)%e.length];return o.reverse().join(t)}}function KY(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var ZY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lu(e){if(!(t=ZY.exec(e)))throw new Error("invalid format: "+e);var t;return new XE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}lu.prototype=XE.prototype;function XE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}XE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function eq(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var $F;function tq(e,t){var n=Km(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-($F=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Km(e,Math.max(0,t+o-1))[0]}function gN(e,t){var n=Km(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const mN={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:JY,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>gN(e*100,t),r:gN,s:tq,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function yN(e){return e}var vN=Array.prototype.map,xN=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function MF(e){var t=e.grouping===void 0||e.thousands===void 0?yN:QY(vN.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?yN:KY(vN.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function c(h){h=lu(h);var p=h.fill,m=h.align,y=h.sign,v=h.symbol,_=h.zero,b=h.width,S=h.comma,A=h.precision,C=h.trim,k=h.type;k==="n"?(S=!0,k="g"):mN[k]||(A===void 0&&(A=12),C=!0,k="g"),(_||p==="0"&&m==="=")&&(_=!0,p="0",m="=");var N=v==="$"?n:v==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",$=v==="$"?r:/[%p]/.test(k)?s:"",O=mN[k],D=/[defgprs%]/.test(k);A=A===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function P(R){var X=N,B=$,I,F,W;if(k==="c")B=O(R)+B,R="";else{R=+R;var V=R<0||1/R<0;if(R=isNaN(R)?l:O(Math.abs(R),A),C&&(R=eq(R)),V&&+R==0&&y!=="+"&&(V=!1),X=(V?y==="("?y:a:y==="-"||y==="("?"":y)+X,B=(k==="s"?xN[8+$F/3]:"")+B+(V&&y==="("?")":""),D){for(I=-1,F=R.length;++I<F;)if(W=R.charCodeAt(I),48>W||W>57){B=(W===46?i+R.slice(I+1):R.slice(I))+B,R=R.slice(0,I);break}}}S&&!_&&(R=t(R,1/0));var j=X.length+R.length+B.length,H=j<b?new Array(b-j+1).join(p):"";switch(S&&_&&(R=t(H+R,H.length?b-B.length:1/0),H=""),m){case"<":R=X+R+B+H;break;case"=":R=X+H+R+B;break;case"^":R=H.slice(0,j=H.length>>1)+X+R+B+H.slice(j);break;default:R=H+X+R+B;break}return o(R)}return P.toString=function(){return h+""},P}function f(h,p){var m=c((h=lu(h),h.type="f",h)),y=Math.max(-8,Math.min(8,Math.floor(Kc(p)/3)))*3,v=Math.pow(10,-y),_=xN[8+y/3];return function(b){return m(v*b)+_}}return{format:c,formatPrefix:f}}var L0,Ny,JE;nq({thousands:",",grouping:[3],currency:["$",""]});function nq(e){return L0=MF(e),Ny=L0.format,JE=L0.formatPrefix,L0}function NF(e){return Math.max(0,-Kc(Math.abs(e)))}function OF(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Kc(t)/3)))*3-Kc(Math.abs(e)))}function DF(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Kc(t)-Kc(e))+1}const T_=new Date,R_=new Date;function sn(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const s=i(o),a=i.ceil(o);return o-s<a-o?s:a},i.offset=(o,s)=>(t(o=new Date(+o),s==null?1:Math.floor(s)),o),i.range=(o,s,a)=>{const l=[];if(o=i.ceil(o),a=a==null?1:Math.floor(a),!(o<s)||!(a>0))return l;let c;do l.push(c=new Date(+o)),t(o,a),e(o);while(c<o&&o<s);return l},i.filter=o=>sn(s=>{if(s>=s)for(;e(s),!o(s);)s.setTime(s-1)},(s,a)=>{if(s>=s)if(a<0)for(;++a<=0;)for(;t(s,-1),!o(s););else for(;--a>=0;)for(;t(s,1),!o(s););}),n&&(i.count=(o,s)=>(T_.setTime(+o),R_.setTime(+s),e(T_),e(R_),Math.floor(n(T_,R_))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?s=>r(s)%o===0:s=>i.count(0,s)%o===0):i)),i}const Zc=sn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Zc.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?sn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Zc);Zc.range;const _s=1e3,fi=_s*60,bs=fi*60,Ts=bs*24,QE=Ts*7,_N=Ts*30,L_=Ts*365,ws=sn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*_s)},(e,t)=>(t-e)/_s,e=>e.getUTCSeconds());ws.range;const Oy=sn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_s)},(e,t)=>{e.setTime(+e+t*fi)},(e,t)=>(t-e)/fi,e=>e.getMinutes());Oy.range;const Dy=sn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*fi)},(e,t)=>(t-e)/fi,e=>e.getUTCMinutes());Dy.range;const Fy=sn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*_s-e.getMinutes()*fi)},(e,t)=>{e.setTime(+e+t*bs)},(e,t)=>(t-e)/bs,e=>e.getHours());Fy.range;const Ty=sn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*bs)},(e,t)=>(t-e)/bs,e=>e.getUTCHours());Ty.range;const ks=sn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*fi)/Ts,e=>e.getDate()-1);ks.range;const Ta=sn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ts,e=>e.getUTCDate()-1);Ta.range;const FF=sn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ts,e=>Math.floor(e/Ts));FF.range;function Nu(e){return sn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*fi)/QE)}const Wf=Nu(0),Zm=Nu(1),rq=Nu(2),iq=Nu(3),ef=Nu(4),oq=Nu(5),sq=Nu(6);Wf.range;Zm.range;rq.range;iq.range;ef.range;oq.range;sq.range;function Ou(e){return sn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/QE)}const jf=Ou(0),e1=Ou(1),aq=Ou(2),lq=Ou(3),tf=Ou(4),uq=Ou(5),cq=Ou(6);jf.range;e1.range;aq.range;lq.range;tf.range;uq.range;cq.range;const rp=sn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());rp.range;const ip=sn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ip.range;const Lo=sn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Lo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:sn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Lo.range;const Po=sn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Po.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:sn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Po.range;function TF(e,t,n,r,i,o){const s=[[ws,1,_s],[ws,5,5*_s],[ws,15,15*_s],[ws,30,30*_s],[o,1,fi],[o,5,5*fi],[o,15,15*fi],[o,30,30*fi],[i,1,bs],[i,3,3*bs],[i,6,6*bs],[i,12,12*bs],[r,1,Ts],[r,2,2*Ts],[n,1,QE],[t,1,_N],[t,3,3*_N],[e,1,L_]];function a(c,f,h){const p=f<c;p&&([c,f]=[f,c]);const m=h&&typeof h.range=="function"?h:l(c,f,h),y=m?m.range(c,+f+1):[];return p?y.reverse():y}function l(c,f,h){const p=Math.abs(f-c)/h,m=Uf(([,,_])=>_).right(s,p);if(m===s.length)return e.every(Ua(c/L_,f/L_,h));if(m===0)return Zc.every(Math.max(Ua(c,f,h),1));const[y,v]=s[p/s[m-1][2]<s[m][2]/p?m-1:m];return y.every(v)}return[a,l]}const[fq,dq]=TF(Po,ip,jf,FF,Ty,Dy),[hq,pq]=TF(Lo,rp,Wf,ks,Fy,Oy),Mn="year",kr="quarter",Gn="month",nn="week",$r="date",Wn="day",zo="dayofyear",Qr="hours",Kr="minutes",_i="seconds",Qi="milliseconds",KE=[Mn,kr,Gn,nn,$r,Wn,zo,Qr,Kr,_i,Qi],P_=KE.reduce((e,t,n)=>(e[t]=1+n,e),{});function ZE(e){const t=_e(e).slice(),n={};return t.length||Z("Missing time unit."),t.forEach(i=>{we(P_,i)?n[i]=1:Z(`Invalid time unit: ${i}.`)}),(n[nn]||n[Wn]?1:0)+(n[kr]||n[Gn]||n[$r]?1:0)+(n[zo]?1:0)>1&&Z(`Incompatible time units: ${e}`),t.sort((i,o)=>P_[i]-P_[o]),t}const gq={[Mn]:"%Y ",[kr]:"Q%q ",[Gn]:"%b ",[$r]:"%d ",[nn]:"W%U ",[Wn]:"%a ",[zo]:"%j ",[Qr]:"%H:00",[Kr]:"00:%M",[_i]:":%S",[Qi]:".%L",[`${Mn}-${Gn}`]:"%Y-%m ",[`${Mn}-${Gn}-${$r}`]:"%Y-%m-%d ",[`${Qr}-${Kr}`]:"%H:%M"};function RF(e,t){const n=Ge({},gq,t),r=ZE(e),i=r.length;let o="",s=0,a,l;for(s=0;s<i;)for(a=r.length;a>s;--a)if(l=r.slice(s,a).join("-"),n[l]!=null){o+=n[l],s=a;break}return o.trim()}const Bl=new Date;function eA(e){return Bl.setFullYear(e),Bl.setMonth(0),Bl.setDate(1),Bl.setHours(0,0,0,0),Bl}function LF(e){return zF(new Date(e))}function PF(e){return Aw(new Date(e))}function zF(e){return ks.count(eA(e.getFullYear())-1,e)}function Aw(e){return Wf.count(eA(e.getFullYear())-1,e)}function Cw(e){return eA(e).getDay()}function mq(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,o,s);return a.setFullYear(e),a}return new Date(e,t,n,r,i,o,s)}function IF(e){return WF(new Date(e))}function UF(e){return kw(new Date(e))}function WF(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Ta.count(t-1,e)}function kw(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return jf.count(t-1,e)}function $w(e){return Bl.setTime(Date.UTC(e,0,1)),Bl.getUTCDay()}function yq(e,t,n,r,i,o,s){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,o,s));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,o,s))}function jF(e,t,n,r,i){const o=t||1,s=Ze(e),a=(b,S,A)=>(A=A||b,vq(n[A],r[A],b===s&&o,S)),l=new Date,c=Ji(e),f=c[Mn]?a(Mn):Xn(2012),h=c[Gn]?a(Gn):c[kr]?a(kr):Sa,p=c[nn]&&c[Wn]?a(Wn,1,nn+Wn):c[nn]?a(nn,1):c[Wn]?a(Wn,1):c[$r]?a($r,1):c[zo]?a(zo,1):Rf,m=c[Qr]?a(Qr):Sa,y=c[Kr]?a(Kr):Sa,v=c[_i]?a(_i):Sa,_=c[Qi]?a(Qi):Sa;return function(b){l.setTime(+b);const S=f(l);return i(S,h(l),p(l,S),m(l),y(l),v(l),_(l))}}function vq(e,t,n,r){const i=n<=1?e:r?(o,s)=>r+n*Math.floor((e(o,s)-r)/n):(o,s)=>n*Math.floor(e(o,s)/n);return t?(o,s)=>t(i(o,s),s):i}function nf(e,t,n){return t+e*7-(n+6)%7}const xq={[Mn]:e=>e.getFullYear(),[kr]:e=>Math.floor(e.getMonth()/3),[Gn]:e=>e.getMonth(),[$r]:e=>e.getDate(),[Qr]:e=>e.getHours(),[Kr]:e=>e.getMinutes(),[_i]:e=>e.getSeconds(),[Qi]:e=>e.getMilliseconds(),[zo]:e=>zF(e),[nn]:e=>Aw(e),[nn+Wn]:(e,t)=>nf(Aw(e),e.getDay(),Cw(t)),[Wn]:(e,t)=>nf(1,e.getDay(),Cw(t))},_q={[kr]:e=>3*e,[nn]:(e,t)=>nf(e,0,Cw(t))};function BF(e,t){return jF(e,t||1,xq,_q,mq)}const bq={[Mn]:e=>e.getUTCFullYear(),[kr]:e=>Math.floor(e.getUTCMonth()/3),[Gn]:e=>e.getUTCMonth(),[$r]:e=>e.getUTCDate(),[Qr]:e=>e.getUTCHours(),[Kr]:e=>e.getUTCMinutes(),[_i]:e=>e.getUTCSeconds(),[Qi]:e=>e.getUTCMilliseconds(),[zo]:e=>WF(e),[nn]:e=>kw(e),[Wn]:(e,t)=>nf(1,e.getUTCDay(),$w(t)),[nn+Wn]:(e,t)=>nf(kw(e),e.getUTCDay(),$w(t))},wq={[kr]:e=>3*e,[nn]:(e,t)=>nf(e,0,$w(t))};function HF(e,t){return jF(e,t||1,bq,wq,yq)}const Sq={[Mn]:Lo,[kr]:rp.every(3),[Gn]:rp,[nn]:Wf,[$r]:ks,[Wn]:ks,[zo]:ks,[Qr]:Fy,[Kr]:Oy,[_i]:ws,[Qi]:Zc},Eq={[Mn]:Po,[kr]:ip.every(3),[Gn]:ip,[nn]:jf,[$r]:Ta,[Wn]:Ta,[zo]:Ta,[Qr]:Ty,[Kr]:Dy,[_i]:ws,[Qi]:Zc};function Bf(e){return Sq[e]}function Hf(e){return Eq[e]}function GF(e,t,n){return e?e.offset(t,n):void 0}function YF(e,t,n){return GF(Bf(e),t,n)}function qF(e,t,n){return GF(Hf(e),t,n)}function VF(e,t,n,r){return e?e.range(t,n,r):void 0}function XF(e,t,n,r){return VF(Bf(e),t,n,r)}function JF(e,t,n,r){return VF(Hf(e),t,n,r)}const bh=1e3,wh=bh*60,Sh=wh*60,Ry=Sh*24,Aq=Ry*7,bN=Ry*30,Mw=Ry*365,QF=[Mn,Gn,$r,Qr,Kr,_i,Qi],Eh=QF.slice(0,-1),Ah=Eh.slice(0,-1),Ch=Ah.slice(0,-1),Cq=Ch.slice(0,-1),kq=[Mn,nn],wN=[Mn,Gn],KF=[Mn],Qd=[[Eh,1,bh],[Eh,5,5*bh],[Eh,15,15*bh],[Eh,30,30*bh],[Ah,1,wh],[Ah,5,5*wh],[Ah,15,15*wh],[Ah,30,30*wh],[Ch,1,Sh],[Ch,3,3*Sh],[Ch,6,6*Sh],[Ch,12,12*Sh],[Cq,1,Ry],[kq,1,Aq],[wN,1,bN],[wN,3,3*bN],[KF,1,Mw]];function ZF(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Rp(t))/n;let i=Uf(a=>a[2]).right(Qd,r),o,s;return i===Qd.length?(o=KF,s=Ua(t[0]/Mw,t[1]/Mw,n)):i?(i=Qd[r/Qd[i-1][2]<Qd[i][2]/r?i-1:i],o=i[0],s=i[1]):(o=QF,s=Math.max(Ua(t[0],t[1],n),1)),{units:o,step:s}}function z_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function I_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Kd(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function e7(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,s=e.shortDays,a=e.months,l=e.shortMonths,c=Zd(i),f=eh(i),h=Zd(o),p=eh(o),m=Zd(s),y=eh(s),v=Zd(a),_=eh(a),b=Zd(l),S=eh(l),A={a:V,A:j,b:H,B:Q,c:null,d:$N,e:$N,f:Jq,g:sV,G:lV,H:qq,I:Vq,j:Xq,L:t7,m:Qq,M:Kq,p:L,q:Y,Q:ON,s:DN,S:Zq,u:eV,U:tV,V:nV,w:rV,W:iV,x:null,X:null,y:oV,Y:aV,Z:uV,"%":NN},C={a:ye,A:Ae,b:be,B:Ie,c:null,d:MN,e:MN,f:hV,g:SV,G:AV,H:cV,I:fV,j:dV,L:r7,m:pV,M:gV,p:et,q:qe,Q:ON,s:DN,S:mV,u:yV,U:vV,V:xV,w:_V,W:bV,x:null,X:null,y:wV,Y:EV,Z:CV,"%":NN},k={a:P,A:R,b:X,B,c:I,d:CN,e:CN,f:Bq,g:AN,G:EN,H:kN,I:kN,j:Iq,L:jq,m:zq,M:Uq,p:D,q:Pq,Q:Gq,s:Yq,S:Wq,u:Dq,U:Fq,V:Tq,w:Oq,W:Rq,x:F,X:W,y:AN,Y:EN,Z:Lq,"%":Hq};A.x=N(n,A),A.X=N(r,A),A.c=N(t,A),C.x=N(n,C),C.X=N(r,C),C.c=N(t,C);function N(de,Te){return function(Be){var le=[],Rt=-1,nt=0,Wt=de.length,Qt,Rr,ld;for(Be instanceof Date||(Be=new Date(+Be));++Rt<Wt;)de.charCodeAt(Rt)===37&&(le.push(de.slice(nt,Rt)),(Rr=SN[Qt=de.charAt(++Rt)])!=null?Qt=de.charAt(++Rt):Rr=Qt==="e"?" ":"0",(ld=Te[Qt])&&(Qt=ld(Be,Rr)),le.push(Qt),nt=Rt+1);return le.push(de.slice(nt,Rt)),le.join("")}}function $(de,Te){return function(Be){var le=Kd(1900,void 0,1),Rt=O(le,de,Be+="",0),nt,Wt;if(Rt!=Be.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(Te&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(nt=I_(Kd(le.y,0,1)),Wt=nt.getUTCDay(),nt=Wt>4||Wt===0?e1.ceil(nt):e1(nt),nt=Ta.offset(nt,(le.V-1)*7),le.y=nt.getUTCFullYear(),le.m=nt.getUTCMonth(),le.d=nt.getUTCDate()+(le.w+6)%7):(nt=z_(Kd(le.y,0,1)),Wt=nt.getDay(),nt=Wt>4||Wt===0?Zm.ceil(nt):Zm(nt),nt=ks.offset(nt,(le.V-1)*7),le.y=nt.getFullYear(),le.m=nt.getMonth(),le.d=nt.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),Wt="Z"in le?I_(Kd(le.y,0,1)).getUTCDay():z_(Kd(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(Wt+5)%7:le.w+le.U*7-(Wt+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,I_(le)):z_(le)}}function O(de,Te,Be,le){for(var Rt=0,nt=Te.length,Wt=Be.length,Qt,Rr;Rt<nt;){if(le>=Wt)return-1;if(Qt=Te.charCodeAt(Rt++),Qt===37){if(Qt=Te.charAt(Rt++),Rr=k[Qt in SN?Te.charAt(Rt++):Qt],!Rr||(le=Rr(de,Be,le))<0)return-1}else if(Qt!=Be.charCodeAt(le++))return-1}return le}function D(de,Te,Be){var le=c.exec(Te.slice(Be));return le?(de.p=f.get(le[0].toLowerCase()),Be+le[0].length):-1}function P(de,Te,Be){var le=m.exec(Te.slice(Be));return le?(de.w=y.get(le[0].toLowerCase()),Be+le[0].length):-1}function R(de,Te,Be){var le=h.exec(Te.slice(Be));return le?(de.w=p.get(le[0].toLowerCase()),Be+le[0].length):-1}function X(de,Te,Be){var le=b.exec(Te.slice(Be));return le?(de.m=S.get(le[0].toLowerCase()),Be+le[0].length):-1}function B(de,Te,Be){var le=v.exec(Te.slice(Be));return le?(de.m=_.get(le[0].toLowerCase()),Be+le[0].length):-1}function I(de,Te,Be){return O(de,t,Te,Be)}function F(de,Te,Be){return O(de,n,Te,Be)}function W(de,Te,Be){return O(de,r,Te,Be)}function V(de){return s[de.getDay()]}function j(de){return o[de.getDay()]}function H(de){return l[de.getMonth()]}function Q(de){return a[de.getMonth()]}function L(de){return i[+(de.getHours()>=12)]}function Y(de){return 1+~~(de.getMonth()/3)}function ye(de){return s[de.getUTCDay()]}function Ae(de){return o[de.getUTCDay()]}function be(de){return l[de.getUTCMonth()]}function Ie(de){return a[de.getUTCMonth()]}function et(de){return i[+(de.getUTCHours()>=12)]}function qe(de){return 1+~~(de.getUTCMonth()/3)}return{format:function(de){var Te=N(de+="",A);return Te.toString=function(){return de},Te},parse:function(de){var Te=$(de+="",!1);return Te.toString=function(){return de},Te},utcFormat:function(de){var Te=N(de+="",C);return Te.toString=function(){return de},Te},utcParse:function(de){var Te=$(de+="",!0);return Te.toString=function(){return de},Te}}}var SN={"-":"",_:" ",0:"0"},xn=/^\s*\d+/,$q=/^%/,Mq=/[\\^$*+?|[\]().{}]/g;function at(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Nq(e){return e.replace(Mq,"\\$&")}function Zd(e){return new RegExp("^(?:"+e.map(Nq).join("|")+")","i")}function eh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Oq(e,t,n){var r=xn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Dq(e,t,n){var r=xn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Fq(e,t,n){var r=xn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Tq(e,t,n){var r=xn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Rq(e,t,n){var r=xn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function EN(e,t,n){var r=xn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function AN(e,t,n){var r=xn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Lq(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Pq(e,t,n){var r=xn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function zq(e,t,n){var r=xn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function CN(e,t,n){var r=xn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Iq(e,t,n){var r=xn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function kN(e,t,n){var r=xn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Uq(e,t,n){var r=xn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Wq(e,t,n){var r=xn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function jq(e,t,n){var r=xn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Bq(e,t,n){var r=xn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Hq(e,t,n){var r=$q.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Gq(e,t,n){var r=xn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Yq(e,t,n){var r=xn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function $N(e,t){return at(e.getDate(),t,2)}function qq(e,t){return at(e.getHours(),t,2)}function Vq(e,t){return at(e.getHours()%12||12,t,2)}function Xq(e,t){return at(1+ks.count(Lo(e),e),t,3)}function t7(e,t){return at(e.getMilliseconds(),t,3)}function Jq(e,t){return t7(e,t)+"000"}function Qq(e,t){return at(e.getMonth()+1,t,2)}function Kq(e,t){return at(e.getMinutes(),t,2)}function Zq(e,t){return at(e.getSeconds(),t,2)}function eV(e){var t=e.getDay();return t===0?7:t}function tV(e,t){return at(Wf.count(Lo(e)-1,e),t,2)}function n7(e){var t=e.getDay();return t>=4||t===0?ef(e):ef.ceil(e)}function nV(e,t){return e=n7(e),at(ef.count(Lo(e),e)+(Lo(e).getDay()===4),t,2)}function rV(e){return e.getDay()}function iV(e,t){return at(Zm.count(Lo(e)-1,e),t,2)}function oV(e,t){return at(e.getFullYear()%100,t,2)}function sV(e,t){return e=n7(e),at(e.getFullYear()%100,t,2)}function aV(e,t){return at(e.getFullYear()%1e4,t,4)}function lV(e,t){var n=e.getDay();return e=n>=4||n===0?ef(e):ef.ceil(e),at(e.getFullYear()%1e4,t,4)}function uV(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+at(t/60|0,"0",2)+at(t%60,"0",2)}function MN(e,t){return at(e.getUTCDate(),t,2)}function cV(e,t){return at(e.getUTCHours(),t,2)}function fV(e,t){return at(e.getUTCHours()%12||12,t,2)}function dV(e,t){return at(1+Ta.count(Po(e),e),t,3)}function r7(e,t){return at(e.getUTCMilliseconds(),t,3)}function hV(e,t){return r7(e,t)+"000"}function pV(e,t){return at(e.getUTCMonth()+1,t,2)}function gV(e,t){return at(e.getUTCMinutes(),t,2)}function mV(e,t){return at(e.getUTCSeconds(),t,2)}function yV(e){var t=e.getUTCDay();return t===0?7:t}function vV(e,t){return at(jf.count(Po(e)-1,e),t,2)}function i7(e){var t=e.getUTCDay();return t>=4||t===0?tf(e):tf.ceil(e)}function xV(e,t){return e=i7(e),at(tf.count(Po(e),e)+(Po(e).getUTCDay()===4),t,2)}function _V(e){return e.getUTCDay()}function bV(e,t){return at(e1.count(Po(e)-1,e),t,2)}function wV(e,t){return at(e.getUTCFullYear()%100,t,2)}function SV(e,t){return e=i7(e),at(e.getUTCFullYear()%100,t,2)}function EV(e,t){return at(e.getUTCFullYear()%1e4,t,4)}function AV(e,t){var n=e.getUTCDay();return e=n>=4||n===0?tf(e):tf.ceil(e),at(e.getUTCFullYear()%1e4,t,4)}function CV(){return"+0000"}function NN(){return"%"}function ON(e){return+e}function DN(e){return Math.floor(+e/1e3)}var xc,tA,o7,nA,s7;kV({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function kV(e){return xc=e7(e),tA=xc.format,o7=xc.parse,nA=xc.utcFormat,s7=xc.utcParse,xc}function kh(e){const t={};return n=>t[n]||(t[n]=e(n))}function $V(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=MV(r,i);const s=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+s}}function MV(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function a7(e){const t=kh(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=lu(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return $V(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,s){s=lu(s??",f");const a=Ua(r,i,o),l=Math.max(Math.abs(r),Math.abs(i));let c;if(s.precision==null)switch(s.type){case"s":return isNaN(c=OF(a,l))||(s.precision=c),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(c=DF(a,l))||(s.precision=c-(s.type==="e"));break}case"f":case"%":{isNaN(c=NF(a))||(s.precision=c-(s.type==="%")*2);break}}return t(s)}}}let Nw;l7();function l7(){return Nw=a7({format:Ny,formatPrefix:JE})}function u7(e){return a7(MF(e))}function t1(e){return arguments.length?Nw=u7(e):Nw}function FN(e,t,n){n=n||{},ve(n)||Z(`Invalid time multi-format specifier: ${n}`);const r=t(_i),i=t(Kr),o=t(Qr),s=t($r),a=t(nn),l=t(Gn),c=t(kr),f=t(Mn),h=e(n[Qi]||".%L"),p=e(n[_i]||":%S"),m=e(n[Kr]||"%I:%M"),y=e(n[Qr]||"%I %p"),v=e(n[$r]||n[Wn]||"%a %d"),_=e(n[nn]||"%b %d"),b=e(n[Gn]||"%B"),S=e(n[kr]||"%B"),A=e(n[Mn]||"%Y");return C=>(r(C)<C?h:i(C)<C?p:o(C)<C?m:s(C)<C?y:l(C)<C?a(C)<C?v:_:f(C)<C?c(C)<C?b:S:A)(C)}function c7(e){const t=kh(e.format),n=kh(e.utcFormat);return{timeFormat:r=>xe(r)?t(r):FN(t,Bf,r),utcFormat:r=>xe(r)?n(r):FN(n,Hf,r),timeParse:kh(e.parse),utcParse:kh(e.utcParse)}}let Ow;f7();function f7(){return Ow=c7({format:tA,parse:o7,utcFormat:nA,utcParse:s7})}function d7(e){return c7(e7(e))}function op(e){return arguments.length?Ow=d7(e):Ow}const Dw=(e,t)=>Ge({},e,t);function h7(e,t){const n=e?u7(e):t1(),r=t?d7(t):op();return Dw(n,r)}function rA(e,t){const n=arguments.length;return n&&n!==2&&Z("defaultLocale expects either zero or two arguments."),n?Dw(t1(e),op(t)):Dw(t1(),op())}function NV(){return l7(),f7(),rA()}const OV=/^(data:|([A-Za-z]+:)?\/\/)/,DV=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,FV=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,TN="file://";function TV(e){return t=>({options:t||{},sanitize:LV,load:RV,fileAccess:!1,file:PV(),http:IV})}async function RV(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t==null?void 0:t.http)}async function LV(e,t){t=Ge({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,s;const a=DV.test(e.replace(FV,""));(e==null||typeof e!="string"||!a)&&Z("Sanitize failure, invalid URI: "+he(e));const l=OV.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),o=(i=e.startsWith(TN))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(TN.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function PV(e){return zV}async function zV(){Z("No file system access.")}async function IV(e,t){const n=Ge({},this.options.http,t),r=t&&t.response,i=await fetch(e,n);return i.ok?He(i[r])?i[r]():i.text():Z(i.status+""+i.statusText)}const UV=e=>e!=null&&e===e,WV=e=>e==="true"||e==="false"||e===!0||e===!1,jV=e=>!Number.isNaN(Date.parse(e)),p7=e=>!Number.isNaN(+e)&&!(e instanceof Date),BV=e=>p7(e)&&Number.isInteger(+e),Fw={boolean:YE,integer:jn,number:jn,date:qE,string:VE,unknown:Vn},P0=[WV,BV,p7,jV],HV=["boolean","integer","number","date"];function g7(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=P0.length,i=P0.map((o,s)=>s+1);for(let o=0,s=0,a,l;o<n;++o)for(l=t?e[o][t]:e[o],a=0;a<r;++a)if(i[a]&&UV(l)&&!P0[a](l)&&(i[a]=0,++s,s===P0.length))return"string";return HV[i.reduce((o,s)=>o===0?s:o,0)-1]}function m7(e,t){return t.reduce((n,r)=>(n[r]=g7(e,r),n),{})}function RN(e){const t=function(n,r){const i={delimiter:e};return iA(n,r?Ge(r,i):i)};return t.responseType="text",t}function iA(e,t){return t.header&&(e=t.header.map(he).join(t.delimiter)+`
`+e),AY(t.delimiter).parse(e+"")}iA.responseType="text";function GV(e){return typeof Buffer=="function"&&He(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function oA(e,t){const n=t&&t.property?vi(t.property):Vn;return ve(e)&&!GV(e)?YV(n(e),t):n(JSON.parse(e))}oA.responseType="json";function YV(e,t){return!ne(e)&&uF(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const qV={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function y7(e,t){let n,r,i,o;return e=oA(e,t),t&&t.feature?(n=MY,i=t.feature):t&&t.mesh?(n=OY,i=t.mesh,o=qV[t.filter]):Z("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):Z("Invalid TopoJSON object: "+i),r&&r.features||[r]}y7.responseType="json";const wm={dsv:iA,csv:RN(","),tsv:RN("	"),json:oA,topojson:y7};function sA(e,t){return arguments.length>1?(wm[e]=t,this):we(wm,e)?wm[e]:null}function v7(e){const t=sA(e);return t&&t.responseType||"text"}function x7(e,t,n,r){t=t||{};const i=sA(t.type||"json");return i||Z("Unknown data format type: "+t.type),e=i(e,t),t.parse&&VV(e,t.parse,n,r),we(e,"columns")&&delete e.columns,e}function VV(e,t,n,r){if(!e.length)return;const i=op();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),s,a,l,c,f,h;t==="auto"&&(t=m7(e,o)),o=Object.keys(t);const p=o.map(m=>{const y=t[m];let v,_;if(y&&(y.startsWith("date:")||y.startsWith("utc:")))return v=y.split(/:(.+)?/,2),_=v[1],(_[0]==="'"&&_[_.length-1]==="'"||_[0]==='"'&&_[_.length-1]==='"')&&(_=_.slice(1,-1)),(v[0]==="utc"?r:n)(_);if(!Fw[y])throw Error("Illegal format pattern: "+m+":"+y);return Fw[y]});for(l=0,f=e.length,h=o.length;l<f;++l)for(s=e[l],c=0;c<h;++c)a=o[c],s[a]=p[c](s[a])}const Ly=TV();function Py(e){const t=e||Vn,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const s=n.indexOf(i);s>=0&&n.splice(s,1)}return n},n}async function Sm(e,t){try{await t(e)}catch(n){e.error(n)}}const _7=Symbol("vega_id");let XV=1;function zy(e){return!!(e&&De(e))}function De(e){return e[_7]}function b7(e,t){return e[_7]=t,e}function ut(e){const t=e===Object(e)?e:{data:e};return De(t)?t:b7(t,XV++)}function aA(e){return Iy(e,ut({}))}function Iy(e,t){for(const n in e)t[n]=e[n];return t}function w7(e,t){return b7(t,De(e))}function Du(e,t){return e?t?(n,r)=>e(n,r)||De(t(n))-De(t(r)):(n,r)=>e(n,r)||De(n)-De(r):null}function S7(e){return e&&e.constructor===Fu}function Fu(){const e=[],t=[],n=[],r=[],i=[];let o=null,s=!1;return{constructor:Fu,insert(a){const l=_e(a),c=l.length;for(let f=0;f<c;++f)e.push(l[f]);return this},remove(a){const l=He(a)?r:t,c=_e(a),f=c.length;for(let h=0;h<f;++h)l.push(c[h]);return this},modify(a,l,c){const f={field:l,value:Xn(c)};return He(a)?(f.filter=a,i.push(f)):(f.tuple=a,n.push(f)),this},encode(a,l){return He(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return o=a,this},reflow(){return s=!0,this},pulse(a,l){const c={},f={};let h,p,m,y,v,_;for(h=0,p=l.length;h<p;++h)c[De(l[h])]=1;for(h=0,p=t.length;h<p;++h)v=t[h],c[De(v)]=-1;for(h=0,p=r.length;h<p;++h)y=r[h],l.forEach(S=>{y(S)&&(c[De(S)]=-1)});for(h=0,p=e.length;h<p;++h)v=e[h],_=De(v),c[_]?c[_]=1:a.add.push(ut(e[h]));for(h=0,p=l.length;h<p;++h)v=l[h],c[De(v)]<0&&a.rem.push(v);function b(S,A,C){C?S[A]=C(S):a.encode=A,s||(f[De(S)]=S)}for(h=0,p=n.length;h<p;++h)m=n[h],v=m.tuple,y=m.field,_=c[De(v)],_>0&&(b(v,y,m.value),a.modifies(y));for(h=0,p=i.length;h<p;++h)m=i[h],y=m.filter,l.forEach(S=>{y(S)&&c[De(S)]>0&&b(S,m.field,m.value)}),a.modifies(m.field);if(s)a.mod=t.length||r.length?l.filter(S=>c[De(S)]>0):l.slice();else for(_ in f)a.mod.push(f[_]);return(o||o==null&&(t.length||r.length))&&a.clean(!0),a}}}const Em="_:mod:_";function Uy(){Object.defineProperty(this,Em,{writable:!0,value:{}})}Uy.prototype={set(e,t,n,r){const i=this,o=i[e],s=i[Em];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,s[t+":"+e]=-1,s[e]=-1):(o!==n||r)&&(i[e]=n,s[e]=ne(n)?1+n.length:-1),i},modified(e,t){const n=this[Em];if(arguments.length){if(ne(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[Em]={},this}};let JV=0;const QV="pulse",KV=new Uy,ZV=1,eX=2;function vt(e,t,n,r){this.id=++JV,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function LN(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}vt.prototype={targets(){return this._targets||(this._targets=Py(Tp))},set(e){return this.value!==e?(this.value=e,1):0},skip:LN(ZV),modified:LN(eX),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new Uy,i=this._argops=this._argops||[],o=[];let s,a,l,c;const f=(h,p,m)=>{m instanceof vt?(m!==this&&(t&&m.targets().add(this),o.push(m)),i.push({op:m,name:h,index:p})):r.set(h,p,m)};for(s in e)if(a=e[s],s===QV)_e(a).forEach(h=>{h instanceof vt?h!==this&&(h.targets().add(this),o.push(h)):Z("Pulse parameters must be operator instances.")}),this.source=a;else if(ne(a))for(r.set(s,-1,Array(l=a.length)),c=0;c<l;++c)f(s,c,a[c]);else f(s,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||KV,n=this._argops;let r,i,o,s;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],o=r.op,s=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,s);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function tX(e,t,n,r){let i=1,o;return e instanceof vt?o=e:e&&e.prototype instanceof vt?o=new e:He(e)?o=new vt(null,e):(i=0,o=new vt(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function nX(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let rX=0;function Wy(e,t,n){this.id=++rX,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function ma(e,t,n){return new Wy(e,t,n)}Wy.prototype={_filter:xi,_apply:Vn,targets(){return this._targets||(this._targets=Py(Tp))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=ma(e);return this.targets().add(t),t},apply(e){const t=ma(null,e);return this.targets().add(t),t},merge(){const e=ma();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=ma();return this.targets().add(ma(null,null,BE(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(ma(null,null,()=>n=!0)),t.targets().add(ma(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=xi,this._targets=null}};function iX(e,t,n,r){const i=this,o=ma(n,r),s=function(c){c.dataflow=i;try{o.receive(c)}catch(f){i.error(f)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=_e(e);const l=a.length;for(let c=0;c<l;++c)a[c].addEventListener(t,s);return o}function oX(e,t){const n=this.locale();return x7(e,t,n.timeParse,n.utcParse)}function sX(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function aX(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:v7(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function lX(e,t,n){const r=this,i=r._pending||uX(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(xi).insert(o.data||[])),i.done(),o}function uX(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const cX={skip:!0};function fX(e,t,n,r,i){return(e instanceof vt?hX:dX)(this,e,t,n,r,i),this}function dX(e,t,n,r,i,o){const s=Ge({},o,cX);let a,l;He(n)||(n=Xn(n)),r===void 0?a=c=>e.touch(n(c)):He(r)?(l=new vt(null,r,i,!1),a=c=>{l.evaluate(c);const f=n(c),h=l.value;S7(h)?e.pulse(f,h,o):e.update(f,h,s)}):a=c=>e.update(n(c),r,s),t.apply(a)}function hX(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const s=o||{},a=new vt(null,pX(n,r),i,!1);a.modified(s.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function pX(e,t){return t=He(t)?t:Xn(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function gX(e){e.rank=++this._rank}function mX(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Z("Cycle detected in dataflow graph.")}const n1={},bo=1,xa=2,gs=4,yX=bo|xa,PN=bo|gs,_c=bo|xa|gs,zN=8,th=16,IN=32,UN=64;function Ra(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function U_(e,t){const n=[];return va(e,t,r=>n.push(r)),n}function WN(e,t){const n={};return e.visit(t,r=>{n[De(r)]=1}),r=>n[De(r)]?null:r}function z0(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}Ra.prototype={StopPropagation:n1,ADD:bo,REM:xa,MOD:gs,ADD_REM:yX,ADD_MOD:PN,ALL:_c,REFLOW:zN,SOURCE:th,NO_SOURCE:IN,NO_FIELDS:UN,fork(e){return new Ra(this.dataflow).init(this,e)},clone(){const e=this.fork(_c);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(_c|th)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Ra(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&UN)&&(n.fields=e.fields),t&bo?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&xa?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&gs?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&IN?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||_c;return t&bo&&this.add.length||t&xa&&this.rem.length||t&gs&&this.mod.length},reflow(e){if(e)return this.fork(_c).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(gs,WN(this,bo))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ne(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?ne(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&bo&&(n.addF=z0(n.addF,t)),e&xa&&(n.remF=z0(n.remF,t)),e&gs&&(n.modF=z0(n.modF,t)),e&th&&(n.srcF=z0(n.srcF,t)),n},materialize(e){e=e||_c;const t=this;return e&bo&&t.addF&&(t.add=U_(t.add,t.addF),t.addF=null),e&xa&&t.remF&&(t.rem=U_(t.rem,t.remF),t.remF=null),e&gs&&t.modF&&(t.mod=U_(t.mod,t.modF),t.modF=null),e&th&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&th)return va(n.source,n.srcF,r),n;e&bo&&va(n.add,n.addF,r),e&xa&&va(n.rem,n.remF,r),e&gs&&va(n.mod,n.modF,r);const i=n.source;if(e&zN&&i){const o=n.add.length+n.mod.length;o===i.length||(o?va(i,WN(n,PN),r):va(i,n.srcF,r))}return n}};function lA(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const a=i.fields||(i.fields={});for(const l in s.fields)a[l]=1}s.changed(i.ADD)&&(o|=i.ADD),s.changed(i.REM)&&(o|=i.REM),s.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}ge(lA,Ra,{fork(e){const t=new Ra(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ne(e)?e.some(r=>n[r]):n[e]:0},filter(){Z("MultiPulse does not support filtering.")},materialize(){Z("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function vX(e,t,n){const r=this,i=[];if(r._pulse)return E7(r);if(r._pending&&await r._pending,t&&await Sm(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new Ra(r,o,e),r._touched.forEach(f=>r._enqueue(f,!0)),r._touched=Py(Tp);let s=0,a,l,c;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=n1),l!==n1&&a._targets&&a._targets.forEach(f=>r._enqueue(f)),++s}}catch(f){r._heap.clear(),c=f}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${s} operators`),c&&(r._postrun=[],r.error(c)),r._postrun.length){const f=r._postrun.sort((h,p)=>p.priority-h.priority);r._postrun=[];for(let h=0;h<f.length;++h)await Sm(r,f[h].callback)}return n&&await Sm(r,n),i.length&&Promise.all(i).then(f=>r.runAsync(null,()=>{f.forEach(h=>{try{h(r)}catch(p){r.error(p)}})})),r}async function xX(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function _X(e,t,n){return this._pulse?E7(this):(this.evaluate(e,t,n),this)}function bX(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function E7(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function wX(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function SX(e,t){const n=e.source,r=this._clock;return n&&ne(n)?new lA(this,r,n.map(i=>i.pulse),t):this._input[e.id]||EX(this._pulse,n&&n.pulse)}function EX(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==n1&&(e.source=t.source),e)}const uA={skip:!1,force:!1};function AX(e,t){const n=t||uA;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function CX(e,t,n){const r=n||uA;return(e.set(t)||r.force)&&this.touch(e,r),this}function kX(e,t,n){this.touch(e,n||uA);const r=new Ra(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function $X(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),A7(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,MX(t,0,e)):r=n,r}}}function A7(e,t,n,r){let i,o;const s=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(s,i)<0){e[n]=i,n=o;continue}break}return e[n]=s}function MX(e,t,n){const r=t,i=e.length,o=e[t];let s=(t<<1)+1,a;for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=o,A7(e,r,t,n)}function Wc(){this.logger(ky()),this.logLevel(PE),this._clock=0,this._rank=0,this._locale=rA();try{this._loader=Ly()}catch{}this._touched=Py(Tp),this._input={},this._pulse=null,this._heap=$X((e,t)=>e.qrank-t.qrank),this._postrun=[]}function nh(e){return function(){return this._log[e].apply(this,arguments)}}Wc.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:nh("error"),warn:nh("warn"),info:nh("info"),debug:nh("debug"),logLevel:nh("level"),cleanThreshold:1e4,add:tX,connect:nX,rank:gX,rerank:mX,pulse:kX,touch:AX,update:CX,changeset:Fu,ingest:sX,parse:oX,preload:lX,request:aX,events:iX,on:fX,evaluate:vX,run:_X,runAsync:xX,runAfter:bX,_enqueue:wX,_getPulse:SX};function K(e,t){vt.call(this,e,null,t)}ge(K,vt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const rf={};function C7(e){const t=k7(e);return t&&t.Definition||null}function k7(e){return e=e&&e.toLowerCase(),we(rf,e)?rf[e]:null}function*$7(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function cA(e,t,n){const r=Float64Array.from($7(e,n));return r.sort(Cs),t.map(i=>EF(r,i))}function fA(e,t){return cA(e,[.25,.5,.75],t)}function dA(e,t){const n=e.length,r=IY(e,t),i=fA(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function M7(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],s=e.extent[1],a,l,c,f,h,p;const m=e.span||s-o||Math.abs(o)||1;if(e.step)a=e.step;else if(e.steps){for(f=m/t,h=0,p=e.steps.length;h<p&&e.steps[h]<f;++h);a=e.steps[Math.max(0,h-1)]}else{for(l=Math.ceil(Math.log(t)/r),c=e.minstep||0,a=Math.max(c,Math.pow(n,Math.round(Math.log(m)/r)-l));Math.ceil(m/a)>t;)a*=n;for(h=0,p=i.length;h<p;++h)f=a/i[h],f>=c&&m/f<=t&&(a=f)}f=Math.log(a);const y=f>=0?0:~~(-f/r)+1,v=Math.pow(n,-y-1);return(e.nice||e.nice===void 0)&&(f=Math.floor(o/a+v)*a,o=o<f?f-a:f,s=Math.ceil(s/a)*a),{start:o,stop:s===o?o+a:s,step:a}}var bi=Math.random;function NX(e){bi=e}function N7(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from($7(e,r)),o=i.length,s=t;let a,l,c,f;for(c=0,f=Array(s);c<s;++c){for(a=0,l=0;l<o;++l)a+=i[~~(bi()*o)];f[c]=a/o}return f.sort(Cs),[Ew(f,n/2),Ew(f,1-n/2)]}function O7(e,t,n,r){r=r||(p=>p);const i=e.length,o=new Float64Array(i);let s=0,a=1,l=r(e[0]),c=l,f=l+t,h;for(;a<i;++a){if(h=r(e[a]),h>=f){for(c=(l+c)/2;s<a;++s)o[s]=c;f=h+t,l=h}c=h}for(c=(l+c)/2;s<a;++s)o[s]=c;return n?OX(o,t+t/4):o}function OX(e,t){const n=e.length;let r=0,i=1,o,s;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(s=i+(r+o-i-i>>1);s<i;)e[s++]=e[i];for(;s>i;)e[s--]=e[r]}r=i,i=o}return e}function DX(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function FX(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(s){return arguments.length?(n=s||0,i=r-n,o):n},max(s){return arguments.length?(r=s||0,i=r-n,o):r},sample(){return n+Math.floor(i*bi())},pdf(s){return s===Math.floor(s)&&s>=n&&s<r?1/i:0},cdf(s){const a=Math.floor(s);return a<n?0:a>=r?1:(a-n+1)/i},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*i):NaN}};return o.min(e).max(t)}const D7=Math.sqrt(2*Math.PI),TX=Math.SQRT2;let rh=NaN;function jy(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(rh===rh)n=rh,rh=NaN;else{do n=bi()*2-1,r=bi()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,rh=r*o}return e+n*t}function hA(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*D7)}function By(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const s=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,o=s*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,o=o/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,o=s/a/2.506628274631)}return r>0?1-o:o}function Hy(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*TX*RX(2*e-1)}function RX(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function pA(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>jy(n,r),pdf:o=>hA(o,n,r),cdf:o=>By(o,n,r),icdf:o=>Hy(o,n,r)};return i.mean(e).stdev(t)}function gA(e,t){const n=pA();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=dA(e)),i):t},sample(){return e[~~(bi()*r)]+t*n.sample()},pdf(o){let s=0,a=0;for(;a<r;++a)s+=n.pdf((o-e[a])/t);return s/t/r},cdf(o){let s=0,a=0;for(;a<r;++a)s+=n.cdf((o-e[a])/t);return s/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function mA(e,t){return e=e||0,t=t??1,Math.exp(e+jy()*t)}function yA(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*D7*e)}function vA(e,t,n){return By(Math.log(e),t,n)}function xA(e,t,n){return Math.exp(Hy(e,t,n))}function F7(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>mA(n,r),pdf:o=>yA(o,n,r),cdf:o=>vA(o,n,r),icdf:o=>xA(o,n,r)};return i.mean(e).stdev(t)}function T7(e,t){let n=0,r;function i(s){const a=[];let l=0,c;for(c=0;c<n;++c)l+=a[c]=s[c]==null?1:+s[c];for(c=0;c<n;++c)a[c]/=l;return a}const o={weights(s){return arguments.length?(r=i(t=s||[]),o):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),o.weights(t)):e},sample(){const s=bi();let a=e[n-1],l=r[0],c=0;for(;c<n-1;l+=r[++c])if(s<l){a=e[c];break}return a.sample()},pdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(s);return a},cdf(s){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(s);return a},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function _A(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*bi()}function bA(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function wA(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function SA(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function R7(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>_A(n,r),pdf:o=>bA(o,n,r),cdf:o=>wA(o,n,r),icdf:o=>SA(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function EA(e,t,n){let r=0,i=0;for(const o of e){const s=n(o);t(o)==null||s==null||isNaN(s)||(r+=(s-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Lp(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function Gy(e,t,n,r){e=e.filter(m=>{let y=t(m),v=n(m);return y!=null&&(y=+y)>=y&&v!=null&&(v=+v)>=v}),r&&e.sort((m,y)=>t(m)-t(y));const i=e.length,o=new Float64Array(i),s=new Float64Array(i);let a=0,l=0,c=0,f,h,p;for(p of e)o[a]=f=+t(p),s[a]=h=+n(p),++a,l+=(f-l)/a,c+=(h-c)/a;for(a=0;a<i;++a)o[a]-=l,s[a]-=c;return[o,s,l,c]}function Pp(e,t,n,r){let i=-1,o,s;for(const a of e)o=t(a),s=n(a),o!=null&&(o=+o)>=o&&s!=null&&(s=+s)>=s&&r(o,s,++i)}function Gf(e,t,n,r,i){let o=0,s=0;return Pp(e,t,n,(a,l)=>{const c=l-i(a),f=l-r;o+=c*c,s+=f*f}),1-o/s}function AA(e,t,n){let r=0,i=0,o=0,s=0,a=0;Pp(e,t,n,(f,h)=>{++a,r+=(f-r)/a,i+=(h-i)/a,o+=(f*h-o)/a,s+=(f*f-s)/a});const l=Lp(r,i,o,s),c=f=>l[0]+l[1]*f;return{coef:l,predict:c,rSquared:Gf(e,t,n,i,c)}}function L7(e,t,n){let r=0,i=0,o=0,s=0,a=0;Pp(e,t,n,(f,h)=>{++a,f=Math.log(f),r+=(f-r)/a,i+=(h-i)/a,o+=(f*h-o)/a,s+=(f*f-s)/a});const l=Lp(r,i,o,s),c=f=>l[0]+l[1]*Math.log(f);return{coef:l,predict:c,rSquared:Gf(e,t,n,i,c)}}function P7(e,t,n){const[r,i,o,s]=Gy(e,t,n);let a=0,l=0,c=0,f=0,h=0,p,m,y;Pp(e,t,n,(S,A)=>{p=r[h++],m=Math.log(A),y=p*A,a+=(A*m-a)/h,l+=(y-l)/h,c+=(y*m-c)/h,f+=(p*y-f)/h});const[v,_]=Lp(l/s,a/s,c/s,f/s),b=S=>Math.exp(v+_*(S-o));return{coef:[Math.exp(v-_*o),_],predict:b,rSquared:Gf(e,t,n,s,b)}}function z7(e,t,n){let r=0,i=0,o=0,s=0,a=0,l=0;Pp(e,t,n,(h,p)=>{const m=Math.log(h),y=Math.log(p);++l,r+=(m-r)/l,i+=(y-i)/l,o+=(m*y-o)/l,s+=(m*m-s)/l,a+=(p-a)/l});const c=Lp(r,i,o,s),f=h=>c[0]*Math.pow(h,c[1]);return c[0]=Math.exp(c[0]),{coef:c,predict:f,rSquared:Gf(e,t,n,a,f)}}function CA(e,t,n){const[r,i,o,s]=Gy(e,t,n),a=r.length;let l=0,c=0,f=0,h=0,p=0,m,y,v,_;for(m=0;m<a;)y=r[m],v=i[m++],_=y*y,l+=(_-l)/m,c+=(_*y-c)/m,f+=(_*_-f)/m,h+=(y*v-h)/m,p+=(_*v-p)/m;const b=f-l*l,S=l*b-c*c,A=(p*l-h*c)/S,C=(h*b-p*c)/S,k=-A*l,N=$=>($=$-o,A*$*$+C*$+k+s);return{coef:[k-C*o+A*o*o+s,C-2*A*o,A],predict:N,rSquared:Gf(e,t,n,s,N)}}function I7(e,t,n,r){if(r===0)return EA(e,t,n);if(r===1)return AA(e,t,n);if(r===2)return CA(e,t,n);const[i,o,s,a]=Gy(e,t,n),l=i.length,c=[],f=[],h=r+1;let p,m,y,v,_;for(p=0;p<h;++p){for(y=0,v=0;y<l;++y)v+=Math.pow(i[y],p)*o[y];for(c.push(v),_=new Float64Array(h),m=0;m<h;++m){for(y=0,v=0;y<l;++y)v+=Math.pow(i[y],p+m);_[m]=v}f.push(_)}f.push(c);const b=PX(f),S=A=>{A-=s;let C=a+b[0]+b[1]*A+b[2]*A*A;for(p=3;p<h;++p)C+=b[p]*Math.pow(A,p);return C};return{coef:LX(h,b,-s,a),predict:S,rSquared:Gf(e,t,n,a,S)}}function LX(e,t,n,r){const i=Array(e);let o,s,a,l;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(a=t[o],l=1,i[o]+=a,s=1;s<=o;++s)l*=(o+1-s)/s,i[o-s]+=a*Math.pow(n,s)*l;return i[0]+=r,i}function PX(e){const t=e.length-1,n=[];let r,i,o,s,a;for(r=0;r<t;++r){for(s=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][s])&&(s=i);for(o=r;o<t+1;++o)a=e[o][r],e[o][r]=e[o][s],e[o][s]=a;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,o=i+1;o<t;++o)a+=e[o][i]*n[o];n[i]=(e[t][i]-a)/e[i][i]}return n}const jN=2,BN=1e-12;function U7(e,t,n,r){const[i,o,s,a]=Gy(e,t,n,!0),l=i.length,c=Math.max(2,~~(r*l)),f=new Float64Array(l),h=new Float64Array(l),p=new Float64Array(l).fill(1);for(let m=-1;++m<=jN;){const y=[0,c-1];for(let _=0;_<l;++_){const b=i[_],S=y[0],A=y[1],C=b-i[S]>i[A]-b?S:A;let k=0,N=0,$=0,O=0,D=0;const P=1/Math.abs(i[C]-b||1);for(let B=S;B<=A;++B){const I=i[B],F=o[B],W=zX(Math.abs(b-I)*P)*p[B],V=I*W;k+=W,N+=V,$+=F*W,O+=F*V,D+=I*V}const[R,X]=Lp(N/k,$/k,O/k,D/k);f[_]=R+X*b,h[_]=Math.abs(o[_]-f[_]),IX(i,_+1,y)}if(m===jN)break;const v=AF(h);if(Math.abs(v)<BN)break;for(let _=0,b,S;_<l;++_)b=h[_]/(6*v),p[_]=b>=1?BN:(S=1-b*b)*S}return UX(i,f,s,a)}function zX(e){return(e=1-e*e*e)*e*e}function IX(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function UX(e,t,n,r){const i=e.length,o=[];let s=0,a=0,l=[],c;for(;s<i;++s)c=e[s]+n,l[0]===c?l[1]+=(t[s]-l[1])/++a:(a=0,l[1]+=r,l=[c,t[s]],o.push(l));return l[1]+=r,o}const WX=.5*Math.PI/180;function Yy(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=v=>[v,e(v)],o=t[0],s=t[1],a=s-o,l=a/r,c=[i(o)],f=[];if(n===r){for(let v=1;v<r;++v)c.push(i(o+v/n*a));return c.push(i(s)),c}else{f.push(i(s));for(let v=n;--v>0;)f.push(i(o+v/n*a))}let h=c[0],p=f[f.length-1];const m=1/a,y=jX(h[1],f);for(;p;){const v=i((h[0]+p[0])/2);v[0]-h[0]>=l&&BX(h,v,p,m,y)>WX?f.push(v):(h=p,c.push(p),f.pop()),p=f[f.length-1]}return c}function jX(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const s=t[o][1];s<n&&(n=s),s>r&&(r=s)}return 1/(r-n)}function BX(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),s=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-s)}function HX(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function Tw(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:HX(e)}function W7(e,t,n){return n||e+(t?"_"+t:"")}const W_=()=>{},GX={init:W_,add:W_,rem:W_,idx:0},sp={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},zp=Object.keys(sp).filter(e=>e!=="__count__");function YX(e,t){return(n,r)=>Ge({name:e,aggregate_param:r,out:n||e},GX,t)}[...zp,"__count__"].forEach(e=>{sp[e]=YX(e,sp[e])});function j7(e,t,n){return sp[e](n,t)}function B7(e,t){return e.idx-t.idx}function qX(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=sp[i]())})};return e.forEach(n),Object.values(t).sort(B7)}function VX(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function XX(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function JX(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function QX(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function H7(e,t){const n=t||Vn,r=qX(e),i=e.slice().sort(B7);function o(s){this._ops=r,this._out=i,this.cell=s,this.init()}return o.prototype.init=VX,o.prototype.add=XX,o.prototype.rem=JX,o.prototype.set=QX,o.prototype.get=n,o.fields=e.map(s=>s.out),o}function kA(e){this._key=e?vi(e):De,this.reset()}const On=kA.prototype;On.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};On.add=function(e){this._add.push(e)};On.rem=function(e){this._rem.push(e)};On.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),s={};let a,l,c;for(a=0;a<i;++a)s[n(t[a])]=1;for(a=0,l=0;a<r;++a)s[n(c=e[a])]?s[n(c)]=0:o[l++]=c;return this._rem=[],this._add=o};On.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",we(n,o)||(n[o]=1,++i);return i};On.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=aF(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};On.argmin=function(e){return this.extent(e)[0]||{}};On.argmax=function(e){return this.extent(e)[1]||{}};On.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};On.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};On.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=fA(this.values(),e),this._get=e),this._q};On.q1=function(e){return this.quartile(e)[0]};On.q2=function(e){return this.quartile(e)[1]};On.q3=function(e){return this.quartile(e)[2]};On.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=N7(this.values(),1e3,.05,e),this._get=e),this._ci};On.ci0=function(e){return this.ci(e)[0]};On.ci1=function(e){return this.ci(e)[1]};function Wa(e){K.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Wa.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:zp},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ge(Wa,K,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(a){let l,c,f,h;for(l in a)for(f=a[l].tuple,c=0;c<i;++c)r[c][h=f[n[c]]]=h}o(e._prev),o(t);function s(a,l,c){const f=n[c],h=r[c++];for(const p in h){const m=a?a+"|"+p:p;l[f]=h[p],c<i?s(m,l,c):t[m]||e.cell(m,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(S){const A=_e(Hn(S)),C=A.length;let k=0,N;for(;k<C;++k)r[N=A[k]]||(r[N]=1,t.push(N))}this._dims=_e(e.groupby),this._dnames=this._dims.map(S=>{const A=Ut(S);return i(S),n.push(A),A}),this.cellkey=e.key?e.key:Tw(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],s=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],c=o.length,f={};let h,p,m,y,v,_,b;for(c!==s.length&&Z("Unmatched number of fields and aggregate ops."),b=0;b<c;++b){if(h=o[b],p=s[b],m=a[b]||null,h==null&&p!=="count"&&Z("Null aggregate field specified."),v=Ut(h),_=W7(p,v,l[b]),n.push(_),p==="count"){this._counts.push(_);continue}y=f[v],y||(i(h),y=f[v]=[],y.field=h,this._measures.push(y)),p!=="count"&&(this._countOnly=!1),y.push(j7(p,m,_))}return this._measures=this._measures.map(S=>H7(S,S.field)),Object.create(null)},cellkey:Tw(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new kA),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let s=0;s<i;++s)o[n[s]]=r[s](e);return t?w7(t.tuple,o):ut(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,s=e.rem,a=e.mod;let l,c,f,h;if(r)for(c in r)l=r[c],(!i||l.num)&&s.push(l.tuple);for(f=0,h=this._alen;f<h;++f)o.push(this.celltuple(t[f])),t[f]=null;for(f=0,h=this._mlen;f<h;++f)l=n[f],(l.num===0&&i?s:a).push(this.celltuple(l)),n[f]=null;return this._alen=this._mlen=0,this._prev=null,e}});const KX=1e-14;function $A(e){K.call(this,null,e)}$A.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ge($A,K,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,s=e.as||["bin0","bin1"],a=s[0],l=s[1];let c;return e.modified()?(t=t.reflow(!0),c=t.SOURCE):c=t.modified(Hn(e.field))?t.ADD_MOD:t.ADD,t.visit(c,n?f=>{const h=r(f);f[a]=h,f[l]=h==null?null:i+o*(1+(h-i)/o)}:f=>f[a]=r(f)),t.modifies(n?s:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=M7(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,s,a;(s=e.anchor)!=null&&(a=s-(i+r*Math.floor((s-i)/r)),i+=a,o+=a);const l=function(c){let f=jn(t(c));return f==null?null:f<i?-1/0:f>o?1/0:(f=Math.max(i,Math.min(f,o-r)),i+r*Math.floor(KX+(f-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=Fr(l,Hn(t),e.name||"bin_"+Ut(t))}});function G7(e,t,n){const r=e;let i=t||[],o=n||[],s={},a=0;return{add:l=>o.push(l),remove:l=>s[r(l)]=++a,size:()=>i.length,data:(l,c)=>(a&&(i=i.filter(f=>!s[r(f)]),s={},a=0),c&&l&&i.sort(l),o.length&&(i=l?dF(l,i,o.sort(l)):i.concat(o),o=[]),i)}}function MA(e){K.call(this,[],e)}MA.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ge(MA,K,{transform(e,t){const n=t.fork(t.ALL),r=G7(De,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(Du(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function Y7(e){vt.call(this,null,ZX,e)}ge(Y7,vt);function ZX(e){return this.value&&!e.modified()?this.value:jE(e.fields,e.orders)}function NA(e){K.call(this,null,e)}NA.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function eJ(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ge(NA,K,{transform(e,t){const n=h=>p=>{for(var m=eJ(a(p),e.case,o)||[],y,v=0,_=m.length;v<_;++v)s.test(y=m[v])||h(y)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,s=this._stop,a=e.field,l=e.as||["text","count"],c=n(h=>i[h]=1+(i[h]||0)),f=n(h=>i[h]-=1);return r?t.visit(t.SOURCE,c):(t.visit(t.ADD,c),t.visit(t.REM,f)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,c;for(a in n)l=r[a],c=n[a]||0,!l&&c?(r[a]=l=ut({}),l[i]=a,l[o]=c,s.add.push(l)):c===0?(l&&s.rem.push(l),n[a]=null,r[a]=null):l[o]!==c&&(l[o]=c,s.mod.push(l));return s.modifies(t)}});function OA(e){K.call(this,null,e)}OA.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ge(OA,K,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return s?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=tJ(a,i,o,e.filter||xi)):n.mod=a,n.source=this.value,n.modifies(r)}});function tJ(e,t,n,r){for(var i=[],o={},s=e.length,a=0,l,c;a<s;++a)for(o[t]=c=e[a],l=0;l<s;++l)o[n]=e[l],r(o)&&(i.push(ut(o)),o={},o[t]=c);return i}const HN={kde:gA,mixture:T7,normal:pA,lognormal:F7,uniform:R7},nJ="distributions",GN="function",rJ="field";function q7(e,t){const n=e[GN];we(HN,n)||Z("Unknown distribution function: "+n);const r=HN[n]();for(const i in e)i===rJ?r.data((e.from||t()).map(e[i])):i===nJ?r[i](e[i].map(o=>q7(o,t))):typeof r[i]===GN&&r[i](e[i]);return r}function DA(e){K.call(this,null,e)}const V7=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],iJ={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:V7},{name:"weights",type:"number",array:!0}]};DA.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:V7.concat(iJ)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ge(DA,K,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=q7(e.distribution,oJ(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&Z("Invalid density method: "+s),!e.extent&&!r.data&&Z("Missing density extent parameter."),s=r[s];const a=e.as||["value","density"],l=e.extent||Ro(r.data()),c=Yy(s,l,i,o).map(f=>{const h={};return h[a[0]]=f[0],h[a[1]]=f[1],ut(h)});this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});function oJ(e){return()=>e.materialize(e.SOURCE).source}function X7(e,t){return e?e.map((n,r)=>t[r]||Ut(n)):null}function FA(e,t,n){const r=[],i=h=>h(l);let o,s,a,l,c,f;if(t==null)r.push(e.map(n));else for(o={},s=0,a=e.length;s<a;++s)l=e[s],c=t.map(i),f=o[c],f||(o[c]=f=[],f.dims=c,r.push(f)),f.push(n(l));return r}const J7="bin";function TA(e){K.call(this,null,e)}TA.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:J7}]};const sJ=(e,t)=>Rp(Ro(e,t))/30;ge(TA,K,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=FA(t.source,e.groupby,Vn),i=e.smooth||!1,o=e.field,s=e.step||sJ(n,o),a=Du((y,v)=>o(y)-o(v)),l=e.as||J7,c=r.length;let f=1/0,h=-1/0,p=0,m;for(;p<c;++p){const y=r[p].sort(a);m=-1;for(const v of O7(y,s,i,o))v<f&&(f=v),v>h&&(h=v),y[++m][l]=v}return this.value={start:f,stop:h,step:s},t.reflow(!0).modifies(l)}});function Q7(e){vt.call(this,null,aJ,e),this.modified(!0)}ge(Q7,vt);function aJ(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Fr(n=>t(n,e),Hn(t),Ut(t))}function RA(e){K.call(this,[void 0,void 0],e)}RA.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ge(RA,K,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],s=n[1];if((i||o==null)&&(o=1/0,s=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=jn(r(a));l!=null&&(l<o&&(o=l),l>s&&(s=l))}),!Number.isFinite(o)||!Number.isFinite(s)){let a=Ut(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${o}, ${s}]`),o=s=void 0}this.value=[o,s]}});function LA(e,t){vt.call(this,e),this.parent=t,this.count=0}ge(LA,vt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function qy(e){K.call(this,{},e),this._keys=If();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ge(qy,K,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=we(i,e)&&i[e],s,a;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(a=r||(a=this._group[e])&&a.tuple,s=n.dataflow,o=new LA(n.fork(n.NO_SOURCE),this),s.add(o).connect(t(s,e,a)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,s=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const c=De(l),f=o.get(c);f!==void 0&&(o.delete(c),a(f).rem(l))}),t.visit(t.ADD,l=>{const c=r(l);o.set(De(l),c),a(c).add(l)}),s||t.modified(r.fields)?t.visit(t.MOD,l=>{const c=De(l),f=o.get(c),h=r(l);f===h?a(h).mod(l):(o.set(c,h),a(f).rem(l),a(h).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(o.get(De(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const c=De(l),f=o.get(c),h=r(l);f!==h&&(o.set(c,h),a(f).rem(l),a(h).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function K7(e){vt.call(this,null,lJ,e)}ge(K7,vt);function lJ(e){return this.value&&!e.modified()?this.value:ne(e.name)?_e(e.name).map(t=>vi(t)):vi(e.name,e.as)}function PA(e){K.call(this,If(),e)}PA.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ge(PA,K,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,s=i.rem,a=i.mod,l=e.expr;let c=!0;t.visit(t.REM,h=>{const p=De(h);r.has(p)?r.delete(p):s.push(h)}),t.visit(t.ADD,h=>{l(h,e)?o.push(h):r.set(De(h),1)});function f(h){const p=De(h),m=l(h,e),y=r.get(p);m&&y?(r.delete(p),o.push(h)):!m&&!y?(r.set(p,1),s.push(h)):c&&m&&!y&&a.push(h)}return t.visit(t.MOD,f),e.modified()&&(c=!1,t.visit(t.REFLOW,f)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function zA(e){K.call(this,[],e)}zA.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ge(zA,K,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=X7(r,e.as||[]),o=e.index||null,s=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(y=>y(a)),c=l.reduce((y,v)=>Math.max(y,v.length),0);let f=0,h,p,m;for(;f<c;++f){for(p=aA(a),h=0;h<s;++h)p[i[h]]=(m=l[h][f])==null?null:m;o&&(p[o]=f),n.add.push(p)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function IA(e){K.call(this,[],e)}IA.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ge(IA,K,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ut),o=e.as||["key","value"],s=o[0],a=o[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,c=>{for(let f=0,h;f<l;++f)h=aA(c),h[s]=i[f],h[a]=r[f](c),n.add.push(h)}),this.value=n.source=n.add,n.modifies(o)}});function UA(e){K.call(this,null,e)}UA.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ge(UA,K,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,s=>s[r]=n(s,e))}});function Z7(e){K.call(this,[],e)}ge(Z7,K,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,s,a,l;if(o>0){for(s=[];--o>=0;)s.push(l=ut(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else a=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-o);return n.source=this.value=i,n}});const I0={value:"value",median:AF,mean:GY,min:Sw,max:Kl},uJ=[];function WA(e){K.call(this,[],e)}WA.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function cJ(e){var t=e.method||I0.value,n;if(I0[t]==null)Z("Unrecognized imputation method: "+t);else return t===I0.value?(n=e.value!==void 0?e.value:0,()=>n):I0[t]}function fJ(e){const t=e.field;return n=>n?t(n):NaN}ge(WA,K,{transform(e,t){var n=t.fork(t.ALL),r=cJ(e),i=fJ(e),o=Ut(e.field),s=Ut(e.key),a=(e.groupby||[]).map(Ut),l=dJ(t.source,e.groupby,e.key,e.keyvals),c=[],f=this.value,h=l.domain.length,p,m,y,v,_,b,S,A,C,k;for(_=0,A=l.length;_<A;++_)for(p=l[_],y=p.values,m=NaN,S=0;S<h;++S)if(p[S]==null){for(v=l.domain[S],k={_impute:!0},b=0,C=y.length;b<C;++b)k[a[b]]=y[b];k[s]=v,k[o]=Number.isNaN(m)?m=r(p,i):m,c.push(ut(k))}return c.length&&(n.add=n.materialize(n.ADD).add.concat(c)),f.length&&(n.rem=n.materialize(n.REM).rem.concat(f)),this.value=c,n}});function dJ(e,t,n,r){var i=b=>b(_),o=[],s=r?r.slice():[],a={},l={},c,f,h,p,m,y,v,_;for(s.forEach((b,S)=>a[b]=S+1),p=0,v=e.length;p<v;++p)_=e[p],y=n(_),m=a[y]||(a[y]=s.push(y)),f=(c=t?t.map(i):uJ)+"",(h=l[f])||(h=l[f]=[],o.push(h),h.values=c),h[m-1]=_;return o.domain=s,o}function jA(e){Wa.call(this,e)}jA.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:zp},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ge(jA,Wa,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{Ge(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function BA(e){K.call(this,null,e)}BA.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ge(BA,K,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=FA(r,e.groupby,e.field),o=(e.groupby||[]).map(Ut),s=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],c=[];let f=e.extent,h=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Z("Invalid density method: "+a),e.resolve==="shared"&&(f||(f=Ro(r,e.field)),h=p=e.steps||p),i.forEach(m=>{const y=gA(m,s)[a],v=e.counts?m.length:1,_=f||Ro(m);Yy(y,_,h,p).forEach(b=>{const S={};for(let A=0;A<o.length;++A)S[o[A]]=m.dims[A];S[l[0]]=b[0],S[l[1]]=b[1]*v,c.push(ut(S))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});function eT(e){vt.call(this,null,hJ,e)}ge(eT,vt);function hJ(e){return this.value&&!e.modified()?this.value:GE(e.fields,e.flat)}function tT(e){K.call(this,[],e),this._pending=null}ge(tT,K,{transform(e,t){const n=t.dataflow;return this._pending?j_(this,t,this._pending):pJ(e)?t.StopPropagation:e.values?j_(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=_e(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>j_(this,t,_e(r.data)))}});function pJ(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function j_(e,t,n){n.forEach(ut);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function HA(e){K.call(this,{},e)}HA.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ge(HA,K,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,s=e.modified(),a=n.length;let l=s?t.SOURCE:t.ADD,c=t,f=e.as,h,p,m;return i?(p=i.length,a>1&&!f&&Z('Multi-field lookup requires explicit "as" parameter.'),f&&f.length!==a*p&&Z('The "as" parameter has too few output field names.'),f=f||i.map(Ut),h=function(y){for(var v=0,_=0,b,S;v<a;++v)if(S=r.get(n[v](y)),S==null)for(b=0;b<p;++b,++_)y[f[_]]=o;else for(b=0;b<p;++b,++_)y[f[_]]=i[b](S)}):(f||Z("Missing output field names."),h=function(y){for(var v=0,_;v<a;++v)_=r.get(n[v](y)),y[f[v]]=_??o}),s?c=t.reflow(!0):(m=n.some(y=>t.modified(y.fields)),l|=m?t.MOD:0),t.visit(l,h),c.modifies(f)}});function nT(e){vt.call(this,null,gJ,e)}ge(nT,vt);function gJ(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,s;for(o=0;o<n;++o)s=t[o],s[0]<r&&(r=s[0]),s[1]>i&&(i=s[1]);return[r,i]}function rT(e){vt.call(this,null,mJ,e)}ge(rT,vt);function mJ(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function iT(e){K.call(this,null,e)}ge(iT,K,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function GA(e){Wa.call(this,e)}GA.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:zp,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ge(GA,Wa,{_transform:Wa.prototype.transform,transform(e,t){return this._transform(yJ(e,t),t)}});function yJ(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=Hn(n).concat(Hn(r)),s=xJ(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>i),fields:s.map(a=>vJ(a,n,r,o)),as:s.map(a=>a+""),modified:e.modified.bind(e)}}function vJ(e,t,n,r){return Fr(i=>t(i)===e?n(i):NaN,r,e+"")}function xJ(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const s=e(o);r[s]||(r[s]=1,i.push(s))}),i.sort(zf),t?i.slice(0,t):i}function oT(e){qy.call(this,e)}ge(oT,qy,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(De(o),n,t,o);return(e.modified("field")||r&&t.modified(Hn(r)))&&Z("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const s=i(o);r(o).forEach(a=>s.mod(a))}),t.visit(t.ADD,o=>{const s=i(o);r(o).forEach(a=>s.add(ut(a)))}),t.visit(t.REM,o=>{const s=i(o);r(o).forEach(a=>s.rem(a))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function YA(e){K.call(this,null,e)}YA.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ge(YA,K,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=X7(e.fields,e.as||[]),o=r?(a,l)=>_J(a,l,r,i):Iy;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,a=>{const l=De(a);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,a=>{const l=o(a,ut({}));s[De(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(o(a,s[De(a)]))}),n}});function _J(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function sT(e){K.call(this,null,e)}ge(sT,K,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function qA(e){K.call(this,null,e)}qA.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const bJ=1e-14;ge(qA,K,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=FA(i,e.groupby,e.field),s=(e.groupby||[]).map(Ut),a=[],l=e.step||.01,c=e.probs||Hr(l/2,1-bJ,l),f=c.length;return o.forEach(h=>{const p=cA(h,c);for(let m=0;m<f;++m){const y={};for(let v=0;v<s.length;++v)y[s[v]]=h.dims[v];y[r[0]]=c[m],y[r[1]]=p[m],a.push(ut(y))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function aT(e){K.call(this,null,e)}ge(aT,K,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=De(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=aA(i);r[De(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[De(i)];for(const s in i)o[s]=i[s],n.modifies(s);n.mod.push(o)})),n}});function VA(e){K.call(this,[],e),this.count=0}VA.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ge(VA,K,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((f,h)=>(f[De(h)]=1,f),{});let s=this.value,a=this.count,l=0;function c(f){let h,p;s.length<i?s.push(f):(p=~~((a+1)*bi()),p<s.length&&p>=l&&(h=s[p],o[De(h)]&&n.rem.push(h),s[p]=f)),++a}if(t.rem.length&&(t.visit(t.REM,f=>{const h=De(f);o[h]&&(o[h]=-1,n.rem.push(f)),--a}),s=s.filter(f=>o[De(f)]!==-1)),(t.rem.length||r)&&s.length<i&&t.source&&(l=a=s.length,t.visit(t.SOURCE,f=>{o[De(f)]||c(f)}),l=-1),r&&s.length>i){const f=s.length-i;for(let h=0;h<f;++h)o[De(s[h])]=-1,n.rem.push(s[h]);s=s.slice(f)}return t.mod.length&&t.visit(t.MOD,f=>{o[De(f)]&&n.mod.push(f)}),t.add.length&&t.visit(t.ADD,c),(t.add.length||l<0)&&(n.add=s.filter(f=>!o[De(f)])),this.count=a,this.value=n.source=s,n}});function XA(e){K.call(this,null,e)}XA.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ge(XA,K,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Hr(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,ut(o)}),n.add=t.add.concat(this.value),n}});function lT(e){K.call(this,null,e),this.modified(!0)}ge(lT,K,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function JA(e){K.call(this,null,e)}const uT=["unit0","unit1"];JA.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:KE,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:uT}]};ge(JA,K,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),s=(i?Hf:Bf)(o.unit).offset,a=e.as||uT,l=a[0],c=a[1],f=o.step;let h=o.start||1/0,p=o.stop||-1/0,m=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Hn(n)))&&(t=t.reflow(!0),m=t.SOURCE,h=1/0,p=-1/0),t.visit(m,y=>{const v=n(y);let _,b;v==null?(y[l]=null,r&&(y[c]=null)):(y[l]=_=b=o(v),r&&(y[c]=b=s(_,f)),_<h&&(h=_),b>p&&(p=b))}),o.start=h,o.stop=p,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:ZF({extent:e.extent||Ro(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=ZE(r),s=this.value||{},a=(n?HF:BF)(o,i);return a.unit=Ze(o),a.units=o,a.step=i,a.start=s.start,a.stop=s.stop,this.value=a}});function cT(e){K.call(this,If(),e)}ge(cT,K,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=a=>i.set(r(a),a);let s=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,o)):s=!1,this.modified(s),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function fT(e){K.call(this,null,e)}ge(fT,K,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Du(e.sort)):t.source).map(e.field))}});function wJ(e,t,n,r){const i=ap[e](t,n);return{init:i.init||Sa,update:function(o,s){s[r]=i.next(o)}}}const ap={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=ap.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Z("ntile num must be greater than zero.");const n=ap.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Z("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=SJ(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function SJ(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const EJ=Object.keys(ap);function dT(e){const t=_e(e.ops),n=_e(e.fields),r=_e(e.params),i=_e(e.aggregate_params),o=_e(e.as),s=this.outputs=[],a=this.windows=[],l={},c={},f=[],h=[];let p=!0;function m(y){_e(Hn(y)).forEach(v=>l[v]=1)}m(e.sort),t.forEach((y,v)=>{const _=n[v],b=r[v],S=i[v]||null,A=Ut(_),C=W7(y,A,o[v]);if(m(_),s.push(C),we(ap,y))a.push(wJ(y,_,b,C));else{if(_==null&&y!=="count"&&Z("Null aggregate field specified."),y==="count"){f.push(C);return}p=!1;let k=c[A];k||(k=c[A]=[],k.field=_,h.push(k)),k.push(j7(y,S,C))}}),(f.length||h.length)&&(this.cell=AJ(h,f,p)),this.inputs=Object.keys(l)}const hT=dT.prototype;hT.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};hT.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(i[s]);for(s=e.p1;s<e.i1;++s)n.add(i[s]);n.set(t)}for(s=0;s<o;++s)r[s].update(e,t)};function AJ(e,t,n){e=e.map(l=>H7(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),s=0;s<i;++s)o[s]=new e[s](r);if(r.store)var a=r.data=new kA;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let c=0;c<i;++c)o[c].add(o[c].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let c=0;c<i;++c)o[c].rem(o[c].get(l),l)}},r.set=function(l){let c,f;for(a&&a.values(),c=0,f=t.length;c<f;++c)l[t[c]]=r.num;if(!n)for(c=0,f=o.length;c<f;++c)o[c].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)o[l].init()},r}function QA(e){K.call(this,{},e),this._mlen=0,this._mods=[]}QA.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:EJ.concat(zp)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ge(QA,K,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Du(e.sort),i=Tw(e.groupby),o=a=>this.group(i(a));let s=this.state;(!s||n)&&(s=this.state=new dT(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,a=>o(a).add(a))):(t.visit(t.REM,a=>o(a).remove(a)),t.visit(t.ADD,a=>o(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)CJ(this._mods[a],s,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=G7(De),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function CJ(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,s=r.frame||[null,0],a=e.data(n),l=a.length,c=o?Uf(i):null,f={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Xn(-1)};t.init();for(let h=0;h<l;++h)kJ(f,s,h,l),o&&$J(f,c),t.update(f,a[h])}function kJ(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function $J(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,s=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<s&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const MJ=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Wa,bin:$A,collect:MA,compare:Y7,countpattern:NA,cross:OA,density:DA,dotbin:TA,expression:Q7,extent:RA,facet:qy,field:K7,filter:PA,flatten:zA,fold:IA,formula:UA,generate:Z7,impute:WA,joinaggregate:jA,kde:BA,key:eT,load:tT,lookup:HA,multiextent:nT,multivalues:rT,params:iT,pivot:GA,prefacet:oT,project:YA,proxy:sT,quantile:qA,relay:aT,sample:VA,sequence:XA,sieve:lT,subflow:LA,timeunit:JA,tupleindex:cT,values:fT,window:QA},Symbol.toStringTag,{value:"Module"}));function ct(e){return function(){return e}}const YN=Math.abs,Ln=Math.atan2,$l=Math.cos,NJ=Math.max,B_=Math.min,yo=Math.sin,Vl=Math.sqrt,zn=1e-12,of=Math.PI,r1=of/2,pT=2*of;function OJ(e){return e>1?0:e<-1?of:Math.acos(e)}function qN(e){return e>=1?r1:e<=-1?-r1:Math.asin(e)}const Rw=Math.PI,Lw=2*Rw,Ul=1e-6,DJ=Lw-Ul;function gT(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function FJ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return gT;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let KA=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?gT:FJ(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,s){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-t,c=i-n,f=s-t,h=a-n,p=f*f+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>Ul)if(!(Math.abs(h*l-c*f)>Ul)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-s,y=i-a,v=l*l+c*c,_=m*m+y*y,b=Math.sqrt(v),S=Math.sqrt(p),A=o*Math.tan((Rw-Math.acos((v+p-_)/(2*b*S)))/2),C=A/S,k=A/b;Math.abs(C-1)>Ul&&this._append`L${t+C*f},${n+C*h}`,this._append`A${o},${o},0,0,${+(h*m>f*y)},${this._x1=t+k*l},${this._y1=n+k*c}`}}arc(t,n,r,i,o,s){if(t=+t,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=t+a,f=n+l,h=1^s,p=s?i-o:o-i;this._x1===null?this._append`M${c},${f}`:(Math.abs(this._x1-c)>Ul||Math.abs(this._y1-f)>Ul)&&this._append`L${c},${f}`,r&&(p<0&&(p=p%Lw+Lw),p>DJ?this._append`A${r},${r},0,1,${h},${t-a},${n-l}A${r},${r},0,1,${h},${this._x1=c},${this._y1=f}`:p>Ul&&this._append`A${r},${r},0,${+(p>=Rw)},${h},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Vy(){return new KA}Vy.prototype=KA.prototype;function Xy(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new KA(t)}function TJ(e){return e.innerRadius}function RJ(e){return e.outerRadius}function LJ(e){return e.startAngle}function PJ(e){return e.endAngle}function zJ(e){return e&&e.padAngle}function IJ(e,t,n,r,i,o,s,a){var l=n-e,c=r-t,f=s-i,h=a-o,p=h*l-f*c;if(!(p*p<zn))return p=(f*(t-o)-h*(e-i))/p,[e+p*l,t+p*c]}function U0(e,t,n,r,i,o,s){var a=e-n,l=t-r,c=(s?o:-o)/Vl(a*a+l*l),f=c*l,h=-c*a,p=e+f,m=t+h,y=n+f,v=r+h,_=(p+y)/2,b=(m+v)/2,S=y-p,A=v-m,C=S*S+A*A,k=i-o,N=p*v-y*m,$=(A<0?-1:1)*Vl(NJ(0,k*k*C-N*N)),O=(N*A-S*$)/C,D=(-N*S-A*$)/C,P=(N*A+S*$)/C,R=(-N*S+A*$)/C,X=O-_,B=D-b,I=P-_,F=R-b;return X*X+B*B>I*I+F*F&&(O=P,D=R),{cx:O,cy:D,x01:-f,y01:-h,x11:O*(i/k-1),y11:D*(i/k-1)}}function UJ(){var e=TJ,t=RJ,n=ct(0),r=null,i=LJ,o=PJ,s=zJ,a=null,l=Xy(c);function c(){var f,h,p=+e.apply(this,arguments),m=+t.apply(this,arguments),y=i.apply(this,arguments)-r1,v=o.apply(this,arguments)-r1,_=YN(v-y),b=v>y;if(a||(a=f=l()),m<p&&(h=m,m=p,p=h),!(m>zn))a.moveTo(0,0);else if(_>pT-zn)a.moveTo(m*$l(y),m*yo(y)),a.arc(0,0,m,y,v,!b),p>zn&&(a.moveTo(p*$l(v),p*yo(v)),a.arc(0,0,p,v,y,b));else{var S=y,A=v,C=y,k=v,N=_,$=_,O=s.apply(this,arguments)/2,D=O>zn&&(r?+r.apply(this,arguments):Vl(p*p+m*m)),P=B_(YN(m-p)/2,+n.apply(this,arguments)),R=P,X=P,B,I;if(D>zn){var F=qN(D/p*yo(O)),W=qN(D/m*yo(O));(N-=F*2)>zn?(F*=b?1:-1,C+=F,k-=F):(N=0,C=k=(y+v)/2),($-=W*2)>zn?(W*=b?1:-1,S+=W,A-=W):($=0,S=A=(y+v)/2)}var V=m*$l(S),j=m*yo(S),H=p*$l(k),Q=p*yo(k);if(P>zn){var L=m*$l(A),Y=m*yo(A),ye=p*$l(C),Ae=p*yo(C),be;if(_<of)if(be=IJ(V,j,ye,Ae,L,Y,H,Q)){var Ie=V-be[0],et=j-be[1],qe=L-be[0],de=Y-be[1],Te=1/yo(OJ((Ie*qe+et*de)/(Vl(Ie*Ie+et*et)*Vl(qe*qe+de*de)))/2),Be=Vl(be[0]*be[0]+be[1]*be[1]);R=B_(P,(p-Be)/(Te-1)),X=B_(P,(m-Be)/(Te+1))}else R=X=0}$>zn?X>zn?(B=U0(ye,Ae,V,j,m,X,b),I=U0(L,Y,H,Q,m,X,b),a.moveTo(B.cx+B.x01,B.cy+B.y01),X<P?a.arc(B.cx,B.cy,X,Ln(B.y01,B.x01),Ln(I.y01,I.x01),!b):(a.arc(B.cx,B.cy,X,Ln(B.y01,B.x01),Ln(B.y11,B.x11),!b),a.arc(0,0,m,Ln(B.cy+B.y11,B.cx+B.x11),Ln(I.cy+I.y11,I.cx+I.x11),!b),a.arc(I.cx,I.cy,X,Ln(I.y11,I.x11),Ln(I.y01,I.x01),!b))):(a.moveTo(V,j),a.arc(0,0,m,S,A,!b)):a.moveTo(V,j),!(p>zn)||!(N>zn)?a.lineTo(H,Q):R>zn?(B=U0(H,Q,L,Y,p,-R,b),I=U0(V,j,ye,Ae,p,-R,b),a.lineTo(B.cx+B.x01,B.cy+B.y01),R<P?a.arc(B.cx,B.cy,R,Ln(B.y01,B.x01),Ln(I.y01,I.x01),!b):(a.arc(B.cx,B.cy,R,Ln(B.y01,B.x01),Ln(B.y11,B.x11),!b),a.arc(0,0,p,Ln(B.cy+B.y11,B.cx+B.x11),Ln(I.cy+I.y11,I.cx+I.x11),b),a.arc(I.cx,I.cy,R,Ln(I.y11,I.x11),Ln(I.y01,I.x01),!b))):a.arc(0,0,p,k,C,b)}if(a.closePath(),f)return a=null,f+""||null}return c.centroid=function(){var f=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-of/2;return[$l(h)*f,yo(h)*f]},c.innerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:ct(+f),c):e},c.outerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:ct(+f),c):t},c.cornerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:ct(+f),c):n},c.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ct(+f),c):r},c.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:ct(+f),c):i},c.endAngle=function(f){return arguments.length?(o=typeof f=="function"?f:ct(+f),c):o},c.padAngle=function(f){return arguments.length?(s=typeof f=="function"?f:ct(+f),c):s},c.context=function(f){return arguments.length?(a=f??null,c):a},c}function mT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function yT(e){this._context=e}yT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ZA(e){return new yT(e)}function vT(e){return e[0]}function xT(e){return e[1]}function _T(e,t){var n=ct(!0),r=null,i=ZA,o=null,s=Xy(a);e=typeof e=="function"?e:e===void 0?vT:ct(e),t=typeof t=="function"?t:t===void 0?xT:ct(t);function a(l){var c,f=(l=mT(l)).length,h,p=!1,m;for(r==null&&(o=i(m=s())),c=0;c<=f;++c)!(c<f&&n(h=l[c],c,l))===p&&((p=!p)?o.lineStart():o.lineEnd()),p&&o.point(+e(h,c,l),+t(h,c,l));if(m)return o=null,m+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:ct(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:ct(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ct(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),a):r},a}function bT(e,t,n){var r=null,i=ct(!0),o=null,s=ZA,a=null,l=Xy(c);e=typeof e=="function"?e:e===void 0?vT:ct(+e),t=typeof t=="function"?t:ct(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?xT:ct(+n);function c(h){var p,m,y,v=(h=mT(h)).length,_,b=!1,S,A=new Array(v),C=new Array(v);for(o==null&&(a=s(S=l())),p=0;p<=v;++p){if(!(p<v&&i(_=h[p],p,h))===b)if(b=!b)m=p,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),y=p-1;y>=m;--y)a.point(A[y],C[y]);a.lineEnd(),a.areaEnd()}b&&(A[p]=+e(_,p,h),C[p]=+t(_,p,h),a.point(r?+r(_,p,h):A[p],n?+n(_,p,h):C[p]))}if(S)return a=null,S+""||null}function f(){return _T().defined(i).curve(s).context(o)}return c.x=function(h){return arguments.length?(e=typeof h=="function"?h:ct(+h),r=null,c):e},c.x0=function(h){return arguments.length?(e=typeof h=="function"?h:ct(+h),c):e},c.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:ct(+h),c):r},c.y=function(h){return arguments.length?(t=typeof h=="function"?h:ct(+h),n=null,c):t},c.y0=function(h){return arguments.length?(t=typeof h=="function"?h:ct(+h),c):t},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:ct(+h),c):n},c.lineX0=c.lineY0=function(){return f().x(e).y(t)},c.lineY1=function(){return f().x(e).y(n)},c.lineX1=function(){return f().x(r).y(t)},c.defined=function(h){return arguments.length?(i=typeof h=="function"?h:ct(!!h),c):i},c.curve=function(h){return arguments.length?(s=h,o!=null&&(a=s(o)),c):s},c.context=function(h){return arguments.length?(h==null?o=a=null:a=s(o=h),c):o},c}const WJ={draw(e,t){const n=Vl(t/of);e.moveTo(n,0),e.arc(0,0,n,0,pT)}};function jJ(e,t){let n=null,r=Xy(i);e=typeof e=="function"?e:ct(e||WJ),t=typeof t=="function"?t:ct(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:ct(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:ct(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function ja(){}function i1(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Jy(e){this._context=e}Jy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:i1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:i1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function BJ(e){return new Jy(e)}function wT(e){this._context=e}wT.prototype={areaStart:ja,areaEnd:ja,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:i1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function HJ(e){return new wT(e)}function ST(e){this._context=e}ST.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:i1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function GJ(e){return new ST(e)}function ET(e,t){this._basis=new Jy(e),this._beta=t}ET.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,s=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*o),this._beta*t[a]+(1-this._beta)*(i+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const YJ=(function e(t){function n(r){return t===1?new Jy(r):new ET(r,t)}return n.beta=function(r){return e(+r)},n})(.85);function o1(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function eC(e,t){this._context=e,this._k=(1-t)/6}eC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:o1(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:o1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qJ=(function e(t){function n(r){return new eC(r,t)}return n.tension=function(r){return e(+r)},n})(0);function tC(e,t){this._context=e,this._k=(1-t)/6}tC.prototype={areaStart:ja,areaEnd:ja,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:o1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const VJ=(function e(t){function n(r){return new tC(r,t)}return n.tension=function(r){return e(+r)},n})(0);function nC(e,t){this._context=e,this._k=(1-t)/6}nC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:o1(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const XJ=(function e(t){function n(r){return new nC(r,t)}return n.tension=function(r){return e(+r)},n})(0);function rC(e,t,n){var r=e._x1,i=e._y1,o=e._x2,s=e._y2;if(e._l01_a>zn){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>zn){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,f=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*c+e._x1*e._l23_2a-t*e._l12_2a)/f,s=(s*c+e._y1*e._l23_2a-n*e._l12_2a)/f}e._context.bezierCurveTo(r,i,o,s,e._x2,e._y2)}function AT(e,t){this._context=e,this._alpha=t}AT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:rC(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const JJ=(function e(t){function n(r){return t?new AT(r,t):new eC(r,0)}return n.alpha=function(r){return e(+r)},n})(.5);function CT(e,t){this._context=e,this._alpha=t}CT.prototype={areaStart:ja,areaEnd:ja,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:rC(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const QJ=(function e(t){function n(r){return t?new CT(r,t):new tC(r,0)}return n.alpha=function(r){return e(+r)},n})(.5);function kT(e,t){this._context=e,this._alpha=t}kT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rC(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const KJ=(function e(t){function n(r){return t?new kT(r,t):new nC(r,0)}return n.alpha=function(r){return e(+r)},n})(.5);function $T(e){this._context=e}$T.prototype={areaStart:ja,areaEnd:ja,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ZJ(e){return new $T(e)}function VN(e){return e<0?-1:1}function XN(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),s=(n-e._y1)/(i||r<0&&-0),a=(o*i+s*r)/(r+i);return(VN(o)+VN(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function JN(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function H_(e,t,n){var r=e._x0,i=e._y0,o=e._x1,s=e._y1,a=(o-r)/3;e._context.bezierCurveTo(r+a,i+a*t,o-a,s-a*n,o,s)}function s1(e){this._context=e}s1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:H_(this,this._t0,JN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,H_(this,JN(this,n=XN(this,e,t)),n);break;default:H_(this,this._t0,n=XN(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function MT(e){this._context=new NT(e)}(MT.prototype=Object.create(s1.prototype)).point=function(e,t){s1.prototype.point.call(this,t,e)};function NT(e){this._context=e}NT.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function eQ(e){return new s1(e)}function tQ(e){return new MT(e)}function OT(e){this._context=e}OT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=QN(e),i=QN(t),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function QN(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),s=new Array(n);for(i[0]=0,o[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,s[t]-=r*s[t-1];for(i[n-1]=s[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(s[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function nQ(e){return new OT(e)}function Qy(e,t){this._context=e,this._t=t}Qy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function rQ(e){return new Qy(e,.5)}function iQ(e){return new Qy(e,0)}function oQ(e){return new Qy(e,1)}function La(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const sQ=()=>typeof Image<"u"?Image:null;function Go(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function tl(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Pw=Symbol("implicit");function iC(){var e=new pN,t=[],n=[],r=Pw;function i(o){let s=e.get(o);if(s===void 0){if(r!==Pw)return r;e.set(o,s=t.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new pN;for(const s of o)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return iC(t,n).unknown(r)},Go.apply(i,arguments),i}function Yf(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Ip(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function nl(){}var uu=.7,sf=1/uu,jc="\\s*([+-]?\\d+)\\s*",lp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",aQ=/^#([0-9a-f]{3,8})$/,lQ=new RegExp(`^rgb\\(${jc},${jc},${jc}\\)$`),uQ=new RegExp(`^rgb\\(${Mo},${Mo},${Mo}\\)$`),cQ=new RegExp(`^rgba\\(${jc},${jc},${jc},${lp}\\)$`),fQ=new RegExp(`^rgba\\(${Mo},${Mo},${Mo},${lp}\\)$`),dQ=new RegExp(`^hsl\\(${lp},${Mo},${Mo}\\)$`),hQ=new RegExp(`^hsla\\(${lp},${Mo},${Mo},${lp}\\)$`),KN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yf(nl,up,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ZN,formatHex:ZN,formatHex8:pQ,formatHsl:gQ,formatRgb:eO,toString:eO});function ZN(){return this.rgb().formatHex()}function pQ(){return this.rgb().formatHex8()}function gQ(){return DT(this).formatHsl()}function eO(){return this.rgb().formatRgb()}function up(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=aQ.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?tO(t):n===3?new dn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?W0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?W0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=lQ.exec(e))?new dn(t[1],t[2],t[3],1):(t=uQ.exec(e))?new dn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cQ.exec(e))?W0(t[1],t[2],t[3],t[4]):(t=fQ.exec(e))?W0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dQ.exec(e))?iO(t[1],t[2]/100,t[3]/100,1):(t=hQ.exec(e))?iO(t[1],t[2]/100,t[3]/100,t[4]):KN.hasOwnProperty(e)?tO(KN[e]):e==="transparent"?new dn(NaN,NaN,NaN,0):null}function tO(e){return new dn(e>>16&255,e>>8&255,e&255,1)}function W0(e,t,n,r){return r<=0&&(e=t=n=NaN),new dn(e,t,n,r)}function oC(e){return e instanceof nl||(e=up(e)),e?(e=e.rgb(),new dn(e.r,e.g,e.b,e.opacity)):new dn}function Ba(e,t,n,r){return arguments.length===1?oC(e):new dn(e,t,n,r??1)}function dn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Yf(dn,Ba,Ip(nl,{brighter(e){return e=e==null?sf:Math.pow(sf,e),new dn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?uu:Math.pow(uu,e),new dn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new dn(Zl(this.r),Zl(this.g),Zl(this.b),a1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nO,formatHex:nO,formatHex8:mQ,formatRgb:rO,toString:rO}));function nO(){return`#${Xl(this.r)}${Xl(this.g)}${Xl(this.b)}`}function mQ(){return`#${Xl(this.r)}${Xl(this.g)}${Xl(this.b)}${Xl((isNaN(this.opacity)?1:this.opacity)*255)}`}function rO(){const e=a1(this.opacity);return`${e===1?"rgb(":"rgba("}${Zl(this.r)}, ${Zl(this.g)}, ${Zl(this.b)}${e===1?")":`, ${e})`}`}function a1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Zl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Xl(e){return e=Zl(e),(e<16?"0":"")+e.toString(16)}function iO(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ji(e,t,n,r)}function DT(e){if(e instanceof ji)return new ji(e.h,e.s,e.l,e.opacity);if(e instanceof nl||(e=up(e)),!e)return new ji;if(e instanceof ji)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(t===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-t)/a+2:s=(t-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new ji(s,a,l,e.opacity)}function l1(e,t,n,r){return arguments.length===1?DT(e):new ji(e,t,n,r??1)}function ji(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Yf(ji,l1,Ip(nl,{brighter(e){return e=e==null?sf:Math.pow(sf,e),new ji(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?uu:Math.pow(uu,e),new ji(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new dn(G_(e>=240?e-240:e+120,i,r),G_(e,i,r),G_(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ji(oO(this.h),j0(this.s),j0(this.l),a1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=a1(this.opacity);return`${e===1?"hsl(":"hsla("}${oO(this.h)}, ${j0(this.s)*100}%, ${j0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function oO(e){return e=(e||0)%360,e<0?e+360:e}function j0(e){return Math.max(0,Math.min(1,e||0))}function G_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const FT=Math.PI/180,TT=180/Math.PI,u1=18,RT=.96422,LT=1,PT=.82521,zT=4/29,Bc=6/29,IT=3*Bc*Bc,yQ=Bc*Bc*Bc;function UT(e){if(e instanceof No)return new No(e.l,e.a,e.b,e.opacity);if(e instanceof Ss)return WT(e);e instanceof dn||(e=oC(e));var t=X_(e.r),n=X_(e.g),r=X_(e.b),i=Y_((.2225045*t+.7168786*n+.0606169*r)/LT),o,s;return t===n&&n===r?o=s=i:(o=Y_((.4360747*t+.3850649*n+.1430804*r)/RT),s=Y_((.0139322*t+.0971045*n+.7141733*r)/PT)),new No(116*i-16,500*(o-i),200*(i-s),e.opacity)}function c1(e,t,n,r){return arguments.length===1?UT(e):new No(e,t,n,r??1)}function No(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Yf(No,c1,Ip(nl,{brighter(e){return new No(this.l+u1*(e??1),this.a,this.b,this.opacity)},darker(e){return new No(this.l-u1*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=RT*q_(t),e=LT*q_(e),n=PT*q_(n),new dn(V_(3.1338561*t-1.6168667*e-.4906146*n),V_(-.9787684*t+1.9161415*e+.033454*n),V_(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function Y_(e){return e>yQ?Math.pow(e,1/3):e/IT+zT}function q_(e){return e>Bc?e*e*e:IT*(e-zT)}function V_(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function X_(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function vQ(e){if(e instanceof Ss)return new Ss(e.h,e.c,e.l,e.opacity);if(e instanceof No||(e=UT(e)),e.a===0&&e.b===0)return new Ss(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*TT;return new Ss(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function f1(e,t,n,r){return arguments.length===1?vQ(e):new Ss(e,t,n,r??1)}function Ss(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function WT(e){if(isNaN(e.h))return new No(e.l,0,0,e.opacity);var t=e.h*FT;return new No(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Yf(Ss,f1,Ip(nl,{brighter(e){return new Ss(this.h,this.c,this.l+u1*(e??1),this.opacity)},darker(e){return new Ss(this.h,this.c,this.l-u1*(e??1),this.opacity)},rgb(){return WT(this).rgb()}}));var jT=-.14861,sC=1.78277,aC=-.29227,Ky=-.90649,cp=1.97294,sO=cp*Ky,aO=cp*sC,lO=sC*aC-Ky*jT;function xQ(e){if(e instanceof eu)return new eu(e.h,e.s,e.l,e.opacity);e instanceof dn||(e=oC(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(lO*r+sO*t-aO*n)/(lO+sO-aO),o=r-i,s=(cp*(n-i)-aC*o)/Ky,a=Math.sqrt(s*s+o*o)/(cp*i*(1-i)),l=a?Math.atan2(s,o)*TT-120:NaN;return new eu(l<0?l+360:l,a,i,e.opacity)}function zw(e,t,n,r){return arguments.length===1?xQ(e):new eu(e,t,n,r??1)}function eu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Yf(eu,zw,Ip(nl,{brighter(e){return e=e==null?sf:Math.pow(sf,e),new eu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?uu:Math.pow(uu,e),new eu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*FT,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new dn(255*(t+n*(jT*r+sC*i)),255*(t+n*(aC*r+Ky*i)),255*(t+n*(cp*r)),this.opacity)}}));function BT(e,t,n,r,i){var o=e*e,s=o*e;return((1-3*e+3*o-s)*t+(4-6*o+3*s)*n+(1+3*e+3*o-3*s)*r+s*i)/6}function HT(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],s=r>0?e[r-1]:2*i-o,a=r<t-1?e[r+2]:2*o-i;return BT((n-r/t)*t,s,i,o,a)}}function GT(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],s=e[(r+1)%t],a=e[(r+2)%t];return BT((n-r/t)*t,i,o,s,a)}}const Zy=e=>()=>e;function YT(e,t){return function(n){return e+n*t}}function _Q(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ev(e,t){var n=t-e;return n?YT(e,n>180||n<-180?n-360*Math.round(n/360):n):Zy(isNaN(e)?t:e)}function bQ(e){return(e=+e)==1?hn:function(t,n){return n-t?_Q(t,n,e):Zy(isNaN(t)?n:t)}}function hn(e,t){var n=t-e;return n?YT(e,n):Zy(isNaN(e)?t:e)}const Iw=(function e(t){var n=bQ(t);function r(i,o){var s=n((i=Ba(i)).r,(o=Ba(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),c=hn(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=l(f),i.opacity=c(f),i+""}}return r.gamma=e,r})(1);function qT(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=Ba(t[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=e(r),i=e(i),o=e(o),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=o(l),a+""}}}var wQ=qT(HT),SQ=qT(GT);function lC(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function VT(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function EQ(e,t){return(VT(t)?lC:XT)(e,t)}function XT(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=rl(e[s],t[s]);for(;s<n;++s)o[s]=t[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function JT(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ui(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function QT(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=rl(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Uw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,J_=new RegExp(Uw.source,"g");function AQ(e){return function(){return e}}function CQ(e){return function(t){return e(t)+""}}function KT(e,t){var n=Uw.lastIndex=J_.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Uw.exec(e))&&(i=J_.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Ui(r,i)})),n=J_.lastIndex;return n<t.length&&(o=t.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?CQ(l[0].x):AQ(t):(t=l.length,function(c){for(var f=0,h;f<t;++f)a[(h=l[f]).i]=h.x(c);return a.join("")})}function rl(e,t){var n=typeof t,r;return t==null||n==="boolean"?Zy(t):(n==="number"?Ui:n==="string"?(r=up(t))?(t=r,Iw):KT:t instanceof up?Iw:t instanceof Date?JT:VT(t)?lC:Array.isArray(t)?XT:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?QT:Ui)(e,t)}function kQ(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function $Q(e,t){var n=ev(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Up(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var uO=180/Math.PI,Ww={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ZT(e,t,n,r,i,o){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*uO,skewX:Math.atan(l)*uO,scaleX:s,scaleY:a}}var B0;function MQ(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ww:ZT(t.a,t.b,t.c,t.d,t.e,t.f)}function NQ(e){return e==null||(B0||(B0=document.createElementNS("http://www.w3.org/2000/svg","g")),B0.setAttribute("transform",e),!(e=B0.transform.baseVal.consolidate()))?Ww:(e=e.matrix,ZT(e.a,e.b,e.c,e.d,e.e,e.f))}function eR(e,t,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,f,h,p,m,y){if(c!==h||f!==p){var v=m.push("translate(",null,t,null,n);y.push({i:v-4,x:Ui(c,h)},{i:v-2,x:Ui(f,p)})}else(h||p)&&m.push("translate("+h+t+p+n)}function s(c,f,h,p){c!==f?(c-f>180?f+=360:f-c>180&&(c+=360),p.push({i:h.push(i(h)+"rotate(",null,r)-2,x:Ui(c,f)})):f&&h.push(i(h)+"rotate("+f+r)}function a(c,f,h,p){c!==f?p.push({i:h.push(i(h)+"skewX(",null,r)-2,x:Ui(c,f)}):f&&h.push(i(h)+"skewX("+f+r)}function l(c,f,h,p,m,y){if(c!==h||f!==p){var v=m.push(i(m)+"scale(",null,",",null,")");y.push({i:v-4,x:Ui(c,h)},{i:v-2,x:Ui(f,p)})}else(h!==1||p!==1)&&m.push(i(m)+"scale("+h+","+p+")")}return function(c,f){var h=[],p=[];return c=e(c),f=e(f),o(c.translateX,c.translateY,f.translateX,f.translateY,h,p),s(c.rotate,f.rotate,h,p),a(c.skewX,f.skewX,h,p),l(c.scaleX,c.scaleY,f.scaleX,f.scaleY,h,p),c=f=null,function(m){for(var y=-1,v=p.length,_;++y<v;)h[(_=p[y]).i]=_.x(m);return h.join("")}}}var OQ=eR(MQ,"px, ","px)","deg)"),DQ=eR(NQ,", ",")",")"),FQ=1e-12;function cO(e){return((e=Math.exp(e))+1/e)/2}function TQ(e){return((e=Math.exp(e))-1/e)/2}function RQ(e){return((e=Math.exp(2*e))-1)/(e+1)}const LQ=(function e(t,n,r){function i(o,s){var a=o[0],l=o[1],c=o[2],f=s[0],h=s[1],p=s[2],m=f-a,y=h-l,v=m*m+y*y,_,b;if(v<FQ)b=Math.log(p/c)/t,_=function($){return[a+$*m,l+$*y,c*Math.exp(t*$*b)]};else{var S=Math.sqrt(v),A=(p*p-c*c+r*v)/(2*c*n*S),C=(p*p-c*c-r*v)/(2*p*n*S),k=Math.log(Math.sqrt(A*A+1)-A),N=Math.log(Math.sqrt(C*C+1)-C);b=(N-k)/t,_=function($){var O=$*b,D=cO(k),P=c/(n*S)*(D*RQ(t*O+k)-TQ(k));return[a+P*m,l+P*y,c*D/cO(t*O+k)]}}return _.duration=b*1e3*t/Math.SQRT2,_}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return e(s,a,l)},i})(Math.SQRT2,2,4);function tR(e){return function(t,n){var r=e((t=l1(t)).h,(n=l1(n)).h),i=hn(t.s,n.s),o=hn(t.l,n.l),s=hn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const PQ=tR(ev);var zQ=tR(hn);function IQ(e,t){var n=hn((e=c1(e)).l,(t=c1(t)).l),r=hn(e.a,t.a),i=hn(e.b,t.b),o=hn(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=r(s),e.b=i(s),e.opacity=o(s),e+""}}function nR(e){return function(t,n){var r=e((t=f1(t)).h,(n=f1(n)).h),i=hn(t.c,n.c),o=hn(t.l,n.l),s=hn(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=o(a),t.opacity=s(a),t+""}}}const UQ=nR(ev);var WQ=nR(hn);function rR(e){return(function t(n){n=+n;function r(i,o){var s=e((i=zw(i)).h,(o=zw(o)).h),a=hn(i.s,o.s),l=hn(i.l,o.l),c=hn(i.opacity,o.opacity);return function(f){return i.h=s(f),i.s=a(f),i.l=l(Math.pow(f,n)),i.opacity=c(f),i+""}}return r.gamma=t,r})(1)}const jQ=rR(ev);var BQ=rR(hn);function uC(e,t){t===void 0&&(t=e,e=rl);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(s){var a=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return o[a](s-a)}}function HQ(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const GQ=Object.freeze(Object.defineProperty({__proto__:null,interpolate:rl,interpolateArray:EQ,interpolateBasis:HT,interpolateBasisClosed:GT,interpolateCubehelix:jQ,interpolateCubehelixLong:BQ,interpolateDate:JT,interpolateDiscrete:kQ,interpolateHcl:UQ,interpolateHclLong:WQ,interpolateHsl:PQ,interpolateHslLong:zQ,interpolateHue:$Q,interpolateLab:IQ,interpolateNumber:Ui,interpolateNumberArray:lC,interpolateObject:QT,interpolateRgb:Iw,interpolateRgbBasis:wQ,interpolateRgbBasisClosed:SQ,interpolateRound:Up,interpolateString:KT,interpolateTransformCss:OQ,interpolateTransformSvg:DQ,interpolateZoom:LQ,piecewise:uC,quantize:HQ},Symbol.toStringTag,{value:"Module"}));function YQ(e){return function(){return e}}function jw(e){return+e}var fO=[0,1];function Ar(e){return e}function Bw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:YQ(isNaN(t)?NaN:.5)}function qQ(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function VQ(e,t,n){var r=e[0],i=e[1],o=t[0],s=t[1];return i<r?(r=Bw(i,r),o=n(s,o)):(r=Bw(r,i),o=n(o,s)),function(a){return o(r(a))}}function XQ(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),s=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<r;)i[s]=Bw(e[s],e[s+1]),o[s]=n(t[s],t[s+1]);return function(a){var l=Ia(e,a,1,r)-1;return o[l](i[l](a))}}function Wp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function tv(){var e=fO,t=fO,n=rl,r,i,o,s=Ar,a,l,c;function f(){var p=Math.min(e.length,t.length);return s!==Ar&&(s=qQ(e[0],e[p-1])),a=p>2?XQ:VQ,l=c=null,h}function h(p){return p==null||isNaN(p=+p)?o:(l||(l=a(e.map(r),t,n)))(r(s(p)))}return h.invert=function(p){return s(i((c||(c=a(t,e.map(r),Ui)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,jw),f()):e.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),f()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),n=Up,f()},h.clamp=function(p){return arguments.length?(s=p?!0:Ar,f()):s!==Ar},h.interpolate=function(p){return arguments.length?(n=p,f()):n},h.unknown=function(p){return arguments.length?(o=p,h):o},function(p,m){return r=p,i=m,f()}}function iR(){return tv()(Ar,Ar)}function oR(e,t,n,r){var i=Ua(e,t,n),o;switch(r=lu(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=OF(i,s))&&(r.precision=o),JE(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=DF(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=NF(i))&&(r.precision=o-(r.type==="%")*2);break}}return Ny(r)}function Tu(e){var t=e.domain;return e.ticks=function(n){var r=t();return bw(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return oR(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,s=r[i],a=r[o],l,c,f=10;for(a<s&&(c=s,s=a,a=c,c=i,i=o,o=c);f-- >0;){if(c=ww(s,a,n),c===l)return r[i]=s,r[o]=a,t(r);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;l=c}return e},e}function sR(){var e=iR();return e.copy=function(){return Wp(e,sR())},Go.apply(e,arguments),Tu(e)}function aR(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,jw),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return aR(e).unknown(t)},e=arguments.length?Array.from(e,jw):[0,1],Tu(n)}function lR(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],s;return o<i&&(s=n,n=r,r=s,s=i,i=o,o=s),e[n]=t.floor(i),e[r]=t.ceil(o),e}function dO(e){return Math.log(e)}function hO(e){return Math.exp(e)}function JQ(e){return-Math.log(-e)}function QQ(e){return-Math.exp(-e)}function KQ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ZQ(e){return e===10?KQ:e===Math.E?Math.exp:t=>Math.pow(e,t)}function eK(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function pO(e){return(t,n)=>-e(-t,n)}function cC(e){const t=e(dO,hO),n=t.domain;let r=10,i,o;function s(){return i=eK(r),o=ZQ(r),n()[0]<0?(i=pO(i),o=pO(o),e(JQ,QQ)):e(dO,hO),t}return t.base=function(a){return arguments.length?(r=+a,s()):r},t.domain=function(a){return arguments.length?(n(a),s()):n()},t.ticks=a=>{const l=n();let c=l[0],f=l[l.length-1];const h=f<c;h&&([c,f]=[f,c]);let p=i(c),m=i(f),y,v;const _=a==null?10:+a;let b=[];if(!(r%1)&&m-p<_){if(p=Math.floor(p),m=Math.ceil(m),c>0){for(;p<=m;++p)for(y=1;y<r;++y)if(v=p<0?y/o(-p):y*o(p),!(v<c)){if(v>f)break;b.push(v)}}else for(;p<=m;++p)for(y=r-1;y>=1;--y)if(v=p>0?y/o(-p):y*o(p),!(v<c)){if(v>f)break;b.push(v)}b.length*2<_&&(b=bw(c,f,_))}else b=bw(p,m,Math.min(m-p,_)).map(o);return h?b.reverse():b},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=lu(l)).precision==null&&(l.trim=!0),l=Ny(l)),a===1/0)return l;const c=Math.max(1,r*a/t.ticks().length);return f=>{let h=f/o(Math.round(i(f)));return h*r<r-.5&&(h*=r),h<=c?l(f):""}},t.nice=()=>n(lR(n(),{floor:a=>o(Math.floor(i(a))),ceil:a=>o(Math.ceil(i(a)))})),t}function uR(){const e=cC(tv()).domain([1,10]);return e.copy=()=>Wp(e,uR()).base(e.base()),Go.apply(e,arguments),e}function gO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function mO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function fC(e){var t=1,n=e(gO(t),mO(t));return n.constant=function(r){return arguments.length?e(gO(t=+r),mO(t)):t},Tu(n)}function cR(){var e=fC(tv());return e.copy=function(){return Wp(e,cR()).constant(e.constant())},Go.apply(e,arguments)}function yO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function tK(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function nK(e){return e<0?-e*e:e*e}function dC(e){var t=e(Ar,Ar),n=1;function r(){return n===1?e(Ar,Ar):n===.5?e(tK,nK):e(yO(n),yO(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Tu(t)}function hC(){var e=dC(tv());return e.copy=function(){return Wp(e,hC()).exponent(e.exponent())},Go.apply(e,arguments),e}function rK(){return hC.apply(null,arguments).exponent(.5)}function fR(){var e=[],t=[],n=[],r;function i(){var s=0,a=Math.max(1,t.length);for(n=new Array(a-1);++s<a;)n[s-1]=EF(e,s/a);return o}function o(s){return s==null||isNaN(s=+s)?r:t[Ia(n,s)]}return o.invertExtent=function(s){var a=t.indexOf(s);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Cs),i()},o.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},o.unknown=function(s){return arguments.length?(r=s,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return fR().domain(e).range(t).unknown(r)},Go.apply(o,arguments)}function dR(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function s(l){return l!=null&&l<=l?i[Ia(r,l,0,n)]:o}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},s.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},s.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[e,r[0]]:c>=n?[r[n-1],t]:[r[c-1],r[c]]},s.unknown=function(l){return arguments.length&&(o=l),s},s.thresholds=function(){return r.slice()},s.copy=function(){return dR().domain([e,t]).range(i).unknown(o)},Go.apply(Tu(s),arguments)}function hR(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[Ia(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var s=t.indexOf(o);return[e[s-1],e[s]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return hR().domain(e).range(t).unknown(n)},Go.apply(i,arguments)}function iK(e){return new Date(e)}function oK(e){return e instanceof Date?+e:+new Date(+e)}function pC(e,t,n,r,i,o,s,a,l,c){var f=iR(),h=f.invert,p=f.domain,m=c(".%L"),y=c(":%S"),v=c("%I:%M"),_=c("%I %p"),b=c("%a %d"),S=c("%b %d"),A=c("%B"),C=c("%Y");function k(N){return(l(N)<N?m:a(N)<N?y:s(N)<N?v:o(N)<N?_:r(N)<N?i(N)<N?b:S:n(N)<N?A:C)(N)}return f.invert=function(N){return new Date(h(N))},f.domain=function(N){return arguments.length?p(Array.from(N,oK)):p().map(iK)},f.ticks=function(N){var $=p();return e($[0],$[$.length-1],N??10)},f.tickFormat=function(N,$){return $==null?k:c($)},f.nice=function(N){var $=p();return(!N||typeof N.range!="function")&&(N=t($[0],$[$.length-1],N??10)),N?p(lR($,N)):f},f.copy=function(){return Wp(f,pC(e,t,n,r,i,o,s,a,l,c))},f}function sK(){return Go.apply(pC(hq,pq,Lo,rp,Wf,ks,Fy,Oy,ws,tA).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function aK(){return Go.apply(pC(fq,dq,Po,ip,jf,Ta,Ty,Dy,ws,nA).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function nv(){var e=0,t=1,n,r,i,o,s=Ar,a=!1,l;function c(h){return h==null||isNaN(h=+h)?l:s(i===0?.5:(h=(o(h)-n)*i,a?Math.max(0,Math.min(1,h)):h))}c.domain=function(h){return arguments.length?([e,t]=h,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),c):[e,t]},c.clamp=function(h){return arguments.length?(a=!!h,c):a},c.interpolator=function(h){return arguments.length?(s=h,c):s};function f(h){return function(p){var m,y;return arguments.length?([m,y]=p,s=h(m,y),c):[s(0),s(1)]}}return c.range=f(rl),c.rangeRound=f(Up),c.unknown=function(h){return arguments.length?(l=h,c):l},function(h){return o=h,n=h(e),r=h(t),i=n===r?0:1/(r-n),c}}function il(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function gC(){var e=Tu(nv()(Ar));return e.copy=function(){return il(e,gC())},tl.apply(e,arguments)}function pR(){var e=cC(nv()).domain([1,10]);return e.copy=function(){return il(e,pR()).base(e.base())},tl.apply(e,arguments)}function gR(){var e=fC(nv());return e.copy=function(){return il(e,gR()).constant(e.constant())},tl.apply(e,arguments)}function mC(){var e=dC(nv());return e.copy=function(){return il(e,mC()).exponent(e.exponent())},tl.apply(e,arguments)}function lK(){return mC.apply(null,arguments).exponent(.5)}function rv(){var e=0,t=.5,n=1,r=1,i,o,s,a,l,c=Ar,f,h=!1,p;function m(v){return isNaN(v=+v)?p:(v=.5+((v=+f(v))-o)*(r*v<r*o?a:l),c(h?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([e,t,n]=v,i=f(e=+e),o=f(t=+t),s=f(n=+n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,m):[e,t,n]},m.clamp=function(v){return arguments.length?(h=!!v,m):h},m.interpolator=function(v){return arguments.length?(c=v,m):c};function y(v){return function(_){var b,S,A;return arguments.length?([b,S,A]=_,c=uC(v,[b,S,A]),m):[c(0),c(.5),c(1)]}}return m.range=y(rl),m.rangeRound=y(Up),m.unknown=function(v){return arguments.length?(p=v,m):p},function(v){return f=v,i=v(e),o=v(t),s=v(n),a=i===o?0:.5/(o-i),l=o===s?0:.5/(s-o),r=o<i?-1:1,m}}function mR(){var e=Tu(rv()(Ar));return e.copy=function(){return il(e,mR())},tl.apply(e,arguments)}function yR(){var e=cC(rv()).domain([.1,1,10]);return e.copy=function(){return il(e,yR()).base(e.base())},tl.apply(e,arguments)}function vR(){var e=fC(rv());return e.copy=function(){return il(e,vR()).constant(e.constant())},tl.apply(e,arguments)}function yC(){var e=dC(rv());return e.copy=function(){return il(e,yC()).exponent(e.exponent())},tl.apply(e,arguments)}function uK(){return yC.apply(null,arguments).exponent(.5)}function Yo(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const cK=Yo("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),fK=Yo("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),dK=Yo("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),hK=Yo("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),pK=Yo("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),gK=Yo("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),mK=Yo("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),yK=Yo("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),vK=Yo("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),xK=Yo("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function vC(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const _K="identity",af="linear",Rs="log",jp="pow",Bp="sqrt",iv="symlog",cu="time",fu="utc",Oo="sequential",qf="diverging",lf="quantile",ov="quantize",sv="threshold",xC="ordinal",Hw="point",xR="band",_C="bin-ordinal",an="continuous",Hp="discrete",Gp="discretizing",Ai="interpolating",bC="temporal";function bK(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function wK(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,s,a,l,c;for(i<r&&(a=r,r=i,i=a),l=0,c=n.length;l<c;++l)n[l]>=r&&n[l]<=i&&(o<0&&(o=l),s=l);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[s]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function wC(){const e=iC().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,s=!1,a=0,l=0,c=.5;delete e.unknown;function f(){const h=t().length,p=r[1]<r[0],m=r[1-p],y=vC(h,a,l);let v=r[p-0];i=(m-v)/(y||1),s&&(i=Math.floor(i)),v+=(m-v-i*(h-a))*c,o=i*(1-a),s&&(v=Math.round(v),o=Math.round(o));const _=Hr(h).map(b=>v+i*b);return n(p?_.reverse():_)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?(r=[+h[0],+h[1]],f()):r.slice()},e.rangeRound=function(h){return r=[+h[0],+h[1]],s=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(s=!!h,f()):s},e.padding=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),a=l,f()):a},e.paddingInner=function(h){return arguments.length?(a=Math.max(0,Math.min(1,h)),f()):a},e.paddingOuter=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),f()):l},e.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},e.invertRange=function(h){if(h[0]==null||h[1]==null)return;const p=r[1]<r[0],m=p?n().reverse():n(),y=m.length-1;let v=+h[0],_=+h[1],b,S,A;if(!(v!==v||_!==_)&&(_<v&&(A=v,v=_,_=A),!(_<m[0]||v>r[1-p])))return b=Math.max(0,Ia(m,v)-1),S=v===_?b:Ia(m,_)-1,v-m[b]>o+1e-10&&++b,p&&(A=b,b=y-S,S=y-A),b>S?void 0:t().slice(b,S+1)},e.invert=function(h){const p=e.invertRange([h,h]);return p&&p[0]},e.copy=function(){return wC().domain(t()).range(r).round(s).paddingInner(a).paddingOuter(l).align(c)},f()}function _R(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return _R(t())},e}function SK(){return _R(wC().paddingInner(1))}var EK=Array.prototype.map;function AK(e){return EK.call(e,jn)}const CK=Array.prototype.slice;function bR(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Ia(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=AK(r),n):e.slice()},n.range=function(r){return arguments.length?(t=CK.call(r),n):t.slice()},n.tickFormat=function(r,i){return oR(e[0],Ze(e),r??10,i)},n.copy=function(){return bR().domain(n.domain()).range(n.range())},n}const d1=new Map,wR=Symbol("vega_scale");function SR(e){return e[wR]=!0,e}function vO(e){return e&&e[wR]===!0}function kK(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?bK(o):o.invertExtent?wK(o):void 0),o.type=e,SR(o)};return r.metadata=Ji(_e(n)),r}function lt(e,t,n){return arguments.length>1?(d1.set(e,kK(e,t,n)),this):ER(e)?d1.get(e):void 0}lt(_K,aR);lt(af,sR,an);lt(Rs,uR,[an,Rs]);lt(jp,hC,an);lt(Bp,rK,an);lt(iv,cR,an);lt(cu,sK,[an,bC]);lt(fu,aK,[an,bC]);lt(Oo,gC,[an,Ai]);lt(`${Oo}-${af}`,gC,[an,Ai]);lt(`${Oo}-${Rs}`,pR,[an,Ai,Rs]);lt(`${Oo}-${jp}`,mC,[an,Ai]);lt(`${Oo}-${Bp}`,lK,[an,Ai]);lt(`${Oo}-${iv}`,gR,[an,Ai]);lt(`${qf}-${af}`,mR,[an,Ai]);lt(`${qf}-${Rs}`,yR,[an,Ai,Rs]);lt(`${qf}-${jp}`,yC,[an,Ai]);lt(`${qf}-${Bp}`,uK,[an,Ai]);lt(`${qf}-${iv}`,vR,[an,Ai]);lt(lf,fR,[Gp,lf]);lt(ov,dR,Gp);lt(sv,hR,Gp);lt(_C,bR,[Hp,Gp]);lt(xC,iC,Hp);lt(xR,wC,Hp);lt(Hw,SK,Hp);function ER(e){return d1.has(e)}function Ru(e,t){const n=d1.get(e);return n&&n.metadata[t]}function SC(e){return Ru(e,an)}function uf(e){return Ru(e,Hp)}function Gw(e){return Ru(e,Gp)}function AR(e){return Ru(e,Rs)}function $K(e){return Ru(e,bC)}function CR(e){return Ru(e,Ai)}function kR(e){return Ru(e,lf)}const MK=["clamp","base","constant","exponent"];function $R(e,t){const n=t[0],r=Ze(t)-n;return function(i){return e(n+i*r)}}function av(e,t,n){return uC(EC(t||"rgb",n),e)}function MR(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function NR(e,t,n){const r=n-t;let i,o,s;return!r||!Number.isFinite(r)?Xn(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),s=lt(o)().domain([t,n]).range([0,1]),MK.forEach(a=>e[a]?s[a](e[a]()):0),s)}function EC(e,t){const n=GQ[NK(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function NK(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const OK={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},DK={accent:fK,category10:cK,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:dK,observable10:hK,paired:pK,pastel1:gK,pastel2:mK,set1:yK,set2:vK,set3:xK,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function OR(e){if(ne(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function DR(e,t){for(const n in e)AC(n,t(e[n]))}const xO={};DR(DK,OR);DR(OK,e=>av(OR(e)));function AC(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(xO[e]=t,this):xO[e]}const Am="symbol",FK="discrete",TK="gradient",RK=e=>ne(e)?e.map(t=>String(t)):String(e),LK=(e,t)=>e[1]-t[1],PK=(e,t)=>t[1]-e[1];function CC(e,t,n){let r;return st(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Rp(e.domain())/n||1)+1))),ve(t)&&(r=t.step,t=t.interval),xe(t)&&(t=e.type===cu?Bf(t):e.type==fu?Hf(t):Z("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function FR(e,t,n){let r=e.range(),i=r[0],o=Ze(r),s=LK;if(i>o&&(r=o,o=i,i=r,s=PK),i=Math.floor(i),o=Math.ceil(o),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=o).sort(s).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Ze(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,c)=>!(c%2));t.length<3&&(t=a)}return t}function kC(e,t){return e.bins?FR(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function TR(e,t,n,r,i,o){const s=t.type;let a=RK;if(s===cu||i===cu)a=e.timeFormat(r);else if(s===fu||i===fu)a=e.utcFormat(r);else if(AR(s)){const l=e.formatFloat(r);if(o||t.bins)a=l;else{const c=RR(t,n,!1);a=f=>c(f)?l(f):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function RR(e,t,n){const r=kC(e,t),i=e.base(),o=Math.log(i),s=Math.max(1,i*t/r.length),a=l=>{let c=l/Math.pow(i,Math.round(Math.log(l)/o));return c*i<i-.5&&(c*=i),c<=s};return n?r.filter(a):a}const Yw={[lf]:"quantiles",[ov]:"thresholds",[sv]:"domain"},LR={[lf]:"quantiles",[ov]:"domain"};function PR(e,t){return e.bins?UK(e.bins):e.type===Rs?RR(e,t,!0):Yw[e.type]?IK(e[Yw[e.type]]()):kC(e,t)}function zK(e,t,n){const r=t[LR[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],s;for(s=1;s<i;++s)o=Math.min(o,r[s]-r[s-1]);return e.formatSpan(0,o,30,n)}function IK(e){const t=[-1/0].concat(e);return t.max=1/0,t}function UK(e){const t=e.slice(0,-1);return t.max=Ze(e),t}const WK=e=>Yw[e.type]||e.bins;function zR(e,t,n,r,i,o,s){const a=LR[t.type]&&o!==cu&&o!==fu?zK(e,t,i):TR(e,t,n,i,o,s);return r===Am&&WK(t)?jK(a):r===FK?BK(a):HK(a)}const jK=e=>(t,n,r)=>{const i=_O(r[n+1],_O(r.max,1/0)),o=bO(t,e),s=bO(i,e);return o&&s?o+"  "+s:s?"< "+s:" "+o},_O=(e,t)=>e??t,BK=e=>(t,n)=>n?e(t):null,HK=e=>t=>e(t),bO=(e,t)=>Number.isFinite(e)?t(e):null;function GK(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Ze(t),o=i-r;if(e.type===sv){const s=n?o/n:.1;r-=s,i+=s,o=i-r}return s=>(s-r)/o}function YK(e,t,n,r){const i=r||t.type;return xe(n)&&$K(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===cu?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===fu?e.utcFormat("%A, %d %B %Y, %X UTC"):zR(e,t,5,null,n,r,!0)}function IR(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=YK(e,t,n.format,n.formatType);if(Gw(t.type)){const o=PR(t).slice(1).map(i),s=o.length;return`${s} boundar${s===1?"y":"ies"}: ${o.join(", ")}`}else if(uf(t.type)){const o=t.domain(),s=o.length,a=s>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${s} value${s===1?"":"s"}: ${a}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(Ze(o))}`}}let UR=0;function qK(){UR=0}const h1="p_";function $C(e){return e&&e.gradient}function WR(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?h1:"";return i||(i=e.id="gradient_"+UR++,r==="radial"?(e.x1=vo(e.x1,.5),e.y1=vo(e.y1,.5),e.r1=vo(e.r1,0),e.x2=vo(e.x2,.5),e.y2=vo(e.y2,.5),e.r2=vo(e.r2,.5),o=h1):(e.x1=vo(e.x1,0),e.y1=vo(e.y1,0),e.x2=vo(e.x2,1),e.y2=vo(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function vo(e,t){return e??t}function jR(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const wO={basis:{curve:BJ},"basis-closed":{curve:HJ},"basis-open":{curve:GJ},bundle:{curve:YJ,tension:"beta",value:.85},cardinal:{curve:qJ,tension:"tension",value:0},"cardinal-open":{curve:XJ,tension:"tension",value:0},"cardinal-closed":{curve:VJ,tension:"tension",value:0},"catmull-rom":{curve:JJ,tension:"alpha",value:.5},"catmull-rom-closed":{curve:QJ,tension:"alpha",value:.5},"catmull-rom-open":{curve:KJ,tension:"alpha",value:.5},linear:{curve:ZA},"linear-closed":{curve:ZJ},monotone:{horizontal:tQ,vertical:eQ},natural:{curve:nQ},step:{curve:rQ},"step-after":{curve:oQ},"step-before":{curve:iQ}};function MC(e,t,n){var r=we(wO,e)&&wO[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const VK={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},XK=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,JK=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,QK=/^((\s+,?\s*)|(,\s*))/,KK=/^[01]/;function cf(e){const t=[];return(e.match(XK)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),s=VK[o],a=ZK(o,s,r.slice(1).trim()),l=a.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,s)]),l!==s){o==="m"&&(i=i==="M"?"L":"l");for(let c=s;c<l;c+=s)t.push([i,...a.slice(c,c+s)])}}),t}function ZK(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const s=e==="a"&&(o===3||o===4)?KK:JK,a=n.slice(i).match(s);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(QK);l!==null&&(i+=l[0].length)}return r}const Ha=Math.PI/180,eZ=1e-14,Hl=Math.PI/2,Eo=Math.PI*2,bc=Math.sqrt(3)/2;var Q_={},K_={},BR=[].join;function tZ(e,t,n,r,i,o,s,a,l){const c=BR.call(arguments);if(Q_[c])return Q_[c];const f=s*Ha,h=Math.sin(f),p=Math.cos(f);n=Math.abs(n),r=Math.abs(r);const m=p*(a-e)*.5+h*(l-t)*.5,y=p*(l-t)*.5-h*(a-e)*.5;let v=m*m/(n*n)+y*y/(r*r);v>1&&(v=Math.sqrt(v),n*=v,r*=v);const _=p/n,b=h/n,S=-h/r,A=p/r,C=_*a+b*l,k=S*a+A*l,N=_*e+b*t,$=S*e+A*t;let D=1/((N-C)*(N-C)+($-k)*($-k))-.25;D<0&&(D=0);let P=Math.sqrt(D);o==i&&(P=-P);const R=.5*(C+N)-P*($-k),X=.5*(k+$)+P*(N-C),B=Math.atan2(k-X,C-R);let F=Math.atan2($-X,N-R)-B;F<0&&o===1?F+=Eo:F>0&&o===0&&(F-=Eo);const W=Math.ceil(Math.abs(F/(Hl+.001))),V=[];for(let j=0;j<W;++j){const H=B+j*F/W,Q=B+(j+1)*F/W;V[j]=[R,X,H,Q,n,r,h,p]}return Q_[c]=V}function nZ(e){const t=BR.call(e);if(K_[t])return K_[t];var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],c=e[7];const f=c*s,h=-l*a,p=l*s,m=c*a,y=Math.cos(i),v=Math.sin(i),_=Math.cos(o),b=Math.sin(o),S=.5*(o-i),A=Math.sin(S*.5),C=8/3*A*A/Math.sin(S),k=n+y-C*v,N=r+v+C*y,$=n+_,O=r+b,D=$+C*b,P=O-C*_;return K_[t]=[f*k+h*N,p*k+m*N,f*D+h*P,p*D+m*P,f*$+h*O,p*$+m*O]}const ai=["l",0,0,0,0,0,0,0];function rZ(e,t,n){const r=ai[0]=e[0];if(r==="a"||r==="A")ai[1]=t*e[1],ai[2]=n*e[2],ai[3]=e[3],ai[4]=e[4],ai[5]=e[5],ai[6]=t*e[6],ai[7]=n*e[7];else if(r==="h"||r==="H")ai[1]=t*e[1];else if(r==="v"||r==="V")ai[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)ai[i]=(i%2==1?t:n)*e[i];return ai}function fp(e,t,n,r,i,o){var s,a=null,l=0,c=0,f=0,h=0,p,m,y,v,_=0,b=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var S=0,A=t.length;S<A;++S){switch(s=t[S],(i!==1||o!==1)&&(s=rZ(s,i,o)),s[0]){case"l":l+=s[1],c+=s[2],e.lineTo(l+n,c+r);break;case"L":l=s[1],c=s[2],e.lineTo(l+n,c+r);break;case"h":l+=s[1],e.lineTo(l+n,c+r);break;case"H":l=s[1],e.lineTo(l+n,c+r);break;case"v":c+=s[1],e.lineTo(l+n,c+r);break;case"V":c=s[1],e.lineTo(l+n,c+r);break;case"m":l+=s[1],c+=s[2],_=l,b=c,e.moveTo(l+n,c+r);break;case"M":l=s[1],c=s[2],_=l,b=c,e.moveTo(l+n,c+r);break;case"c":p=l+s[5],m=c+s[6],f=l+s[3],h=c+s[4],e.bezierCurveTo(l+s[1]+n,c+s[2]+r,f+n,h+r,p+n,m+r),l=p,c=m;break;case"C":l=s[5],c=s[6],f=s[3],h=s[4],e.bezierCurveTo(s[1]+n,s[2]+r,f+n,h+r,l+n,c+r);break;case"s":p=l+s[3],m=c+s[4],f=2*l-f,h=2*c-h,e.bezierCurveTo(f+n,h+r,l+s[1]+n,c+s[2]+r,p+n,m+r),f=l+s[1],h=c+s[2],l=p,c=m;break;case"S":p=s[3],m=s[4],f=2*l-f,h=2*c-h,e.bezierCurveTo(f+n,h+r,s[1]+n,s[2]+r,p+n,m+r),l=p,c=m,f=s[1],h=s[2];break;case"q":p=l+s[3],m=c+s[4],f=l+s[1],h=c+s[2],e.quadraticCurveTo(f+n,h+r,p+n,m+r),l=p,c=m;break;case"Q":p=s[3],m=s[4],e.quadraticCurveTo(s[1]+n,s[2]+r,p+n,m+r),l=p,c=m,f=s[1],h=s[2];break;case"t":p=l+s[1],m=c+s[2],a[0].match(/[QqTt]/)===null?(f=l,h=c):a[0]==="t"?(f=2*l-y,h=2*c-v):a[0]==="q"&&(f=2*l-f,h=2*c-h),y=f,v=h,e.quadraticCurveTo(f+n,h+r,p+n,m+r),l=p,c=m,f=l+s[1],h=c+s[2];break;case"T":p=s[1],m=s[2],f=2*l-f,h=2*c-h,e.quadraticCurveTo(f+n,h+r,p+n,m+r),l=p,c=m;break;case"a":SO(e,l+n,c+r,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+c+r]),l+=s[6],c+=s[7];break;case"A":SO(e,l+n,c+r,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+r]),l=s[6],c=s[7];break;case"z":case"Z":l=_,c=b,e.closePath();break}a=s}}function SO(e,t,n,r){const i=tZ(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const s=nZ(i[o]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const EO=.5773502691896257,AO={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Eo)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=bc*n,i=r-n*EO,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=bc*n,i=r-n*EO;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=bc*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=bc*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=bc*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=bc*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function HR(e){return we(AO,e)?AO[e]:iZ(e)}var Z_={};function iZ(e){if(!we(Z_,e)){const t=cf(e);Z_[e]={draw:function(n,r){fp(n,t,0,0,Math.sqrt(r)/2)}}}return Z_[e]}const pa=.448084975506;function oZ(e){return e.x}function sZ(e){return e.y}function aZ(e){return e.width}function lZ(e){return e.height}function fs(e){return typeof e=="function"?e:()=>+e}function H0(e,t,n){return Math.max(t,Math.min(e,n))}function GR(){var e=oZ,t=sZ,n=aZ,r=lZ,i=fs(0),o=i,s=i,a=i,l=null;function c(f,h,p){var m,y=h??+e.call(this,f),v=p??+t.call(this,f),_=+n.call(this,f),b=+r.call(this,f),S=Math.min(_,b)/2,A=H0(+i.call(this,f),0,S),C=H0(+o.call(this,f),0,S),k=H0(+s.call(this,f),0,S),N=H0(+a.call(this,f),0,S);if(l||(l=m=Vy()),A<=0&&C<=0&&k<=0&&N<=0)l.rect(y,v,_,b);else{var $=y+_,O=v+b;l.moveTo(y+A,v),l.lineTo($-C,v),l.bezierCurveTo($-pa*C,v,$,v+pa*C,$,v+C),l.lineTo($,O-N),l.bezierCurveTo($,O-pa*N,$-pa*N,O,$-N,O),l.lineTo(y+k,O),l.bezierCurveTo(y+pa*k,O,y,O-pa*k,y,O-k),l.lineTo(y,v+A),l.bezierCurveTo(y,v+pa*A,y+pa*A,v,y+A,v),l.closePath()}if(m)return l=null,m+""||null}return c.x=function(f){return arguments.length?(e=fs(f),c):e},c.y=function(f){return arguments.length?(t=fs(f),c):t},c.width=function(f){return arguments.length?(n=fs(f),c):n},c.height=function(f){return arguments.length?(r=fs(f),c):r},c.cornerRadius=function(f,h,p,m){return arguments.length?(i=fs(f),o=h!=null?fs(h):i,a=p!=null?fs(p):i,s=m!=null?fs(m):o,c):i},c.context=function(f){return arguments.length?(l=f??null,c):l},c}function YR(){var e,t,n,r,i=null,o,s,a,l;function c(h,p,m){const y=m/2;if(o){var v=a-p,_=h-s;if(v||_){var b=Math.hypot(v,_),S=(v/=b)*l,A=(_/=b)*l,C=Math.atan2(_,v);i.moveTo(s-S,a-A),i.lineTo(h-v*y,p-_*y),i.arc(h,p,y,C-Math.PI,C),i.lineTo(s+S,a+A),i.arc(s,a,l,C,C+Math.PI)}else i.arc(h,p,y,0,Eo);i.closePath()}else o=1;s=h,a=p,l=y}function f(h){var p,m=h.length,y,v=!1,_;for(i==null&&(i=_=Vy()),p=0;p<=m;++p)!(p<m&&r(y=h[p],p,h))===v&&(v=!v)&&(o=0),v&&c(+e(y,p,h),+t(y,p,h),+n(y,p,h));if(_)return i=null,_+""||null}return f.x=function(h){return arguments.length?(e=h,f):e},f.y=function(h){return arguments.length?(t=h,f):t},f.size=function(h){return arguments.length?(n=h,f):n},f.defined=function(h){return arguments.length?(r=h,f):r},f.context=function(h){return arguments.length?(h==null?i=null:i=h,f):i},f}function Yp(e,t){return e??t}const qp=e=>e.x||0,Vp=e=>e.y||0,uZ=e=>e.width||0,cZ=e=>e.height||0,fZ=e=>(e.x||0)+(e.width||0),dZ=e=>(e.y||0)+(e.height||0),hZ=e=>e.startAngle||0,pZ=e=>e.endAngle||0,gZ=e=>e.padAngle||0,mZ=e=>e.innerRadius||0,yZ=e=>e.outerRadius||0,vZ=e=>e.cornerRadius||0,xZ=e=>Yp(e.cornerRadiusTopLeft,e.cornerRadius)||0,_Z=e=>Yp(e.cornerRadiusTopRight,e.cornerRadius)||0,bZ=e=>Yp(e.cornerRadiusBottomRight,e.cornerRadius)||0,wZ=e=>Yp(e.cornerRadiusBottomLeft,e.cornerRadius)||0,SZ=e=>Yp(e.size,64),EZ=e=>e.size||1,lv=e=>e.defined!==!1,AZ=e=>HR(e.shape||"circle"),CZ=UJ().startAngle(hZ).endAngle(pZ).padAngle(gZ).innerRadius(mZ).outerRadius(yZ).cornerRadius(vZ),kZ=bT().x(qp).y1(Vp).y0(dZ).defined(lv),$Z=bT().y(Vp).x1(qp).x0(fZ).defined(lv),MZ=_T().x(qp).y(Vp).defined(lv),NZ=GR().x(qp).y(Vp).width(uZ).height(cZ).cornerRadius(xZ,_Z,bZ,wZ),OZ=jJ().type(AZ).size(SZ),DZ=YR().x(qp).y(Vp).defined(lv).size(EZ);function NC(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function FZ(e,t){return CZ.context(e)(t)}function TZ(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?$Z:kZ).curve(MC(r,n.orient,n.tension)).context(e)(t)}function RZ(e,t){const n=t[0],r=n.interpolate||"linear";return MZ.curve(MC(r,n.orient,n.tension)).context(e)(t)}function Vf(e,t,n,r){return NZ.context(e)(t,n,r)}function LZ(e,t){return(t.mark.shape||t.shape).context(e)(t)}function PZ(e,t){return OZ.context(e)(t)}function zZ(e,t){return DZ.context(e)(t)}var qR=1;function IZ(){qR=1}function OC(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+qR++),s=i.clipping[o]||(i.clipping[o]={id:o});return He(r)?s.path=r(null):NC(n)?s.path=Vf(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")"}function Jt(e){this.clear(),e&&this.union(e)}Jt.prototype={clone(){return new Jt(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:s}=this,a=Math.cos(e),l=Math.sin(e),c=t-t*a+n*l,f=n-t*l-n*a;return[a*r-l*i+c,l*r+a*i+f,a*r-l*s+c,l*r+a*s+f,a*o-l*i+c,l*o+a*i+f,a*o-l*s+c,l*o+a*s+f]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function uv(e){this.mark=e,this.bounds=this.bounds||new Jt}function cv(e){uv.call(this,e),this.items=this.items||[]}ge(cv,uv);class VR{constructor(t){this._pending=0,this._loader=t||Ly()}pending(){return this._pending}sanitizeURL(t){const n=this;return CO(n),n._loader.sanitize(t,{context:"href"}).then(r=>(ih(n),r)).catch(()=>(ih(n),null))}loadImage(t){const n=this,r=sQ();return CO(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const o=i.href;if(!o||!r)throw{url:o};const s=new r,a=we(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(s.crossOrigin=a),s.onload=()=>ih(n),s.onerror=()=>ih(n),s.src=o,s}).catch(i=>(ih(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function CO(e){e._pending+=1}function ih(e){e._pending-=1}function Us(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?UZ(t,r):0))}return e}function UZ(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const WZ=Eo-1e-8;let fv,Cm,km,Jl,qw,$m,Vw,Xw;const Ea=(e,t)=>fv.add(e,t),Mm=(e,t)=>Ea(Cm=e,km=t),kO=e=>Ea(e,fv.y1),$O=e=>Ea(fv.x1,e),Gl=(e,t)=>qw*e+Vw*t,Yl=(e,t)=>$m*e+Xw*t,eb=(e,t)=>Ea(Gl(e,t),Yl(e,t)),tb=(e,t)=>Mm(Gl(e,t),Yl(e,t));function Xp(e,t){return fv=e,t?(Jl=t*Ha,qw=Xw=Math.cos(Jl),$m=Math.sin(Jl),Vw=-$m):(qw=Xw=1,Jl=$m=Vw=0),jZ}const jZ={beginPath(){},closePath(){},moveTo:tb,lineTo:tb,rect(e,t,n,r){Jl?(eb(e+n,t),eb(e+n,t+r),eb(e,t+r),tb(e,t)):(Ea(e+n,t+r),Mm(e,t))},quadraticCurveTo(e,t,n,r){const i=Gl(e,t),o=Yl(e,t),s=Gl(n,r),a=Yl(n,r);MO(Cm,i,s,kO),MO(km,o,a,$O),Mm(s,a)},bezierCurveTo(e,t,n,r,i,o){const s=Gl(e,t),a=Yl(e,t),l=Gl(n,r),c=Yl(n,r),f=Gl(i,o),h=Yl(i,o);NO(Cm,s,l,f,kO),NO(km,a,c,h,$O),Mm(f,h)},arc(e,t,n,r,i,o){if(r+=Jl,i+=Jl,Cm=n*Math.cos(i)+e,km=n*Math.sin(i)+t,Math.abs(i-r)>WZ)Ea(e-n,t-n),Ea(e+n,t+n);else{const s=c=>Ea(n*Math.cos(c)+e,n*Math.sin(c)+t);let a,l;if(s(r),s(i),i!==r)if(r=r%Eo,r<0&&(r+=Eo),i=i%Eo,i<0&&(i+=Eo),i<r&&(o=!o,a=r,r=i,i=a),o)for(i-=Eo,a=r-r%Hl,l=0;l<4&&a>i;++l,a-=Hl)s(a);else for(a=r-r%Hl+Hl,l=0;l<4&&a<i;++l,a=a+Hl)s(a)}}};function MO(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function NO(e,t,n,r,i){const o=r-e+3*t-3*n,s=e+n-2*t,a=e-t;let l=0,c=0,f;Math.abs(o)>eZ?(f=s*s+a*o,f>=0&&(f=Math.sqrt(f),l=(-s+f)/o,c=(-s-f)/o)):l=.5*a/s,0<l&&l<1&&i(OO(l,e,t,n,r)),0<c&&c<1&&i(OO(c,e,t,n,r))}function OO(e,t,n,r,i){const o=1-e,s=o*o,a=e*e;return s*o*t+3*s*e*n+3*o*a*r+a*e*i}var Pa=(Pa=La(1,1))?Pa.getContext("2d"):null;const Jw=new Jt;function DC(e){return function(t,n){if(!Pa)return!0;e(Pa,t),Jw.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:s}=Jw;for(let a=i;a<=s;++a)for(let l=r;l<=o;++l)if(Pa.isPointInPath(l,a))return!0;return!1}}function FC(e,t){return t.contains(e.x||0,e.y||0)}function XR(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(Jw.set(n,r,n+i,r+o))}function JR(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return Rc(t,n,r,i,o)}function Rc(e,t,n,r,i){const{x1:o,y1:s,x2:a,y2:l}=e,c=r-t,f=i-n;let h=0,p=1,m,y,v,_;for(_=0;_<4;++_){if(_===0&&(m=-c,y=-(o-t)),_===1&&(m=c,y=a-t),_===2&&(m=-f,y=-(s-n)),_===3&&(m=f,y=l-n),Math.abs(m)<1e-10&&y<0)return!1;if(v=y/m,m<0){if(v>p)return!1;v>h&&(h=v)}else if(m>0){if(v<h)return!1;v<p&&(p=v)}}return!0}function ff(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Li(e,t){return e??t}function DO(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function BZ(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+Li(t.x1,.5)*r,n.y1+Li(t.y1,.5)*i,Math.max(r,i)*Li(t.r1,0),n.x1+Li(t.x2,.5)*r,n.y1+Li(t.y2,.5)*i,Math.max(r,i)*Li(t.r2,.5));else{const s=Li(t.x1,0),a=Li(t.y1,0),l=Li(t.x2,1),c=Li(t.y2,0);if(s===l||a===c||r===i)o=e.createLinearGradient(n.x1+s*r,n.y1+a*i,n.x1+l*r,n.y1+c*i);else{const f=La(Math.ceil(r),Math.ceil(i)),h=f.getContext("2d");return h.scale(r,i),h.fillStyle=DO(h.createLinearGradient(s,a,l,c),t.stops),h.fillRect(0,0,r,i),e.createPattern(f,"no-repeat")}}return DO(o,t.stops)}function QR(e,t,n){return $C(n)?BZ(e,n,t.bounds):n}function p1(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=QR(e,t,t.fill),!0):!1}var HZ=[];function df(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=QR(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||HZ),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function GZ(e,t){return e.zindex-t.zindex||e.index-t.index}function TC(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(GZ)}function Ki(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=TC(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function g1(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=TC(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function RC(e){return function(t,n,r){Ki(n,i=>{(!r||r.intersects(i.bounds))&&KR(e,t,i,i)})}}function YZ(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&KR(e,t,n.items[0],n.items)}}function KR(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(ff(t,n),n.fill&&p1(t,n,i)&&t.fill(),n.stroke&&df(t,n,i)&&t.stroke()))}function dv(e){return e=e||xi,function(t,n,r,i,o,s){return r*=t.pixelRatio,i*=t.pixelRatio,g1(n,a=>{const l=a.bounds;if(!(l&&!l.contains(o,s)||!l)&&e(t,a,r,i,o,s))return a})}}function Jp(e,t){return function(n,r,i,o){var s=Array.isArray(r)?r[0]:r,a=t??s.fill,l=s.stroke&&n.isPointInStroke,c,f;return l&&(c=s.strokeWidth,f=s.strokeCap,n.lineWidth=c??1,n.lineCap=f??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o)}}function LC(e){return dv(Jp(e))}function tu(e,t){return"translate("+e+","+t+")"}function PC(e){return"rotate("+e+")"}function qZ(e,t){return"scale("+e+","+t+")"}function ZR(e){return tu(e.x||0,e.y||0)}function VZ(e){return tu(e.x||0,e.y||0)+(e.angle?" "+PC(e.angle):"")}function XZ(e){return tu(e.x||0,e.y||0)+(e.angle?" "+PC(e.angle):"")+(e.scaleX||e.scaleY?" "+qZ(e.scaleX||1,e.scaleY||1):"")}function zC(e,t,n){function r(s,a){s("transform",VZ(a)),s("d",t(null,a))}function i(s,a){return t(Xp(s,a.angle),a),Us(s,a).translate(a.x||0,a.y||0)}function o(s,a){var l=a.x||0,c=a.y||0,f=a.angle||0;s.translate(l,c),f&&s.rotate(f*=Ha),s.beginPath(),t(s,a),f&&s.rotate(-f),s.translate(-l,-c)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:RC(o),pick:LC(o),isect:n||DC(o)}}var JZ=zC("arc",FZ);function QZ(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,s,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<o&&(o=a,s=e[i]));return s}function KZ(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,s;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],s=i*i+o*o,s<n))return e[r];return null}function ZZ(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function IC(e,t,n){function r(l,c){var f=c.mark.items;f.length&&l("d",t(null,f))}function i(l,c){var f=c.items;return f.length===0?l:(t(Xp(l),f),Us(l,f[0]))}function o(l,c){l.beginPath(),t(l,c)}const s=Jp(o);function a(l,c,f,h,p,m){var y=c.items,v=c.bounds;return!y||!y.length||v&&!v.contains(p,m)?null:(f*=l.pixelRatio,h*=l.pixelRatio,s(l,y,f,h)?y[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:YZ(o),pick:a,isect:FC,tip:n}}var eee=IC("area",TZ,QZ);function tee(e,t){var n=t.clip;e.save(),He(n)?(e.beginPath(),n(e),e.clip()):eL(e,t.group)}function eL(e,t){e.beginPath(),NC(t)?Vf(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function tL(e){const t=Li(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function nee(e,t){e("transform",ZR(t))}function nL(e,t){const n=tL(t);e("d",Vf(null,t,n,n))}function ree(e,t){e("class","background"),e("aria-hidden",!0),nL(e,t)}function iee(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?nL(e,t):e("d","")}function oee(e,t,n){const r=t.clip?OC(n,t,t):null;e("clip-path",r)}function see(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Us(e,t),e.translate(t.x||0,t.y||0)}function dp(e,t,n,r){const i=tL(t);e.beginPath(),Vf(e,t,(n||0)+i,(r||0)+i)}const aee=Jp(dp),lee=Jp(dp,!1),uee=Jp(dp,!0);function cee(e,t,n,r){Ki(t,i=>{const o=i.x||0,s=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(dp(e,i,o,s),ff(e,i),i.fill&&p1(e,i,l)&&e.fill(),i.stroke&&!a&&df(e,i,l)&&e.stroke()),e.save(),e.translate(o,s),i.clip&&eL(e,i),n&&n.translate(-o,-s),Ki(i,c=>{(c.marktype==="group"||r==null||r.includes(c.marktype))&&this.draw(e,c,n,r)}),n&&n.translate(o,s),e.restore(),a&&i.stroke&&l&&(dp(e,i,o,s),ff(e,i),df(e,i,l)&&e.stroke())})}function fee(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const s=n*e.pixelRatio,a=r*e.pixelRatio;return g1(t,l=>{let c,f,h;const p=l.bounds;if(p&&!p.contains(i,o))return;f=l.x||0,h=l.y||0;const m=f+(l.width||0),y=h+(l.height||0),v=l.clip;if(v&&(i<f||i>m||o<h||o>y))return;if(e.save(),e.translate(f,h),f=i-f,h=o-h,v&&NC(l)&&!uee(e,l,s,a))return e.restore(),null;const _=l.strokeForeground,b=t.interactive!==!1;return b&&_&&l.stroke&&lee(e,l,s,a)?(e.restore(),l):(c=g1(l,S=>dee(S,f,h)?this.pick(S,n,r,f,h):null),!c&&b&&(l.fill||!_&&l.stroke)&&aee(e,l,s,a)&&(c=l),e.restore(),c||null)})}function dee(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var hee={type:"group",tag:"g",nested:!1,attr:nee,bound:see,draw:cee,pick:fee,isect:XR,content:oee,background:ree,foreground:iee},hp={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function UC(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function WC(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function jC(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function hv(e,t){return e==="center"?t/2:e==="right"?t:0}function pv(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function pee(e,t,n){const r=UC(t,n),i=WC(t,r),o=jC(t,r),s=(t.x||0)-hv(t.align,i),a=(t.y||0)-pv(t.baseline,o),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,hp["xmlns:xlink"],"xlink:href"),e("transform",tu(s,a)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function gee(e,t){const n=t.image,r=WC(t,n),i=jC(t,n),o=(t.x||0)-hv(t.align,r),s=(t.y||0)-pv(t.baseline,i);return e.set(o,s,o+r,s+i)}function mee(e,t,n){Ki(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=UC(r,this);let o=WC(r,i),s=jC(r,i);if(o===0||s===0)return;let a=(r.x||0)-hv(r.align,o),l=(r.y||0)-pv(r.baseline,s),c,f,h,p;r.aspect!==!1&&(f=i.width/i.height,h=r.width/r.height,f===f&&h===h&&f!==h&&(h<f?(p=o/f,l+=(s-p)/2,s=p):(p=s*f,a+=(o-p)/2,o=p))),(i.complete||i.toDataURL)&&(ff(e,r),e.globalAlpha=(c=r.opacity)!=null?c:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,o,s))})}var yee={type:"image",tag:"image",nested:!1,attr:pee,bound:gee,draw:mee,pick:dv(),isect:xi,get:UC,xOffset:hv,yOffset:pv},vee=IC("line",RZ,KZ);function xee(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",XZ(t)),e("d",t.path)}function Nm(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,s=t.scaleY||1,a=(t.angle||0)*Ha,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=cf(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),fp(e,l,0,0,o,s),e.rotate(-a),e.translate(-r,-i)):fp(e,l,r,i,o,s)}function _ee(e,t){return Nm(Xp(e,t.angle),t)?e.set(0,0,0,0):Us(e,t,!0)}var bee={type:"path",tag:"path",nested:!1,attr:xee,bound:_ee,draw:RC(Nm),pick:LC(Nm),isect:DC(Nm)};function wee(e,t){e("d",Vf(null,t))}function See(e,t){var n,r;return Us(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function FO(e,t){e.beginPath(),Vf(e,t)}var Eee={type:"rect",tag:"path",nested:!1,attr:wee,bound:See,draw:RC(FO),pick:LC(FO),isect:XR};function Aee(e,t){e("transform",ZR(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Cee(e,t){var n,r;return Us(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function rL(e,t,n){var r,i,o,s;return t.stroke&&df(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,s=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,s),!0):!1}function kee(e,t,n){Ki(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&rL(e,r,i)&&(ff(e,r),e.stroke())}})}function $ee(e,t,n,r){return e.isPointInStroke?rL(e,t,1)&&e.isPointInStroke(n,r):!1}var Mee={type:"rule",tag:"line",nested:!1,attr:Aee,bound:Cee,draw:kee,pick:dv($ee),isect:JR},Nee=zC("shape",LZ),Oee=zC("symbol",PZ,FC);const TO=fF();var qr={height:qo,measureWidth:BC,estimateWidth:m1,width:m1,canvas:iL};iL(!0);function iL(e){qr.width=e&&Pa?BC:m1}function m1(e,t){return oL(Ya(e,t),qo(e))}function oL(e,t){return~~(.8*e.length*t)}function BC(e,t){return qo(e)<=0||!(t=Ya(e,t))?0:sL(t,gv(e))}function sL(e,t){const n=`(${t}) ${e}`;let r=TO.get(n);return r===void 0&&(Pa.font=t,r=Pa.measureText(e).width,TO.set(n,r)),r}function qo(e){return e.fontSize!=null?+e.fontSize||0:11}function Ga(e){return e.lineHeight!=null?e.lineHeight:qo(e)+2}function Dee(e){return ne(e)?e.length>1?e:e[0]:e}function Qp(e){return Dee(e.lineBreak&&e.text&&!ne(e.text)?e.text.split(e.lineBreak):e.text)}function HC(e){const t=Qp(e);return(ne(t)?t.length-1:0)*Ga(e)}function Ya(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Tee(e,n):n}function Fee(e){if(qr.width===BC){const t=gv(e);return n=>sL(n,t)}else if(qr.width===m1){const t=qo(e);return n=>oL(n,t)}else return t=>qr.width(e,t)}function Tee(e,t){var n=+e.limit,r=Fee(e);if(r(t)<n)return t;var i=e.ellipsis||"",o=e.dir==="rtl",s=0,a=t.length,l;if(n-=r(i),o){for(;s<a;)l=s+a>>>1,r(t.slice(l))>n?s=l+1:a=l;return i+t.slice(s)}else{for(;s<a;)l=1+(s+a>>>1),r(t.slice(0,l))<n?s=l:a=l-1;return t.slice(0,s)+i}}function Kp(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function gv(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+qo(e)+"px "+Kp(e,t)}function GC(e){var t=e.baseline,n=qo(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Ga(e):t==="line-bottom"?.29*n-.5*Ga(e):0)}const Ree={left:"start",center:"middle",right:"end"},Bh=new Jt;function mv(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Hl,t+=r*Math.cos(i),n+=r*Math.sin(i)),Bh.x1=t,Bh.y1=n,Bh}function Lee(e,t){var n=t.dx||0,r=(t.dy||0)+GC(t),i=mv(t),o=i.x1,s=i.y1,a=t.angle||0,l;e("text-anchor",Ree[t.align]||"start"),a?(l=tu(o,s)+" "+PC(a),(n||r)&&(l+=" "+tu(n,r))):l=tu(o+n,s+r),e("transform",l)}function YC(e,t,n){var r=qr.height(t),i=t.align,o=mv(t),s=o.x1,a=o.y1,l=t.dx||0,c=(t.dy||0)+GC(t)-Math.round(.8*r),f=Qp(t),h;if(ne(f)?(r+=Ga(t)*(f.length-1),h=f.reduce((p,m)=>Math.max(p,qr.width(t,m)),0)):h=qr.width(t,f),i==="center"?l-=h/2:i==="right"&&(l-=h),e.set(l+=s,c+=a,l+h,c+r),t.angle&&!n)e.rotate(t.angle*Ha,s,a);else if(n===2)return e.rotatedPoints(t.angle*Ha,s,a);return e}function Pee(e,t,n){Ki(t,r=>{var i=r.opacity==null?1:r.opacity,o,s,a,l,c,f,h;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=gv(r),e.textAlign=r.align||"left",o=mv(r),s=o.x1,a=o.y1,r.angle&&(e.save(),e.translate(s,a),e.rotate(r.angle*Ha),s=a=0),s+=r.dx||0,a+=(r.dy||0)+GC(r),f=Qp(r),ff(e,r),ne(f))for(c=Ga(r),l=0;l<f.length;++l)h=Ya(r,f[l]),r.fill&&p1(e,r,i)&&e.fillText(h,s,a),r.stroke&&df(e,r,i)&&e.strokeText(h,s,a),a+=c;else h=Ya(r,f),r.fill&&p1(e,r,i)&&e.fillText(h,s,a),r.stroke&&df(e,r,i)&&e.strokeText(h,s,a);r.angle&&e.restore()}})}function zee(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=mv(t),a=s.x1,l=s.y1,c=YC(Bh,t,1),f=-t.angle*Ha,h=Math.cos(f),p=Math.sin(f),m=h*i-p*o+(a-h*a+p*l),y=p*i+h*o+(l-p*a-h*l);return c.contains(m,y)}function Iee(e,t){const n=YC(Bh,e,2);return Rc(t,n[0],n[1],n[2],n[3])||Rc(t,n[0],n[1],n[4],n[5])||Rc(t,n[4],n[5],n[6],n[7])||Rc(t,n[2],n[3],n[6],n[7])}var Uee={type:"text",tag:"text",nested:!1,attr:Lee,bound:YC,draw:Pee,pick:dv(zee),isect:Iee},Wee=IC("trail",zZ,ZZ),Zr={arc:JZ,area:eee,group:hee,image:yee,line:vee,path:bee,rect:Eee,rule:Mee,shape:Nee,symbol:Oee,text:Uee,trail:Wee};function Qw(e,t,n){var r=Zr[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Jt),e,n)}var RO={mark:null};function aL(e,t,n){var r=Zr[e.marktype],i=r.bound,o=e.items,s=o&&o.length,a,l,c,f;if(r.nested)return s?c=o[0]:(RO.mark=e,c=RO),f=Qw(c,i,n),t=t&&t.union(f)||f,t;if(t=t||e.bounds&&e.bounds.clear()||new Jt,s)for(a=0,l=o.length;a<l;++a)t.union(Qw(o[a],i,n));return e.bounds=t}const jee=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function lL(e,t){return JSON.stringify(e,jee,t)}function uL(e){const t=typeof e=="string"?JSON.parse(e):e;return cL(t)}function cL(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&cL(n[i]);return t&&aL(e),e}class fL{constructor(t){arguments.length?this.root=uL(t):(this.root=LO({marktype:"group",name:"root",role:"frame"}),this.root.items=[new cv(this.root)])}toJSON(t){return lL(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=LO(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function LO(e,t){const n={bounds:new Jt,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Aa(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function qC(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function tn(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=Aa(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function ui(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function dL(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function yv(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Bee(e,t,n,r){var i=e&&e.mark,o,s;if(i&&(o=Zr[i.marktype]).tip){for(s=yv(t,n),s[0]-=r[0],s[1]-=r[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=o.tip(i.items,s)}return e}let VC=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||Ly(),this._tooltip=n||Hee}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const o=new MouseEvent(t.type,t),s=Aa(null,"a");for(const a in i)s.setAttribute(a,i[a]);s.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=Bee(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,o=t.bounds,s=o.width(),a=o.height();let l=o.x1+i[0]+r.left,c=o.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,c+=t.y||0;return{x:l,y:c,width:s,height:a,left:l,top:c,right:l+s,bottom:c+a}}};function Hee(e,t,n,r){e.element().setAttribute("title",r||"")}class Zp{constructor(t){this._el=null,this._bgcolor=null,this._loader=new VR(t)}initialize(t,n,r,i,o){return this._el=t,this.resize(n,r,i,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const o=r._call;r._ready=r._loader.ready().then(s=>{s&&o(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Gee="keydown",Yee="keypress",qee="keyup",hL="dragenter",Om="dragleave",pL="dragover",Kw="pointerdown",Vee="pointerup",y1="pointermove",Dm="pointerout",gL="pointerover",Zw="mousedown",Xee="mouseup",mL="mousemove",v1="mouseout",yL="mouseover",x1="click",Jee="dblclick",Qee="wheel",vL="mousewheel",_1="touchstart",b1="touchmove",w1="touchend",Kee=[Gee,Yee,qee,hL,Om,pL,Kw,Vee,y1,Dm,gL,Zw,Xee,mL,v1,yL,x1,Jee,Qee,vL,_1,b1,w1],eS=y1,Hh=v1,tS=x1;class eg extends VC{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Kee,this.pointermove=zO([y1,mL],[gL,yL],[Dm,v1]),this.dragover=zO([pL],[hL],[Om]),this.pointerout=IO([Dm,v1]),this.dragleave=IO([Om])}initialize(t,n,r){return this._canvas=t&&qC(t,"canvas"),[x1,Zw,Kw,y1,Dm,Om].forEach(i=>PO(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(vL,t)}pointerdown(t){this._down=this._active,this.fire(Kw,t)}mousedown(t){this._down=this._active,this.fire(Zw,t)}click(t){this._down===this._active&&(this.fire(x1,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(_1,t,!0)}touchmove(t){this.fire(b1,t,!0)}touchend(t){this.fire(w1,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===tS&&i&&i.href?this.handleHref(n,i,i.href):(t===eS||t===Hh)&&this.handleTooltip(n,i,t!==Hh),o)for(let s=0,a=o.length;s<a;++s)o[s].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(PO(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&i.splice(o,1),this}pickEvent(t){const n=yv(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,o){const s=this.context();return Zr[t.marktype].pick.call(this,s,t,n,r,i,o)}}const Zee=e=>e===_1||e===b1||e===w1?[_1,b1,w1]:[e];function PO(e,t){Zee(t).forEach(n=>ete(e,n))}function ete(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function $h(e,t,n){t.forEach(r=>e.fire(r,n))}function zO(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?$h(this,e,r):((!i||!i.exit)&&$h(this,n,r),this._active=o,$h(this,t,r),$h(this,e,r))}}function IO(e){return function(t){$h(this,e,t),this._active=null}}function tte(){return typeof window<"u"&&window.devicePixelRatio||1}function nte(e,t,n,r,i,o){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=s?tte():i;e.width=t*l,e.height=n*l;for(const c in o)a[c]=o[c];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class S1 extends Zp{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Jt,this._tempb=new Jt}initialize(t,n,r,i,o,s){return this._options=s||{},this._canvas=this._options.externalContext?null:La(1,1,this._options.type),t&&this._canvas&&(ui(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,o)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)nte(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||Z("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,o=this._width,s=this._height,a=this._dirty,l=rte(i,o,s);r.save();const c=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):ite(r,l.intersect(a),i);return this.clear(-i[0],-i[1],o,s),this.draw(r,t,c,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const o=Zr[n.marktype];n.clip&&tee(t,n),o.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const o=this._options,s=this.context();o.type!=="pdf"&&!o.externalContext&&s.clearRect(t,n,r,i),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,r,i))}}const rte=(e,t,n)=>new Jt().set(0,0,t,n).translate(-e[0],-e[1]);function ite(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class xL extends VC{constructor(t,n){super(t,n);const r=this;r._hrefHandler=nb(r,(i,o)=>{o&&o.href&&r.handleHref(i,o,o.href)}),r._tooltipHandler=nb(r,(i,o)=>{r.handleTooltip(i,o,i.type!==Hh)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(tS,this._hrefHandler),i.removeEventListener(eS,this._tooltipHandler),i.removeEventListener(Hh,this._tooltipHandler)),this._svg=i=t&&qC(t,"svg"),i&&(i.addEventListener(tS,this._hrefHandler),i.addEventListener(eS,this._tooltipHandler),i.addEventListener(Hh,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const s={type:t,handler:n,listener:nb(this,n)};(i[r]||(i[r]=[])).push(s),this._svg&&this._svg.addEventListener(r,s.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(r,i[o].listener),i.splice(o,1)),this}}const nb=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},_L="aria-hidden",XC="aria-label",JC="role",QC="aria-roledescription",bL="graphics-object",KC="graphics-symbol",wL=(e,t,n)=>({[JC]:e,[QC]:t,[XC]:n||void 0}),ote=Ji(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),UO={axis:{desc:"axis",caption:lte},legend:{desc:"legend",caption:ute},"title-text":{desc:"title",caption:e=>`Title text '${jO(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${jO(e)}'`}},WO={ariaRole:JC,ariaRoleDescription:QC,description:XC};function SL(e,t){const n=t.aria===!1;if(e(_L,n||void 0),n||t.description==null)for(const r in WO)e(WO[r],void 0);else{const r=t.mark.marktype;e(XC,t.description),e(JC,t.ariaRole||(r==="group"?bL:KC)),e(QC,t.ariaRoleDescription||`${r} mark`)}}function EL(e){return e.aria===!1?{[_L]:!0}:ote[e.role]?null:UO[e.role]?ate(e,UO[e.role]):ste(e)}function ste(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return wL(n?bL:KC,`${t} mark container`,e.description)}function ate(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return wL(t.role||KC,t.desc,n.description||r(n))}catch{return null}}function jO(e){return _e(e.text).join(" ")}function lte(e){const t=e.datum,n=e.orient,r=t.title?AL(e):null,i=e.context,o=i.scales[t.scale].value,s=i.dataflow.locale(),a=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${uf(a)?"discrete":a} scale with ${IR(s,o,e)}`}function ute(e){const t=e.datum,n=t.title?AL(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),s=e.context,a=s.scales[i[o[0]]].value,l=s.dataflow.locale();return fte(r)+(n?` titled '${n}'`:"")+` for ${cte(o)} with ${IR(l,a,e)}`}function AL(e){try{return _e(Ze(e.items).items[0].text).join(" ")}catch{return null}}function cte(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Ze(e)}function fte(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const CL=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),dte=e=>CL(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function ZC(){let e="",t="",n="";const r=[],i=()=>t=n="",o=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},s=(l,c)=>(c!=null&&(t+=` ${l}="${dte(c)}"`),a),a={open(l,...c){o(l),t="<"+l;for(const f of c)for(const h in f)s(h,f[h]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:s,text:l=>(n+=CL(l),a),toString:()=>e};return a}const kL=e=>$L(ZC(),e)+"";function $L(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):$L(e,r)}return e.close()}const E1={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},A1={blend:"mix-blend-mode"},ML={fill:"none","stroke-miterlimit":10},oh=0,BO="http://www.w3.org/2000/xmlns/",en=hp.xmlns;class ek extends Zp{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,o){return this._defs={},this._clearDefs(),t&&(this._svg=tn(t,0,"svg",en),this._svg.setAttributeNS(BO,"xmlns",en),this._svg.setAttributeNS(BO,"xmlns:xlink",hp["xmlns:xlink"]),this._svg.setAttribute("version",hp.version),this._svg.setAttribute("class","marks"),ui(t,1),this._root=tn(this._svg,oh,"g",en),Ca(this._root,ML),ui(this._svg,oh+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Ca(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=tn(t,oh,"rect",en),Ca(r,{width:this._width,height:this._height,fill:n}));const i=kL(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),ui(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,o,s,a,l,c;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==o&&(o=i.marktype,s=Zr[o]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,HO(r,n),i.items.forEach(f=>{f.dirty=n})),!i.zdirty){if(r.exit){s.nested&&i.items.length?(c=i.items[0],c._svg&&this._update(s,c._svg,c)):r._svg&&(c=r._svg.parentNode,c&&c.removeChild(r._svg)),r._svg=null;continue}r=s.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,HO(r,n)):this._update(s,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const o=this._svg,s=n.marktype,a=Zr[s],l=n.interactive===!1?"none":null,c=a.tag==="g",f=GO(n,t,r,"g",o);if(s!=="group"&&i!=null&&!i.includes(s))return ui(f,0),n._svg;f.setAttribute("class",dL(n));const h=EL(n);for(const v in h)er(f,v,h[v]);c||er(f,"pointer-events",l),er(f,"clip-path",n.clip?OC(this,n,n.group):null);let p=null,m=0;const y=v=>{const _=this.isDirty(v),b=GO(v,f,p,a.tag,o);_&&(this._update(a,b,v),c&&gte(this,b,v,i)),p=b,++m};return a.nested?n.items.length&&y(n.items[0]):Ki(n,y),ui(f,m),f}_update(t,n,r){Es=n,Un=n.__values__,SL(Gh,r),t.attr(Gh,r,this);const i=yte[t.type];i&&i.call(this,t,n,r),Es&&this.style(Es,r)}style(t,n){if(n!=null){for(const r in E1){let i=r==="font"?Kp(n):n[r];if(i===Un[r])continue;const o=E1[r];i==null?t.removeAttribute(o):($C(i)&&(i=WR(i,this._defs.gradient,NL())),t.setAttribute(o,i+"")),Un[r]=i}for(const r in A1)Fm(t,A1[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const o in n.gradient)r||(n.el=r=tn(t,oh+1,"defs",en)),i=hte(r,n.gradient[o],i);for(const o in n.clipping)r||(n.el=r=tn(t,oh+1,"defs",en)),i=pte(r,n.clipping[o],i);r&&(i===0?(t.removeChild(r),n.el=null):ui(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function HO(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function hte(e,t,n){let r,i,o;if(t.gradient==="radial"){let s=tn(e,n++,"pattern",en);Ca(s,{id:h1+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=tn(s,0,"rect",en),Ca(s,{width:1,height:1,fill:`url(${NL()}#${t.id})`}),e=tn(e,n++,"radialGradient",en),Ca(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=tn(e,n++,"linearGradient",en),Ca(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=tn(e,r,"stop",en),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return ui(e,r),n}function pte(e,t,n){let r;return e=tn(e,n,"clipPath",en),e.setAttribute("id",t.id),t.path?(r=tn(e,0,"path",en),r.setAttribute("d",t.path)):(r=tn(e,0,"rect",en),Ca(r,{x:0,y:0,width:t.width,height:t.height})),ui(e,1),n+1}function gte(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;Ki(n,s=>{i=e.mark(t,s,i,r),++o}),ui(t,1+o)}function GO(e,t,n,r,i){let o=e._svg,s;if(!o&&(s=t.ownerDocument,o=Aa(s,r,en),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const a=Aa(s,"path",en);o.appendChild(a),a.__data__=e;const l=Aa(s,"g",en);o.appendChild(l),l.__data__=e;const c=Aa(s,"path",en);o.appendChild(c),c.__data__=e,c.__values__={fill:"default"}}return(o.ownerSVGElement!==i||mte(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function mte(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Es=null,Un=null;const yte={group(e,t,n){const r=Es=t.childNodes[2];Un=r.__values__,e.foreground(Gh,n,this),Un=t.__values__,Es=t.childNodes[1],e.content(Gh,n,this);const i=Es=t.childNodes[0];e.background(Gh,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==Un.events&&(er(r,"pointer-events",o),er(i,"pointer-events",o),Un.events=o),n.strokeForeground&&n.stroke){const s=n.fill;er(r,"display",null),this.style(i,n),er(i,"stroke",null),s&&(n.fill=null),Un=r.__values__,this.style(r,n),s&&(n.fill=s),Es=null}else er(r,"display","none")},image(e,t,n){n.smooth===!1?(Fm(t,"image-rendering","optimizeSpeed"),Fm(t,"image-rendering","pixelated")):Fm(t,"image-rendering",null)},text(e,t,n){const r=Qp(n);let i,o,s,a;ne(r)?(o=r.map(l=>Ya(n,l)),i=o.join(`
`),i!==Un.text&&(ui(t,0),s=t.ownerDocument,a=Ga(n),o.forEach((l,c)=>{const f=Aa(s,"tspan",en);f.__data__=n,f.textContent=l,c&&(f.setAttribute("x",0),f.setAttribute("dy",a)),t.appendChild(f)}),Un.text=i)):(o=Ya(n,r),o!==Un.text&&(t.textContent=o,Un.text=o)),er(t,"font-family",Kp(n)),er(t,"font-size",qo(n)+"px"),er(t,"font-style",n.fontStyle),er(t,"font-variant",n.fontVariant),er(t,"font-weight",n.fontWeight)}};function Gh(e,t,n){t!==Un[e]&&(n?vte(Es,e,t,n):er(Es,e,t),Un[e]=t)}function Fm(e,t,n){n!==Un[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Un[t]=n)}function Ca(e,t){for(const n in t)er(e,n,t[n])}function er(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function vte(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function NL(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class OL extends Zp{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=ZC();n.open("svg",Ge({},hp,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",ML,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Zr[n.marktype],i=r.tag,o=[SL,r.attr];t.open("g",{class:dL(n),"clip-path":n.clip?OC(this,n,n.group):null},EL(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const s=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,o,i!=="g"?i:null)),i==="text"){const c=Qp(a);if(ne(c)){const f={x:0,dy:Ga(a)};for(let h=0;h<c.length;++h)t.open("tspan",h?f:null).text(Ya(a,c[h])).close()}else t.text(Ya(a,c))}else if(i==="g"){const c=a.strokeForeground,f=a.fill,h=a.stroke;c&&h&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Ki(a,p=>this.mark(t,p)),t.close(),c&&h?(f&&(a.fill=null),a.stroke=h,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),f&&(a.fill=f)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&s(n.items[0]):Ki(n,s),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const o={},s=(a,l,c,f)=>{o[f||a]=l};return Array.isArray(r)?r.forEach(a=>a(s,n,this)):r(s,n,this),i&&xte(o,n,t,i,this._defs),o}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const o in n){const s=n[o],a=s.stops;s.gradient==="radial"?(t.open("pattern",{id:h1+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:o,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const o in r){const s=r[o];t.open("clipPath",{id:o}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function xte(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=Kp(t),e["font-size"]=qo(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in E1){let a=t[s];const l=E1[s];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&($C(a)&&(a=WR(a,i.gradient,"")),e[l]=a)}for(const s in A1){const a=t[s];a!=null&&(o=o||[],o.push(`${A1[s]}: ${a};`))}return o&&(e.style=o.join(" ")),e}const zi={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function _te(e){zi.svgMarkTypes=e.svgMarkTypes??["text"],zi.svgOnTop=e.svgOnTop??!0,zi.debug=e.debug??!1}class nS extends Zp{constructor(t){super(t),this._svgRenderer=new ek(t),this._canvasRenderer=new S1(t)}initialize(t,n,r,i,o){this._root_el=tn(t,0,"div");const s=tn(this._root_el,0,"div"),a=tn(this._root_el,1,"div");return this._root_el.style.position="relative",zi.debug||(s.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=zi.svgOnTop?a:s,this._canvasEl=zi.svgOnTop?s:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,o),this._svgRenderer.initialize(this._svgEl,n,r,i,o),super.initialize(t,n,r,i,o)}dirty(t){return zi.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!zi.svgMarkTypes.includes(o));this._svgRenderer.render(t,zi.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return zi.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class DL extends eg{constructor(t,n){super(t,n)}initialize(t,n,r){const i=tn(tn(t,0,"div"),zi.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const FL="canvas",TL="hybrid",RL="png",LL="svg",PL="none",ka={Canvas:FL,PNG:RL,SVG:LL,Hybrid:TL,None:PL},du={};du[FL]=du[RL]={renderer:S1,headless:S1,handler:eg};du[LL]={renderer:ek,headless:OL,handler:xL};du[TL]={renderer:nS,headless:nS,handler:DL};du[PL]={};function vv(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(du[e]=t,this):du[e]}function zL(e,t,n){const r=[],i=new Jt().union(t),o=e.marktype;return o?IL(e,i,n,r):o==="group"?UL(e,i,n,r):Z("Intersect scene must be mark node or group item.")}function IL(e,t,n,r){if(bte(e,t,n)){const i=e.items,o=e.marktype,s=i.length;let a=0;if(o==="group")for(;a<s;++a)UL(i[a],t,n,r);else for(const l=Zr[o].isect;a<s;++a){const c=i[a];WL(c,t,l)&&r.push(c)}}return r}function bte(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function UL(e,t,n,r){n&&n(e.mark)&&WL(e,t,Zr.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const s=e.x||0,a=e.y||0;t.translate(-s,-a);for(let l=0;l<o;++l)IL(i[l],t,n,r);t.translate(s,a)}return r}function WL(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const rb=new Jt;function jL(e){const t=e.clip;if(He(t))t(Xp(rb.clear()));else if(t)rb.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(rb)}const wte=1e-9;function tk(e,t,n){return e===t?!0:n==="path"?BL(e,t):e instanceof Date&&t instanceof Date?+e==+t:st(e)&&st(t)?Math.abs(e-t)<=wte:!e||!t||!ve(e)&&!ve(t)?e==t:Ste(e,t)}function BL(e,t){return tk(cf(e),cf(t))}function Ste(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!tk(e[i],t[i],i))return!1;return typeof e==typeof t}function Ete(){IZ(),qK()}const hf="top",Bi="left",Hi="right",qa="bottom",Ate="top-left",Cte="top-right",kte="bottom-left",$te="bottom-right",nk="start",rS="middle",tr="end",Mte="x",Nte="y",xv="group",rk="axis",ik="title",Ote="frame",Dte="scope",ok="legend",HL="row-header",GL="row-footer",YL="row-title",qL="column-header",VL="column-footer",XL="column-title",Fte="padding",Tte="symbol",JL="fit",QL="fit-x",KL="fit-y",Rte="pad",sk="none",G0="all",iS="each",ak="flush",$a="column",Ma="row";function ZL(e){K.call(this,null,e)}ge(ZL,K,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=Zr[i],s=o.bound;let a=r.bounds,l;if(o.nested)r.items.length&&n.dirty(r.items[0]),a=Y0(r,s),r.items.forEach(c=>{c.bounds.clear().union(a)});else if(i===xv||e.modified())switch(t.visit(t.MOD,c=>n.dirty(c)),a.clear(),r.items.forEach(c=>a.union(Y0(c,s))),r.role){case rk:case ok:case ik:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,c=>{a.union(Y0(c,s))}),t.visit(t.MOD,c=>{l=l||a.alignsWith(c.bounds),n.dirty(c),a.union(Y0(c,s))}),l&&(a.clear(),r.items.forEach(c=>a.union(c.bounds)));return jL(r),t.modifies("bounds")}});function Y0(e,t,n){return t(e.bounds.clear(),e,n)}const YO=":vega_identifier:";function lk(e){K.call(this,0,e)}lk.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ge(lk,K,{transform(e,t){const n=Lte(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function Lte(e){return e._signals[YO]||(e._signals[YO]=e.add(0))}function eP(e){K.call(this,null,e)}ge(eP,K,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Pte(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===xv?cv:uv;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Pte(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function tP(e){K.call(this,null,e)}const qO={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!nP(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},nP=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),VO=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(nP(i,o=e[n].bounds,t))return!0},zte=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Ite=(e,t,n)=>{var r=e.range(),i=new Jt;return t===hf||t===qa?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},XO=e=>(e.forEach(t=>t.opacity=1),e),JO=(e,t)=>e.reflow(t.modified()).modifies("opacity");ge(tP,K,{transform(e,t){const n=qO[e.method]||qO.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,s;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(XO(i),t=JO(t,e)),t;if(i=i.filter(zte),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=XO(i),t=JO(t,e),o.length>=3&&VO(o,r)){do o=n(o,r);while(o.length>=3&&VO(o,r));o.length<3&&!Ze(i).opacity&&(o.length>1&&(Ze(o).opacity=0),Ze(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=Ite(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{s(l)||(l.opacity=0)}));const a=o[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function rP(e){K.call(this,null,e)}ge(rP,K,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const In=new Jt;function Lc(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Ute(e){var t=e.items[0].orient;return t===Bi||t===Hi}function Wte(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function jte(e,t,n,r){var i=t.items[0],o=i.datum,s=i.translate!=null?i.translate:.5,a=i.orient,l=Wte(o),c=i.range,f=i.offset,h=i.position,p=i.minExtent,m=i.maxExtent,y=o.title&&i.items[l[2]].items[0],v=i.titlePadding,_=i.bounds,b=y&&HC(y),S=0,A=0,C,k;switch(In.clear().union(_),_.clear(),(C=l[0])>-1&&_.union(i.items[C].bounds),(C=l[1])>-1&&_.union(i.items[C].bounds),a){case hf:S=h||0,A=-f,k=Math.max(p,Math.min(m,-_.y1)),_.add(0,-k).add(c,0),y&&q0(e,y,k,v,b,0,-1,_);break;case Bi:S=-f,A=h||0,k=Math.max(p,Math.min(m,-_.x1)),_.add(-k,0).add(0,c),y&&q0(e,y,k,v,b,1,-1,_);break;case Hi:S=n+f,A=h||0,k=Math.max(p,Math.min(m,_.x2)),_.add(0,0).add(k,c),y&&q0(e,y,k,v,b,1,1,_);break;case qa:S=h||0,A=r+f,k=Math.max(p,Math.min(m,_.y2)),_.add(0,0).add(c,k),y&&q0(e,y,k,v,0,0,1,_);break;default:S=i.x,A=i.y}return Us(_.translate(S,A),i),Lc(i,"x",S+s)|Lc(i,"y",A+s)&&(i.bounds=In,e.dirty(i),i.bounds=_,e.dirty(i)),i.mark.bounds.clear().union(_)}function q0(e,t,n,r,i,o,s,a){const l=t.bounds;if(t.auto){const c=s*(n+i+r);let f=0,h=0;e.dirty(t),o?f=(t.x||0)-(t.x=c):h=(t.y||0)-(t.y=c),t.mark.bounds.clear().union(l.translate(-f,-h)),e.dirty(t)}a.union(l)}const QO=(e,t)=>Math.floor(Math.min(e,t)),KO=(e,t)=>Math.ceil(Math.max(e,t));function Bte(e){var t=e.items,n=t.length,r=0,i,o;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===xv)switch(i.role){case rk:case ok:case ik:break;case HL:s.rowheaders.push(...o);break;case GL:s.rowfooters.push(...o);break;case qL:s.colheaders.push(...o);break;case VL:s.colfooters.push(...o);break;case YL:s.rowtitle=o[0];break;case XL:s.coltitle=o[0];break;default:s.marks.push(...o)}return s}function Hte(e){return new Jt().set(0,0,e.width||0,e.height||0)}function Gte(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function kt(e,t,n){const r=ve(e)?e[t]:e;return r??(n!==void 0?n:0)}function ZO(e){return e<0?Math.ceil(-e):0}function iP(e,t,n){var r=!n.nodirty,i=n.bounds===ak?Hte:Gte,o=In.set(0,0,0,0),s=kt(n.align,$a),a=kt(n.align,Ma),l=kt(n.padding,$a),c=kt(n.padding,Ma),f=n.columns||t.length,h=f<=0?1:Math.ceil(t.length/f),p=t.length,m=Array(p),y=Array(f),v=0,_=Array(p),b=Array(h),S=0,A=Array(p),C=Array(p),k=Array(p),N,$,O,D,P,R,X,B,I,F,W;for($=0;$<f;++$)y[$]=0;for($=0;$<h;++$)b[$]=0;for($=0;$<p;++$)R=t[$],P=k[$]=i(R),R.x=R.x||0,A[$]=0,R.y=R.y||0,C[$]=0,O=$%f,D=~~($/f),v=Math.max(v,X=Math.ceil(P.x2)),S=Math.max(S,B=Math.ceil(P.y2)),y[O]=Math.max(y[O],X),b[D]=Math.max(b[D],B),m[$]=l+ZO(P.x1),_[$]=c+ZO(P.y1),r&&e.dirty(t[$]);for($=0;$<p;++$)$%f===0&&(m[$]=0),$<f&&(_[$]=0);if(s===iS)for(O=1;O<f;++O){for(W=0,$=O;$<p;$+=f)W<m[$]&&(W=m[$]);for($=O;$<p;$+=f)m[$]=W+y[O-1]}else if(s===G0){for(W=0,$=0;$<p;++$)$%f&&W<m[$]&&(W=m[$]);for($=0;$<p;++$)$%f&&(m[$]=W+v)}else for(s=!1,O=1;O<f;++O)for($=O;$<p;$+=f)m[$]+=y[O-1];if(a===iS)for(D=1;D<h;++D){for(W=0,$=D*f,N=$+f;$<N;++$)W<_[$]&&(W=_[$]);for($=D*f;$<N;++$)_[$]=W+b[D-1]}else if(a===G0){for(W=0,$=f;$<p;++$)W<_[$]&&(W=_[$]);for($=f;$<p;++$)_[$]=W+S}else for(a=!1,D=1;D<h;++D)for($=D*f,N=$+f;$<N;++$)_[$]+=b[D-1];for(I=0,$=0;$<p;++$)I=m[$]+($%f?I:0),A[$]+=I-t[$].x;for(O=0;O<f;++O)for(F=0,$=O;$<p;$+=f)F+=_[$],C[$]+=F-t[$].y;if(s&&kt(n.center,$a)&&h>1)for($=0;$<p;++$)P=s===G0?v:y[$%f],I=P-k[$].x2-t[$].x-A[$],I>0&&(A[$]+=I/2);if(a&&kt(n.center,Ma)&&f!==1)for($=0;$<p;++$)P=a===G0?S:b[~~($/f)],F=P-k[$].y2-t[$].y-C[$],F>0&&(C[$]+=F/2);for($=0;$<p;++$)o.union(k[$].translate(A[$],C[$]));switch(I=kt(n.anchor,Mte),F=kt(n.anchor,Nte),kt(n.anchor,$a)){case tr:I-=o.width();break;case rS:I-=o.width()/2}switch(kt(n.anchor,Ma)){case tr:F-=o.height();break;case rS:F-=o.height()/2}for(I=Math.round(I),F=Math.round(F),o.clear(),$=0;$<p;++$)t[$].mark.bounds.clear();for($=0;$<p;++$)R=t[$],R.x+=A[$]+=I,R.y+=C[$]+=F,o.union(R.mark.bounds.union(R.bounds.translate(A[$],C[$]))),r&&e.dirty(R);return o}function Yte(e,t,n){var r=Bte(t),i=r.marks,o=n.bounds===ak?qte:Vte,s=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),c=l*a,f,h,p,m,y,v,_;const b=iP(e,i,n);b.empty()&&b.set(0,0,0,0),r.rowheaders&&(v=kt(n.headerBand,Ma,null),f=V0(e,r.rowheaders,i,a,l,-kt(s,"rowHeader"),QO,0,o,"x1",0,a,1,v)),r.colheaders&&(v=kt(n.headerBand,$a,null),h=V0(e,r.colheaders,i,a,a,-kt(s,"columnHeader"),QO,1,o,"y1",0,1,a,v)),r.rowfooters&&(v=kt(n.footerBand,Ma,null),p=V0(e,r.rowfooters,i,a,l,kt(s,"rowFooter"),KO,0,o,"x2",a-1,a,1,v)),r.colfooters&&(v=kt(n.footerBand,$a,null),m=V0(e,r.colfooters,i,a,a,kt(s,"columnFooter"),KO,1,o,"y2",c-a,1,a,v)),r.rowtitle&&(y=kt(n.titleAnchor,Ma),_=kt(s,"rowTitle"),_=y===tr?p+_:f-_,v=kt(n.titleBand,Ma,.5),eD(e,r.rowtitle,_,0,b,v)),r.coltitle&&(y=kt(n.titleAnchor,$a),_=kt(s,"columnTitle"),_=y===tr?m+_:h-_,v=kt(n.titleBand,$a,.5),eD(e,r.coltitle,_,1,b,v))}function qte(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Vte(e,t){return e.bounds[t]}function V0(e,t,n,r,i,o,s,a,l,c,f,h,p,m){var y=n.length,v=0,_=0,b,S,A,C,k,N,$,O,D;if(!y)return v;for(b=f;b<y;b+=h)n[b]&&(v=s(v,l(n[b],c)));if(!t.length)return v;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),v+=o,S=0,C=t.length;S<C;++S)e.dirty(t[S]),t[S].mark.bounds.clear();for(b=f,S=0,C=t.length;S<C;++S,b+=h){for(N=t[S],k=N.mark.bounds,A=b;A>=0&&($=n[A])==null;A-=p);a?(O=m==null?$.x:Math.round($.bounds.x1+m*$.bounds.width()),D=v):(O=v,D=m==null?$.y:Math.round($.bounds.y1+m*$.bounds.height())),k.union(N.bounds.translate(O-(N.x||0),D-(N.y||0))),N.x=O,N.y=D,e.dirty(N),_=s(_,k[c])}return _}function eD(e,t,n,r,i,o){if(t){e.dirty(t);var s=n,a=n;r?s=Math.round(i.x1+o*i.width()):a=Math.round(i.y1+o*i.height()),t.bounds.translate(s-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=a,e.dirty(t)}}function Xte(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Jte(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Qte(e,t,n,r,i,o,s){const a=Xte(n,t),l=Jte(e,a("offset",0)),c=a("anchor",nk),f=c===tr?1:c===rS?.5:0,h={align:iS,bounds:a("bounds",ak),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Bi:h.anchor={x:Math.floor(r.x1)-l,column:tr,y:f*(s||r.height()+2*r.y1),row:c};break;case Hi:h.anchor={x:Math.ceil(r.x2)+l,y:f*(s||r.height()+2*r.y1),row:c};break;case hf:h.anchor={y:Math.floor(i.y1)-l,row:tr,x:f*(o||i.width()+2*i.x1),column:c};break;case qa:h.anchor={y:Math.ceil(i.y2)+l,x:f*(o||i.width()+2*i.x1),column:c};break;case Ate:h.anchor={x:l,y:l};break;case Cte:h.anchor={x:o-l,y:l,column:tr};break;case kte:h.anchor={x:l,y:s-l,row:tr};break;case $te:h.anchor={x:o-l,y:s-l,column:tr,row:tr};break}return h}function Kte(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,s=n.x,a=n.y,l,c;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),ene(e,n,n.items[0].items[0]),o=Zte(n,o),l=2*n.padding,c=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),c=Math.ceil(o.height()+c)),r.type===Tte&&tne(n.items[0].items[0].items[0].items),i!==sk&&(n.x=s=0,n.y=a=0),n.width=l,n.height=c,Us(o.set(s,a,s+l,a+c),n),n.mark.bounds.clear().union(o),n}function Zte(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function ene(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&sh(e,n,i,o);else{var s=t.items[1].items[0],a=s.anchor,l=t.titlePadding||0,c=r-s.x,f=r-s.y;switch(s.orient){case Bi:i+=Math.ceil(s.bounds.width())+l;break;case Hi:case qa:break;default:o+=s.bounds.height()+l}switch((i||o)&&sh(e,n,i,o),s.orient){case Bi:f+=wc(t,n,s,a,1,1);break;case Hi:c+=wc(t,n,s,tr,0,0)+l,f+=wc(t,n,s,a,1,1);break;case qa:c+=wc(t,n,s,a,0,0),f+=wc(t,n,s,tr,-1,0,1)+l;break;default:c+=wc(t,n,s,a,0,0)}(c||f)&&sh(e,s,c,f),(c=Math.round(s.bounds.x1-r))<0&&(sh(e,n,-c,0),sh(e,s,-c,0))}}function wc(e,t,n,r,i,o,s){const a=e.datum.type!=="symbol",l=n.datum.vgrad,c=a&&(o||!l)&&!s?t.items[0]:t,f=c.bounds[i?"y2":"x2"]-e.padding,h=l&&o?f:0,p=l&&o?0:f,m=i<=0?0:HC(n);return Math.round(r===nk?h:r===tr?p-m:.5*(f-m))}function sh(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function tne(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function nne(e,t,n,r,i){var o=t.items[0],s=o.frame,a=o.orient,l=o.anchor,c=o.offset,f=o.padding,h=o.items[0].items[0],p=o.items[1]&&o.items[1].items[0],m=a===Bi||a===Hi?r:n,y=0,v=0,_=0,b=0,S=0,A;if(s!==xv?a===Bi?(y=i.y2,m=i.y1):a===Hi?(y=i.y1,m=i.y2):(y=i.x1,m=i.x2):a===Bi&&(y=r,m=0),A=l===nk?y:l===tr?m:(y+m)/2,p&&p.text){switch(a){case hf:case qa:S=h.bounds.height()+f;break;case Bi:b=h.bounds.width()+f;break;case Hi:b=-h.bounds.width()-f;break}In.clear().union(p.bounds),In.translate(b-(p.x||0),S-(p.y||0)),Lc(p,"x",b)|Lc(p,"y",S)&&(e.dirty(p),p.bounds.clear().union(In),p.mark.bounds.clear().union(In),e.dirty(p)),In.clear().union(p.bounds)}else In.clear();switch(In.union(h.bounds),a){case hf:v=A,_=i.y1-In.height()-c;break;case Bi:v=i.x1-In.width()-c,_=A;break;case Hi:v=i.x2+In.width()+c,_=A;break;case qa:v=A,_=i.y2+c;break;default:v=o.x,_=o.y}return Lc(o,"x",v)|Lc(o,"y",_)&&(In.translate(v,_),e.dirty(o),o.bounds.clear().union(In),t.bounds.clear().union(In),e.dirty(o)),o.bounds}function oP(e){K.call(this,null,e)}ge(oP,K,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Yte(n,r,e.layout),ine(n,r,e)}),rne(e.mark.group)?t.reflow():t}});function rne(e){return e&&e.mark.role!=="legend-entry"}function ine(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),s=new Jt().set(0,0,i,o),a=s.clone(),l=s.clone(),c=[],f,h,p,m,y,v;for(y=0,v=r.length;y<v;++y)switch(h=r[y],h.role){case rk:m=Ute(h)?a:l,m.union(jte(e,h,i,o));break;case ik:f=h;break;case ok:c.push(Kte(e,h));break;case Ote:case Dte:case HL:case GL:case YL:case qL:case VL:case XL:a.union(h.bounds),l.union(h.bounds);break;default:s.union(h.bounds)}if(c.length){const _={};c.forEach(b=>{p=b.orient||Hi,p!==sk&&(_[p]||(_[p]=[])).push(b)});for(const b in _){const S=_[b];iP(e,S,Qte(S,b,n.legends,a,l,i,o))}c.forEach(b=>{const S=b.bounds;if(S.equals(b._bounds)||(b.bounds=b._bounds,e.dirty(b),b.bounds=S,e.dirty(b)),n.autosize&&(n.autosize.type===JL||n.autosize.type===QL||n.autosize.type===KL))switch(b.orient){case Bi:case Hi:s.add(S.x1,0).add(S.x2,0);break;case hf:case qa:s.add(0,S.y1).add(0,S.y2)}else s.union(S)})}s.union(a).union(l),f&&s.union(nne(e,f,i,o,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),one(e,t,s,n)}function one(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let s=e._width,a=e._height,l=Math.max(0,t.width||0),c=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-l)),m=Math.max(0,Math.ceil(n.y2-f));if(i.contains===Fte){const y=e.padding();s-=y.left+y.right,a-=y.top+y.bottom}o===sk?(c=0,h=0,l=s,f=a):o===JL?(l=Math.max(0,s-c-p),f=Math.max(0,a-h-m)):o===QL?(l=Math.max(0,s-c-p),a=f+h+m):o===KL?(s=l+c+p,f=Math.max(0,a-h-m)):o===Rte&&(s=l+c+p,a=f+h+m),e._resizeView(s,a,l,f,[c,h],i.resize)}const sne=Object.freeze(Object.defineProperty({__proto__:null,bound:ZL,identifier:lk,mark:eP,overlap:tP,render:rP,viewlayout:oP},Symbol.toStringTag,{value:"Module"}));function sP(e){K.call(this,null,e)}ge(sP,K,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,a=CC(o,s,e.minstep),l=e.format||TR(n,o,a,e.formatSpecifier,e.formatType,!!e.values),c=e.values?FR(o,e.values,a):kC(o,a);return i&&(r.rem=i),i=c.map((f,h)=>ut({index:h/(c.length-1||1),value:f,label:l(f)})),e.extra&&i.length&&i.push(ut({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function aP(e){K.call(this,null,e)}function ane(){return ut({})}function lne(e){const t=If().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ge(aP,K,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||ane,o=e.key||De,s=this.value;return ne(r.encode)&&(r.encode=null),s&&(e.modified("key")||t.modified(o))&&Z("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=lne(o)),t.visit(t.ADD,a=>{const l=o(a);let c=s.get(l);c?c.exit?(s.empty--,r.add.push(c)):r.mod.push(c):(c=i(a),s.set(l,c),r.add.push(c)),c.datum=a,c.exit=!1}),t.visit(t.MOD,a=>{const l=o(a),c=s.get(l);c&&(c.datum=a,r.mod.push(c))}),t.visit(t.REM,a=>{const l=o(a),c=s.get(l);a===c.datum&&!c.exit&&(r.rem.push(c),c.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),r}});function lP(e){K.call(this,null,e)}ge(lP,K,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(ne(o))if(n.changed()||o.every(h=>i[h]))o=o[0],n.encode=null;else return t.StopPropagation;var s=o==="enter",a=i.update||ga,l=i.enter||ga,c=i.exit||ga,f=(o&&!s?i[o]:a)||ga;if(t.changed(t.ADD)&&(t.visit(t.ADD,h=>{l(h,e),a(h,e)}),n.modifies(l.output),n.modifies(a.output),f!==ga&&f!==a&&(t.visit(t.ADD,h=>{f(h,e)}),n.modifies(f.output))),t.changed(t.REM)&&c!==ga&&(t.visit(t.REM,h=>{c(h,e)}),n.modifies(c.output)),s||f!==ga){const h=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(h,p=>{const m=l(p,e)||r;(f(p,e)||m)&&n.mod.push(p)}),n.mod.length&&n.modifies(l.output)):t.visit(h,p=>{(f(p,e)||r)&&n.mod.push(p)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:t.StopPropagation}});function uP(e){K.call(this,[],e)}ge(uP,K,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||Am,s=e.scale,a=+e.limit,l=CC(s,e.count==null?5:e.count,e.minstep),c=!!e.values||o===Am,f=e.format||zR(n,s,l,o,e.formatSpecifier,e.formatType,c),h=e.values||PR(s,l),p,m,y,v,_;return i&&(r.rem=i),o===Am?(a&&h.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=h.slice(0,a-1),_=!0):i=h,He(y=e.size)?(!e.values&&s(i[0])===0&&(i=i.slice(1)),v=i.reduce((b,S)=>Math.max(b,y(S,e)),0)):y=Xn(v=y||8),i=i.map((b,S)=>ut({index:S,label:f(b,S,i),value:b,offset:v,size:y(b,e)})),_&&(_=h[i.length],i.push(ut({index:i.length,label:`${h.length-i.length} entries`,value:_,offset:v,size:y(_,e)})))):o===TK?(p=s.domain(),m=NR(s,p[0],Ze(p)),h.length<3&&!e.values&&p[0]!==Ze(p)&&(h=[p[0],Ze(p)]),i=h.map((b,S)=>ut({index:S,label:f(b,S,h),value:b,perc:m(b)}))):(y=h.length-1,m=GK(s),i=h.map((b,S)=>ut({index:S,label:f(b,S,h),value:b,perc:S?m(b):0,perc2:S===y?1:m(h[S+1])}))),r.source=i,r.add=i,this.value=i,r}});const une=e=>e.source.x,cne=e=>e.source.y,fne=e=>e.target.x,dne=e=>e.target.y;function uk(e){K.call(this,{},e)}uk.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ge(uk,K,{transform(e,t){var n=e.sourceX||une,r=e.sourceY||cne,i=e.targetX||fne,o=e.targetY||dne,s=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",c=tD.get(l+"-"+a)||tD.get(l);return c||Z("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,f=>{f[s]=c(n(f),r(f),i(f),o(f))}),t.reflow(e.modified()).modifies(s)}});const cP=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,hne=(e,t,n,r)=>cP(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),fP=(e,t,n,r)=>{var i=n-e,o=r-t,s=Math.hypot(i,o)/2,a=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+a+" 0 1 "+n+","+r},pne=(e,t,n,r)=>fP(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),dP=(e,t,n,r)=>{const i=n-e,o=r-t,s=.2*(i+o),a=.2*(o-i);return"M"+e+","+t+"C"+(e+s)+","+(t+a)+" "+(n+a)+","+(r-s)+" "+n+","+r},gne=(e,t,n,r)=>dP(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),mne=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,yne=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,vne=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*a+"L"+r*s+","+r*a},xne=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},_ne=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},bne=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),s=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*o+"C"+l*i+","+l*o+" "+l*s+","+l*a+" "+r*s+","+r*a},tD=If({line:cP,"line-radial":hne,arc:fP,"arc-radial":pne,curve:dP,"curve-radial":gne,"orthogonal-horizontal":mne,"orthogonal-vertical":yne,"orthogonal-radial":vne,"diagonal-horizontal":xne,"diagonal-vertical":_ne,"diagonal-radial":bne});function ck(e){K.call(this,null,e)}ck.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ge(ck,K,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||Rf,s=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,c=l.map(o),f=c.length,h=s,p=(a-s)/kF(c),m=Hr(f),y,v,_;for(e.sort&&m.sort((b,S)=>c[b]-c[S]),y=0;y<f;++y)_=c[m[y]],v=l[m[y]],v[r]=h,v[i]=h+=_*p;return this.value=c,t.reflow(e.modified()).modifies(n)}});const wne=5;function Sne(e){const t=e.type;return!e.bins&&(t===af||t===jp||t===Bp)}function hP(e){return SC(e)&&e!==Oo}const Ene=Ji(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function pP(e){K.call(this,null,e),this.modified(!0)}ge(pP,K,{transform(e,t){var n=t.dataflow,r=this.value,i=Ane(e);(!r||i!==r.type)&&(this.value=r=lt(i)());for(i in e)if(!Ene[i]){if(i==="padding"&&hP(r.type))continue;He(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return One(r,e,Nne(r,e,kne(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Ane(e){var t=e.type,n="",r;return t===Oo?Oo+"-"+af:(Cne(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Oo+"-":r===3?qf+"-":""),(n+t||af).toLowerCase())}function Cne(e){const t=e.type;return SC(t)&&t!==cu&&t!==fu&&(e.scheme||e.range&&e.range.length&&e.range.every(xe))}function kne(e,t,n){const r=$ne(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,s=t.zero||t.zero===void 0&&Sne(e),a,l;if(!i)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,s&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const c=l>i[a]?a+1:l<i[0]?0:a;c!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(c,0,l)}return hP(o)&&t.padding&&i[0]!==Ze(i)&&(i=Mne(o,i,t.range,t.padding,t.exponent,t.constant)),e.domain(gP(o,i,n)),o===xC&&e.unknown(t.domainImplicit?Pw:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&CC(e,t.nice)||null),i.length}function $ne(e,t,n){return t?(e.domain(gP(e.type,t,n)),t.length):-1}function Mne(e,t,n,r,i,o){var s=Math.abs(Ze(n)-n[0]),a=s/(s-2*r),l=e===Rs?UE(t,null,a):e===Bp?Xm(t,null,a,.5):e===jp?Xm(t,null,a,i||1):e===iv?WE(t,null,a,o||1):IE(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function gP(e,t,n){if(AR(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+he(t))}return t}function Nne(e,t,n){let r=t.bins;if(r&&!ne(r)){const i=e.domain(),o=i[0],s=Ze(i),a=r.step;let l=r.start==null?o:r.start,c=r.stop==null?s:r.stop;a||Z("Scale bins parameter missing step property."),l<o&&(l=a*Math.ceil(o/a)),c>s&&(c=a*Math.floor(s/a)),r=Hr(l,c+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===_C&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function One(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=Dne(r,t,n);else if(t.scheme&&(o=Fne(r,t,n),He(o))){if(e.interpolator)return e.interpolator(o);Z(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&CR(r))return e.interpolator(av(oS(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(EC(t.interpolate,t.interpolateGamma)):He(e.round)?e.round(i):He(e.rangeRound)&&e.interpolate(i?Up:rl),o&&e.range(oS(o,t.reverse))}function Dne(e,t,n){e!==xR&&e!==Hw&&Z("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===Hw?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*vC(n,i,r)]}function Fne(e,t,n){var r=t.schemeExtent,i,o;return ne(t.scheme)?o=av(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=AC(i),o||Z(`Unrecognized scheme name: ${t.scheme}`)),n=e===sv?n+1:e===_C?n-1:e===lf||e===ov?+t.schemeCount||wne:n,CR(e)?nD(o,r,t.reverse):He(o)?MR(nD(o,r),n):e===xC?o:o.slice(0,n)}function nD(e,t,n){return He(e)&&(t||n)?$R(e,oS(t||[0,1],n)):e}function oS(e,t){return t?e.slice().reverse():e}function mP(e){K.call(this,null,e)}ge(mP,K,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Du(e.sort)),this.modified(n),t}});const rD="zero",yP="center",vP="normalize",xP=["y0","y1"];function fk(e){K.call(this,null,e)}fk.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:rD,values:[rD,yP,vP]},{name:"as",type:"string",array:!0,length:2,default:xP}]};ge(fk,K,{transform(e,t){var n=e.as||xP,r=n[0],i=n[1],o=Du(e.sort),s=e.field||Rf,a=e.offset===yP?Tne:e.offset===vP?Rne:Lne,l,c,f,h;for(l=Pne(t.source,e.groupby,o,s),c=0,f=l.length,h=l.max;c<f;++c)a(l[c],h,s,r,i);return t.reflow(e.modified()).modifies(n)}});function Tne(e,t,n,r,i){for(var o=(t-e.sum)/2,s=e.length,a=0,l;a<s;++a)l=e[a],l[r]=o,l[i]=o+=Math.abs(n(l))}function Rne(e,t,n,r,i){for(var o=1/e.sum,s=0,a=e.length,l=0,c=0,f;l<a;++l)f=e[l],f[r]=s,f[i]=s=o*(c+=Math.abs(n(f)))}function Lne(e,t,n,r,i){for(var o=0,s=0,a=e.length,l=0,c,f;l<a;++l)f=e[l],c=+n(f),c<0?(f[r]=s,f[i]=s+=c):(f[r]=o,f[i]=o+=c)}function Pne(e,t,n,r){var i=[],o=v=>v(f),s,a,l,c,f,h,p,m,y;if(t==null)i.push(e.slice());else for(s={},a=0,l=e.length;a<l;++a)f=e[a],h=t.map(o),p=s[h],p||(s[h]=p=[],i.push(p)),p.push(f);for(h=0,y=0,c=i.length;h<c;++h){for(p=i[h],a=0,m=0,l=p.length;a<l;++a)m+=Math.abs(r(p[a]));p.sum=m,m>y&&(y=m),n&&p.sort(n)}return i.max=y,i}const zne=Object.freeze(Object.defineProperty({__proto__:null,axisticks:sP,datajoin:aP,encode:lP,legendentries:uP,linkpath:uk,pie:ck,scale:pP,sortitems:mP,stack:fk},Symbol.toStringTag,{value:"Module"}));var Re=1e-6,C1=1e-12,Xe=Math.PI,It=Xe/2,k1=Xe/4,cr=Xe*2,Ht=180/Xe,Ye=Xe/180,Ke=Math.abs,Xf=Math.atan,wi=Math.atan2,Le=Math.cos,X0=Math.ceil,_P=Math.exp,sS=Math.hypot,$1=Math.log,ib=Math.pow,Fe=Math.sin,di=Math.sign||function(e){return e>0?1:e<0?-1:0},fr=Math.sqrt,dk=Math.tan;function bP(e){return e>1?0:e<-1?Xe:Math.acos(e)}function Mr(e){return e>1?It:e<-1?-It:Math.asin(e)}function kn(){}function M1(e,t){e&&oD.hasOwnProperty(e.type)&&oD[e.type](e,t)}var iD={Feature:function(e,t){M1(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)M1(n[r].geometry,t)}},oD={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){aS(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)aS(n[r],t,0)},Polygon:function(e,t){sD(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)sD(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)M1(n[r],t)}};function aS(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function sD(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)aS(e[n],t,1);t.polygonEnd()}function vs(e,t){e&&iD.hasOwnProperty(e.type)?iD[e.type](e,t):M1(e,t)}var N1=new lr,O1=new lr,wP,SP,lS,uS,cS,Io={point:kn,lineStart:kn,lineEnd:kn,polygonStart:function(){N1=new lr,Io.lineStart=Ine,Io.lineEnd=Une},polygonEnd:function(){var e=+N1;O1.add(e<0?cr+e:e),this.lineStart=this.lineEnd=this.point=kn},sphere:function(){O1.add(cr)}};function Ine(){Io.point=Wne}function Une(){EP(wP,SP)}function Wne(e,t){Io.point=EP,wP=e,SP=t,e*=Ye,t*=Ye,lS=e,uS=Le(t=t/2+k1),cS=Fe(t)}function EP(e,t){e*=Ye,t*=Ye,t=t/2+k1;var n=e-lS,r=n>=0?1:-1,i=r*n,o=Le(t),s=Fe(t),a=cS*s,l=uS*o+a*Le(i),c=a*r*Fe(i);N1.add(wi(c,l)),lS=e,uS=o,cS=s}function jne(e){return O1=new lr,vs(e,Io),O1*2}function D1(e){return[wi(e[1],e[0]),Mr(e[2])]}function hu(e){var t=e[0],n=e[1],r=Le(n);return[r*Le(t),r*Fe(t),Fe(n)]}function J0(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function pf(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function ob(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Q0(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function F1(e){var t=fr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Dt,Sr,Pt,jr,Wl,AP,CP,Hc,Yh,_a,Ls,ms={point:fS,lineStart:aD,lineEnd:lD,polygonStart:function(){ms.point=$P,ms.lineStart=Bne,ms.lineEnd=Hne,Yh=new lr,Io.polygonStart()},polygonEnd:function(){Io.polygonEnd(),ms.point=fS,ms.lineStart=aD,ms.lineEnd=lD,N1<0?(Dt=-(Pt=180),Sr=-(jr=90)):Yh>Re?jr=90:Yh<-Re&&(Sr=-90),Ls[0]=Dt,Ls[1]=Pt},sphere:function(){Dt=-(Pt=180),Sr=-(jr=90)}};function fS(e,t){_a.push(Ls=[Dt=e,Pt=e]),t<Sr&&(Sr=t),t>jr&&(jr=t)}function kP(e,t){var n=hu([e*Ye,t*Ye]);if(Hc){var r=pf(Hc,n),i=[r[1],-r[0],0],o=pf(i,r);F1(o),o=D1(o);var s=e-Wl,a=s>0?1:-1,l=o[0]*Ht*a,c,f=Ke(s)>180;f^(a*Wl<l&&l<a*e)?(c=o[1]*Ht,c>jr&&(jr=c)):(l=(l+360)%360-180,f^(a*Wl<l&&l<a*e)?(c=-o[1]*Ht,c<Sr&&(Sr=c)):(t<Sr&&(Sr=t),t>jr&&(jr=t))),f?e<Wl?Wr(Dt,e)>Wr(Dt,Pt)&&(Pt=e):Wr(e,Pt)>Wr(Dt,Pt)&&(Dt=e):Pt>=Dt?(e<Dt&&(Dt=e),e>Pt&&(Pt=e)):e>Wl?Wr(Dt,e)>Wr(Dt,Pt)&&(Pt=e):Wr(e,Pt)>Wr(Dt,Pt)&&(Dt=e)}else _a.push(Ls=[Dt=e,Pt=e]);t<Sr&&(Sr=t),t>jr&&(jr=t),Hc=n,Wl=e}function aD(){ms.point=kP}function lD(){Ls[0]=Dt,Ls[1]=Pt,ms.point=fS,Hc=null}function $P(e,t){if(Hc){var n=e-Wl;Yh.add(Ke(n)>180?n+(n>0?360:-360):n)}else AP=e,CP=t;Io.point(e,t),kP(e,t)}function Bne(){Io.lineStart()}function Hne(){$P(AP,CP),Io.lineEnd(),Ke(Yh)>Re&&(Dt=-(Pt=180)),Ls[0]=Dt,Ls[1]=Pt,Hc=null}function Wr(e,t){return(t-=e)<0?t+360:t}function Gne(e,t){return e[0]-t[0]}function uD(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Yne(e){var t,n,r,i,o,s,a;if(jr=Pt=-(Dt=Sr=1/0),_a=[],vs(e,ms),n=_a.length){for(_a.sort(Gne),t=1,r=_a[0],o=[r];t<n;++t)i=_a[t],uD(r,i[0])||uD(r,i[1])?(Wr(r[0],i[1])>Wr(r[0],r[1])&&(r[1]=i[1]),Wr(i[0],r[1])>Wr(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(s=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(a=Wr(r[1],i[0]))>s&&(s=a,Dt=i[0],Pt=r[1])}return _a=Ls=null,Dt===1/0||Sr===1/0?[[NaN,NaN],[NaN,NaN]]:[[Dt,Sr],[Pt,jr]]}var Mh,T1,R1,L1,P1,z1,I1,U1,dS,hS,pS,MP,NP,nr,rr,ir,Gi={sphere:kn,point:hk,lineStart:cD,lineEnd:fD,polygonStart:function(){Gi.lineStart=Xne,Gi.lineEnd=Jne},polygonEnd:function(){Gi.lineStart=cD,Gi.lineEnd=fD}};function hk(e,t){e*=Ye,t*=Ye;var n=Le(t);tg(n*Le(e),n*Fe(e),Fe(t))}function tg(e,t,n){++Mh,R1+=(e-R1)/Mh,L1+=(t-L1)/Mh,P1+=(n-P1)/Mh}function cD(){Gi.point=qne}function qne(e,t){e*=Ye,t*=Ye;var n=Le(t);nr=n*Le(e),rr=n*Fe(e),ir=Fe(t),Gi.point=Vne,tg(nr,rr,ir)}function Vne(e,t){e*=Ye,t*=Ye;var n=Le(t),r=n*Le(e),i=n*Fe(e),o=Fe(t),s=wi(fr((s=rr*o-ir*i)*s+(s=ir*r-nr*o)*s+(s=nr*i-rr*r)*s),nr*r+rr*i+ir*o);T1+=s,z1+=s*(nr+(nr=r)),I1+=s*(rr+(rr=i)),U1+=s*(ir+(ir=o)),tg(nr,rr,ir)}function fD(){Gi.point=hk}function Xne(){Gi.point=Qne}function Jne(){OP(MP,NP),Gi.point=hk}function Qne(e,t){MP=e,NP=t,e*=Ye,t*=Ye,Gi.point=OP;var n=Le(t);nr=n*Le(e),rr=n*Fe(e),ir=Fe(t),tg(nr,rr,ir)}function OP(e,t){e*=Ye,t*=Ye;var n=Le(t),r=n*Le(e),i=n*Fe(e),o=Fe(t),s=rr*o-ir*i,a=ir*r-nr*o,l=nr*i-rr*r,c=sS(s,a,l),f=Mr(c),h=c&&-f/c;dS.add(h*s),hS.add(h*a),pS.add(h*l),T1+=f,z1+=f*(nr+(nr=r)),I1+=f*(rr+(rr=i)),U1+=f*(ir+(ir=o)),tg(nr,rr,ir)}function Kne(e){Mh=T1=R1=L1=P1=z1=I1=U1=0,dS=new lr,hS=new lr,pS=new lr,vs(e,Gi);var t=+dS,n=+hS,r=+pS,i=sS(t,n,r);return i<C1&&(t=z1,n=I1,r=U1,T1<Re&&(t=R1,n=L1,r=P1),i=sS(t,n,r),i<C1)?[NaN,NaN]:[wi(n,t)*Ht,Mr(r/i)*Ht]}function gS(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function mS(e,t){return Ke(e)>Xe&&(e-=Math.round(e/cr)*cr),[e,t]}mS.invert=mS;function DP(e,t,n){return(e%=cr)?t||n?gS(hD(e),pD(t,n)):hD(e):t||n?pD(t,n):mS}function dD(e){return function(t,n){return t+=e,Ke(t)>Xe&&(t-=Math.round(t/cr)*cr),[t,n]}}function hD(e){var t=dD(e);return t.invert=dD(-e),t}function pD(e,t){var n=Le(e),r=Fe(e),i=Le(t),o=Fe(t);function s(a,l){var c=Le(l),f=Le(a)*c,h=Fe(a)*c,p=Fe(l),m=p*n+f*r;return[wi(h*i-m*o,f*n-p*r),Mr(m*i+h*o)]}return s.invert=function(a,l){var c=Le(l),f=Le(a)*c,h=Fe(a)*c,p=Fe(l),m=p*i-h*o;return[wi(h*i+p*o,f*n+m*r),Mr(m*n-f*r)]},s}function Zne(e){e=DP(e[0]*Ye,e[1]*Ye,e.length>2?e[2]*Ye:0);function t(n){return n=e(n[0]*Ye,n[1]*Ye),n[0]*=Ht,n[1]*=Ht,n}return t.invert=function(n){return n=e.invert(n[0]*Ye,n[1]*Ye),n[0]*=Ht,n[1]*=Ht,n},t}function ere(e,t,n,r,i,o){if(n){var s=Le(t),a=Fe(t),l=r*n;i==null?(i=t+r*cr,o=t-l/2):(i=gD(s,i),o=gD(s,o),(r>0?i<o:i>o)&&(i+=r*cr));for(var c,f=i;r>0?f>o:f<o;f-=l)c=D1([s,-a*Le(f),-a*Fe(f)]),e.point(c[0],c[1])}}function gD(e,t){t=hu(t),t[0]-=e,F1(t);var n=bP(-t[1]);return((-t[2]<0?-n:n)+cr-Re)%cr}function FP(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:kn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Tm(e,t){return Ke(e[0]-t[0])<Re&&Ke(e[1]-t[1])<Re}function K0(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function TP(e,t,n,r,i){var o=[],s=[],a,l;if(e.forEach(function(y){if(!((v=y.length-1)<=0)){var v,_=y[0],b=y[v],S;if(Tm(_,b)){if(!_[2]&&!b[2]){for(i.lineStart(),a=0;a<v;++a)i.point((_=y[a])[0],_[1]);i.lineEnd();return}b[0]+=2*Re}o.push(S=new K0(_,y,null,!0)),s.push(S.o=new K0(_,null,S,!1)),o.push(S=new K0(b,y,null,!1)),s.push(S.o=new K0(b,null,S,!0))}}),!!o.length){for(s.sort(t),mD(o),mD(s),a=0,l=s.length;a<l;++a)s[a].e=n=!n;for(var c=o[0],f,h;;){for(var p=c,m=!0;p.v;)if((p=p.n)===c)return;f=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(m)for(a=0,l=f.length;a<l;++a)i.point((h=f[a])[0],h[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(m)for(f=p.p.z,a=f.length-1;a>=0;--a)i.point((h=f[a])[0],h[1]);else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,f=p.z,m=!m}while(!p.v);i.lineEnd()}}}function mD(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function sb(e){return Ke(e[0])<=Xe?e[0]:di(e[0])*((Ke(e[0])+Xe)%cr-Xe)}function tre(e,t){var n=sb(t),r=t[1],i=Fe(r),o=[Fe(n),-Le(n),0],s=0,a=0,l=new lr;i===1?r=It+Re:i===-1&&(r=-It-Re);for(var c=0,f=e.length;c<f;++c)if(p=(h=e[c]).length)for(var h,p,m=h[p-1],y=sb(m),v=m[1]/2+k1,_=Fe(v),b=Le(v),S=0;S<p;++S,y=C,_=N,b=$,m=A){var A=h[S],C=sb(A),k=A[1]/2+k1,N=Fe(k),$=Le(k),O=C-y,D=O>=0?1:-1,P=D*O,R=P>Xe,X=_*N;if(l.add(wi(X*D*Fe(P),b*$+X*Le(P))),s+=R?O+D*cr:O,R^y>=n^C>=n){var B=pf(hu(m),hu(A));F1(B);var I=pf(o,B);F1(I);var F=(R^O>=0?-1:1)*Mr(I[2]);(r>F||r===F&&(B[0]||B[1]))&&(a+=R^O>=0?1:-1)}}return(s<-Re||s<Re&&l<-C1)^a&1}function RP(e,t,n,r){return function(i){var o=t(i),s=FP(),a=t(s),l=!1,c,f,h,p={point:m,lineStart:v,lineEnd:_,polygonStart:function(){p.point=b,p.lineStart=S,p.lineEnd=A,f=[],c=[]},polygonEnd:function(){p.point=m,p.lineStart=v,p.lineEnd=_,f=CF(f);var C=tre(c,r);f.length?(l||(i.polygonStart(),l=!0),TP(f,rre,C,n,i)):C&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),f=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function m(C,k){e(C,k)&&i.point(C,k)}function y(C,k){o.point(C,k)}function v(){p.point=y,o.lineStart()}function _(){p.point=m,o.lineEnd()}function b(C,k){h.push([C,k]),a.point(C,k)}function S(){a.lineStart(),h=[]}function A(){b(h[0][0],h[0][1]),a.lineEnd();var C=a.clean(),k=s.result(),N,$=k.length,O,D,P;if(h.pop(),c.push(h),h=null,!!$){if(C&1){if(D=k[0],(O=D.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),N=0;N<O;++N)i.point((P=D[N])[0],P[1]);i.lineEnd()}return}$>1&&C&2&&k.push(k.pop().concat(k.shift())),f.push(k.filter(nre))}}return p}}function nre(e){return e.length>1}function rre(e,t){return((e=e.x)[0]<0?e[1]-It-Re:It-e[1])-((t=t.x)[0]<0?t[1]-It-Re:It-t[1])}const yD=RP(function(){return!0},ire,sre,[-Xe,-It]);function ire(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,s){var a=o>0?Xe:-Xe,l=Ke(o-t);Ke(l-Xe)<Re?(e.point(t,n=(n+s)/2>0?It:-It),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(o,n),i=0):r!==a&&l>=Xe&&(Ke(t-r)<Re&&(t-=r*Re),Ke(o-a)<Re&&(o-=a*Re),n=ore(t,n,o,s),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=o,n=s),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function ore(e,t,n,r){var i,o,s=Fe(e-n);return Ke(s)>Re?Xf((Fe(t)*(o=Le(r))*Fe(n)-Fe(r)*(i=Le(t))*Fe(e))/(i*o*s)):(t+r)/2}function sre(e,t,n,r){var i;if(e==null)i=n*It,r.point(-Xe,i),r.point(0,i),r.point(Xe,i),r.point(Xe,0),r.point(Xe,-i),r.point(0,-i),r.point(-Xe,-i),r.point(-Xe,0),r.point(-Xe,i);else if(Ke(e[0]-t[0])>Re){var o=e[0]<t[0]?Xe:-Xe;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function are(e){var t=Le(e),n=2*Ye,r=t>0,i=Ke(t)>Re;function o(f,h,p,m){ere(m,e,n,p,f,h)}function s(f,h){return Le(f)*Le(h)>t}function a(f){var h,p,m,y,v;return{lineStart:function(){y=m=!1,v=1},point:function(_,b){var S=[_,b],A,C=s(_,b),k=r?C?0:c(_,b):C?c(_+(_<0?Xe:-Xe),b):0;if(!h&&(y=m=C)&&f.lineStart(),C!==m&&(A=l(h,S),(!A||Tm(h,A)||Tm(S,A))&&(S[2]=1)),C!==m)v=0,C?(f.lineStart(),A=l(S,h),f.point(A[0],A[1])):(A=l(h,S),f.point(A[0],A[1],2),f.lineEnd()),h=A;else if(i&&h&&r^C){var N;!(k&p)&&(N=l(S,h,!0))&&(v=0,r?(f.lineStart(),f.point(N[0][0],N[0][1]),f.point(N[1][0],N[1][1]),f.lineEnd()):(f.point(N[1][0],N[1][1]),f.lineEnd(),f.lineStart(),f.point(N[0][0],N[0][1],3)))}C&&(!h||!Tm(h,S))&&f.point(S[0],S[1]),h=S,m=C,p=k},lineEnd:function(){m&&f.lineEnd(),h=null},clean:function(){return v|(y&&m)<<1}}}function l(f,h,p){var m=hu(f),y=hu(h),v=[1,0,0],_=pf(m,y),b=J0(_,_),S=_[0],A=b-S*S;if(!A)return!p&&f;var C=t*b/A,k=-t*S/A,N=pf(v,_),$=Q0(v,C),O=Q0(_,k);ob($,O);var D=N,P=J0($,D),R=J0(D,D),X=P*P-R*(J0($,$)-1);if(!(X<0)){var B=fr(X),I=Q0(D,(-P-B)/R);if(ob(I,$),I=D1(I),!p)return I;var F=f[0],W=h[0],V=f[1],j=h[1],H;W<F&&(H=F,F=W,W=H);var Q=W-F,L=Ke(Q-Xe)<Re,Y=L||Q<Re;if(!L&&j<V&&(H=V,V=j,j=H),Y?L?V+j>0^I[1]<(Ke(I[0]-F)<Re?V:j):V<=I[1]&&I[1]<=j:Q>Xe^(F<=I[0]&&I[0]<=W)){var ye=Q0(D,(-P+B)/R);return ob(ye,$),[I,D1(ye)]}}}function c(f,h){var p=r?e:Xe-e,m=0;return f<-p?m|=1:f>p&&(m|=2),h<-p?m|=4:h>p&&(m|=8),m}return RP(s,a,o,r?[0,-e]:[-Xe,e-Xe])}function lre(e,t,n,r,i,o){var s=e[0],a=e[1],l=t[0],c=t[1],f=0,h=1,p=l-s,m=c-a,y;if(y=n-s,!(!p&&y>0)){if(y/=p,p<0){if(y<f)return;y<h&&(h=y)}else if(p>0){if(y>h)return;y>f&&(f=y)}if(y=i-s,!(!p&&y<0)){if(y/=p,p<0){if(y>h)return;y>f&&(f=y)}else if(p>0){if(y<f)return;y<h&&(h=y)}if(y=r-a,!(!m&&y>0)){if(y/=m,m<0){if(y<f)return;y<h&&(h=y)}else if(m>0){if(y>h)return;y>f&&(f=y)}if(y=o-a,!(!m&&y<0)){if(y/=m,m<0){if(y>h)return;y>f&&(f=y)}else if(m>0){if(y<f)return;y<h&&(h=y)}return f>0&&(e[0]=s+f*p,e[1]=a+f*m),h<1&&(t[0]=s+h*p,t[1]=a+h*m),!0}}}}}var Nh=1e9,Z0=-Nh;function LP(e,t,n,r){function i(c,f){return e<=c&&c<=n&&t<=f&&f<=r}function o(c,f,h,p){var m=0,y=0;if(c==null||(m=s(c,h))!==(y=s(f,h))||l(c,f)<0^h>0)do p.point(m===0||m===3?e:n,m>1?r:t);while((m=(m+h+4)%4)!==y);else p.point(f[0],f[1])}function s(c,f){return Ke(c[0]-e)<Re?f>0?0:3:Ke(c[0]-n)<Re?f>0?2:1:Ke(c[1]-t)<Re?f>0?1:0:f>0?3:2}function a(c,f){return l(c.x,f.x)}function l(c,f){var h=s(c,1),p=s(f,1);return h!==p?h-p:h===0?f[1]-c[1]:h===1?c[0]-f[0]:h===2?c[1]-f[1]:f[0]-c[0]}return function(c){var f=c,h=FP(),p,m,y,v,_,b,S,A,C,k,N,$={point:O,lineStart:X,lineEnd:B,polygonStart:P,polygonEnd:R};function O(F,W){i(F,W)&&f.point(F,W)}function D(){for(var F=0,W=0,V=m.length;W<V;++W)for(var j=m[W],H=1,Q=j.length,L=j[0],Y,ye,Ae=L[0],be=L[1];H<Q;++H)Y=Ae,ye=be,L=j[H],Ae=L[0],be=L[1],ye<=r?be>r&&(Ae-Y)*(r-ye)>(be-ye)*(e-Y)&&++F:be<=r&&(Ae-Y)*(r-ye)<(be-ye)*(e-Y)&&--F;return F}function P(){f=h,p=[],m=[],N=!0}function R(){var F=D(),W=N&&F,V=(p=CF(p)).length;(W||V)&&(c.polygonStart(),W&&(c.lineStart(),o(null,null,1,c),c.lineEnd()),V&&TP(p,a,F,o,c),c.polygonEnd()),f=c,p=m=y=null}function X(){$.point=I,m&&m.push(y=[]),k=!0,C=!1,S=A=NaN}function B(){p&&(I(v,_),b&&C&&h.rejoin(),p.push(h.result())),$.point=O,C&&f.lineEnd()}function I(F,W){var V=i(F,W);if(m&&y.push([F,W]),k)v=F,_=W,b=V,k=!1,V&&(f.lineStart(),f.point(F,W));else if(V&&C)f.point(F,W);else{var j=[S=Math.max(Z0,Math.min(Nh,S)),A=Math.max(Z0,Math.min(Nh,A))],H=[F=Math.max(Z0,Math.min(Nh,F)),W=Math.max(Z0,Math.min(Nh,W))];lre(j,H,e,t,n,r)?(C||(f.lineStart(),f.point(j[0],j[1])),f.point(H[0],H[1]),V||f.lineEnd(),N=!1):V&&(f.lineStart(),f.point(F,W),N=!1)}S=F,A=W,C=V}return $}}function vD(e,t,n){var r=Hr(e,t-Re,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function xD(e,t,n){var r=Hr(e,t-Re,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function ure(){var e,t,n,r,i,o,s,a,l=10,c=l,f=90,h=360,p,m,y,v,_=2.5;function b(){return{type:"MultiLineString",coordinates:S()}}function S(){return Hr(X0(r/f)*f,n,f).map(y).concat(Hr(X0(a/h)*h,s,h).map(v)).concat(Hr(X0(t/l)*l,e,l).filter(function(A){return Ke(A%f)>Re}).map(p)).concat(Hr(X0(o/c)*c,i,c).filter(function(A){return Ke(A%h)>Re}).map(m))}return b.lines=function(){return S().map(function(A){return{type:"LineString",coordinates:A}})},b.outline=function(){return{type:"Polygon",coordinates:[y(r).concat(v(s).slice(1),y(n).reverse().slice(1),v(a).reverse().slice(1))]}},b.extent=function(A){return arguments.length?b.extentMajor(A).extentMinor(A):b.extentMinor()},b.extentMajor=function(A){return arguments.length?(r=+A[0][0],n=+A[1][0],a=+A[0][1],s=+A[1][1],r>n&&(A=r,r=n,n=A),a>s&&(A=a,a=s,s=A),b.precision(_)):[[r,a],[n,s]]},b.extentMinor=function(A){return arguments.length?(t=+A[0][0],e=+A[1][0],o=+A[0][1],i=+A[1][1],t>e&&(A=t,t=e,e=A),o>i&&(A=o,o=i,i=A),b.precision(_)):[[t,o],[e,i]]},b.step=function(A){return arguments.length?b.stepMajor(A).stepMinor(A):b.stepMinor()},b.stepMajor=function(A){return arguments.length?(f=+A[0],h=+A[1],b):[f,h]},b.stepMinor=function(A){return arguments.length?(l=+A[0],c=+A[1],b):[l,c]},b.precision=function(A){return arguments.length?(_=+A,p=vD(o,i,90),m=xD(t,e,_),y=vD(a,s,90),v=xD(r,n,_),b):_},b.extentMajor([[-180,-90+Re],[180,90-Re]]).extentMinor([[-180,-80-Re],[180,80+Re]])}const pp=e=>e;var ab=new lr,yS=new lr,PP,zP,vS,xS,xs={point:kn,lineStart:kn,lineEnd:kn,polygonStart:function(){xs.lineStart=cre,xs.lineEnd=dre},polygonEnd:function(){xs.lineStart=xs.lineEnd=xs.point=kn,ab.add(Ke(yS)),yS=new lr},result:function(){var e=ab/2;return ab=new lr,e}};function cre(){xs.point=fre}function fre(e,t){xs.point=IP,PP=vS=e,zP=xS=t}function IP(e,t){yS.add(xS*e-vS*t),vS=e,xS=t}function dre(){IP(PP,zP)}var gf=1/0,W1=gf,gp=-gf,j1=gp,B1={point:hre,lineStart:kn,lineEnd:kn,polygonStart:kn,polygonEnd:kn,result:function(){var e=[[gf,W1],[gp,j1]];return gp=j1=-(W1=gf=1/0),e}};function hre(e,t){e<gf&&(gf=e),e>gp&&(gp=e),t<W1&&(W1=t),t>j1&&(j1=t)}var _S=0,bS=0,Oh=0,H1=0,G1=0,Pc=0,wS=0,SS=0,Dh=0,UP,WP,Ao,Co,ci={point:pu,lineStart:_D,lineEnd:bD,polygonStart:function(){ci.lineStart=mre,ci.lineEnd=yre},polygonEnd:function(){ci.point=pu,ci.lineStart=_D,ci.lineEnd=bD},result:function(){var e=Dh?[wS/Dh,SS/Dh]:Pc?[H1/Pc,G1/Pc]:Oh?[_S/Oh,bS/Oh]:[NaN,NaN];return _S=bS=Oh=H1=G1=Pc=wS=SS=Dh=0,e}};function pu(e,t){_S+=e,bS+=t,++Oh}function _D(){ci.point=pre}function pre(e,t){ci.point=gre,pu(Ao=e,Co=t)}function gre(e,t){var n=e-Ao,r=t-Co,i=fr(n*n+r*r);H1+=i*(Ao+e)/2,G1+=i*(Co+t)/2,Pc+=i,pu(Ao=e,Co=t)}function bD(){ci.point=pu}function mre(){ci.point=vre}function yre(){jP(UP,WP)}function vre(e,t){ci.point=jP,pu(UP=Ao=e,WP=Co=t)}function jP(e,t){var n=e-Ao,r=t-Co,i=fr(n*n+r*r);H1+=i*(Ao+e)/2,G1+=i*(Co+t)/2,Pc+=i,i=Co*e-Ao*t,wS+=i*(Ao+e),SS+=i*(Co+t),Dh+=i*3,pu(Ao=e,Co=t)}function BP(e){this._context=e}BP.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,cr);break}}},result:kn};var ES=new lr,lb,HP,GP,Fh,Th,mp={point:kn,lineStart:function(){mp.point=xre},lineEnd:function(){lb&&YP(HP,GP),mp.point=kn},polygonStart:function(){lb=!0},polygonEnd:function(){lb=null},result:function(){var e=+ES;return ES=new lr,e}};function xre(e,t){mp.point=YP,HP=Fh=e,GP=Th=t}function YP(e,t){Fh-=e,Th-=t,ES.add(fr(Fh*Fh+Th*Th)),Fh=e,Th=t}let wD,Y1,SD,ED;class AD{constructor(t){this._append=t==null?qP:_re(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==SD||this._append!==Y1){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,SD=r,Y1=this._append,ED=this._,this._=i}this._+=ED;break}}}result(){const t=this._;return this._="",t.length?t:null}}function qP(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function _re(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return qP;if(t!==wD){const n=10**t;wD=t,Y1=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return Y1}function VP(e,t){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),vs(a,i(o))),o.result()}return s.area=function(a){return vs(a,i(xs)),xs.result()},s.measure=function(a){return vs(a,i(mp)),mp.result()},s.bounds=function(a){return vs(a,i(B1)),B1.result()},s.centroid=function(a){return vs(a,i(ci)),ci.result()},s.projection=function(a){return arguments.length?(i=a==null?(e=null,pp):(e=a).stream,s):e},s.context=function(a){return arguments.length?(o=a==null?(t=null,new AD(n)):new BP(t=a),typeof r!="function"&&o.pointRadius(r),s):t},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(o=new AD(n)),s},s.projection(e).digits(n).context(t)}function _v(e){return function(t){var n=new AS;for(var r in e)n[r]=e[r];return n.stream=t,n}}function AS(){}AS.prototype={constructor:AS,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function pk(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),vs(n,e.stream(B1)),t(B1.result()),r!=null&&e.clipExtent(r),e}function bv(e,t,n){return pk(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),a=+t[0][0]+(i-s*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([a,l])},n)}function gk(e,t,n){return bv(e,[[0,0],t],n)}function mk(e,t,n){return pk(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),s=(i-o*(r[1][0]+r[0][0]))/2,a=-o*r[0][1];e.scale(150*o).translate([s,a])},n)}function yk(e,t,n){return pk(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),s=-o*r[0][0],a=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([s,a])},n)}var CD=16,bre=Le(30*Ye);function kD(e,t){return+t?Sre(e,t):wre(e)}function wre(e){return _v({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Sre(e,t){function n(r,i,o,s,a,l,c,f,h,p,m,y,v,_){var b=c-r,S=f-i,A=b*b+S*S;if(A>4*t&&v--){var C=s+p,k=a+m,N=l+y,$=fr(C*C+k*k+N*N),O=Mr(N/=$),D=Ke(Ke(N)-1)<Re||Ke(o-h)<Re?(o+h)/2:wi(k,C),P=e(D,O),R=P[0],X=P[1],B=R-r,I=X-i,F=S*B-b*I;(F*F/A>t||Ke((b*B+S*I)/A-.5)>.3||s*p+a*m+l*y<bre)&&(n(r,i,o,s,a,l,R,X,D,C/=$,k/=$,N,v,_),_.point(R,X),n(R,X,D,C,k,N,c,f,h,p,m,y,v,_))}}return function(r){var i,o,s,a,l,c,f,h,p,m,y,v,_={point:b,lineStart:S,lineEnd:C,polygonStart:function(){r.polygonStart(),_.lineStart=k},polygonEnd:function(){r.polygonEnd(),_.lineStart=S}};function b(O,D){O=e(O,D),r.point(O[0],O[1])}function S(){h=NaN,_.point=A,r.lineStart()}function A(O,D){var P=hu([O,D]),R=e(O,D);n(h,p,f,m,y,v,h=R[0],p=R[1],f=O,m=P[0],y=P[1],v=P[2],CD,r),r.point(h,p)}function C(){_.point=b,r.lineEnd()}function k(){S(),_.point=N,_.lineEnd=$}function N(O,D){A(i=O,D),o=h,s=p,a=m,l=y,c=v,_.point=A}function $(){n(h,p,f,m,y,v,o,s,i,a,l,c,CD,r),_.lineEnd=C,C()}return _}}var Ere=_v({point:function(e,t){this.stream.point(e*Ye,t*Ye)}});function Are(e){return _v({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Cre(e,t,n,r,i){function o(s,a){return s*=r,a*=i,[t+e*s,n-e*a]}return o.invert=function(s,a){return[(s-t)/e*r,(n-a)/e*i]},o}function $D(e,t,n,r,i,o){if(!o)return Cre(e,t,n,r,i);var s=Le(o),a=Fe(o),l=s*e,c=a*e,f=s/e,h=a/e,p=(a*n-s*t)/e,m=(a*t+s*n)/e;function y(v,_){return v*=r,_*=i,[l*v-c*_+t,n-c*v-l*_]}return y.invert=function(v,_){return[r*(f*v-h*_+p),i*(m-h*v-f*_)]},y}function Vo(e){return XP(function(){return e})()}function XP(e){var t,n=150,r=480,i=250,o=0,s=0,a=0,l=0,c=0,f,h=0,p=1,m=1,y=null,v=yD,_=null,b,S,A,C=pp,k=.5,N,$,O,D,P;function R(F){return O(F[0]*Ye,F[1]*Ye)}function X(F){return F=O.invert(F[0],F[1]),F&&[F[0]*Ht,F[1]*Ht]}R.stream=function(F){return D&&P===F?D:D=Ere(Are(f)(v(N(C(P=F)))))},R.preclip=function(F){return arguments.length?(v=F,y=void 0,I()):v},R.postclip=function(F){return arguments.length?(C=F,_=b=S=A=null,I()):C},R.clipAngle=function(F){return arguments.length?(v=+F?are(y=F*Ye):(y=null,yD),I()):y*Ht},R.clipExtent=function(F){return arguments.length?(C=F==null?(_=b=S=A=null,pp):LP(_=+F[0][0],b=+F[0][1],S=+F[1][0],A=+F[1][1]),I()):_==null?null:[[_,b],[S,A]]},R.scale=function(F){return arguments.length?(n=+F,B()):n},R.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],B()):[r,i]},R.center=function(F){return arguments.length?(o=F[0]%360*Ye,s=F[1]%360*Ye,B()):[o*Ht,s*Ht]},R.rotate=function(F){return arguments.length?(a=F[0]%360*Ye,l=F[1]%360*Ye,c=F.length>2?F[2]%360*Ye:0,B()):[a*Ht,l*Ht,c*Ht]},R.angle=function(F){return arguments.length?(h=F%360*Ye,B()):h*Ht},R.reflectX=function(F){return arguments.length?(p=F?-1:1,B()):p<0},R.reflectY=function(F){return arguments.length?(m=F?-1:1,B()):m<0},R.precision=function(F){return arguments.length?(N=kD($,k=F*F),I()):fr(k)},R.fitExtent=function(F,W){return bv(R,F,W)},R.fitSize=function(F,W){return gk(R,F,W)},R.fitWidth=function(F,W){return mk(R,F,W)},R.fitHeight=function(F,W){return yk(R,F,W)};function B(){var F=$D(n,0,0,p,m,h).apply(null,t(o,s)),W=$D(n,r-F[0],i-F[1],p,m,h);return f=DP(a,l,c),$=gS(t,W),O=gS(f,$),N=kD($,k),I()}function I(){return D=P=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&X,B()}}function vk(e){var t=0,n=Xe/3,r=XP(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Ye,n=o[1]*Ye):[t*Ht,n*Ht]},i}function kre(e){var t=Le(e);function n(r,i){return[r*t,Fe(i)/t]}return n.invert=function(r,i){return[r/t,Mr(i*t)]},n}function $re(e,t){var n=Fe(e),r=(n+Fe(t))/2;if(Ke(r)<Re)return kre(e);var i=1+n*(2*r-n),o=fr(i)/r;function s(a,l){var c=fr(i-2*r*Fe(l))/r;return[c*Fe(a*=r),o-c*Le(a)]}return s.invert=function(a,l){var c=o-l,f=wi(a,Ke(c))*di(c);return c*r<0&&(f-=Xe*di(a)*di(c)),[f/r,Mr((i-(a*a+c*c)*r*r)/(2*r))]},s}function q1(){return vk($re).scale(155.424).center([0,33.6442])}function JP(){return q1().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Mre(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Nre(){var e,t,n=JP(),r,i=q1().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,s=q1().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,c={point:function(p,m){l=[p,m]}};function f(p){var m=p[0],y=p[1];return l=null,r.point(m,y),l||(o.point(m,y),l)||(a.point(m,y),l)}f.invert=function(p){var m=n.scale(),y=n.translate(),v=(p[0]-y[0])/m,_=(p[1]-y[1])/m;return(_>=.12&&_<.234&&v>=-.425&&v<-.214?i:_>=.166&&_<.234&&v>=-.214&&v<-.115?s:n).invert(p)},f.stream=function(p){return e&&t===p?e:e=Mre([n.stream(t=p),i.stream(p),s.stream(p)])},f.precision=function(p){return arguments.length?(n.precision(p),i.precision(p),s.precision(p),h()):n.precision()},f.scale=function(p){return arguments.length?(n.scale(p),i.scale(p*.35),s.scale(p),f.translate(n.translate())):n.scale()},f.translate=function(p){if(!arguments.length)return n.translate();var m=n.scale(),y=+p[0],v=+p[1];return r=n.translate(p).clipExtent([[y-.455*m,v-.238*m],[y+.455*m,v+.238*m]]).stream(c),o=i.translate([y-.307*m,v+.201*m]).clipExtent([[y-.425*m+Re,v+.12*m+Re],[y-.214*m-Re,v+.234*m-Re]]).stream(c),a=s.translate([y-.205*m,v+.212*m]).clipExtent([[y-.214*m+Re,v+.166*m+Re],[y-.115*m-Re,v+.234*m-Re]]).stream(c),h()},f.fitExtent=function(p,m){return bv(f,p,m)},f.fitSize=function(p,m){return gk(f,p,m)},f.fitWidth=function(p,m){return mk(f,p,m)},f.fitHeight=function(p,m){return yk(f,p,m)};function h(){return e=t=null,f}return f.scale(1070)}function QP(e){return function(t,n){var r=Le(t),i=Le(n),o=e(r*i);return o===1/0?[2,0]:[o*i*Fe(t),o*Fe(n)]}}function ng(e){return function(t,n){var r=fr(t*t+n*n),i=e(r),o=Fe(i),s=Le(i);return[wi(t*o,r*s),Mr(r&&n*o/r)]}}var KP=QP(function(e){return fr(2/(1+e))});KP.invert=ng(function(e){return 2*Mr(e/2)});function Ore(){return Vo(KP).scale(124.75).clipAngle(180-.001)}var ZP=QP(function(e){return(e=bP(e))&&e/Fe(e)});ZP.invert=ng(function(e){return e});function Dre(){return Vo(ZP).scale(79.4188).clipAngle(180-.001)}function wv(e,t){return[e,$1(dk((It+t)/2))]}wv.invert=function(e,t){return[e,2*Xf(_P(t))-It]};function Fre(){return ez(wv).scale(961/cr)}function ez(e){var t=Vo(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,s=null,a,l,c;t.scale=function(h){return arguments.length?(r(h),f()):r()},t.translate=function(h){return arguments.length?(i(h),f()):i()},t.center=function(h){return arguments.length?(n(h),f()):n()},t.clipExtent=function(h){return arguments.length?(h==null?s=a=l=c=null:(s=+h[0][0],a=+h[0][1],l=+h[1][0],c=+h[1][1]),f()):s==null?null:[[s,a],[l,c]]};function f(){var h=Xe*r(),p=t(Zne(t.rotate()).invert([0,0]));return o(s==null?[[p[0]-h,p[1]-h],[p[0]+h,p[1]+h]]:e===wv?[[Math.max(p[0]-h,s),a],[Math.min(p[0]+h,l),c]]:[[s,Math.max(p[1]-h,a)],[l,Math.min(p[1]+h,c)]])}return f()}function em(e){return dk((It+e)/2)}function Tre(e,t){var n=Le(e),r=e===t?Fe(e):$1(n/Le(t))/$1(em(t)/em(e)),i=n*ib(em(e),r)/r;if(!r)return wv;function o(s,a){i>0?a<-It+Re&&(a=-It+Re):a>It-Re&&(a=It-Re);var l=i/ib(em(a),r);return[l*Fe(r*s),i-l*Le(r*s)]}return o.invert=function(s,a){var l=i-a,c=di(r)*fr(s*s+l*l),f=wi(s,Ke(l))*di(l);return l*r<0&&(f-=Xe*di(s)*di(l)),[f/r,2*Xf(ib(i/c,1/r))-It]},o}function Rre(){return vk(Tre).scale(109.5).parallels([30,30])}function V1(e,t){return[e,t]}V1.invert=V1;function Lre(){return Vo(V1).scale(152.63)}function Pre(e,t){var n=Le(e),r=e===t?Fe(e):(n-Le(t))/(t-e),i=n/r+e;if(Ke(r)<Re)return V1;function o(s,a){var l=i-a,c=r*s;return[l*Fe(c),i-l*Le(c)]}return o.invert=function(s,a){var l=i-a,c=wi(s,Ke(l))*di(l);return l*r<0&&(c-=Xe*di(s)*di(l)),[c/r,i-di(r)*fr(s*s+l*l)]},o}function zre(){return vk(Pre).scale(131.154).center([0,13.9389])}var qh=1.340264,Vh=-.081106,Xh=893e-6,Jh=.003796,X1=fr(3)/2,Ire=12;function tz(e,t){var n=Mr(X1*Fe(t)),r=n*n,i=r*r*r;return[e*Le(n)/(X1*(qh+3*Vh*r+i*(7*Xh+9*Jh*r))),n*(qh+Vh*r+i*(Xh+Jh*r))]}tz.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,s,a,l;o<Ire&&(a=n*(qh+Vh*r+i*(Xh+Jh*r))-t,l=qh+3*Vh*r+i*(7*Xh+9*Jh*r),n-=s=a/l,r=n*n,i=r*r*r,!(Ke(s)<C1));++o);return[X1*e*(qh+3*Vh*r+i*(7*Xh+9*Jh*r))/Le(n),Mr(Fe(n)/X1)]};function Ure(){return Vo(tz).scale(177.158)}function nz(e,t){var n=Le(t),r=Le(e)*n;return[n*Fe(e)/r,Fe(t)/r]}nz.invert=ng(Xf);function Wre(){return Vo(nz).scale(144.049).clipAngle(60)}function jre(){var e=1,t=0,n=0,r=1,i=1,o=0,s,a,l=null,c,f,h,p=1,m=1,y=_v({point:function(C,k){var N=A([C,k]);this.stream.point(N[0],N[1])}}),v=pp,_,b;function S(){return p=e*r,m=e*i,_=b=null,A}function A(C){var k=C[0]*p,N=C[1]*m;if(o){var $=N*s-k*a;k=k*s+N*a,N=$}return[k+t,N+n]}return A.invert=function(C){var k=C[0]-t,N=C[1]-n;if(o){var $=N*s+k*a;k=k*s-N*a,N=$}return[k/p,N/m]},A.stream=function(C){return _&&b===C?_:_=y(v(b=C))},A.postclip=function(C){return arguments.length?(v=C,l=c=f=h=null,S()):v},A.clipExtent=function(C){return arguments.length?(v=C==null?(l=c=f=h=null,pp):LP(l=+C[0][0],c=+C[0][1],f=+C[1][0],h=+C[1][1]),S()):l==null?null:[[l,c],[f,h]]},A.scale=function(C){return arguments.length?(e=+C,S()):e},A.translate=function(C){return arguments.length?(t=+C[0],n=+C[1],S()):[t,n]},A.angle=function(C){return arguments.length?(o=C%360*Ye,a=Fe(o),s=Le(o),S()):o*Ht},A.reflectX=function(C){return arguments.length?(r=C?-1:1,S()):r<0},A.reflectY=function(C){return arguments.length?(i=C?-1:1,S()):i<0},A.fitExtent=function(C,k){return bv(A,C,k)},A.fitSize=function(C,k){return gk(A,C,k)},A.fitWidth=function(C,k){return mk(A,C,k)},A.fitHeight=function(C,k){return yk(A,C,k)},A}function rz(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}rz.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(-.044475+.028874*o-.005916*s)))-t)/(1.007226+o*(.015085*3+s*(-.044475*7+.028874*9*o-.005916*11*s)))}while(Ke(i)>Re&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function Bre(){return Vo(rz).scale(175.295)}function iz(e,t){return[Le(t)*Fe(e),Fe(t)]}iz.invert=ng(Mr);function Hre(){return Vo(iz).scale(249.5).clipAngle(90+Re)}function oz(e,t){var n=Le(t),r=1+Le(e)*n;return[n*Fe(e)/r,Fe(t)/r]}oz.invert=ng(function(e){return 2*Xf(e)});function Gre(){return Vo(oz).scale(250).clipAngle(142)}function sz(e,t){return[$1(dk((It+t)/2)),-e]}sz.invert=function(e,t){return[-t,2*Xf(_P(e))-It]};function Yre(){var e=ez(sz),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var qre=Math.abs,CS=Math.cos,J1=Math.sin,Vre=1e-6,az=Math.PI,kS=az/2,MD=Xre(2);function ND(e){return e>1?kS:e<-1?-kS:Math.asin(e)}function Xre(e){return e>0?Math.sqrt(e):0}function Jre(e,t){var n=e*J1(t),r=30,i;do t-=i=(t+J1(t)-n)/(1+CS(t));while(qre(i)>Vre&&--r>0);return t/2}function Qre(e,t,n){function r(i,o){return[e*i*CS(o=Jre(n,o)),t*J1(o)]}return r.invert=function(i,o){return o=ND(o/t),[i/(e*CS(o)),ND((2*o+J1(2*o))/n)]},r}var Kre=Qre(MD/kS,MD,az);function Zre(){return Vo(Kre).scale(169.529)}const eie=VP(),$S=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function tie(e,t){return function n(){const r=t();return r.type=e,r.path=VP().projection(r),r.copy=r.copy||function(){const i=n();return $S.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},SR(r)}}function xk(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Q1[e]=tie(e,t),this):Q1[e]||null}function lz(e){return e&&e.path||eie}const Q1={albers:JP,albersusa:Nre,azimuthalequalarea:Ore,azimuthalequidistant:Dre,conicconformal:Rre,conicequalarea:q1,conicequidistant:zre,equalEarth:Ure,equirectangular:Lre,gnomonic:Wre,identity:jre,mercator:Fre,mollweide:Zre,naturalEarth1:Bre,orthographic:Hre,stereographic:Gre,transversemercator:Yre};for(const e in Q1)xk(e,Q1[e]);function nie(){}const ds=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function uz(){var e=1,t=1,n=a;function r(l,c){return c.map(f=>i(l,f))}function i(l,c){var f=[],h=[];return o(l,c,p=>{n(p,l,c),rie(p)>0?f.push([p]):h.push(p)}),h.forEach(p=>{for(var m=0,y=f.length,v;m<y;++m)if(iie((v=f[m])[0],p)!==-1){v.push(p);return}}),{type:"MultiPolygon",value:c,coordinates:f}}function o(l,c,f){var h=[],p=[],m,y,v,_,b,S;for(m=y=-1,_=l[0]>=c,ds[_<<1].forEach(A);++m<e-1;)v=_,_=l[m+1]>=c,ds[v|_<<1].forEach(A);for(ds[_<<0].forEach(A);++y<t-1;){for(m=-1,_=l[y*e+e]>=c,b=l[y*e]>=c,ds[_<<1|b<<2].forEach(A);++m<e-1;)v=_,_=l[y*e+e+m+1]>=c,S=b,b=l[y*e+m+1]>=c,ds[v|_<<1|b<<2|S<<3].forEach(A);ds[_|b<<3].forEach(A)}for(m=-1,b=l[y*e]>=c,ds[b<<2].forEach(A);++m<e-1;)S=b,b=l[y*e+m+1]>=c,ds[b<<2|S<<3].forEach(A);ds[b<<3].forEach(A);function A(C){var k=[C[0][0]+m,C[0][1]+y],N=[C[1][0]+m,C[1][1]+y],$=s(k),O=s(N),D,P;(D=p[$])?(P=h[O])?(delete p[D.end],delete h[P.start],D===P?(D.ring.push(N),f(D.ring)):h[D.start]=p[P.end]={start:D.start,end:P.end,ring:D.ring.concat(P.ring)}):(delete p[D.end],D.ring.push(N),p[D.end=O]=D):(D=h[O])?(P=p[$])?(delete h[D.start],delete p[P.end],D===P?(D.ring.push(N),f(D.ring)):h[P.start]=p[D.end]={start:P.start,end:D.end,ring:P.ring.concat(D.ring)}):(delete h[D.start],D.ring.unshift(k),h[D.start=$]=D):h[$]=p[O]={start:$,end:O,ring:[k,N]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function a(l,c,f){l.forEach(h=>{var p=h[0],m=h[1],y=p|0,v=m|0,_,b=c[v*e+y];p>0&&p<e&&y===p&&(_=c[v*e+y-1],h[0]=p+(f-_)/(b-_)-.5),m>0&&m<t&&v===m&&(_=c[(v-1)*e+y],h[1]=m+(f-_)/(b-_)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var c=Math.floor(l[0]),f=Math.floor(l[1]);return c>=0&&f>=0||Z("invalid size"),e=c,t=f,r},r.smooth=function(l){return arguments.length?(n=l?a:nie,r):n===a},r}function rie(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function iie(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=oie(e,t[n]))return i;return 0}function oie(e,t){for(var n=t[0],r=t[1],i=-1,o=0,s=e.length,a=s-1;o<s;a=o++){var l=e[o],c=l[0],f=l[1],h=e[a],p=h[0],m=h[1];if(sie(l,h,t))return 0;f>r!=m>r&&n<(p-c)*(r-f)/(m-f)+c&&(i=-i)}return i}function sie(e,t,n){var r;return aie(e,t,n)&&lie(e[r=+(e[0]===t[0])],n[r],t[r])}function aie(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function lie(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function cz(e,t,n){return function(r){var i=Ro(r),o=n?Math.min(i[0],0):i[0],s=i[1],a=s-o,l=t?Ua(o,s,e):a/(e+1);return Hr(o+l,s,l)}}function _k(e){K.call(this,null,e)}_k.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ge(_k,K,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Vn,o=uz().smooth(e.smooth!==!1),s=e.thresholds||uie(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(c=>{const f=i(c),h=o.size([f.width,f.height])(f.values,ne(s)?s:s(f.values));cie(h,f,c,e),h.forEach(p=>{l.push(Iy(c,ut(a!=null?{[a]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function uie(e,t,n){const r=cz(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Kl(t(i).values)))}function cie(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(He(i)&&(i=i(n,r)),He(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const s=(st(i)?i:i[0])||1,a=(st(i)?i:i[1])||1,l=o&&o[0]||0,c=o&&o[1]||0;e.forEach(fz(t,s,a,l,c))}function fz(e,t,n,r,i){const o=e.x1||0,s=e.y1||0,a=t*n<0;function l(h){h.forEach(c)}function c(h){a&&h.reverse(),h.forEach(f)}function f(h){h[0]=(h[0]-o)*t+r,h[1]=(h[1]-s)*n+i}return function(h){return h.coordinates.forEach(l),h}}function OD(e,t,n){const r=e>=0?e:dA(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function ub(e){return He(e)?e:Xn(+e)}function dz(){var e=l=>l[0],t=l=>l[1],n=Rf,r=[-1,-1],i=960,o=500,s=2;function a(l,c){const f=OD(r[0],l,e)>>s,h=OD(r[1],l,t)>>s,p=f?f+2:0,m=h?h+2:0,y=2*p+(i>>s),v=2*m+(o>>s),_=new Float32Array(y*v),b=new Float32Array(y*v);let S=_;l.forEach(C=>{const k=p+(+e(C)>>s),N=m+(+t(C)>>s);k>=0&&k<y&&N>=0&&N<v&&(_[k+N*y]+=+n(C))}),f>0&&h>0?(Sc(y,v,_,b,f),Ec(y,v,b,_,h),Sc(y,v,_,b,f),Ec(y,v,b,_,h),Sc(y,v,_,b,f),Ec(y,v,b,_,h)):f>0?(Sc(y,v,_,b,f),Sc(y,v,b,_,f),Sc(y,v,_,b,f),S=b):h>0&&(Ec(y,v,_,b,h),Ec(y,v,b,_,h),Ec(y,v,_,b,h),S=b);const A=c?Math.pow(2,-2*s):1/kF(S);for(let C=0,k=y*v;C<k;++C)S[C]*=A;return{values:S,scale:1<<s,width:y,height:v,x1:p,y1:m,x2:p+(i>>s),y2:m+(o>>s)}}return a.x=function(l){return arguments.length?(e=ub(l),a):e},a.y=function(l){return arguments.length?(t=ub(l),a):t},a.weight=function(l){return arguments.length?(n=ub(l),a):n},a.size=function(l){if(!arguments.length)return[i,o];var c=+l[0],f=+l[1];return c>=0&&f>=0||Z("invalid size"),i=c,o=f,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||Z("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),a):1<<s},a.bandwidth=function(l){return arguments.length?(l=_e(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&Z("invalid bandwidth"),r=l,a):r},a}function Sc(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<t;++s)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+s*e]),a>=i&&(a>=o&&(l-=n[a-o+s*e]),r[a-i+s*e]=l/Math.min(a+1,e-1+o-a,o))}function Ec(e,t,n,r,i){const o=(i<<1)+1;for(let s=0;s<e;++s)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[s+a*e]),a>=i&&(a>=o&&(l-=n[s+(a-o)*e]),r[s+(a-i)*e]=l/Math.min(a+1,t-1+o-a,o))}function bk(e){K.call(this,null,e)}bk.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const fie=["x","y","weight","size","cellSize","bandwidth"];function hz(e,t){return fie.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ge(bk,K,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=die(r,e.groupby),o=(e.groupby||[]).map(Ut),s=hz(dz(),e),a=e.as||"grid",l=[];function c(f,h){for(let p=0;p<o.length;++p)f[o[p]]=h[p];return f}return l=i.map(f=>ut(c({[a]:s(f,e.counts)},f.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function die(e,t){var n=[],r=f=>f(a),i,o,s,a,l,c;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),c=i[l],c||(i[l]=c=[],c.dims=l,n.push(c)),c.push(a);return n}function wk(e){K.call(this,null,e)}wk.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ge(wk,K,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=uz().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||cz(e.count||10,e.nice,!!i),s=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=hz(dz(),e)(i,!0),l=fz(a,a.scale||1,a.scale||1,0,0),s=[a.width,a.height],i=a.values),o=ne(o)?o:o(i),i=r.size(s)(i,o),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(ut),n}});const MS="Feature",Sk="FeatureCollection",hie="MultiPoint";function Ek(e){K.call(this,null,e)}Ek.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ge(Ek,K,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],s=i&&i[1],a=e.geojson||!i&&Vn,l=t.ADD,c;c=e.modified()||t.changed(t.REM)||t.modified(Hn(a))||o&&t.modified(Hn(o))||s&&t.modified(Hn(s)),(!this.value||c)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,f=>n.push(a(f))),o&&s&&(t.visit(l,f=>{var h=o(f),p=s(f);h!=null&&p!=null&&(h=+h)===h&&(p=+p)===p&&r.push([h,p])}),n=n.concat({type:MS,geometry:{type:hie,coordinates:r}})),this.value={type:Sk,features:n}}});function Ak(e){K.call(this,null,e)}Ak.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ge(Ak,K,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Vn,o=e.as||"path",s=n.SOURCE;!r||e.modified()?(this.value=r=lz(e.projection),n.materialize().reflow()):s=i===Vn||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=pie(r,e.pointRadius);return n.visit(s,l=>l[o]=r(i(l))),r.pointRadius(a),n.modifies(o)}});function pie(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Ck(e){K.call(this,null,e)}Ck.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ge(Ck,K,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],s=o[0],a=o[1],l;function c(f){const h=n([r(f),i(f)]);h?(f[s]=h[0],f[a]=h[1]):(f[s]=void 0,f[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,c):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,c)),t.modifies(o)}});function kk(e){K.call(this,null,e)}kk.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ge(kk,K,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=gie(lz(e.projection),e.field||vi("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,s=>s[i]=r),n.modifies(i)}});function gie(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),s=e.pointRadius(n)(t(i));return e.pointRadius(o),s};return r.context=i=>(e.context(i),r),r}function $k(e){K.call(this,[],e),this.generator=ure()}$k.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ge($k,K,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)He(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(w7(n[0],i)):t.add.push(ut(i)),n[0]=i,t}});function Mk(e){K.call(this,null,e)}Mk.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ge(Mk,K,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Vn,o=yie(e.opacity,e),s=mie(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?Kl(n.map(c=>Kl(i(c).values))):0};return n.forEach(c=>{const f=i(c),h=Ge({},c,l);r||(h.$max=Kl(f.values||[])),c[a]=vie(f,h,s.dep?s:Xn(s(h)),o.dep?o:Xn(o(h)))}),t.reflow(!0).modifies(a)}});function mie(e,t){let n;return He(e)?(n=r=>Ba(e(r,t)),n.dep=pz(e)):n=Xn(Ba(e||"#888")),n}function yie(e,t){let n;return He(e)?(n=r=>e(r,t),n.dep=pz(e)):e?n=Xn(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function pz(e){if(!He(e))return!1;const t=Ji(Hn(e));return t.$x||t.$y||t.$value||t.$max}function vie(e,t,n,r){const i=e.width,o=e.height,s=e.x1||0,a=e.y1||0,l=e.x2||i,c=e.y2||o,f=e.values,h=f?_=>f[_]:Sa,p=La(l-s,c-a),m=p.getContext("2d"),y=m.getImageData(0,0,l-s,c-a),v=y.data;for(let _=a,b=0;_<c;++_){t.$y=_-a;for(let S=s,A=_*i;S<l;++S,b+=4){t.$x=S-s,t.$value=h(S+A);const C=n(t);v[b+0]=C.r,v[b+1]=C.g,v[b+2]=C.b,v[b+3]=~~(255*r(t))}}return m.putImageData(y,0,0),p}function gz(e){K.call(this,null,e),this.modified(!0)}ge(gz,K,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=_ie(e.type),$S.forEach(r=>{e[r]!=null&&DD(n,r,e[r])})):$S.forEach(r=>{e.modified(r)&&DD(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&xie(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function xie(e,t){const n=bie(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function _ie(e){const t=xk((e||"mercator").toLowerCase());return t||Z("Unrecognized projection type: "+e),t()}function DD(e,t,n){He(e[t])&&e[t](n)}function bie(e){return e=_e(e),e.length===1?e[0]:{type:Sk,features:e.reduce((t,n)=>t.concat(wie(n)),[])}}function wie(e){return e.type===Sk?e.features:_e(e).filter(t=>t!=null).map(t=>t.type===MS?t:{type:MS,geometry:t})}const Sie=Object.freeze(Object.defineProperty({__proto__:null,contour:wk,geojson:Ek,geopath:Ak,geopoint:Ck,geoshape:kk,graticule:$k,heatmap:Mk,isocontour:_k,kde2d:bk,projection:gz},Symbol.toStringTag,{value:"Module"}));function Eie(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,s=n.length,a,l=0,c=0;for(o=0;o<s;++o)a=n[o],l+=a.x,c+=a.y;for(l=(l/s-e)*r,c=(c/s-t)*r,o=0;o<s;++o)a=n[o],a.x-=l,a.y-=c}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function Aie(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return mz(this.cover(t,n),t,n,e)}function mz(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,s={data:r},a=e._x0,l=e._y0,c=e._x1,f=e._y1,h,p,m,y,v,_,b,S;if(!o)return e._root=s,e;for(;o.length;)if((v=t>=(h=(a+c)/2))?a=h:c=h,(_=n>=(p=(l+f)/2))?l=p:f=p,i=o,!(o=o[b=_<<1|v]))return i[b]=s,e;if(m=+e._x.call(null,o.data),y=+e._y.call(null,o.data),t===m&&n===y)return s.next=o,i?i[b]=s:e._root=s,e;do i=i?i[b]=new Array(4):e._root=new Array(4),(v=t>=(h=(a+c)/2))?a=h:c=h,(_=n>=(p=(l+f)/2))?l=p:f=p;while((b=_<<1|v)===(S=(y>=p)<<1|m>=h));return i[S]=o,i[b]=s,e}function Cie(e){var t,n,r=e.length,i,o,s=new Array(r),a=new Array(r),l=1/0,c=1/0,f=-1/0,h=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(s[n]=i,a[n]=o,i<l&&(l=i),i>f&&(f=i),o<c&&(c=o),o>h&&(h=o));if(l>f||c>h)return this;for(this.cover(l,c).cover(f,h),n=0;n<r;++n)mz(this,s[n],a[n],e[n]);return this}function kie(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var s=i-n||1,a=this._root,l,c;n>e||e>=i||r>t||t>=o;)switch(c=(t<r)<<1|e<n,l=new Array(4),l[c]=a,a=l,s*=2,c){case 0:i=n+s,o=r+s;break;case 1:n=i-s,o=r+s;break;case 2:i=n+s,r=o-s;break;case 3:n=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function $ie(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Mie(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function or(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Nie(e,t,n){var r,i=this._x0,o=this._y0,s,a,l,c,f=this._x1,h=this._y1,p=[],m=this._root,y,v;for(m&&p.push(new or(m,i,o,f,h)),n==null?n=1/0:(i=e-n,o=t-n,f=e+n,h=t+n,n*=n);y=p.pop();)if(!(!(m=y.node)||(s=y.x0)>f||(a=y.y0)>h||(l=y.x1)<i||(c=y.y1)<o))if(m.length){var _=(s+l)/2,b=(a+c)/2;p.push(new or(m[3],_,b,l,c),new or(m[2],s,b,_,c),new or(m[1],_,a,l,b),new or(m[0],s,a,_,b)),(v=(t>=b)<<1|e>=_)&&(y=p[p.length-1],p[p.length-1]=p[p.length-1-v],p[p.length-1-v]=y)}else{var S=e-+this._x.call(null,m.data),A=t-+this._y.call(null,m.data),C=S*S+A*A;if(C<n){var k=Math.sqrt(n=C);i=e-k,o=t-k,f=e+k,h=t+k,r=m.data}}return r}function Oie(e){if(isNaN(f=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,s=this._x0,a=this._y0,l=this._x1,c=this._y1,f,h,p,m,y,v,_,b;if(!n)return this;if(n.length)for(;;){if((y=f>=(p=(s+l)/2))?s=p:l=p,(v=h>=(m=(a+c)/2))?a=m:c=m,t=n,!(n=n[_=v<<1|y]))return this;if(!n.length)break;(t[_+1&3]||t[_+2&3]||t[_+3&3])&&(r=t,b=_)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[_]=o:delete t[_],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[b]=n:this._root=n),this):(this._root=o,this)}function Die(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Fie(){return this._root}function Tie(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Rie(e){var t=[],n,r=this._root,i,o,s,a,l;for(r&&t.push(new or(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,s=n.y0,a=n.x1,l=n.y1)&&r.length){var c=(o+a)/2,f=(s+l)/2;(i=r[3])&&t.push(new or(i,c,f,a,l)),(i=r[2])&&t.push(new or(i,o,f,c,l)),(i=r[1])&&t.push(new or(i,c,s,a,f)),(i=r[0])&&t.push(new or(i,o,s,c,f))}return this}function Lie(e){var t=[],n=[],r;for(this._root&&t.push(new or(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,l=r.x1,c=r.y1,f=(s+l)/2,h=(a+c)/2;(o=i[0])&&t.push(new or(o,s,a,f,h)),(o=i[1])&&t.push(new or(o,f,a,l,h)),(o=i[2])&&t.push(new or(o,s,h,f,c)),(o=i[3])&&t.push(new or(o,f,h,l,c))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Pie(e){return e[0]}function zie(e){return arguments.length?(this._x=e,this):this._x}function Iie(e){return e[1]}function Uie(e){return arguments.length?(this._y=e,this):this._y}function Nk(e,t,n){var r=new Ok(t??Pie,n??Iie,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Ok(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function FD(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var hr=Nk.prototype=Ok.prototype;hr.copy=function(){var e=new Ok(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=FD(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=FD(r));return e};hr.add=Aie;hr.addAll=Cie;hr.cover=kie;hr.data=$ie;hr.extent=Mie;hr.find=Nie;hr.remove=Oie;hr.removeAll=Die;hr.root=Fie;hr.size=Tie;hr.visit=Rie;hr.visitAfter=Lie;hr.x=zie;hr.y=Uie;function sr(e){return function(){return e}}function Na(e){return(e()-.5)*1e-6}function Wie(e){return e.x+e.vx}function jie(e){return e.y+e.vy}function Bie(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=sr(e==null?1:+e));function s(){for(var c,f=t.length,h,p,m,y,v,_,b=0;b<o;++b)for(h=Nk(t,Wie,jie).visitAfter(a),c=0;c<f;++c)p=t[c],v=n[p.index],_=v*v,m=p.x+p.vx,y=p.y+p.vy,h.visit(S);function S(A,C,k,N,$){var O=A.data,D=A.r,P=v+D;if(O){if(O.index>p.index){var R=m-O.x-O.vx,X=y-O.y-O.vy,B=R*R+X*X;B<P*P&&(R===0&&(R=Na(r),B+=R*R),X===0&&(X=Na(r),B+=X*X),B=(P-(B=Math.sqrt(B)))/B*i,p.vx+=(R*=B)*(P=(D*=D)/(_+D)),p.vy+=(X*=B)*P,O.vx-=R*(P=1-P),O.vy-=X*P)}return}return C>m+P||N<m-P||k>y+P||$<y-P}}function a(c){if(c.data)return c.r=n[c.data.index];for(var f=c.r=0;f<4;++f)c[f]&&c[f].r>c.r&&(c.r=c[f].r)}function l(){if(t){var c,f=t.length,h;for(n=new Array(f),c=0;c<f;++c)h=t[c],n[h.index]=+e(h,c,t)}}return s.initialize=function(c,f){t=c,r=f,l()},s.iterations=function(c){return arguments.length?(o=+c,s):o},s.strength=function(c){return arguments.length?(i=+c,s):i},s.radius=function(c){return arguments.length?(e=typeof c=="function"?c:sr(+c),l(),s):e},s}function Hie(e){return e.index}function TD(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Gie(e){var t=Hie,n=h,r,i=sr(30),o,s,a,l,c,f=1;e==null&&(e=[]);function h(_){return 1/Math.min(a[_.source.index],a[_.target.index])}function p(_){for(var b=0,S=e.length;b<f;++b)for(var A=0,C,k,N,$,O,D,P;A<S;++A)C=e[A],k=C.source,N=C.target,$=N.x+N.vx-k.x-k.vx||Na(c),O=N.y+N.vy-k.y-k.vy||Na(c),D=Math.sqrt($*$+O*O),D=(D-o[A])/D*_*r[A],$*=D,O*=D,N.vx-=$*(P=l[A]),N.vy-=O*P,k.vx+=$*(P=1-P),k.vy+=O*P}function m(){if(s){var _,b=s.length,S=e.length,A=new Map(s.map((k,N)=>[t(k,N,s),k])),C;for(_=0,a=new Array(b);_<S;++_)C=e[_],C.index=_,typeof C.source!="object"&&(C.source=TD(A,C.source)),typeof C.target!="object"&&(C.target=TD(A,C.target)),a[C.source.index]=(a[C.source.index]||0)+1,a[C.target.index]=(a[C.target.index]||0)+1;for(_=0,l=new Array(S);_<S;++_)C=e[_],l[_]=a[C.source.index]/(a[C.source.index]+a[C.target.index]);r=new Array(S),y(),o=new Array(S),v()}}function y(){if(s)for(var _=0,b=e.length;_<b;++_)r[_]=+n(e[_],_,e)}function v(){if(s)for(var _=0,b=e.length;_<b;++_)o[_]=+i(e[_],_,e)}return p.initialize=function(_,b){s=_,c=b,m()},p.links=function(_){return arguments.length?(e=_,m(),p):e},p.id=function(_){return arguments.length?(t=_,p):t},p.iterations=function(_){return arguments.length?(f=+_,p):f},p.strength=function(_){return arguments.length?(n=typeof _=="function"?_:sr(+_),y(),p):n},p.distance=function(_){return arguments.length?(i=typeof _=="function"?_:sr(+_),v(),p):i},p}var Yie={value:()=>{}};function yz(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Rm(n)}function Rm(e){this._=e}function qie(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Rm.prototype=yz.prototype={constructor:Rm,on:function(e,t){var n=this._,r=qie(e+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(e=r[o]).type)&&(i=Vie(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<s;)if(i=(e=r[o]).type)n[i]=RD(n[i],e.name,t);else if(t==null)for(i in n)n[i]=RD(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Rm(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function Vie(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function RD(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Yie,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var mf=0,Rh=0,ah=0,vz=1e3,K1,Lh,Z1=0,gu=0,Sv=0,yp=typeof performance=="object"&&performance.now?performance:Date,xz=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Dk(){return gu||(xz(Xie),gu=yp.now()+Sv)}function Xie(){gu=0}function ey(){this._call=this._time=this._next=null}ey.prototype=_z.prototype={constructor:ey,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Dk():+n)+(t==null?0:+t),!this._next&&Lh!==this&&(Lh?Lh._next=this:K1=this,Lh=this),this._call=e,this._time=n,NS()},stop:function(){this._call&&(this._call=null,this._time=1/0,NS())}};function _z(e,t,n){var r=new ey;return r.restart(e,t,n),r}function Jie(){Dk(),++mf;for(var e=K1,t;e;)(t=gu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--mf}function LD(){gu=(Z1=yp.now())+Sv,mf=Rh=0;try{Jie()}finally{mf=0,Kie(),gu=0}}function Qie(){var e=yp.now(),t=e-Z1;t>vz&&(Sv-=t,Z1=e)}function Kie(){for(var e,t=K1,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:K1=n);Lh=e,NS(r)}function NS(e){if(!mf){Rh&&(Rh=clearTimeout(Rh));var t=e-gu;t>24?(e<1/0&&(Rh=setTimeout(LD,e-yp.now()-Sv)),ah&&(ah=clearInterval(ah))):(ah||(Z1=yp.now(),ah=setInterval(Qie,vz)),mf=1,xz(LD))}}function Zie(e,t,n){var r=new ey,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,s,a){s=+s,a=a==null?Dk():+a,r._restart(function l(c){c+=i,r._restart(l,i+=s,a),o(c)},s,a)},r.restart(e,t,n),r)}const eoe=1664525,toe=1013904223,PD=4294967296;function noe(){let e=1;return()=>(e=(eoe*e+toe)%PD)/PD}function roe(e){return e.x}function ioe(e){return e.y}var ooe=10,soe=Math.PI*(3-Math.sqrt(5));function aoe(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=_z(h),c=yz("tick","end"),f=noe();e==null&&(e=[]);function h(){p(),c.call("tick",t),n<r&&(l.stop(),c.call("end",t))}function p(v){var _,b=e.length,S;v===void 0&&(v=1);for(var A=0;A<v;++A)for(n+=(o-n)*i,a.forEach(function(C){C(n)}),_=0;_<b;++_)S=e[_],S.fx==null?S.x+=S.vx*=s:(S.x=S.fx,S.vx=0),S.fy==null?S.y+=S.vy*=s:(S.y=S.fy,S.vy=0);return t}function m(){for(var v=0,_=e.length,b;v<_;++v){if(b=e[v],b.index=v,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var S=ooe*Math.sqrt(.5+v),A=v*soe;b.x=S*Math.cos(A),b.y=S*Math.sin(A)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function y(v){return v.initialize&&v.initialize(e,f),v}return m(),t={tick:p,restart:function(){return l.restart(h),t},stop:function(){return l.stop(),t},nodes:function(v){return arguments.length?(e=v,m(),a.forEach(y),t):e},alpha:function(v){return arguments.length?(n=+v,t):n},alphaMin:function(v){return arguments.length?(r=+v,t):r},alphaDecay:function(v){return arguments.length?(i=+v,t):+i},alphaTarget:function(v){return arguments.length?(o=+v,t):o},velocityDecay:function(v){return arguments.length?(s=1-v,t):1-s},randomSource:function(v){return arguments.length?(f=v,a.forEach(y),t):f},force:function(v,_){return arguments.length>1?(_==null?a.delete(v):a.set(v,y(_)),t):a.get(v)},find:function(v,_,b){var S=0,A=e.length,C,k,N,$,O;for(b==null?b=1/0:b*=b,S=0;S<A;++S)$=e[S],C=v-$.x,k=_-$.y,N=C*C+k*k,N<b&&(O=$,b=N);return O},on:function(v,_){return arguments.length>1?(c.on(v,_),t):c.on(v)}}}function loe(){var e,t,n,r,i=sr(-30),o,s=1,a=1/0,l=.81;function c(m){var y,v=e.length,_=Nk(e,roe,ioe).visitAfter(h);for(r=m,y=0;y<v;++y)t=e[y],_.visit(p)}function f(){if(e){var m,y=e.length,v;for(o=new Array(y),m=0;m<y;++m)v=e[m],o[v.index]=+i(v,m,e)}}function h(m){var y=0,v,_,b=0,S,A,C;if(m.length){for(S=A=C=0;C<4;++C)(v=m[C])&&(_=Math.abs(v.value))&&(y+=v.value,b+=_,S+=_*v.x,A+=_*v.y);m.x=S/b,m.y=A/b}else{v=m,v.x=v.data.x,v.y=v.data.y;do y+=o[v.data.index];while(v=v.next)}m.value=y}function p(m,y,v,_){if(!m.value)return!0;var b=m.x-t.x,S=m.y-t.y,A=_-y,C=b*b+S*S;if(A*A/l<C)return C<a&&(b===0&&(b=Na(n),C+=b*b),S===0&&(S=Na(n),C+=S*S),C<s&&(C=Math.sqrt(s*C)),t.vx+=b*m.value*r/C,t.vy+=S*m.value*r/C),!0;if(m.length||C>=a)return;(m.data!==t||m.next)&&(b===0&&(b=Na(n),C+=b*b),S===0&&(S=Na(n),C+=S*S),C<s&&(C=Math.sqrt(s*C)));do m.data!==t&&(A=o[m.data.index]*r/C,t.vx+=b*A,t.vy+=S*A);while(m=m.next)}return c.initialize=function(m,y){e=m,n=y,f()},c.strength=function(m){return arguments.length?(i=typeof m=="function"?m:sr(+m),f(),c):i},c.distanceMin=function(m){return arguments.length?(s=m*m,c):Math.sqrt(s)},c.distanceMax=function(m){return arguments.length?(a=m*m,c):Math.sqrt(a)},c.theta=function(m){return arguments.length?(l=m*m,c):Math.sqrt(l)},c}function uoe(e){var t=sr(.1),n,r,i;typeof e!="function"&&(e=sr(e==null?0:+e));function o(a){for(var l=0,c=n.length,f;l<c;++l)f=n[l],f.vx+=(i[l]-f.x)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:sr(+a),s(),o):t},o.x=function(a){return arguments.length?(e=typeof a=="function"?a:sr(+a),s(),o):e},o}function coe(e){var t=sr(.1),n,r,i;typeof e!="function"&&(e=sr(e==null?0:+e));function o(a){for(var l=0,c=n.length,f;l<c;++l)f=n[l],f.vy+=(i[l]-f.y)*r[l]*a}function s(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return o.initialize=function(a){n=a,s()},o.strength=function(a){return arguments.length?(t=typeof a=="function"?a:sr(+a),s(),o):t},o.y=function(a){return arguments.length?(e=typeof a=="function"?a:sr(+a),s(),o):e},o}const zD={center:Eie,collide:Bie,nbody:loe,link:Gie,x:uoe,y:coe},Ph="forces",OS=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],foe=["static","iterations"],bz=["x","y","vx","vy"];function Fk(e){K.call(this,null,e)}Fk.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:bz}]};ge(Fk,K,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(OS),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&wz(n,e,0,t)):(this.value=n=hoe(t.source,e),n.on("tick",doe(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(foe)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,c=a.length,f;l<c;++l)if(f=a[l],!(f.name!==Ph||f.op._argval.force!=="link")){for(var r=f.op._argops,i=0,o=r.length,s;i<o;++i)if(r[i].name==="links"&&(s=r[i].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(bz)}});function doe(e,t){return()=>e.touch(t).run()}function hoe(e,t){const n=aoe(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),wz(n,t,!0).on("end",()=>o=!0)}function wz(e,t,n,r){var i=_e(t.forces),o,s,a,l;for(o=0,s=OS.length;o<s;++o)a=OS[o],a!==Ph&&t.modified(a)&&e[a](t[a]);for(o=0,s=i.length;o<s;++o)l=Ph+o,a=n||t.modified(Ph,o)?goe(i[o]):r&&poe(i[o],r)?e.force(l):null,a&&e.force(l,a);for(s=e.numForces||0;o<s;++o)e.force(Ph+o,null);return e.numForces=i.length,e}function poe(e,t){var n,r;for(n in e)if(He(r=e[n])&&t.modified(Hn(r)))return 1;return 0}function goe(e){var t,n;we(zD,e.force)||Z("Unrecognized force: "+e.force),t=zD[e.force]();for(n in e)He(t[n])&&moe(t[n],e[n],e);return t}function moe(e,t,n){e(He(t)?r=>t(r,n):t)}const yoe=Object.freeze(Object.defineProperty({__proto__:null,force:Fk},Symbol.toStringTag,{value:"Module"}));function voe(e,t){return e.parent===t.parent?1:2}function xoe(e){return e.reduce(_oe,0)/e.length}function _oe(e,t){return e+t.x}function boe(e){return 1+e.reduce(woe,0)}function woe(e,t){return Math.max(e,t.y)}function Soe(e){for(var t;t=e.children;)e=t[0];return e}function Eoe(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Aoe(){var e=voe,t=1,n=1,r=!1;function i(o){var s,a=0;o.eachAfter(function(p){var m=p.children;m?(p.x=xoe(m),p.y=boe(m)):(p.x=s?a+=e(p,s):0,p.y=0,s=p)});var l=Soe(o),c=Eoe(o),f=l.x-e(l,c)/2,h=c.x+e(c,l)/2;return o.eachAfter(r?function(p){p.x=(p.x-o.x)*t,p.y=(o.y-p.y)*n}:function(p){p.x=(p.x-f)/(h-f)*t,p.y=(1-(o.y?p.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function Coe(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function koe(){return this.eachAfter(Coe)}function $oe(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Moe(e,t){for(var n=this,r=[n],i,o,s=-1;n=r.pop();)if(e.call(t,n,++s,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function Noe(e,t){for(var n=this,r=[n],i=[],o,s,a,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(s=0,a=o.length;s<a;++s)r.push(o[s]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function Ooe(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Doe(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Foe(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Toe(e){for(var t=this,n=Roe(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Roe(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Loe(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Poe(){return Array.from(this)}function zoe(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Ioe(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Uoe(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function Tk(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Boe)):t===void 0&&(t=joe);for(var n=new yf(e),r,i=[n],o,s,a,l;r=i.pop();)if((s=t(r.data))&&(l=(s=Array.from(s)).length))for(r.children=s,a=l-1;a>=0;--a)i.push(o=s[a]=new yf(s[a])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(Sz)}function Woe(){return Tk(this).eachBefore(Hoe)}function joe(e){return e.children}function Boe(e){return Array.isArray(e)?e[1]:null}function Hoe(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Sz(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function yf(e){this.data=e,this.depth=this.height=0,this.parent=null}yf.prototype=Tk.prototype={constructor:yf,count:koe,each:$oe,eachAfter:Noe,eachBefore:Moe,find:Ooe,sum:Doe,sort:Foe,path:Toe,ancestors:Loe,descendants:Poe,leaves:zoe,links:Ioe,copy:Woe,[Symbol.iterator]:Uoe};function Lm(e){return e==null?null:Ez(e)}function Ez(e){if(typeof e!="function")throw new Error;return e}function ql(){return 0}function Oc(e){return function(){return e}}const Goe=1664525,Yoe=1013904223,ID=4294967296;function qoe(){let e=1;return()=>(e=(Goe*e+Yoe)%ID)/ID}function Voe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Xoe(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Joe(e,t){for(var n=0,r=(e=Xoe(Array.from(e),t)).length,i=[],o,s;n<r;)o=e[n],s&&Az(s,o)?++n:(s=Koe(i=Qoe(i,o)),n=0);return s}function Qoe(e,t){var n,r;if(cb(t,e))return[t];for(n=0;n<e.length;++n)if(tm(t,e[n])&&cb(zh(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(tm(zh(e[n],e[r]),t)&&tm(zh(e[n],t),e[r])&&tm(zh(e[r],t),e[n])&&cb(Cz(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function tm(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function Az(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function cb(e,t){for(var n=0;n<t.length;++n)if(!Az(e,t[n]))return!1;return!0}function Koe(e){switch(e.length){case 1:return Zoe(e[0]);case 2:return zh(e[0],e[1]);case 3:return Cz(e[0],e[1],e[2])}}function Zoe(e){return{x:e.x,y:e.y,r:e.r}}function zh(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,s=t.y,a=t.r,l=o-n,c=s-r,f=a-i,h=Math.sqrt(l*l+c*c);return{x:(n+o+l/h*f)/2,y:(r+s+c/h*f)/2,r:(h+i+a)/2}}function Cz(e,t,n){var r=e.x,i=e.y,o=e.r,s=t.x,a=t.y,l=t.r,c=n.x,f=n.y,h=n.r,p=r-s,m=r-c,y=i-a,v=i-f,_=l-o,b=h-o,S=r*r+i*i-o*o,A=S-s*s-a*a+l*l,C=S-c*c-f*f+h*h,k=m*y-p*v,N=(y*C-v*A)/(k*2)-r,$=(v*_-y*b)/k,O=(m*A-p*C)/(k*2)-i,D=(p*b-m*_)/k,P=$*$+D*D-1,R=2*(o+N*$+O*D),X=N*N+O*O-o*o,B=-(Math.abs(P)>1e-6?(R+Math.sqrt(R*R-4*P*X))/(2*P):X/R);return{x:r+N+$*B,y:i+O+D*B,r:B}}function UD(e,t,n){var r=e.x-t.x,i,o,s=e.y-t.y,a,l,c=r*r+s*s;c?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(i=(c+l-o)/(2*c),a=Math.sqrt(Math.max(0,l/c-i*i)),n.x=e.x-i*r-a*s,n.y=e.y-i*s+a*r):(i=(c+o-l)/(2*c),a=Math.sqrt(Math.max(0,o/c-i*i)),n.x=t.x+i*r-a*s,n.y=t.y+i*s+a*r)):(n.x=t.x+n.r,n.y=t.y)}function WD(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function jD(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function nm(e){this._=e,this.next=null,this.previous=null}function ese(e,t){if(!(o=(e=Voe(e)).length))return 0;var n,r,i,o,s,a,l,c,f,h,p;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;UD(r,n,i=e[2]),n=new nm(n),r=new nm(r),i=new nm(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<o;++l){UD(n._,r._,i=e[l]),i=new nm(i),c=r.next,f=n.previous,h=r._.r,p=n._.r;do if(h<=p){if(WD(c._,i._)){r=c,n.next=r,r.previous=n,--l;continue e}h+=c._.r,c=c.next}else{if(WD(f._,i._)){n=f,n.next=r,r.previous=n,--l;continue e}p+=f._.r,f=f.previous}while(c!==f.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,s=jD(n);(i=i.next)!==r;)(a=jD(i))<s&&(n=i,s=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Joe(n,t),l=0;l<o;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function tse(e){return Math.sqrt(e.value)}function nse(){var e=null,t=1,n=1,r=ql;function i(o){const s=qoe();return o.x=t/2,o.y=n/2,e?o.eachBefore(BD(e)).eachAfter(fb(r,.5,s)).eachBefore(HD(1)):o.eachBefore(BD(tse)).eachAfter(fb(ql,1,s)).eachAfter(fb(r,o.r/Math.min(t,n),s)).eachBefore(HD(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=Lm(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:Oc(+o),i):r},i}function BD(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function fb(e,t,n){return function(r){if(i=r.children){var i,o,s=i.length,a=e(r)*t||0,l;if(a)for(o=0;o<s;++o)i[o].r+=a;if(l=ese(i,n),a)for(o=0;o<s;++o)i[o].r-=a;r.r=l+a}}}function HD(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function kz(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function rg(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,c=e.value&&(r-t)/e.value;++a<l;)s=o[a],s.y0=n,s.y1=i,s.x0=t,s.x1=t+=s.value*c}function rse(){var e=1,t=1,n=0,r=!1;function i(s){var a=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/a,s.eachBefore(o(t,a)),r&&s.eachBefore(kz),s}function o(s,a){return function(l){l.children&&rg(l,l.x0,s*(l.depth+1)/a,l.x1,s*(l.depth+2)/a);var c=l.x0,f=l.y0,h=l.x1-n,p=l.y1-n;h<c&&(c=h=(c+h)/2),p<f&&(f=p=(f+p)/2),l.x0=c,l.y0=f,l.x1=h,l.y1=p}}return i.round=function(s){return arguments.length?(r=!!s,i):r},i.size=function(s){return arguments.length?(e=+s[0],t=+s[1],i):[e,t]},i.padding=function(s){return arguments.length?(n=+s,i):n},i}var ise={depth:-1},GD={},db={};function ose(e){return e.id}function sse(e){return e.parentId}function YD(){var e=ose,t=sse,n;function r(i){var o=Array.from(i),s=e,a=t,l,c,f,h,p,m,y,v,_=new Map;if(n!=null){const b=o.map((C,k)=>ase(n(C,k,i))),S=b.map(qD),A=new Set(b).add("");for(const C of S)A.has(C)||(A.add(C),b.push(C),S.push(qD(C)),o.push(db));s=(C,k)=>b[k],a=(C,k)=>S[k]}for(f=0,l=o.length;f<l;++f)c=o[f],m=o[f]=new yf(c),(y=s(c,f,i))!=null&&(y+="")&&(v=m.id=y,_.set(v,_.has(v)?GD:m)),(y=a(c,f,i))!=null&&(y+="")&&(m.parent=y);for(f=0;f<l;++f)if(m=o[f],y=m.parent){if(p=_.get(y),!p)throw new Error("missing: "+y);if(p===GD)throw new Error("ambiguous: "+y);p.children?p.children.push(m):p.children=[m],m.parent=p}else{if(h)throw new Error("multiple roots");h=m}if(!h)throw new Error("no root");if(n!=null){for(;h.data===db&&h.children.length===1;)h=h.children[0],--l;for(let b=o.length-1;b>=0&&(m=o[b],m.data===db);--b)m.data=null}if(h.parent=ise,h.eachBefore(function(b){b.depth=b.parent.depth+1,--l}).eachBefore(Sz),h.parent=null,l>0)throw new Error("cycle");return h}return r.id=function(i){return arguments.length?(e=Lm(i),r):e},r.parentId=function(i){return arguments.length?(t=Lm(i),r):t},r.path=function(i){return arguments.length?(n=Lm(i),r):n},r}function ase(e){e=`${e}`;let t=e.length;return DS(e,t-1)&&!DS(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function qD(e){let t=e.length;if(t<2)return"";for(;--t>1&&!DS(e,t););return e.slice(0,t)}function DS(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function lse(e,t){return e.parent===t.parent?1:2}function hb(e){var t=e.children;return t?t[0]:e.t}function pb(e){var t=e.children;return t?t[t.length-1]:e.t}function use(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function cse(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function fse(e,t,n){return e.a.parent===t.parent?e.a:n}function Pm(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}Pm.prototype=Object.create(yf.prototype);function dse(e){for(var t=new Pm(e,0),n,r=[t],i,o,s,a;n=r.pop();)if(o=n._.children)for(n.children=new Array(a=o.length),s=a-1;s>=0;--s)r.push(i=n.children[s]=new Pm(o[s],s)),i.parent=n;return(t.parent=new Pm(null,0)).children=[t],t}function hse(){var e=lse,t=1,n=1,r=null;function i(c){var f=dse(c);if(f.eachAfter(o),f.parent.m=-f.z,f.eachBefore(s),r)c.eachBefore(l);else{var h=c,p=c,m=c;c.eachBefore(function(S){S.x<h.x&&(h=S),S.x>p.x&&(p=S),S.depth>m.depth&&(m=S)});var y=h===p?1:e(h,p)/2,v=y-h.x,_=t/(p.x+y+v),b=n/(m.depth||1);c.eachBefore(function(S){S.x=(S.x+v)*_,S.y=S.depth*b})}return c}function o(c){var f=c.children,h=c.parent.children,p=c.i?h[c.i-1]:null;if(f){cse(c);var m=(f[0].z+f[f.length-1].z)/2;p?(c.z=p.z+e(c._,p._),c.m=c.z-m):c.z=m}else p&&(c.z=p.z+e(c._,p._));c.parent.A=a(c,p,c.parent.A||h[0])}function s(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function a(c,f,h){if(f){for(var p=c,m=c,y=f,v=p.parent.children[0],_=p.m,b=m.m,S=y.m,A=v.m,C;y=pb(y),p=hb(p),y&&p;)v=hb(v),m=pb(m),m.a=c,C=y.z+S-p.z-_+e(y._,p._),C>0&&(use(fse(y,c,h),c,C),_+=C,b+=C),S+=y.m,_+=p.m,A+=v.m,b+=m.m;y&&!pb(m)&&(m.t=y,m.m+=S-b),p&&!hb(v)&&(v.t=p,v.m+=_-A,h=c)}return h}function l(c){c.x*=t,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(e=c,i):e},i.size=function(c){return arguments.length?(r=!1,t=+c[0],n=+c[1],i):r?null:[t,n]},i.nodeSize=function(c){return arguments.length?(r=!0,t=+c[0],n=+c[1],i):r?[t,n]:null},i}function Ev(e,t,n,r,i){for(var o=e.children,s,a=-1,l=o.length,c=e.value&&(i-n)/e.value;++a<l;)s=o[a],s.x0=t,s.x1=r,s.y0=n,s.y1=n+=s.value*c}var $z=(1+Math.sqrt(5))/2;function Mz(e,t,n,r,i,o){for(var s=[],a=t.children,l,c,f=0,h=0,p=a.length,m,y,v=t.value,_,b,S,A,C,k,N;f<p;){m=i-n,y=o-r;do _=a[h++].value;while(!_&&h<p);for(b=S=_,k=Math.max(y/m,m/y)/(v*e),N=_*_*k,C=Math.max(S/N,N/b);h<p;++h){if(_+=c=a[h].value,c<b&&(b=c),c>S&&(S=c),N=_*_*k,A=Math.max(S/N,N/b),A>C){_-=c;break}C=A}s.push(l={value:_,dice:m<y,children:a.slice(f,h)}),l.dice?rg(l,n,r,i,v?r+=y*_/v:o):Ev(l,n,r,v?n+=m*_/v:i,o),v-=_,f=h}return s}const Nz=(function e(t){function n(r,i,o,s,a){Mz(t,r,i,o,s,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n})($z);function pse(){var e=Nz,t=!1,n=1,r=1,i=[0],o=ql,s=ql,a=ql,l=ql,c=ql;function f(p){return p.x0=p.y0=0,p.x1=n,p.y1=r,p.eachBefore(h),i=[0],t&&p.eachBefore(kz),p}function h(p){var m=i[p.depth],y=p.x0+m,v=p.y0+m,_=p.x1-m,b=p.y1-m;_<y&&(y=_=(y+_)/2),b<v&&(v=b=(v+b)/2),p.x0=y,p.y0=v,p.x1=_,p.y1=b,p.children&&(m=i[p.depth+1]=o(p)/2,y+=c(p)-m,v+=s(p)-m,_-=a(p)-m,b-=l(p)-m,_<y&&(y=_=(y+_)/2),b<v&&(v=b=(v+b)/2),e(p,y,v,_,b))}return f.round=function(p){return arguments.length?(t=!!p,f):t},f.size=function(p){return arguments.length?(n=+p[0],r=+p[1],f):[n,r]},f.tile=function(p){return arguments.length?(e=Ez(p),f):e},f.padding=function(p){return arguments.length?f.paddingInner(p).paddingOuter(p):f.paddingInner()},f.paddingInner=function(p){return arguments.length?(o=typeof p=="function"?p:Oc(+p),f):o},f.paddingOuter=function(p){return arguments.length?f.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):f.paddingTop()},f.paddingTop=function(p){return arguments.length?(s=typeof p=="function"?p:Oc(+p),f):s},f.paddingRight=function(p){return arguments.length?(a=typeof p=="function"?p:Oc(+p),f):a},f.paddingBottom=function(p){return arguments.length?(l=typeof p=="function"?p:Oc(+p),f):l},f.paddingLeft=function(p){return arguments.length?(c=typeof p=="function"?p:Oc(+p),f):c},f}function gse(e,t,n,r,i){var o=e.children,s,a=o.length,l,c=new Array(a+1);for(c[0]=l=s=0;s<a;++s)c[s+1]=l+=o[s].value;f(0,a,e.value,t,n,r,i);function f(h,p,m,y,v,_,b){if(h>=p-1){var S=o[h];S.x0=y,S.y0=v,S.x1=_,S.y1=b;return}for(var A=c[h],C=m/2+A,k=h+1,N=p-1;k<N;){var $=k+N>>>1;c[$]<C?k=$+1:N=$}C-c[k-1]<c[k]-C&&h+1<k&&--k;var O=c[k]-A,D=m-O;if(_-y>b-v){var P=m?(y*D+_*O)/m:_;f(h,k,O,y,v,P,b),f(k,p,D,P,v,_,b)}else{var R=m?(v*D+b*O)/m:b;f(h,k,O,y,v,_,R),f(k,p,D,y,R,_,b)}}}function mse(e,t,n,r,i){(e.depth&1?Ev:rg)(e,t,n,r,i)}const yse=(function e(t){function n(r,i,o,s,a){if((l=r._squarify)&&l.ratio===t)for(var l,c,f,h,p=-1,m,y=l.length,v=r.value;++p<y;){for(c=l[p],f=c.children,h=c.value=0,m=f.length;h<m;++h)c.value+=f[h].value;c.dice?rg(c,i,o,s,v?o+=(a-o)*c.value/v:a):Ev(c,i,o,v?i+=(s-i)*c.value/v:s,a),v-=c.value}else r._squarify=l=Mz(t,r,i,o,s,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n})($z);function FS(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function Rk(e){K.call(this,null,e)}Rk.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const vse=e=>e.values;ge(Rk,K,{transform(e,t){t.source||Z("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(s=>{s.children&&zy(s.data)&&i.rem.push(s.data)}),this.value=o=Tk({values:_e(e.keys).reduce((s,a)=>(s.key(a),s),xse()).entries(i.source)},vse),n&&o.each(s=>{s.children&&(s=ut(s.data),i.add.push(s),i.source.push(s))}),FS(o,De,De)),i.source.root=o,i}});function xse(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const s=i.length,a=e[o++],l={},c={};let f=-1,h,p,m;for(;++f<s;)h=a(p=i[f])+"",(m=l[h])?m.push(p):l[h]=[p];for(h in l)c[h]=n(l[h],o);return c}function r(i,o){if(++o>e.length)return i;const s=[];for(const a in i)s.push({key:a,values:r(i[a],o)});return s}return t}function Ws(e){K.call(this,null,e)}const _se=(e,t)=>e.parent===t.parent?1:2;ge(Ws,K,{transform(e,t){(!t.source||!t.source.root)&&Z(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Du(e.sort,s=>s.data)),bse(n,this.params,e),n.separation&&n.separation(e.separation!==!1?_se:Rf);try{this.value=n(i)}catch(s){Z(s)}return i.each(s=>wse(s,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function bse(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function wse(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const TS=["x","y","r","depth","children"];function Lk(e){Ws.call(this,e)}Lk.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:TS.length,default:TS}]};ge(Lk,Ws,{layout:nse,params:["radius","size","padding"],fields:TS});const RS=["x0","y0","x1","y1","depth","children"];function Pk(e){Ws.call(this,e)}Pk.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:RS.length,default:RS}]};ge(Pk,Ws,{layout:rse,params:["size","round","padding"],fields:RS});function zk(e){K.call(this,null,e)}zk.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ge(zk,K,{transform(e,t){t.source||Z("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?FS(YD().id(e.key).parentId(e.parentKey)(i.source),e.key,xi):FS(YD()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const VD={tidy:hse,cluster:Aoe},LS=["x","y","depth","children"];function Ik(e){Ws.call(this,e)}Ik.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:LS.length,default:LS}]};ge(Ik,Ws,{layout(e){const t=e||"tidy";if(we(VD,t))return VD[t]();Z("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:LS});function Uk(e){K.call(this,[],e)}Uk.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ge(Uk,K,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||Z("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,s=>o[De(s)]=1),r.each(s=>{const a=s.data,l=s.parent&&s.parent.data;l&&o[De(a)]&&o[De(l)]&&i.add.push(ut({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>o[De(s)]=1),n.forEach(s=>{(o[De(s.source)]||o[De(s.target)])&&i.mod.push(s)})),i}});const XD={binary:gse,dice:rg,slice:Ev,slicedice:mse,squarify:Nz,resquarify:yse},PS=["x0","y0","x1","y1","depth","children"];function Wk(e){Ws.call(this,e)}Wk.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:PS.length,default:PS}]};ge(Wk,Ws,{layout(){const e=pse();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{we(XD,t)?e.tile(XD[t]):Z("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:PS});const Sse=Object.freeze(Object.defineProperty({__proto__:null,nest:Rk,pack:Lk,partition:Pk,stratify:zk,tree:Ik,treelinks:Uk,treemap:Wk},Symbol.toStringTag,{value:"Module"})),gb=4278190080;function Ese(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function Ase(e,t,n,r,i){const o=e.width,s=e.height,a=r||i,l=La(o,s).getContext("2d"),c=La(o,s).getContext("2d"),f=a&&La(o,s).getContext("2d");n.forEach(O=>zm(l,O,!1)),zm(c,t,!1),a&&zm(f,t,!0);const h=mb(l,o,s),p=mb(c,o,s),m=a&&mb(f,o,s),y=e.bitmap(),v=a&&e.bitmap();let _,b,S,A,C,k,N,$;for(b=0;b<s;++b)for(_=0;_<o;++_)C=b*o+_,k=h[C]&gb,$=p[C]&gb,N=a&&m[C]&gb,(k||N||$)&&(S=e(_),A=e(b),!i&&(k||$)&&y.set(S,A),a&&(k||N)&&v.set(S,A));return[y,v]}function mb(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function zm(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>zm(e,o.items,n))}):Zr[r].draw(e,{items:n?t.map(Cse):t})}function Cse(e){const t=Iy(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const hs=5,Kn=31,vp=32,ba=new Uint32Array(vp+1),Wi=new Uint32Array(vp+1);Wi[0]=0;ba[0]=~Wi[0];for(let e=1;e<=vp;++e)Wi[e]=Wi[e-1]<<1|1,ba[e]=~Wi[e];function kse(e,t){const n=new Uint32Array(~~((e*t+vp)/vp));function r(o,s){n[o]|=s}function i(o,s){n[o]&=s}return{array:n,get:(o,s)=>{const a=s*e+o;return n[a>>>hs]&1<<(a&Kn)},set:(o,s)=>{const a=s*e+o;r(a>>>hs,1<<(a&Kn))},clear:(o,s)=>{const a=s*e+o;i(a>>>hs,~(1<<(a&Kn)))},getRange:(o,s,a,l)=>{let c=l,f,h,p,m;for(;c>=s;--c)if(f=c*e+o,h=c*e+a,p=f>>>hs,m=h>>>hs,p===m){if(n[p]&ba[f&Kn]&Wi[(h&Kn)+1])return!0}else{if(n[p]&ba[f&Kn]||n[m]&Wi[(h&Kn)+1])return!0;for(let y=p+1;y<m;++y)if(n[y])return!0}return!1},setRange:(o,s,a,l)=>{let c,f,h,p,m;for(;s<=l;++s)if(c=s*e+o,f=s*e+a,h=c>>>hs,p=f>>>hs,h===p)r(h,ba[c&Kn]&Wi[(f&Kn)+1]);else for(r(h,ba[c&Kn]),r(p,Wi[(f&Kn)+1]),m=h+1;m<p;++m)r(m,4294967295)},clearRange:(o,s,a,l)=>{let c,f,h,p,m;for(;s<=l;++s)if(c=s*e+o,f=s*e+a,h=c>>>hs,p=f>>>hs,h===p)i(h,Wi[c&Kn]|ba[(f&Kn)+1]);else for(i(h,Wi[c&Kn]),i(p,ba[(f&Kn)+1]),m=h+1;m<p;++m)i(m,0)},outOfBounds:(o,s,a,l)=>o<0||s<0||l>=t||a>=e}}function $se(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),s=a=>~~((a+n)/r);return s.invert=a=>a*r-n,s.bitmap=()=>kse(i,o),s.ratio=r,s.padding=n,s.width=e,s.height=t,s}function Mse(e,t,n,r){const i=e.width,o=e.height;return function(s){const a=s.datum.datum.items[r].items,l=a.length,c=s.datum.fontSize,f=qr.width(s.datum,s.datum.text);let h=0,p,m,y,v,_,b,S;for(let A=0;A<l;++A)p=a[A].x,y=a[A].y,m=a[A].x2===void 0?p:a[A].x2,v=a[A].y2===void 0?y:a[A].y2,_=(p+m)/2,b=(y+v)/2,S=Math.abs(m-p+v-y),S>=h&&(h=S,s.x=_,s.y=b);return _=f/2,b=c/2,p=s.x-_,m=s.x+_,y=s.y-b,v=s.y+b,s.align="center",p<0&&m<=i?s.align="left":0<=p&&i<m&&(s.align="right"),s.baseline="middle",y<0&&v<=o?s.baseline="top":0<=y&&o<v&&(s.baseline="bottom"),!0}}function ty(e,t,n,r,i,o){let s=n/2;return e-s<0||e+s>i||t-(s=r/2)<0||t+s>o}function Oa(e,t,n,r,i,o,s,a){const l=i*o/(r*2),c=e(t-l),f=e(t+l),h=e(n-(o=o/2)),p=e(n+o);return s.outOfBounds(c,h,f,p)||s.getRange(c,h,f,p)||a&&a.getRange(c,h,f,p)}function Nse(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1];function l(c,f,h,p,m){const y=e.invert(c),v=e.invert(f);let _=h,b=o,S;if(!ty(y,v,p,m,i,o)&&!Oa(e,y,v,m,p,_,s,a)&&!Oa(e,y,v,m,p,m,s,null)){for(;b-_>=1;)S=(_+b)/2,Oa(e,y,v,m,p,S,s,a)?b=S:_=S;if(_>h)return[y,v,_,!0]}}return function(c){const f=c.datum.datum.items[r].items,h=f.length,p=c.datum.fontSize,m=qr.width(c.datum,c.datum.text);let y=n?p:0,v=!1,_=!1,b=0,S,A,C,k,N,$,O,D,P,R,X,B,I,F,W,V,j;for(let H=0;H<h;++H){for(S=f[H].x,C=f[H].y,A=f[H].x2===void 0?S:f[H].x2,k=f[H].y2===void 0?C:f[H].y2,S>A&&(j=S,S=A,A=j),C>k&&(j=C,C=k,k=j),P=e(S),X=e(A),R=~~((P+X)/2),B=e(C),F=e(k),I=~~((B+F)/2),O=R;O>=P;--O)for(D=I;D>=B;--D)V=l(O,D,y,m,p),V&&([c.x,c.y,y,v]=V);for(O=R;O<=X;++O)for(D=I;D<=F;++D)V=l(O,D,y,m,p),V&&([c.x,c.y,y,v]=V);!v&&!n&&(W=Math.abs(A-S+k-C),N=(S+A)/2,$=(C+k)/2,W>=b&&!ty(N,$,m,p,i,o)&&!Oa(e,N,$,p,m,p,s,null)&&(b=W,c.x=N,c.y=$,_=!0))}return v||_?(N=m/2,$=p/2,s.setRange(e(c.x-N),e(c.y-$),e(c.x+N),e(c.y+$)),c.align="center",c.baseline="middle",!0):!1}}const Ose=[-1,-1,1,1],Dse=[-1,1,-1,1];function Fse(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=e.bitmap();return function(c){const f=c.datum.datum.items[r].items,h=f.length,p=c.datum.fontSize,m=qr.width(c.datum,c.datum.text),y=[];let v=n?p:0,_=!1,b=!1,S=0,A,C,k,N,$,O,D,P,R,X,B,I;for(let F=0;F<h;++F){for(A=f[F].x,k=f[F].y,C=f[F].x2===void 0?A:f[F].x2,N=f[F].y2===void 0?k:f[F].y2,y.push([e((A+C)/2),e((k+N)/2)]);y.length;)if([D,P]=y.pop(),!(s.get(D,P)||a.get(D,P)||l.get(D,P))){l.set(D,P);for(let W=0;W<4;++W)$=D+Ose[W],O=P+Dse[W],l.outOfBounds($,O,$,O)||y.push([$,O]);if($=e.invert(D),O=e.invert(P),R=v,X=o,!ty($,O,m,p,i,o)&&!Oa(e,$,O,p,m,R,s,a)&&!Oa(e,$,O,p,m,p,s,null)){for(;X-R>=1;)B=(R+X)/2,Oa(e,$,O,p,m,B,s,a)?X=B:R=B;R>v&&(c.x=$,c.y=O,v=R,_=!0)}}!_&&!n&&(I=Math.abs(C-A+N-k),$=(A+C)/2,O=(k+N)/2,I>=S&&!ty($,O,m,p,i,o)&&!Oa(e,$,O,p,m,p,s,null)&&(S=I,c.x=$,c.y=O,b=!0))}return _||b?($=m/2,O=p/2,s.setRange(e(c.x-$),e(c.y-O),e(c.x+$),e(c.y+O)),c.align="center",c.baseline="middle",!0):!1}}const Tse=["right","center","left"],Rse=["bottom","middle","top"];function Lse(e,t,n,r){const i=e.width,o=e.height,s=t[0],a=t[1],l=r.length;return function(c){const f=c.boundary,h=c.datum.fontSize;if(f[2]<0||f[5]<0||f[0]>i||f[3]>o)return!1;let p=c.textWidth??0,m,y,v,_,b,S,A,C,k,N,$,O,D,P,R;for(let X=0;X<l;++X){if(m=(n[X]&3)-1,y=(n[X]>>>2&3)-1,v=m===0&&y===0||r[X]<0,_=m&&y?Math.SQRT1_2:1,b=r[X]<0?-1:1,S=f[1+m]+r[X]*m*_,$=f[4+y]+b*h*y/2+r[X]*y*_,C=$-h/2,k=$+h/2,O=e(S),P=e(C),R=e(k),!p)if(JD(O,O,P,R,s,a,S,S,C,k,f,v))p=qr.width(c.datum,c.datum.text);else continue;if(N=S+b*p*m/2,S=N-p/2,A=N+p/2,O=e(S),D=e(A),JD(O,D,P,R,s,a,S,A,C,k,f,v))return c.x=m?m*b<0?A:S:N,c.y=y?y*b<0?k:C:$,c.align=Tse[m*b+1],c.baseline=Rse[y*b+1],s.setRange(O,P,D,R),!0}return!1}}function JD(e,t,n,r,i,o,s,a,l,c,f,h){return!(i.outOfBounds(e,n,t,r)||(h&&o||i).getRange(e,n,t,r))}const yb=0,vb=4,xb=8,_b=0,bb=1,wb=2,Pse={"top-left":yb+_b,top:yb+bb,"top-right":yb+wb,left:vb+_b,middle:vb+bb,right:vb+wb,"bottom-left":xb+_b,bottom:xb+bb,"bottom-right":xb+wb},zse={naive:Mse,"reduced-search":Nse,floodfill:Fse};function Ise(e,t,n,r,i,o,s,a,l,c,f){if(!e.length)return e;const h=Math.max(r.length,i.length),p=Use(r,h),m=Wse(i,h),y=jse(e[0].datum),v=y==="group"&&e[0].datum.items[l].marktype,_=v==="area",b=Bse(y,v,a,l),S=c===null||c===1/0,A=_&&f==="naive";let C=-1,k=-1;const N=e.map(P=>{const R=S?qr.width(P,P.text):void 0;return C=Math.max(C,R),k=Math.max(k,P.fontSize),{datum:P,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(P),textWidth:R}});c=c===null||c===1/0?Math.max(C,k)+Math.max(...r):c;const $=$se(t[0],t[1],c);let O;if(!A){n&&N.sort((X,B)=>n(X.datum,B.datum));let P=!1;for(let X=0;X<m.length&&!P;++X)P=m[X]===5||p[X]<0;const R=(y&&s||_)&&e.map(X=>X.datum);O=o.length||R?Ase($,R||[],o,P,_):Ese($,s&&N)}const D=_?zse[f]($,O,s,l):Lse($,O,m,p);return N.forEach(P=>P.opacity=+D(P)),N}function Use(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Wse(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=Pse[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function jse(e){return e&&e.mark&&e.mark.marktype}function Bse(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const s=o.datum.items[r].items;return i(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:o=>{const s=o.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:i}const zS=["x","y","opacity","align","baseline"],Oz=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function jk(e){K.call(this,null,e)}jk.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:Oz},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:zS.length,default:zS}]};ge(jk,K,{transform(e,t){function n(o){const s=e[o];return He(s)&&t.modified(s.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Z("Size parameter should be specified as a [width, height] array.");const i=e.as||zS;return Ise(t.materialize(t.SOURCE).source||[],e.size,e.sort,_e(e.offset==null?1:e.offset),_e(e.anchor||Oz),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const s=o.datum;s[i[0]]=o.x,s[i[1]]=o.y,s[i[2]]=o.opacity,s[i[3]]=o.align,s[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const Hse=Object.freeze(Object.defineProperty({__proto__:null,label:jk},Symbol.toStringTag,{value:"Module"}));function Dz(e,t){var n=[],r=function(f){return f(a)},i,o,s,a,l,c;if(t==null)n.push(e);else for(i={},o=0,s=e.length;o<s;++o)a=e[o],l=t.map(r),c=i[l],c||(i[l]=c=[],c.dims=l,n.push(c)),c.push(a);return n}function Bk(e){K.call(this,null,e)}Bk.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ge(Bk,K,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Dz(r,e.groupby),o=(e.groupby||[]).map(Ut),s=o.length,a=e.as||[Ut(e.x),Ut(e.y)],l=[];i.forEach(c=>{U7(c,e.x,e.y,e.bandwidth||.3).forEach(f=>{const h={};for(let p=0;p<s;++p)h[o[p]]=c.dims[p];h[a[0]]=f[0],h[a[1]]=f[1],l.push(ut(h))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const IS={constant:EA,linear:AA,log:L7,exp:P7,pow:z7,quad:CA,poly:I7},Gse=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Hk(e){K.call(this,null,e)}Hk.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(IS)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ge(Hk,K,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Dz(r,e.groupby),o=(e.groupby||[]).map(Ut),s=e.method||"linear",a=e.order==null?3:e.order,l=Gse(s,a),c=e.as||[Ut(e.x),Ut(e.y)],f=IS[s],h=[];let p=e.extent;we(IS,s)||Z("Invalid regression method: "+s),p!=null&&s==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),i.forEach(m=>{if(m.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const v=f(m,e.x,e.y,a);if(e.params){h.push(ut({keys:m.dims,coef:v.coef,rSquared:v.rSquared}));return}const _=p||Ro(m,e.x),b=S=>{const A={};for(let C=0;C<o.length;++C)A[o[C]]=m.dims[C];A[c[0]]=S[0],A[c[1]]=S[1],h.push(ut(A))};s==="linear"||s==="constant"?_.forEach(S=>b([S,v.predict(S)])):Yy(v.predict,_,25,200).forEach(b)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=h}return n}});const Yse=Object.freeze(Object.defineProperty({__proto__:null,loess:Bk,regression:Hk},Symbol.toStringTag,{value:"Module"})),$s=11102230246251565e-32,Pn=134217729,qse=(3+8*$s)*$s;function Sb(e,t,n,r,i){let o,s,a,l,c=t[0],f=r[0],h=0,p=0;f>c==f>-c?(o=c,c=t[++h]):(o=f,f=r[++p]);let m=0;if(h<e&&p<n)for(f>c==f>-c?(s=c+o,a=o-(s-c),c=t[++h]):(s=f+o,a=o-(s-f),f=r[++p]),o=s,a!==0&&(i[m++]=a);h<e&&p<n;)f>c==f>-c?(s=o+c,l=s-o,a=o-(s-l)+(c-l),c=t[++h]):(s=o+f,l=s-o,a=o-(s-l)+(f-l),f=r[++p]),o=s,a!==0&&(i[m++]=a);for(;h<e;)s=o+c,l=s-o,a=o-(s-l)+(c-l),c=t[++h],o=s,a!==0&&(i[m++]=a);for(;p<n;)s=o+f,l=s-o,a=o-(s-l)+(f-l),f=r[++p],o=s,a!==0&&(i[m++]=a);return(o!==0||m===0)&&(i[m++]=o),m}function Vse(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function ig(e){return new Float64Array(e)}const Xse=(3+16*$s)*$s,Jse=(2+12*$s)*$s,Qse=(9+64*$s)*$s*$s,Ac=ig(4),QD=ig(8),KD=ig(12),ZD=ig(16),Zn=ig(4);function Kse(e,t,n,r,i,o,s){let a,l,c,f,h,p,m,y,v,_,b,S,A,C,k,N,$,O;const D=e-i,P=n-i,R=t-o,X=r-o;C=D*X,p=Pn*D,m=p-(p-D),y=D-m,p=Pn*X,v=p-(p-X),_=X-v,k=y*_-(C-m*v-y*v-m*_),N=R*P,p=Pn*R,m=p-(p-R),y=R-m,p=Pn*P,v=p-(p-P),_=P-v,$=y*_-(N-m*v-y*v-m*_),b=k-$,h=k-b,Ac[0]=k-(b+h)+(h-$),S=C+b,h=S-C,A=C-(S-h)+(b-h),b=A-N,h=A-b,Ac[1]=A-(b+h)+(h-N),O=S+b,h=O-S,Ac[2]=S-(O-h)+(b-h),Ac[3]=O;let B=Vse(4,Ac),I=Jse*s;if(B>=I||-B>=I||(h=e-D,a=e-(D+h)+(h-i),h=n-P,c=n-(P+h)+(h-i),h=t-R,l=t-(R+h)+(h-o),h=r-X,f=r-(X+h)+(h-o),a===0&&l===0&&c===0&&f===0)||(I=Qse*s+qse*Math.abs(B),B+=D*f+X*a-(R*c+P*l),B>=I||-B>=I))return B;C=a*X,p=Pn*a,m=p-(p-a),y=a-m,p=Pn*X,v=p-(p-X),_=X-v,k=y*_-(C-m*v-y*v-m*_),N=l*P,p=Pn*l,m=p-(p-l),y=l-m,p=Pn*P,v=p-(p-P),_=P-v,$=y*_-(N-m*v-y*v-m*_),b=k-$,h=k-b,Zn[0]=k-(b+h)+(h-$),S=C+b,h=S-C,A=C-(S-h)+(b-h),b=A-N,h=A-b,Zn[1]=A-(b+h)+(h-N),O=S+b,h=O-S,Zn[2]=S-(O-h)+(b-h),Zn[3]=O;const F=Sb(4,Ac,4,Zn,QD);C=D*f,p=Pn*D,m=p-(p-D),y=D-m,p=Pn*f,v=p-(p-f),_=f-v,k=y*_-(C-m*v-y*v-m*_),N=R*c,p=Pn*R,m=p-(p-R),y=R-m,p=Pn*c,v=p-(p-c),_=c-v,$=y*_-(N-m*v-y*v-m*_),b=k-$,h=k-b,Zn[0]=k-(b+h)+(h-$),S=C+b,h=S-C,A=C-(S-h)+(b-h),b=A-N,h=A-b,Zn[1]=A-(b+h)+(h-N),O=S+b,h=O-S,Zn[2]=S-(O-h)+(b-h),Zn[3]=O;const W=Sb(F,QD,4,Zn,KD);C=a*f,p=Pn*a,m=p-(p-a),y=a-m,p=Pn*f,v=p-(p-f),_=f-v,k=y*_-(C-m*v-y*v-m*_),N=l*c,p=Pn*l,m=p-(p-l),y=l-m,p=Pn*c,v=p-(p-c),_=c-v,$=y*_-(N-m*v-y*v-m*_),b=k-$,h=k-b,Zn[0]=k-(b+h)+(h-$),S=C+b,h=S-C,A=C-(S-h)+(b-h),b=A-N,h=A-b,Zn[1]=A-(b+h)+(h-N),O=S+b,h=O-S,Zn[2]=S-(O-h)+(b-h),Zn[3]=O;const V=Sb(W,KD,4,Zn,ZD);return ZD[V-1]}function rm(e,t,n,r,i,o){const s=(t-o)*(n-i),a=(e-i)*(r-o),l=s-a,c=Math.abs(s+a);return Math.abs(l)>=Xse*c?l:-Kse(e,t,n,r,i,o,c)}const e9=Math.pow(2,-52),im=new Uint32Array(512);class ny{static from(t,n=rae,r=iae){const i=t.length,o=new Float64Array(i*2);for(let s=0;s<i;s++){const a=t[s];o[2*s]=n(a),o[2*s+1]=r(a)}return new ny(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,s=t.length>>1;let a=1/0,l=1/0,c=-1/0,f=-1/0;for(let D=0;D<s;D++){const P=t[2*D],R=t[2*D+1];P<a&&(a=P),R<l&&(l=R),P>c&&(c=P),R>f&&(f=R),this._ids[D]=D}const h=(a+c)/2,p=(l+f)/2;let m,y,v;for(let D=0,P=1/0;D<s;D++){const R=Eb(h,p,t[2*D],t[2*D+1]);R<P&&(m=D,P=R)}const _=t[2*m],b=t[2*m+1];for(let D=0,P=1/0;D<s;D++){if(D===m)continue;const R=Eb(_,b,t[2*D],t[2*D+1]);R<P&&R>0&&(y=D,P=R)}let S=t[2*y],A=t[2*y+1],C=1/0;for(let D=0;D<s;D++){if(D===m||D===y)continue;const P=tae(_,b,S,A,t[2*D],t[2*D+1]);P<C&&(v=D,C=P)}let k=t[2*v],N=t[2*v+1];if(C===1/0){for(let R=0;R<s;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];zc(this._ids,this._dists,0,s-1);const D=new Uint32Array(s);let P=0;for(let R=0,X=-1/0;R<s;R++){const B=this._ids[R],I=this._dists[B];I>X&&(D[P++]=B,X=I)}this.hull=D.subarray(0,P),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(rm(_,b,S,A,k,N)<0){const D=y,P=S,R=A;y=v,S=k,A=N,v=D,k=P,N=R}const $=nae(_,b,S,A,k,N);this._cx=$.x,this._cy=$.y;for(let D=0;D<s;D++)this._dists[D]=Eb(t[2*D],t[2*D+1],$.x,$.y);zc(this._ids,this._dists,0,s-1),this._hullStart=m;let O=3;r[m]=n[v]=y,r[y]=n[m]=v,r[v]=n[y]=m,i[m]=0,i[y]=1,i[v]=2,o.fill(-1),o[this._hashKey(_,b)]=m,o[this._hashKey(S,A)]=y,o[this._hashKey(k,N)]=v,this.trianglesLen=0,this._addTriangle(m,y,v,-1,-1,-1);for(let D=0,P,R;D<this._ids.length;D++){const X=this._ids[D],B=t[2*X],I=t[2*X+1];if(D>0&&Math.abs(B-P)<=e9&&Math.abs(I-R)<=e9||(P=B,R=I,X===m||X===y||X===v))continue;let F=0;for(let Q=0,L=this._hashKey(B,I);Q<this._hashSize&&(F=o[(L+Q)%this._hashSize],!(F!==-1&&F!==r[F]));Q++);F=n[F];let W=F,V;for(;V=r[W],rm(B,I,t[2*W],t[2*W+1],t[2*V],t[2*V+1])>=0;)if(W=V,W===F){W=-1;break}if(W===-1)continue;let j=this._addTriangle(W,X,r[W],-1,-1,i[W]);i[X]=this._legalize(j+2),i[W]=j,O++;let H=r[W];for(;V=r[H],rm(B,I,t[2*H],t[2*H+1],t[2*V],t[2*V+1])<0;)j=this._addTriangle(H,X,V,i[X],-1,i[H]),i[X]=this._legalize(j+2),r[H]=H,O--,H=V;if(W===F)for(;V=n[W],rm(B,I,t[2*V],t[2*V+1],t[2*W],t[2*W+1])<0;)j=this._addTriangle(V,X,W,-1,i[W],i[V]),this._legalize(j+2),i[V]=j,r[W]=W,O--,W=V;this._hullStart=n[X]=W,r[W]=n[H]=X,r[X]=H,o[this._hashKey(B,I)]=X,o[this._hashKey(t[2*W],t[2*W+1])]=W}this.hull=new Uint32Array(O);for(let D=0,P=this._hullStart;D<O;D++)this.hull[D]=P,P=r[P];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Zse(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,s=0;for(;;){const a=r[t],l=t-t%3;if(s=l+(t+2)%3,a===-1){if(o===0)break;t=im[--o];continue}const c=a-a%3,f=l+(t+1)%3,h=c+(a+2)%3,p=n[s],m=n[t],y=n[f],v=n[h];if(eae(i[2*p],i[2*p+1],i[2*m],i[2*m+1],i[2*y],i[2*y+1],i[2*v],i[2*v+1])){n[t]=v,n[a]=p;const b=r[h];if(b===-1){let A=this._hullStart;do{if(this._hullTri[A]===h){this._hullTri[A]=t;break}A=this._hullPrev[A]}while(A!==this._hullStart)}this._link(t,b),this._link(a,r[s]),this._link(s,h);const S=c+(a+1)%3;o<im.length&&(im[o++]=S)}else{if(o===0)break;t=im[--o]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,s){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,o),this._link(a+2,s),this.trianglesLen+=3,a}}function Zse(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Eb(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function eae(e,t,n,r,i,o,s,a){const l=e-s,c=t-a,f=n-s,h=r-a,p=i-s,m=o-a,y=l*l+c*c,v=f*f+h*h,_=p*p+m*m;return l*(h*_-v*m)-c*(f*_-v*p)+y*(f*m-h*p)<0}function tae(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,c=o-t,f=s*s+a*a,h=l*l+c*c,p=.5/(s*c-a*l),m=(c*f-a*h)*p,y=(s*h-l*f)*p;return m*m+y*y}function nae(e,t,n,r,i,o){const s=n-e,a=r-t,l=i-e,c=o-t,f=s*s+a*a,h=l*l+c*c,p=.5/(s*c-a*l),m=e+(c*f-a*h)*p,y=t+(s*h-l*f)*p;return{x:m,y}}function zc(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],s=t[o];let a=i-1;for(;a>=n&&t[e[a]]>s;)e[a+1]=e[a--];e[a+1]=o}else{const i=n+r>>1;let o=n+1,s=r;lh(e,i,o),t[e[n]]>t[e[r]]&&lh(e,n,r),t[e[o]]>t[e[r]]&&lh(e,o,r),t[e[n]]>t[e[o]]&&lh(e,n,o);const a=e[o],l=t[a];for(;;){do o++;while(t[e[o]]<l);do s--;while(t[e[s]]>l);if(s<o)break;lh(e,o,s)}e[n+1]=e[s],e[s]=a,r-o+1>=s-n?(zc(e,t,o,r),zc(e,t,n,s-1)):(zc(e,t,n,s-1),zc(e,t,o,r))}}function lh(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function rae(e){return e[0]}function iae(e){return e[1]}const t9=1e-6;class Ql{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>t9||Math.abs(this._y1-o)>t9)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class US{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let oae=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,s;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let v=0,_=0,b=r.length,S,A;v<b;v+=3,_+=2){const C=r[v]*2,k=r[v+1]*2,N=r[v+2]*2,$=t[C],O=t[C+1],D=t[k],P=t[k+1],R=t[N],X=t[N+1],B=D-$,I=P-O,F=R-$,W=X-O,V=(B*W-I*F)*2;if(Math.abs(V)<1e-9){if(o===void 0){o=s=0;for(const H of n)o+=t[H*2],s+=t[H*2+1];o/=n.length,s/=n.length}const j=1e9*Math.sign((o-$)*W-(s-O)*F);S=($+R)/2-j*W,A=(O+X)/2+j*F}else{const j=1/V,H=B*B+I*I,Q=F*F+W*W;S=$+(W*H-I*Q)*j,A=O+(B*Q-F*H)*j}a[_]=S,a[_+1]=A}let l=n[n.length-1],c,f=l*4,h,p=t[2*l],m,y=t[2*l+1];i.fill(0);for(let v=0;v<n.length;++v)l=n[v],c=f,h=p,m=y,f=l*4,p=t[2*l],y=t[2*l+1],i[c+2]=i[f]=m-y,i[c+3]=i[f+1]=p-h}render(t){const n=t==null?t=new Ql:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:s,vectors:a}=this;if(o.length<=1)return null;for(let f=0,h=r.length;f<h;++f){const p=r[f];if(p<f)continue;const m=Math.floor(f/3)*2,y=Math.floor(p/3)*2,v=s[m],_=s[m+1],b=s[y],S=s[y+1];this._renderSegment(v,_,b,S,t)}let l,c=o[o.length-1];for(let f=0;f<o.length;++f){l=c,c=o[f];const h=Math.floor(i[c]/3)*2,p=s[h],m=s[h+1],y=l*4,v=this._project(p,m,a[y+2],a[y+3]);v&&this._renderSegment(p,m,v[0],v[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Ql:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Ql:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let s=2;s<o;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new US;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let s;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(o.moveTo(t,n),o.lineTo(r,i)):(s=this._clipSegment(t,n,r,i,a,l))&&(o.moveTo(s[0],s[1]),o.lineTo(s[2],s[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,s=n.length;o<s;o+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[o]===i[a]&&n[o+1]===i[a+1]&&n[(o+2)%s]===i[(a+l-2)%l]&&n[(o+3)%s]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,s=r[t];if(s===-1)return null;const a=[];let l=s;do{const c=Math.floor(l/3);if(a.push(n[c*2],n[c*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=i[l]}while(l!==s&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,s,a=n[r-2],l=n[r-1],c,f=this._regioncode(a,l),h,p=0;for(let m=0;m<r;m+=2)if(o=a,s=l,a=n[m],l=n[m+1],c=f,f=this._regioncode(a,l),c===0&&f===0)h=p,p=0,i?i.push(a,l):i=[a,l];else{let y,v,_,b,S;if(c===0){if((y=this._clipSegment(o,s,a,l,c,f))===null)continue;[v,_,b,S]=y}else{if((y=this._clipSegment(a,l,o,s,f,c))===null)continue;[b,S,v,_]=y,h=p,p=this._edgecode(v,_),h&&p&&this._edge(t,h,p,i,i.length),i?i.push(v,_):i=[v,_]}h=p,p=this._edgecode(b,S),h&&p&&this._edge(t,h,p,i,i.length),i?i.push(b,S):i=[b,S]}if(i)h=p,p=this._edgecode(i[0],i[1]),h&&p&&this._edge(t,h,p,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,s){const a=o<s;for(a&&([t,n,r,i,o,s]=[r,i,t,n,s,o]);;){if(o===0&&s===0)return a?[r,i,t,n]:[t,n,r,i];if(o&s)return null;let l,c,f=o||s;f&8?(l=t+(r-t)*(this.ymax-n)/(i-n),c=this.ymax):f&4?(l=t+(r-t)*(this.ymin-n)/(i-n),c=this.ymin):f&2?(c=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(c=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),o?(t=l,n=c,o=this._regioncode(t,n)):(r=l,i=c,s=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,s){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],o,s))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let c=0,f=a.length,h,p=this._edgecode(a[f-2],a[f-1]);c<f;c+=2)h=p,p=this._edgecode(a[c],a[c+1]),h&&p&&(c=this._edge(t,h,p,a,c),f=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,o){for(;n!==r;){let s,a;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,a=this.ymin;break}(i[o]!==s||i[o+1]!==a)&&this.contains(t,s,a)&&(i.splice(o,0,s,a),o+=2)}return o}_project(t,n,r,i){let o=1/0,s,a,l;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<o&&(l=this.ymin,a=t+(o=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<o&&(l=this.ymax,a=t+(o=s)*r)}if(r>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/r)<o&&(a=this.xmax,l=n+(o=s)*i)}else if(r<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/r)<o&&(a=this.xmin,l=n+(o=s)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const sae=2*Math.PI,Cc=Math.pow;function aae(e){return e[0]}function lae(e){return e[1]}function uae(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],s=2*t[r+2];if((n[s]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function cae(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class Gk{static from(t,n=aae,r=lae,i){return new Gk("length"in t?fae(t,n,r,i):Float64Array.from(dae(t,n,r,i)))}constructor(t){this._delaunator=new ny(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&uae(t)){this.collinear=Int32Array.from({length:n.length/2},(p,m)=>m).sort((p,m)=>n[2*p]-n[2*m]||n[2*p+1]-n[2*m+1]);const l=this.collinear[0],c=this.collinear[this.collinear.length-1],f=[n[2*l],n[2*l+1],n[2*c],n[2*c+1]],h=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let p=0,m=n.length/2;p<m;++p){const y=cae(n[2*p],n[2*p+1],h);n[2*p]=y[0],n[2*p+1]=y[1]}this._delaunator=new ny(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,c=r.length;l<c;++l){const f=o[l%3===2?l-2:l+1];(r[l]===-1||s[f]===-1)&&(s[f]=l)}for(let l=0,c=i.length;l<c;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],s[i[0]]=1,i.length===2&&(s[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new oae(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:s,collinear:a}=this;if(a){const h=a.indexOf(t);h>0&&(yield a[h-1]),h<a.length-1&&(yield a[h+1]);return}const l=n[t];if(l===-1)return;let c=l,f=-1;do{if(yield f=s[c],c=c%3===2?c-2:c+1,s[c]!==t)return;if(c=o[c],c===-1){const h=r[(i[t]+1)%r.length];h!==f&&(yield h);return}}while(c!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:s,halfedges:a,triangles:l,points:c}=this;if(i[t]===-1||!c.length)return(t+1)%(c.length>>1);let f=t,h=Cc(n-c[t*2],2)+Cc(r-c[t*2+1],2);const p=i[t];let m=p;do{let y=l[m];const v=Cc(n-c[y*2],2)+Cc(r-c[y*2+1],2);if(v<h&&(h=v,f=y),m=m%3===2?m-2:m+1,l[m]!==t)break;if(m=a[m],m===-1){if(m=o[(s[t]+1)%o.length],m!==y&&Cc(n-c[m*2],2)+Cc(r-c[m*2+1],2)<h)return m;break}}while(m!==p);return f}render(t){const n=t==null?t=new Ql:void 0,{points:r,halfedges:i,triangles:o}=this;for(let s=0,a=i.length;s<a;++s){const l=i[s];if(l<s)continue;const c=o[s]*2,f=o[l]*2;t.moveTo(r[c],r[c+1]),t.lineTo(r[f],r[f+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Ql:void 0,{points:i}=this;for(let o=0,s=i.length;o<s;o+=2){const a=i[o],l=i[o+1];t.moveTo(a+n,l),t.arc(a,l,n,0,sae)}return r&&r.value()}renderHull(t){const n=t==null?t=new Ql:void 0,{hull:r,points:i}=this,o=r[0]*2,s=r.length;t.moveTo(i[o],i[o+1]);for(let a=1;a<s;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new US;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Ql:void 0,{points:i,triangles:o}=this,s=o[t*=3]*2,a=o[t+1]*2,l=o[t+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new US;return this.renderTriangle(t,n),n.value()}}function fae(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let s=0;s<i;++s){const a=e[s];o[s*2]=t.call(r,a,s,e),o[s*2+1]=n.call(r,a,s,e)}return o}function*dae(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function Yk(e){K.call(this,null,e)}Yk.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const hae=[-1e5,-1e5,1e5,1e5];ge(Yk,K,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:hae;const o=this.value=Gk.from(r,e.x,e.y).voronoi(i);for(let s=0,a=r.length;s<a;++s){const l=o.cellPolygon(s);r[s][n]=l&&!gae(l)?pae(l):null}return t.reflow(e.modified()).modifies(n)}});function pae(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function gae(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const mae=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Yk},Symbol.toStringTag,{value:"Module"}));var Ab=Math.PI/180,Ih=64,Im=2048;function yae(){var e=[256,256],t,n,r,i,o,s,a,l=Fz,c=[],f=Math.random,h={};h.layout=function(){for(var y=p(La()),v=Sae((e[0]>>5)*e[1]),_=null,b=c.length,S=-1,A=[],C=c.map(N=>({text:t(N),font:n(N),style:i(N),weight:o(N),rotate:s(N),size:~~(r(N)+1e-14),padding:a(N),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:N})).sort((N,$)=>$.size-N.size);++S<b;){var k=C[S];k.x=e[0]*(f()+.5)>>1,k.y=e[1]*(f()+.5)>>1,vae(y,k,C,S),k.hasText&&m(v,k,_)&&(A.push(k),_?_ae(_,k):_=[{x:k.x+k.x0,y:k.y+k.y0},{x:k.x+k.x1,y:k.y+k.y1}],k.x-=e[0]>>1,k.y-=e[1]>>1)}return A};function p(y){y.width=y.height=1;var v=Math.sqrt(y.getContext("2d").getImageData(0,0,1,1).data.length>>2);y.width=(Ih<<5)/v,y.height=Im/v;var _=y.getContext("2d");return _.fillStyle=_.strokeStyle="red",_.textAlign="center",{context:_,ratio:v}}function m(y,v,_){for(var b=v.x,S=v.y,A=Math.hypot(e[0],e[1]),C=l(e),k=f()<.5?1:-1,N=-k,$,O,D;($=C(N+=k))&&(O=~~$[0],D=~~$[1],!(Math.min(Math.abs(O),Math.abs(D))>=A));)if(v.x=b+O,v.y=S+D,!(v.x+v.x0<0||v.y+v.y0<0||v.x+v.x1>e[0]||v.y+v.y1>e[1])&&(!_||!xae(v,y,e[0]))&&(!_||bae(v,_))){for(var P=v.sprite,R=v.width>>5,X=e[0]>>5,B=v.x-(R<<4),I=B&127,F=32-I,W=v.y1-v.y0,V=(v.y+v.y0)*X+(B>>5),j,H=0;H<W;H++){j=0;for(var Q=0;Q<=R;Q++)y[V+Q]|=j<<F|(Q<R?(j=P[H*R+Q])>>>I:0);V+=X}return v.sprite=null,!0}return!1}return h.words=function(y){return arguments.length?(c=y,h):c},h.size=function(y){return arguments.length?(e=[+y[0],+y[1]],h):e},h.font=function(y){return arguments.length?(n=Ml(y),h):n},h.fontStyle=function(y){return arguments.length?(i=Ml(y),h):i},h.fontWeight=function(y){return arguments.length?(o=Ml(y),h):o},h.rotate=function(y){return arguments.length?(s=Ml(y),h):s},h.text=function(y){return arguments.length?(t=Ml(y),h):t},h.spiral=function(y){return arguments.length?(l=Eae[y]||y,h):l},h.fontSize=function(y){return arguments.length?(r=Ml(y),h):r},h.padding=function(y){return arguments.length?(a=Ml(y),h):a},h.random=function(y){return arguments.length?(f=y,h):f},h}function vae(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(Ih<<5)/o,Im/o);var s=0,a=0,l=0,c=n.length,f,h,p,m,y;for(--r;++r<c;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,f=i.measureText(t.text+"m").width*o,p=t.size<<1,t.rotate){var v=Math.sin(t.rotate*Ab),_=Math.cos(t.rotate*Ab),b=f*_,S=f*v,A=p*_,C=p*v;f=Math.max(Math.abs(b+C),Math.abs(b-C))+31>>5<<5,p=~~Math.max(Math.abs(S+A),Math.abs(S-A))}else f=f+31>>5<<5;if(p>l&&(l=p),s+f>=Ih<<5&&(s=0,a+=l,l=0),a+p>=Im)break;i.translate((s+(f>>1))/o,(a+(p>>1))/o),t.rotate&&i.rotate(t.rotate*Ab),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=f,t.height=p,t.xoff=s,t.yoff=a,t.x1=f>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=f}for(var k=i.getImageData(0,0,(Ih<<5)/o,Im/o).data,N=[];--r>=0;)if(t=n[r],!!t.hasText){for(f=t.width,h=f>>5,p=t.y1-t.y0,m=0;m<p*h;m++)N[m]=0;if(s=t.xoff,s==null)return;a=t.yoff;var $=0,O=-1;for(y=0;y<p;y++){for(m=0;m<f;m++){var D=h*y+(m>>5),P=k[(a+y)*(Ih<<5)+(s+m)<<2]?1<<31-m%32:0;N[D]|=P,$|=P}$?O=y:(t.y0++,p--,y--,a++)}t.y1=t.y0+O,t.sprite=N.slice(0,(t.y1-t.y0)*h)}}}function xae(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),s=o&127,a=32-s,l=e.y1-e.y0,c=(e.y+e.y0)*n+(o>>5),f,h=0;h<l;h++){f=0;for(var p=0;p<=i;p++)if((f<<a|(p<i?(f=r[h*i+p])>>>s:0))&t[c+p])return!0;c+=n}return!1}function _ae(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function bae(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function Fz(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function wae(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var s=o<0?-1:1;switch(Math.sqrt(1+4*s*o)-s&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Sae(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Ml(e){return typeof e=="function"?e:function(){return e}}var Eae={archimedean:Fz,rectangular:wae};const Tz=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Aae=["text","font","rotate","fontSize","fontStyle","fontWeight"];function qk(e){K.call(this,yae(),e)}qk.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Tz}]};ge(qk,K,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Z("Wordcloud size dimensions must be non-zero.");function n(y){const v=e[y];return He(v)&&t.modified(v.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||Aae.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,s=e.as||Tz;let a=e.fontSize||14,l;if(He(a)?l=e.fontSizeRange:a=Xn(a),l){const y=a,v=lt("sqrt")().domain(Ro(i,y)).range(l);a=_=>v(y(_))}i.forEach(y=>{y[s[0]]=NaN,y[s[1]]=NaN,y[s[3]]=0});const c=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(bi).layout(),f=o.size(),h=f[0]>>1,p=f[1]>>1,m=c.length;for(let y=0,v,_;y<m;++y)v=c[y],_=v.datum,_[s[0]]=v.x+h,_[s[1]]=v.y+p,_[s[2]]=v.font,_[s[3]]=v.size,_[s[4]]=v.style,_[s[5]]=v.weight,_[s[6]]=v.rotate;return t.reflow(r).modifies(s)}});const Cae=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:qk},Symbol.toStringTag,{value:"Module"})),kae=e=>new Uint8Array(e),$ae=e=>new Uint16Array(e),Qh=e=>new Uint32Array(e);function Mae(){let e=8,t=[],n=Qh(0),r=om(0,e),i=om(0,e);return{data:()=>t,seen:()=>n=Nae(n,t.length),add(o){for(let s=0,a=t.length,l=o.length,c;s<l;++s)c=o[s],c._index=a++,t.push(c)},remove(o,s){const a=t.length,l=Array(a-o),c=t;let f,h,p;for(h=0;!s[h]&&h<a;++h)l[h]=t[h],c[h]=h;for(p=h;h<a;++h)f=t[h],s[h]?c[h]=-1:(c[h]=p,r[p]=r[h],i[p]=i[h],l[p]=f,f._index=p++),r[h]=0;return t=l,c},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,s){r[o]|=s},clear(o,s){r[o]&=~s},resize(o,s){const a=r.length;(o>a||s>e)&&(e=Math.max(s,e),r=om(o,e,r),i=om(o,e))}}}function Nae(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function om(e,t,n){const r=(t<257?kae:t<65537?$ae:Qh)(e);return n&&r.set(n),r}function n9(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const s=this,a=s.bisect(s.range,i.value),l=i.index,c=a[0],f=a[1],h=l.length;let p;for(p=0;p<c;++p)o[l[p]]|=r;for(p=f;p<h;++p)o[l[p]]|=r;return s}}}function r9(){let e=Qh(0),t=[],n=0;function r(a,l,c){if(!l.length)return[];const f=n,h=l.length,p=Qh(h);let m=Array(h),y,v,_;for(_=0;_<h;++_)m[_]=a(l[_]),p[_]=_;if(m=Oae(m,p),f)y=t,v=e,t=Array(f+h),e=Qh(f+h),Dae(c,y,v,f,m,p,h,t,e);else{if(c>0)for(_=0;_<h;++_)p[_]+=c;t=m,e=p}return n=f+h,{index:p,value:m}}function i(a,l){const c=n;let f,h,p;for(h=0;!l[e[h]]&&h<c;++h);for(p=h;h<c;++h)l[f=e[h]]||(e[p]=f,t[p]=t[h],++p);n=c-a}function o(a){for(let l=0,c=n;l<c;++l)e[l]=a[e[l]]}function s(a,l){let c;return l?c=l.length:(l=t,c=n),[PY(l,a[0],0,c),Ia(l,a[1],0,c)]}return{insert:r,remove:i,bisect:s,reindex:o,index:()=>e,size:()=>n}}function Oae(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),UY(e,t)}function Dae(e,t,n,r,i,o,s,a,l){let c=0,f=0,h;for(h=0;c<r&&f<s;++h)t[c]<i[f]?(a[h]=t[c],l[h]=n[c++]):(a[h]=i[f],l[h]=o[f++]+e);for(;c<r;++c,++h)a[h]=t[c],l[h]=n[c];for(;f<s;++f,++h)a[h]=i[f],l[h]=o[f]+e}function Vk(e){K.call(this,Mae(),e),this._indices=null,this._dims=null}Vk.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ge(Vk,K,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],s=r.length;let a=0,l,c;for(;a<s;++a)l=n[a].fname,c=i[l]||(i[l]=r9()),o.push(n9(c,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,s=this._dims,a=this.value,l=a.curr(),c=a.prev(),f=a.all(),h=n.rem=n.add,p=n.mod,m=i.length,y={};let v,_,b,S,A,C,k,N,$;if(c.set(l),t.rem.length&&(A=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(C={},S=t.mod,k=0,N=S.length;k<N;++k)C[S[k]._index]=1;for(k=0;k<m;++k)$=r[k],(!s[k]||e.modified("fields",k)||t.modified($.fields))&&(b=$.fname,(v=y[b])||(o[b]=_=r9(),y[b]=v=_.insert($,t.source,0)),s[k]=n9(_,k,i[k]).onAdd(v,l));for(k=0,N=a.data().length;k<N;++k)A[k]||(c[k]!==l[k]?h.push(k):C[k]&&l[k]!==f&&p.push(k));return a.mask=(1<<m)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,s=this._indices,a=e.fields,l={},c=n.add,f=i.size()+r.length,h=o.length;let p=i.size(),m,y,v;i.resize(f,h),i.add(r);const _=i.curr(),b=i.prev(),S=i.all();for(m=0;m<h;++m)y=a[m].fname,v=l[y]||(l[y]=s[y].insert(a[m],r,p)),o[m].onAdd(v,_);for(;p<f;++p)b[p]=S,_[p]!==S&&c.push(p)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),s=e.mod;let a,l,c;for(a=0,l=s.length;a<l;++a)c=s[a]._index,i[c]!==o&&n.push(c)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),s=i.prev(),a=i.all(),l={},c=n.rem,f=t.rem;let h,p,m,y;for(h=0,p=f.length;h<p;++h)m=f[h]._index,l[m]=1,s[m]=y=o[m],o[m]=a,y!==a&&c.push(m);for(m in r)r[m].remove(p,l);return this.reindex(t,p,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const s in r)r[s].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,s=r.length;let a=0,l,c;for(n.filters=0,c=0;c<s;++c)e.modified("query",c)&&(l=c,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(c=0,a=0;c<s;++c)e.modified("query",c)&&(a|=r[c].one,this.incrementAll(r[c],i[c],o,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),s=i.curr(),a=i.prev(),l=e.index(),c=e.bisect(e.range),f=e.bisect(t),h=f[0],p=f[1],m=c[0],y=c[1],v=e.one;let _,b,S;if(h<m)for(_=h,b=Math.min(m,p);_<b;++_)S=l[_],o[S]!==n&&(a[S]=s[S],o[S]=n,r.push(S)),s[S]^=v;else if(h>m)for(_=m,b=Math.min(h,y);_<b;++_)S=l[_],o[S]!==n&&(a[S]=s[S],o[S]=n,r.push(S)),s[S]^=v;if(p>y)for(_=Math.max(h,y),b=p;_<b;++_)S=l[_],o[S]!==n&&(a[S]=s[S],o[S]=n,r.push(S)),s[S]^=v;else if(p<y)for(_=Math.max(m,p),b=y;_<b;++_)S=l[_],o[S]!==n&&(a[S]=s[S],o[S]=n,r.push(S)),s[S]^=v;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),s=e.index(),a=e.bisect(e.range),l=e.bisect(t),c=l[0],f=l[1],h=a[0],p=a[1],m=e.one;let y,v,_;if(c<h)for(y=c,v=Math.min(h,f);y<v;++y)_=s[y],o[_]^=m,n.push(_);else if(c>h)for(y=h,v=Math.min(c,p);y<v;++y)_=s[y],o[_]^=m,r.push(_);if(f>p)for(y=Math.max(c,p),v=f;y<v;++y)_=s[y],o[_]^=m,n.push(_);else if(f<p)for(y=Math.max(h,f),v=p;y<v;++y)_=s[y],o[_]^=m,r.push(_);e.range=t.slice()}});function Xk(e){K.call(this,null,e)}Xk.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ge(Xk,K,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if((i&n)===0)return t.StopPropagation;const o=t.fork(t.ALL),s=r.data(),a=r.curr(),l=r.prev(),c=f=>a[f]&n?null:s[f];return o.filter(o.MOD,c),i&i-1?(o.filter(o.ADD,f=>{const h=a[f]&n;return!h&&h^l[f]&n?s[f]:null}),o.filter(o.REM,f=>{const h=a[f]&n;return h&&!(h^(h^l[f]&n))?s[f]:null})):(o.filter(o.ADD,c),o.filter(o.REM,f=>(a[f]&n)===i?s[f]:null)),o.filter(o.SOURCE,f=>c(f._index))}});const Fae=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Vk,resolvefilter:Xk},Symbol.toStringTag,{value:"Module"})),Tae="RawCode",mu="Literal",Rae="Property",Lae="Identifier",Pae="ArrayExpression",zae="BinaryExpression",Rz="CallExpression",Iae="ConditionalExpression",Uae="LogicalExpression",Wae="MemberExpression",jae="ObjectExpression",Bae="UnaryExpression";function ro(e){this.type=e}ro.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Hae(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Hae(e){switch(e.type){case Pae:return e.elements;case zae:case Uae:return[e.left,e.right];case Rz:return[e.callee].concat(e.arguments);case Iae:return[e.test,e.consequent,e.alternate];case Wae:return[e.object,e.property];case jae:return e.properties;case Rae:return[e.key,e.value];case Bae:return[e.argument];case Lae:case mu:case Tae:default:return[]}}var Xo,$e,te,Yn,gt,Av=1,og=2,yu=3,ol=4,Cv=5,Lu=6,wr=7,sg=8,Gae=9;Xo={};Xo[Av]="Boolean";Xo[og]="<end>";Xo[yu]="Identifier";Xo[ol]="Keyword";Xo[Cv]="Null";Xo[Lu]="Numeric";Xo[wr]="Punctuator";Xo[sg]="String";Xo[Gae]="RegularExpression";var Yae="ArrayExpression",qae="BinaryExpression",Vae="CallExpression",Xae="ConditionalExpression",Lz="Identifier",Jae="Literal",Qae="LogicalExpression",Kae="MemberExpression",Zae="ObjectExpression",ele="Property",tle="UnaryExpression",pn="Unexpected token %0",nle="Unexpected number",rle="Unexpected string",ile="Unexpected identifier",ole="Unexpected reserved word",sle="Unexpected end of input",WS="Invalid regular expression",Cb="Invalid regular expression: missing /",Pz="Octal literals are not allowed in strict mode.",ale="Duplicate data property in object literal not allowed in strict mode",$n="ILLEGAL",xp="Disabled.",lle=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),ule=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function kv(e,t){if(!e)throw new Error("ASSERT: "+t)}function ys(e){return e>=48&&e<=57}function Jk(e){return"0123456789abcdefABCDEF".includes(e)}function Kh(e){return"01234567".includes(e)}function cle(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function _p(e){return e===10||e===13||e===8232||e===8233}function ag(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&lle.test(String.fromCharCode(e))}function ry(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&ule.test(String.fromCharCode(e))}const fle={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function zz(){for(;te<Yn;){const e=$e.charCodeAt(te);if(cle(e)||_p(e))++te;else break}}function jS(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)te<Yn&&Jk($e[te])?(r=$e[te++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ot({},pn,$n);return String.fromCharCode(i)}function dle(){var e,t,n,r;for(e=$e[te],t=0,e==="}"&&ot({},pn,$n);te<Yn&&(e=$e[te++],!!Jk(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ot({},pn,$n),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function Iz(){var e,t;for(e=$e.charCodeAt(te++),t=String.fromCharCode(e),e===92&&($e.charCodeAt(te)!==117&&ot({},pn,$n),++te,e=jS("u"),(!e||e==="\\"||!ag(e.charCodeAt(0)))&&ot({},pn,$n),t=e);te<Yn&&(e=$e.charCodeAt(te),!!ry(e));)++te,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),$e.charCodeAt(te)!==117&&ot({},pn,$n),++te,e=jS("u"),(!e||e==="\\"||!ry(e.charCodeAt(0)))&&ot({},pn,$n),t+=e);return t}function hle(){var e,t;for(e=te++;te<Yn;){if(t=$e.charCodeAt(te),t===92)return te=e,Iz();if(ry(t))++te;else break}return $e.slice(e,te)}function ple(){var e,t,n;return e=te,t=$e.charCodeAt(te)===92?Iz():hle(),t.length===1?n=yu:fle.hasOwnProperty(t)?n=ol:t==="null"?n=Cv:t==="true"||t==="false"?n=Av:n=yu,{type:n,value:t,start:e,end:te}}function kb(){var e=te,t=$e.charCodeAt(te),n,r=$e[te],i,o,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++te,{type:wr,value:String.fromCharCode(t),start:e,end:te};default:if(n=$e.charCodeAt(te+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return te+=2,{type:wr,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:te};case 33:case 61:return te+=2,$e.charCodeAt(te)===61&&++te,{type:wr,value:$e.slice(e,te),start:e,end:te}}}if(s=$e.substr(te,4),s===">>>=")return te+=4,{type:wr,value:s,start:e,end:te};if(o=s.substr(0,3),o===">>>"||o==="<<="||o===">>=")return te+=3,{type:wr,value:o,start:e,end:te};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return te+=2,{type:wr,value:i,start:e,end:te};if(i==="//"&&ot({},pn,$n),"<>=!+-*%&|^/".includes(r))return++te,{type:wr,value:r,start:e,end:te};ot({},pn,$n)}function gle(e){let t="";for(;te<Yn&&Jk($e[te]);)t+=$e[te++];return t.length===0&&ot({},pn,$n),ag($e.charCodeAt(te))&&ot({},pn,$n),{type:Lu,value:parseInt("0x"+t,16),start:e,end:te}}function mle(e){let t="0"+$e[te++];for(;te<Yn&&Kh($e[te]);)t+=$e[te++];return(ag($e.charCodeAt(te))||ys($e.charCodeAt(te)))&&ot({},pn,$n),{type:Lu,value:parseInt(t,8),octal:!0,start:e,end:te}}function i9(){var e,t,n;if(n=$e[te],kv(ys(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=te,e="",n!=="."){if(e=$e[te++],n=$e[te],e==="0"){if(n==="x"||n==="X")return++te,gle(t);if(Kh(n))return mle(t);n&&ys(n.charCodeAt(0))&&ot({},pn,$n)}for(;ys($e.charCodeAt(te));)e+=$e[te++];n=$e[te]}if(n==="."){for(e+=$e[te++];ys($e.charCodeAt(te));)e+=$e[te++];n=$e[te]}if(n==="e"||n==="E")if(e+=$e[te++],n=$e[te],(n==="+"||n==="-")&&(e+=$e[te++]),ys($e.charCodeAt(te)))for(;ys($e.charCodeAt(te));)e+=$e[te++];else ot({},pn,$n);return ag($e.charCodeAt(te))&&ot({},pn,$n),{type:Lu,value:parseFloat(e),start:t,end:te}}function yle(){var e="",t,n,r,i,o=!1;for(t=$e[te],kv(t==="'"||t==='"',"String literal must starts with a quote"),n=te,++te;te<Yn;)if(r=$e[te++],r===t){t="";break}else if(r==="\\")if(r=$e[te++],!r||!_p(r.charCodeAt(0)))switch(r){case"u":case"x":$e[te]==="{"?(++te,e+=dle()):e+=jS(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Kh(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),te<Yn&&Kh($e[te])&&(o=!0,i=i*8+"01234567".indexOf($e[te++]),"0123".includes(r)&&te<Yn&&Kh($e[te])&&(i=i*8+"01234567".indexOf($e[te++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&$e[te]===`
`&&++te;else{if(_p(r.charCodeAt(0)))break;e+=r}return t!==""&&ot({},pn,$n),{type:sg,value:e,octal:o,start:n,end:te}}function vle(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ot({},WS)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ot({},WS)}try{return new RegExp(e,t)}catch{return null}}function xle(){var e,t,n,r,i;for(e=$e[te],kv(e==="/","Regular expression literal must start with a slash"),t=$e[te++],n=!1,r=!1;te<Yn;)if(e=$e[te++],t+=e,e==="\\")e=$e[te++],_p(e.charCodeAt(0))&&ot({},Cb),t+=e;else if(_p(e.charCodeAt(0)))ot({},Cb);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||ot({},Cb),i=t.substr(1,t.length-2),{value:i,literal:t}}function _le(){var e,t,n;for(t="",n="";te<Yn&&(e=$e[te],!!ry(e.charCodeAt(0)));)++te,e==="\\"&&te<Yn?ot({},pn,$n):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ot({},WS,n),{value:n,literal:t}}function ble(){var e,t,n,r;return gt=null,zz(),e=te,t=xle(),n=_le(),r=vle(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:te}}function wle(e){return e.type===yu||e.type===ol||e.type===Av||e.type===Cv}function Uz(){if(zz(),te>=Yn)return{type:og,start:te,end:te};const e=$e.charCodeAt(te);return ag(e)?ple():e===40||e===41||e===59?kb():e===39||e===34?yle():e===46?ys($e.charCodeAt(te+1))?i9():kb():ys(e)?i9():kb()}function Er(){const e=gt;return te=e.end,gt=Uz(),te=e.end,e}function Wz(){const e=te;gt=Uz(),te=e}function Sle(e){const t=new ro(Yae);return t.elements=e,t}function o9(e,t,n){const r=new ro(e==="||"||e==="&&"?Qae:qae);return r.operator=e,r.left=t,r.right=n,r}function Ele(e,t){const n=new ro(Vae);return n.callee=e,n.arguments=t,n}function Ale(e,t,n){const r=new ro(Xae);return r.test=e,r.consequent=t,r.alternate=n,r}function Qk(e){const t=new ro(Lz);return t.name=e,t}function Uh(e){const t=new ro(Jae);return t.value=e.value,t.raw=$e.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function s9(e,t,n){const r=new ro(Kae);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Cle(e){const t=new ro(Zae);return t.properties=e,t}function a9(e,t,n){const r=new ro(ele);return r.key=t,r.value=n,r.kind=e,r}function kle(e,t){const n=new ro(tle);return n.operator=e,n.argument=t,n.prefix=!0,n}function ot(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,s)=>(kv(s<r.length,"Message reference must be in range"),r[s]));throw n=new Error(i),n.index=te,n.description=i,n}function $v(e){e.type===og&&ot(e,sle),e.type===Lu&&ot(e,nle),e.type===sg&&ot(e,rle),e.type===yu&&ot(e,ile),e.type===ol&&ot(e,ole),ot(e,pn,e.value)}function qn(e){const t=Er();(t.type!==wr||t.value!==e)&&$v(t)}function Et(e){return gt.type===wr&&gt.value===e}function $b(e){return gt.type===ol&&gt.value===e}function $le(){const e=[];for(te=gt.start,qn("[");!Et("]");)Et(",")?(Er(),e.push(null)):(e.push(vu()),Et("]")||qn(","));return Er(),Sle(e)}function l9(){te=gt.start;const e=Er();return e.type===sg||e.type===Lu?(e.octal&&ot(e,Pz),Uh(e)):Qk(e.value)}function Mle(){var e,t,n,r;if(te=gt.start,e=gt,e.type===yu)return n=l9(),qn(":"),r=vu(),a9("init",n,r);if(e.type===og||e.type===wr)$v(e);else return t=l9(),qn(":"),r=vu(),a9("init",t,r)}function Nle(){var e=[],t,n,r,i={},o=String;for(te=gt.start,qn("{");!Et("}");)t=Mle(),t.key.type===Lz?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?ot({},ale):i[r]=!0,e.push(t),Et("}")||qn(",");return qn("}"),Cle(e)}function Ole(){qn("(");const e=Kk();return qn(")"),e}const Dle={if:1};function Fle(){var e,t,n;if(Et("("))return Ole();if(Et("["))return $le();if(Et("{"))return Nle();if(e=gt.type,te=gt.start,e===yu||Dle[gt.value])n=Qk(Er().value);else if(e===sg||e===Lu)gt.octal&&ot(gt,Pz),n=Uh(Er());else{if(e===ol)throw new Error(xp);e===Av?(t=Er(),t.value=t.value==="true",n=Uh(t)):e===Cv?(t=Er(),t.value=null,n=Uh(t)):Et("/")||Et("/=")?(n=Uh(ble()),Wz()):$v(Er())}return n}function Tle(){const e=[];if(qn("("),!Et(")"))for(;te<Yn&&(e.push(vu()),!Et(")"));)qn(",");return qn(")"),e}function Rle(){te=gt.start;const e=Er();return wle(e)||$v(e),Qk(e.value)}function Lle(){return qn("."),Rle()}function Ple(){qn("[");const e=Kk();return qn("]"),e}function zle(){var e,t,n;for(e=Fle();;)if(Et("."))n=Lle(),e=s9(".",e,n);else if(Et("("))t=Tle(),e=Ele(e,t);else if(Et("["))n=Ple(),e=s9("[",e,n);else break;return e}function u9(){const e=zle();if(gt.type===wr&&(Et("++")||Et("--")))throw new Error(xp);return e}function Um(){var e,t;if(gt.type!==wr&&gt.type!==ol)t=u9();else{if(Et("++")||Et("--"))throw new Error(xp);if(Et("+")||Et("-")||Et("~")||Et("!"))e=Er(),t=Um(),t=kle(e.value,t);else{if($b("delete")||$b("void")||$b("typeof"))throw new Error(xp);t=u9()}}return t}function c9(e){let t=0;if(e.type!==wr&&e.type!==ol)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Ile(){var e,t,n,r,i,o,s,a,l,c;if(e=gt,l=Um(),r=gt,i=c9(r),i===0)return l;for(r.prec=i,Er(),t=[e,gt],s=Um(),o=[l,r,s];(i=c9(gt))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),a=o.pop().value,l=o.pop(),t.pop(),n=o9(a,l,s),o.push(n);r=Er(),r.prec=i,o.push(r),t.push(gt),n=Um(),o.push(n)}for(c=o.length-1,n=o[c],t.pop();c>1;)t.pop(),n=o9(o[c-1].value,o[c-2],n),c-=2;return n}function vu(){var e,t,n;return e=Ile(),Et("?")&&(Er(),t=vu(),qn(":"),n=vu(),e=Ale(e,t,n)),e}function Kk(){const e=vu();if(Et(","))throw new Error(xp);return e}function Zk(e){$e=e,te=0,Yn=$e.length,gt=null,Wz();const t=Kk();if(gt.type!==og)throw new Error("Unexpect token after expression.");return t}var jz={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Bz(e){function t(s,a,l,c){let f=e(a[0]);return l&&(f=l+"("+f+")",l.lastIndexOf("new ",0)===0&&(f="("+f+")")),f+"."+s+(c<0?"":c===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(s,a,l){return c=>t(s,c,a,l)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&Z("Missing arguments to clamp function."),s.length>3&&Z("Too many arguments to clamp function.");const a=s.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),btoa:"btoa",atob:"atob",regexp:o,test:n("test",o),if:function(s){s.length<3&&Z("Missing arguments to if function."),s.length>3&&Z("Too many arguments to if function.");const a=s.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Ule(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function Hz(e){e=e||{};const t=e.allowed?Ji(e.allowed):{},n=e.forbidden?Ji(e.forbidden):{},r=e.constants||jz,i=(e.functions||Bz)(h),o=e.globalvar,s=e.fieldvar,a=He(o)?o:y=>`${o}["${y}"]`;[...Object.getOwnPropertyNames(Object.prototype).filter(y=>typeof Object.prototype[y]=="function")];let l={},c={},f=0;function h(y){if(xe(y))return y;const v=p[y.type];return v==null&&Z("Unsupported type: "+y.type),v(y)}const p={Literal:y=>y.raw,Identifier:y=>{const v=y.name;return f>0?v:we(n,v)?Z("Illegal identifier: "+v):we(r,v)?r[v]:we(t,v)?v:(l[v]=1,a(v))},MemberExpression:y=>{const v=!y.computed,_=h(y.object);v&&(f+=1);const b=h(y.property);return _===s&&(c[Ule(b)]=1),v&&(f-=1),_+(v?"."+b:"["+b+"]")},CallExpression:y=>{y.callee.type!=="Identifier"&&Z("Illegal callee type: "+y.callee.type);const v=y.callee.name,_=y.arguments,b=we(i,v)&&i[v];return b||Z("Unrecognized function: "+v),He(b)?b(_):b+"("+_.map(h).join(",")+")"},ArrayExpression:y=>"["+y.elements.map(h).join(",")+"]",BinaryExpression:y=>"("+h(y.left)+" "+y.operator+" "+h(y.right)+")",UnaryExpression:y=>"("+y.operator+h(y.argument)+")",ConditionalExpression:y=>"("+h(y.test)+"?"+h(y.consequent)+":"+h(y.alternate)+")",LogicalExpression:y=>"("+h(y.left)+y.operator+h(y.right)+")",ObjectExpression:y=>{for(const v of y.properties){const _=v.key.name;LE.has(_)&&Z("Illegal property: "+_)}return"{"+y.properties.map(h).join(",")+"}"},Property:y=>{f+=1;const v=h(y.key);return f-=1,v+":"+h(y.value)}};function m(y){const v={code:h(y),globals:Object.keys(l),fields:Object.keys(c)};return l={},c={},v}return m.functions=i,m.constants=r,m}const f9=Symbol("vega_selection_getter");function Gz(e){return(!e.getter||!e.getter[f9])&&(e.getter=vi(e.field),e.getter[f9]=!0),e.getter}const e3="intersect",d9="union",Wle="vlMulti",jle="vlPoint",h9="or",Ble="and",So="_vgsid_",bp=vi(So),Hle="E",Gle="R",Yle="R-E",qle="R-LE",Vle="R-RE",Xle="E-LT",Jle="E-LTE",Qle="E-GT",Kle="E-GTE",Zle="E-VALID",eue="E-ONE",iy="index:unit";function p9(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,s,a;o<i;++o)if(a=n[o],s=Gz(a)(e),Fa(s)&&(s=jn(s)),Fa(r[o])&&(r[o]=jn(r[o])),ne(r[o])&&Fa(r[o][0])&&(r[o]=r[o].map(jn)),a.type===Hle){if(ne(r[o])?!r[o].includes(s):s!==r[o])return!1}else if(a.type===Gle){if(!Tc(s,r[o]))return!1}else if(a.type===Vle){if(!Tc(s,r[o],!0,!1))return!1}else if(a.type===Yle){if(!Tc(s,r[o],!1,!1))return!1}else if(a.type===qle){if(!Tc(s,r[o],!1,!0))return!1}else if(a.type===Xle){if(s>=r[o])return!1}else if(a.type===Jle){if(s>r[o])return!1}else if(a.type===Qle){if(s<=r[o])return!1}else if(a.type===Kle){if(s<r[o])return!1}else if(a.type===Zle){if(s===null||isNaN(s))return!1}else if(a.type===eue&&r[o].indexOf(s)===-1)return!1;return!0}function tue(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[iy]&&r[iy].value:void 0,s=n===e3,a=i.length,l=0,c,f,h,p,m;l<a;++l)if(c=i[l],o&&s){if(f=f||{},h=f[p=c.unit]||0,h===-1)continue;if(m=p9(t,c),f[p]=m?-1:++h,m&&o.size===1)return!0;if(!m&&h===o.get(p).count)return!1}else if(m=p9(t,c),s^m)return m;return a&&s}const Yz=Uf(bp),nue=Yz.left,rue=Yz.right;function iue(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[iy]&&r[iy].value:void 0,s=n===e3,a=bp(t),l=nue(i,a);if(l===i.length||bp(i[l])!==a)return!1;if(o&&s){if(o.size===1)return!0;if(rue(i,a)-l<o.size)return!1}return!0}function oue(e,t){return ne(e)||Z("First argument to selectionTuples must be an array."),ve(t)||Z("Second argument to selectionTuples must be an object."),e.map(n=>Ge(t.fields?{values:t.fields.map(r=>Gz(r)(n.datum))}:{[So]:bp(n.datum)},t))}function sue(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],s={},a={},l={},c,f,h,p,m,y,v,_,b,S,A=o.length,C=0,k,N;C<A;++C)if(c=o[C],p=c.unit,f=c.fields,h=c.values,f&&h){for(k=0,N=f.length;k<N;++k)m=f[k],v=s[m.field]||(s[m.field]={}),_=v[p]||(v[p]=[]),l[m.field]=b=m.type.charAt(0),S=Mb[`${b}_union`],v[p]=S(_,_e(h[k]));n&&(_=a[p]||(a[p]=[]),_.push(_e(h).reduce(($,O,D)=>($[f[D].field]=O,$),{})))}else m=So,y=bp(c),v=s[m]||(s[m]={}),_=v[p]||(v[p]=[]),_.push(y),n&&(_=a[p]||(a[p]=[]),_.push({[So]:y}));if(t=t||d9,s[So]?s[So]=Mb[`${So}_${t}`](...Object.values(s[So])):Object.keys(s).forEach($=>{s[$]=Object.keys(s[$]).map(O=>s[$][O]).reduce((O,D)=>O===void 0?D:Mb[`${l[$]}_${t}`](O,D))}),o=Object.keys(a),n&&o.length){const $=r?jle:Wle;s[$]=t===d9?{[h9]:o.reduce((O,D)=>(O.push(...a[D]),O),[])}:{[Ble]:o.map(O=>({[h9]:a[O]}))}}return s}var Mb={[`${So}_union`]:XY,[`${So}_intersect`]:qY,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=jn(t[0]),r=jn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=jn(t[0]),r=jn(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const aue=":",lue="@";function t3(e,t,n,r){t[0].type!==mu&&Z("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&Ze(t).value,s="unit",a=lue+s,l=aue+i;o===e3&&!we(r,a)&&(r[a]=n.getData(i).indataRef(n,s)),we(r,l)||(r[l]=n.getData(i).tuplesRef())}function qz(e){const t=this.context.data[e];return t?t.values.value:[]}function uue(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function cue(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(xi).insert(t)),1}function fue(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const lg=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},due=lg("format"),Vz=lg("timeFormat"),hue=lg("utcFormat"),pue=lg("timeParse"),gue=lg("utcParse"),sm=new Date(2e3,0,1);function Mv(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(sm.setYear(2e3),sm.setMonth(e),sm.setDate(t),Vz.call(this,sm,n))}function mue(e){return Mv.call(this,e,1,"%B")}function yue(e){return Mv.call(this,e,1,"%b")}function vue(e){return Mv.call(this,0,2+e,"%A")}function xue(e){return Mv.call(this,0,2+e,"%a")}const _ue=":",bue="@",BS="%",Xz="$";function n3(e,t,n,r){t[0].type!==mu&&Z("First argument to data functions must be a string literal.");const i=t[0].value,o=_ue+i;if(!we(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function wue(e,t,n,r){t[0].type!==mu&&Z("First argument to indata must be a string literal."),t[1].type!==mu&&Z("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,s=bue+o;we(s,r)||(r[s]=n.getData(i).indataRef(n,o))}function ur(e,t,n,r){if(t[0].type===mu)g9(n,r,t[0].value);else for(e in n.scales)g9(n,r,e)}function g9(e,t,n){const r=BS+n;if(!we(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Jo(e,t){if(xe(e)){const n=t.scales[e];return n&&vO(n.value)?n.value:void 0}else if(He(e))return vO(e)?e:void 0}function Sue(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=ur,n._range=ur,n._scale=ur;const r=i=>"_["+(i.type===mu?he(BS+i.value):he(BS)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function r3(e,t){return function(n,r,i){if(n){const o=Jo(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const Eue=r3("area",jne),Aue=r3("bounds",Yne),Cue=r3("centroid",Kne);function kue(e,t){const n=Jo(e,(t||this).context);return n&&n.scale()}function $ue(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function i3(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Mue(){return i3(this.context.dataflow,"warn",arguments)}function Nue(){return i3(this.context.dataflow,"info",arguments)}function Oue(){return i3(this.context.dataflow,"debug",arguments)}function Nb(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function HS(e){const t=Ba(e),n=Nb(t.r),r=Nb(t.g),i=Nb(t.b);return .2126*n+.7152*r+.0722*i}function Due(e,t){const n=HS(e),r=HS(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function Fue(){const e=[].slice.call(arguments);return e.unshift({}),Ge(...e)}function Jz(e,t){return e===t||e!==e&&t!==t?!0:ne(e)?ne(t)&&e.length===t.length?Tue(e,t):!1:ve(e)&&ve(t)?Qz(e,t):!1}function Tue(e,t){for(let n=0,r=e.length;n<r;++n)if(!Jz(e[n],t[n]))return!1;return!0}function Qz(e,t){for(const n in e)if(!Jz(e[n],t[n]))return!1;return!0}function m9(e){return t=>Qz(e,t)}function Rue(e,t,n,r,i,o){const s=this.context.dataflow,a=this.context.data[e],l=a.input,c=s.stamp();let f=a.changes,h,p;if(s._trigger===!1||!(l.value.length||t||r))return 0;if((!f||f.stamp<c)&&(a.changes=f=s.changeset(),f.stamp=c,s.runAfter(()=>{a.modified=!0,s.pulse(l,f).run()},!0,1)),n&&(h=n===!0?xi:ne(n)||zy(n)?n:m9(n),f.remove(h)),t&&f.insert(t),r&&(h=m9(r),l.value.some(h)?f.remove(h):f.insert(r)),i){if(He(i))throw Error("modify parameter must be a data tuple, not a function");for(p in o)f.modify(i,p,o[p])}return 1}function Lue(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Pue(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const y9={};function zue(e,t){const n=y9[t]||(y9[t]=vi(t));return ne(e)?e.map(n):n(e)}function Nv(e){return ne(e)||ArrayBuffer.isView(e)?e:null}function o3(e){return Nv(e)||(xe(e)?e:null)}function Iue(e,...t){return Nv(e).join(...t)}function Uue(e,...t){return o3(e).indexOf(...t)}function Wue(e,...t){return o3(e).lastIndexOf(...t)}function jue(e,...t){return o3(e).slice(...t)}function Bue(e,t,n){return He(n)&&Z("Function argument passed to replace."),!xe(t)&&!HE(t)&&Z("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function Hue(e){return Nv(e).slice().reverse()}function Gue(e){return Nv(e).slice().sort(zf)}function Yue(e,t,n){return vC(e||0,t||0,n||0)}function que(e,t){const n=Jo(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Vue(e,t){const n=Jo(e,(t||this).context);return n?n.copy():void 0}function Xue(e,t){const n=Jo(e,(t||this).context);return n?n.domain():[]}function Jue(e,t,n){const r=Jo(e,(n||this).context);return r?ne(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Que(e,t){const n=Jo(e,(t||this).context);return n&&n.range?n.range():[]}function Kue(e,t,n){const r=Jo(e,(n||this).context);return r?r(t):void 0}function Zue(e,t,n,r,i){e=Jo(e,(i||this).context);const o=jR(t,n);let s=e.domain(),a=s[0],l=Ze(s),c=Vn;return l-a?c=NR(e,a,l):e=(e.interpolator?lt("sequential")().interpolator(e.interpolator()):lt("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(s=e.ticks(+r||15),a!==s[0]&&s.unshift(a),l!==Ze(s)&&s.push(l)),s.forEach(f=>o.stop(c(f),e(f))),o}function ece(e,t,n){const r=Jo(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function tce(e){let t=null;return function(n){return n?fp(n,t=t||cf(e)):e}}const Kz=e=>e.data;function Zz(e,t){const n=qz.call(t,e);return n.root&&n.root.lookup||{}}function nce(e,t,n){const r=Zz(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(Kz):void 0}function rce(e,t){const n=Zz(e,this)[t];return n?n.ancestors().map(Kz):void 0}const eI=()=>typeof window<"u"&&window||null;function ice(){const e=eI();return e?e.screen:{}}function oce(){const e=eI();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function sce(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function tI(e,t,n){if(!e)return[];const[r,i]=e,o=new Jt().set(r[0],r[1],i[0],i[1]),s=n||this.context.dataflow.scenegraph().root;return zL(s,o,ace(t))}function ace(e){let t=null;if(e){const n=_e(e.marktype),r=_e(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function lce(e,t,n,r=5){e=_e(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function uce(e){return _e(e).reduce((t,[n,r],i)=>t+=i==0?`M ${n},${r} `:i===e.length-1?" Z":`L ${n},${r} `,"")}function cce(e,t,n){const{x:r,y:i,mark:o}=n,s=new Jt().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,c]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),c<s.y1&&(s.y1=c),c>s.y2&&(s.y2=c);return s.translate(r,i),tI([[s.x1,s.y1],[s.x2,s.y2]],e,o).filter(l=>fce(l.x,l.y,t))}function fce(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[s,a]=n[o],[l,c]=n[i];c>t!=a>t&&e<(s-l)*(t-c)/(a-c)+l&&r++}return r&1}const wp={random(){return bi()},cumulativeNormal:By,cumulativeLogNormal:vA,cumulativeUniform:wA,densityNormal:hA,densityLogNormal:yA,densityUniform:bA,quantileNormal:Hy,quantileLogNormal:xA,quantileUniform:SA,sampleNormal:jy,sampleLogNormal:mA,sampleUniform:_A,isArray:ne,isBoolean:el,isDate:Fa,isDefined(e){return e!==void 0},isNumber:st,isObject:ve,isRegExp:HE,isString:xe,isTuple:zy,isValid(e){return e!=null&&e===e},toBoolean:YE,toDate(e){return qE(e)},toNumber:jn,toString:VE,indexof:Uue,join:Iue,lastindexof:Wue,replace:Bue,reverse:Hue,sort:Gue,slice:jue,flush:lF,lerp:cF,merge:Fue,pad:hF,peek:Ze,pluck:zue,span:Rp,inrange:Tc,truncate:pF,rgb:Ba,lab:c1,hcl:f1,hsl:l1,luminance:HS,contrast:Due,sequence:Hr,format:due,utcFormat:hue,utcParse:gue,utcOffset:qF,utcSequence:JF,timeFormat:Vz,timeParse:pue,timeOffset:YF,timeSequence:XF,timeUnitSpecifier:RF,monthFormat:mue,monthAbbrevFormat:yue,dayFormat:vue,dayAbbrevFormat:xue,quarter:iF,utcquarter:oF,week:PF,utcweek:UF,dayofyear:LF,utcdayofyear:IF,warn:Mue,info:Nue,debug:Oue,extent(e){return Ro(e)},inScope:$ue,intersect:tI,clampRange:sF,pinchDistance:Lue,pinchAngle:Pue,screen:ice,containerSize:sce,windowSize:oce,bandspace:Yue,setdata:cue,pathShape:tce,panLinear:eF,panLog:tF,panPow:nF,panSymlog:rF,zoomLinear:IE,zoomLog:UE,zoomPow:Xm,zoomSymlog:WE,encode:fue,modify:Rue,lassoAppend:lce,lassoPath:uce,intersectLasso:cce},dce=["view","item","group","xy","x","y"],hce="event.vega.",nI="this.",s3={},rI={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${he(Xz+e)}]`,functions:pce,constants:jz,visitors:s3},GS=Hz(rI);function pce(e){const t=Bz(e);dce.forEach(n=>t[n]=hce+n);for(const n in wp)t[n]=nI+n;return Ge(t,Sue(e,wp,s3)),t}function qt(e,t,n){return arguments.length===1?wp[e]:(wp[e]=t,n&&(s3[e]=n),GS&&(GS.functions[e]=nI+e),this)}qt("bandwidth",que,ur);qt("copy",Vue,ur);qt("domain",Xue,ur);qt("range",Que,ur);qt("invert",Jue,ur);qt("scale",Kue,ur);qt("gradient",Zue,ur);qt("geoArea",Eue,ur);qt("geoBounds",Aue,ur);qt("geoCentroid",Cue,ur);qt("geoShape",ece,ur);qt("geoScale",kue,ur);qt("indata",uue,wue);qt("data",qz,n3);qt("treePath",nce,n3);qt("treeAncestors",rce,n3);qt("vlSelectionTest",tue,t3);qt("vlSelectionIdTest",iue,t3);qt("vlSelectionResolve",sue,t3);qt("vlSelectionTuples",oue);function Uo(e,t){const n={};let r;try{e=xe(e)?e:he(e)+"",r=Zk(e)}catch{Z("Expression parse error: "+e)}r.visit(o=>{if(o.type!==Rz)return;const s=o.callee.name,a=rI.visitors[s];a&&a(s,o.arguments,t,n)});const i=GS(r);return i.globals.forEach(o=>{const s=Xz+o;!we(n,s)&&t.getSignal(o)&&(n[s]=t.signalRef(o))}),{$expr:Ge({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function gce(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const mce=Ji(["rule"]),v9=Ji(["group","image","rect"]);function yce(e,t){let n="";return mce[t]||(e.x2&&(e.x?(v9[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(v9[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function a3(e){return(e+"").toLowerCase()}function vce(e){return a3(e)==="operator"}function xce(e){return a3(e)==="collect"}function uh(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function _ce(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var bce={operator:(e,t)=>uh(e,["_"],t.code),parameter:(e,t)=>uh(e,["datum","_"],t.code),event:(e,t)=>uh(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return uh(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const s="o["+he(o)+"]";i+=`$=${r[o].code};if(${s}!==$)${s}=$,m=1;`}return i+=yce(r,n),i+="return m;",uh(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(he).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,s)=>{const a=t[s];let l,c;return o.path?(l=`a${o.path}`,c=`b${o.path}`):((n=n||{})["f"+s]=o,l=`this.f${s}(a)`,c=`this.f${s}(b)`),_ce(l,c,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function wce(e){const t=this;vce(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Sce(e){const t=this;if(e.params){const n=t.get(e.id);n||Z("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Ece(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=ne(i)?i.map(o=>x9(o,n,t)):x9(i,n,t)}return t}function x9(e,t,n){if(!e||!ve(e))return e;for(let r=0,i=_9.length,o;r<i;++r)if(o=_9[r],we(e,o.key))return o.parse(e,t,n);return e}var _9=[{key:"$ref",parse:Ace},{key:"$key",parse:kce},{key:"$expr",parse:Cce},{key:"$field",parse:$ce},{key:"$encode",parse:Nce},{key:"$compare",parse:Mce},{key:"$context",parse:Oce},{key:"$subflow",parse:Dce},{key:"$tupleid",parse:Fce}];function Ace(e,t){return t.get(e.$ref)||Z("Operator not defined: "+e.$ref)}function Cce(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Fr(t.parameterExpression(e.$expr),e.$fields))}function kce(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=GE(e.$key,e.$flat,t.expr.codegen))}function $ce(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=vi(e.$field,e.$name,t.expr.codegen))}function Mce(e,t){const n="c:"+e.$compare+"_"+e.$order,r=_e(e.$compare).map(i=>i&&i.$tupleid?De:i);return t.fn[n]||(t.fn[n]=jE(r,e.$order,t.expr.codegen))}function Nce(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=Fr(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function Oce(e,t){return t}function Dce(e,t){const n=e.$subflow;return function(r,i,o){const s=t.fork().parse(n),a=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(o),a.detachSubflow=()=>t.detach(s),a}}function Fce(){return De}function Tce(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Z("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Rce(e){var t=this,n=ve(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,s=void 0;r||Z("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(s=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,s)}const Lce={skip:!0};function Pce(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const s=t.signals[o];e.signals(o,s)&&(r[o]=s.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const s=t.data[o];e.data(o,s)&&(i[o]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function zce(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],Lce)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(xi).insert(r[o]))}),(e.subcontext||[]).forEach((o,s)=>{const a=t.subcontext[s];a&&a.setState(o)})}function iI(e,t,n,r){return new oI(e,t,n,r)}function oI(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||bce,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function b9(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}oI.prototype=b9.prototype={fork(){const e=new b9(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),xce(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const s=n.data[o]||(n.data[o]={});e.data[o].forEach(a=>s[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[a3(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:gce,parseOperator:wce,parseOperatorParameters:Sce,parseParameters:Ece,parseStream:Tce,parseUpdate:Rce,getState:Pce,setState:zce};function Ice(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),sI(t,e.description()))}function sI(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Uce(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const Ob="default";function Wce(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:Ob,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,o=i?xe(i)?i:i.user:Ob,s=r.item&&r.item.cursor||null;return i&&o===i.user&&s==i.item?i:{user:o,item:s}}),e.add(null,function(n){let r=n.cursor,i=this.value;return xe(r)||(i=r.item,r=r.user),YS(e,r&&r!==Ob?r:i||r),i},{cursor:t})}function YS(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function oy(e,t){var n=e._runtime.data;return we(n,t)||Z("Unrecognized data set: "+t),n[t]}function jce(e,t){return arguments.length<2?oy(this,e).values.value:Ov.call(this,e,Fu().remove(xi).insert(t))}function Ov(e,t){S7(t)||Z("Second argument to changes must be a changeset.");const n=oy(this,e);return n.modified=!0,this.pulse(n.input,t)}function Bce(e,t){return Ov.call(this,e,Fu().insert(t))}function Hce(e,t){return Ov.call(this,e,Fu().remove(t))}function aI(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function lI(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Dv(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Gce(e){var t=Dv(e),n=aI(e),r=lI(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function Yce(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,s,a;return i&&(a=Dv(e),s=t.changedTouches?t.changedTouches[0]:t,o=yv(s,i),o[0]-=a[0],o[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=qce(e,n,o),t}function qce(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(s){var a=r,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function o(s){if(!s)return n;xe(s)&&(s=i(s));const a=n.slice();for(;s;)a[0]-=s.x||0,a[1]-=s.y||0,s=s.mark&&s.mark.group;return a}return{view:Xn(e),item:Xn(t||{}),group:i,xy:o,x:s=>o(s)[0],y:s=>o(s)[1]}}const w9="view",Vce="timer",Xce="window",Jce={trap:!1};function Qce(e){const t=Ge({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{ne(r[o])&&(r[o]=Ji(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function uI(e,t,n,r){e._eventListeners.push({type:n,sources:_e(t),handler:r})}function Kce(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function am(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||ve(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Zce(e,t,n){var r=this,i=new Wy(n),o=function(c,f){r.runAsync(null,()=>{e===w9&&Kce(r,t)&&c.preventDefault(),i.receive(Yce(r,c,f))})},s;if(e===Vce)am(r,"timer",t)&&r.timer(o,t);else if(e===w9)am(r,"view",t)&&r.addEventListener(t,o,Jce);else if(e===Xce?am(r,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&am(r,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=s.length;a<l;++a)s[a].addEventListener(t,o);uI(r,s,t,o)}return i}function S9(e){return e.item}function E9(e){return e.item.mark.source}function A9(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function efe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",S9),E9,A9(e)),this.on(this.events("view","pointerout",S9),E9,A9(t)),this}function tfe(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,o,s,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(s=r[i],o=s.sources.length;--o>=0;)s.sources[o].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function Vr(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const nfe="vega-bind",rfe="vega-bind-name",ife="vega-bind-radio";function ofe(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,s)})}},r.debounce&&(i.update=BE(r.debounce,i.update))),(r.input==null&&r.element?sfe:lfe)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function sfe(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),uI(r,t,i,o),e.set=s=>{t.value=s,t.dispatchEvent(afe(i))}}function afe(e){return typeof Event<"u"?new Event(e):{type:e}}function lfe(e,t,n,r){const i=r.signal(n.signal),o=Vr("div",{class:nfe}),s=n.input==="radio"?o:o.appendChild(Vr("label"));s.appendChild(Vr("span",{class:rfe},n.name||n.signal)),t.appendChild(o);let a=ufe;switch(n.input){case"checkbox":a=cfe;break;case"select":a=ffe;break;case"radio":a=dfe;break;case"range":a=hfe;break}a(e,s,n,i)}function ufe(e,t,n,r){const i=Vr("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function cfe(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=Vr("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=s=>o.checked=!!s||null}function ffe(e,t,n,r){const i=Vr("select",{name:n.signal}),o=n.labels||[];n.options.forEach((s,a)=>{const l={value:s};sy(s,r)&&(l.selected=!0),i.appendChild(Vr("option",l,(o[a]||s)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=s=>{for(let a=0,l=n.options.length;a<l;++a)if(sy(n.options[a],s)){i.selectedIndex=a;return}}}function dfe(e,t,n,r){const i=Vr("span",{class:ife}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((s,a)=>{const l={type:"radio",name:n.signal,value:s};sy(s,r)&&(l.checked=!0);const c=Vr("input",l);c.addEventListener("change",()=>e.update(s));const f=Vr("label",{},(o[a]||s)+"");return f.prepend(c),i.appendChild(f),c}),e.set=s=>{const a=e.elements,l=a.length;for(let c=0;c<l;++c)sy(a[c].value,s)&&(a[c].checked=!0)}}function hfe(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,s=n.step||Ua(o,i,100),a=Vr("input",{type:"range",name:n.signal,min:o,max:i,step:s});a.value=r;const l=Vr("span",{},+r);t.appendChild(a),t.appendChild(l);const c=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",c),a.addEventListener("change",c),e.elements=[a],e.set=f=>{a.value=f,l.textContent=f}}function sy(e,t){return e===t||e+""==t+""}function cI(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,aI(e),lI(e),Dv(e),i,o).background(e.background())}function l3(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function pfe(e,t,n,r){const i=new r(e.loader(),l3(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Dv(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function gfe(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=vv(r);e=n._el=e?Db(n,e,!0):null,Ice(n),o||n.error("Unrecognized renderer type: "+r);const s=o.handler||eg,a=e?o.renderer:o.headless;return n._renderer=a?cI(n,n._renderer,e,a):null,n._handler=pfe(n,n._handler,e,s),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=Db(n,t,!0):e.appendChild(Vr("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=Db(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{ofe(n,l.element||t,l)})),n}function Db(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const ch=e=>+e||0,mfe=e=>({top:e,bottom:e,left:e,right:e});function C9(e){return ve(e)?{top:ch(e.top),bottom:ch(e.bottom),left:ch(e.left),right:ch(e.right)}:mfe(ch(e))}async function u3(e,t,n,r){const i=vv(t),o=i&&i.headless;return o||Z("Unrecognized renderer type: "+t),await e.runAsync(),cI(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function yfe(e,t){e!==ka.Canvas&&e!==ka.SVG&&e!==ka.PNG&&Z("Unrecognized image type: "+e);const n=await u3(this,e,t);return e===ka.SVG?vfe(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function vfe(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function xfe(e,t){return(await u3(this,ka.Canvas,e,t)).canvas()}async function _fe(e){return(await u3(this,ka.SVG,e)).svg()}function bfe(e,t,n){return iI(e,rf,wp,n).parse(t)}function wfe(e){var t=this._runtime.scales;return we(t,e)||Z("Unrecognized scale or projection: "+e),t[e].value}var fI="width",dI="height",c3="padding",k9={skip:!0};function hI(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===c3?r.left+r.right:0)}function pI(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===c3?r.top+r.bottom:0)}function Sfe(e){var t=e._signals,n=t[fI],r=t[dI],i=t[c3];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=hI(e,a.size),o()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=pI(e,a.size),o()},{size:r});const s=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,s.rank=i.rank+1}function Efe(e,t,n,r,i,o){this.runAfter(s=>{let a=0;s._autosize=0,s.width()!==n&&(a=1,s.signal(fI,n,k9),s._resizeWidth.skip(!0)),s.height()!==r&&(a=1,s.signal(dI,r,k9),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==i[0]||s._origin[1]!==i[1])&&(s._resize=1,s._origin=i),a&&s.run("enter"),o&&s.runAfter(l=>l.resize())},!1,1)}function Afe(e){return this._runtime.getState(e||{data:Cfe,signals:kfe,recurse:!0})}function Cfe(e,t){return t.modified&&ne(t.input.value)&&!e.startsWith("_:vega:_")}function kfe(e,t){return!(e==="parent"||t instanceof rf.proxy)}function $fe(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Mfe(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Zie(n,t))}function Nfe(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Ofe(r))}function Ofe(e){return e==null?"":ne(e)?gI(e):ve(e)&&!Fa(e)?Dfe(e):e+""}function Dfe(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ne(n)?gI(n):mI(n))}).join(`
`)}function gI(e){return"["+e.map(mI).join(", ")+"]"}function mI(e){return ne(e)?"[]":ve(e)&&!Fa(e)?"{}":e}function Ffe(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function yI(e,t){const n=this;if(t=t||{},Wc.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=Ge({},e.locale,t.locale);n.locale(h7(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||ka.Canvas,n._scenegraph=new fL;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Nfe,n._redraw=!0,n._handler=new eg().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Qce(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=bfe(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:Ge({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=hI(n,n._width),n._viewHeight=pI(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Sfe(n),Uce(n),Wce(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function lm(e,t){return we(e._signals,t)?e._signals[t]:Z("Unrecognized signal name: "+he(t))}function vI(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function $9(e,t,n,r){let i=vI(n,r);return i||(i=l3(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function M9(e,t,n){const r=vI(t,n);return r&&t._targets.remove(r),e}ge(yI,Wc,{async evaluate(e,t,n){if(await Wc.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Gce(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&Sm(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&sI(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=lm(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",C9(e)):C9(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(vv(e)||Z("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Wc.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(lm(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Efe,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=l3(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return $9(this,e,lm(this,e),t)},removeSignalListener(e,t){return M9(this,lm(this,e),t)},addDataListener(e,t){return $9(this,e,oy(this,e).values,t)},removeDataListener(e,t){return M9(this,oy(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=YS(this,null);this._globalCursor=!!e,t&&YS(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Mfe,events:Zce,finalize:tfe,hover:efe,data:jce,change:Ov,insert:Bce,remove:Hce,scale:wfe,initialize:gfe,toImageURL:yfe,toCanvas:xfe,toSVG:_fe,getState:Afe,setState:$fe,_watchPixelRatio:Ffe});const Tfe="view",ay="[",ly="]",xI="{",_I="}",Rfe=":",bI=",",Lfe="@",Pfe=">",zfe=/[[\]{}]/,Ife={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let wI,SI;function sl(e,t,n){return wI=t||Tfe,SI=n||Ife,EI(e.trim()).map(qS)}function Ufe(e){return SI[e]}function Zh(e,t,n,r,i){const o=e.length;let s=0,a;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.includes(a)?--s:r&&r.includes(a)&&++s}return t}function EI(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=Zh(e,i,bI,ay+xI,ly+_I),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function qS(e){return e[0]==="["?Wfe(e):jfe(e)}function Wfe(e){const t=e.length;let n=1,r;if(n=Zh(e,n,ly,ay,ly),n===t)throw"Empty between selector: "+e;if(r=EI(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Pfe)throw"Expected '>' after between selector: "+e;r=r.map(qS);const i=qS(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function jfe(e){const t={source:wI},n=[];let r=[0,0],i=0,o=0,s=e.length,a=0,l,c;if(e[s-1]===_I){if(a=e.lastIndexOf(xI),a>=0){try{r=Bfe(e.substring(a+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),s=e.length}else throw"Unmatched right brace: "+e;a=0}if(!s)throw e;if(e[0]===Lfe&&(i=++a),l=Zh(e,a,Rfe),l<s&&(n.push(e.substring(o,l).trim()),o=a=++l),a=Zh(e,a,ay),a===s)n.push(e.substring(o,s).trim());else if(n.push(e.substring(o,a).trim()),c=[],o=++a,o===s)throw"Unmatched left bracket: "+e;for(;a<s;){if(a=Zh(e,a,ly),a===s)throw"Unmatched left bracket: "+e;if(c.push(e.substring(o,a).trim()),a<s-1&&e[++a]!==ay)throw"Expected left bracket: "+e;o=++a}if(!(s=n.length)||zfe.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],i?t.markname=n[0].slice(1):Ufe(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),c!=null&&(t.filter=c),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Bfe(e){const t=e.split(bI);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Hfe(e){return ve(e)?e:{type:e||"pad"}}const fh=e=>+e||0,Gfe=e=>({top:e,bottom:e,left:e,right:e});function Yfe(e){return ve(e)?e.signal?e:{top:fh(e.top),bottom:fh(e.bottom),left:fh(e.left),right:fh(e.right)}:Gfe(fh(e))}const gn=e=>ve(e)&&!ne(e)?Ge({},e):{value:e};function N9(e,t,n,r){return n!=null?(ve(n)&&!ne(n)||ne(n)&&n.length&&ve(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Nn(e,t,n){for(const r in t)N9(e,r,t[r]);for(const r in n)N9(e,r,n[r],"update")}function Jf(e,t,n){for(const r in t)n&&we(n,r)||(e[r]=Ge(e[r]||{},t[r]));return e}function Dc(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const f3="mark",d3="frame",h3="scope",qfe="axis",Vfe="axis-domain",Xfe="axis-grid",Jfe="axis-label",Qfe="axis-tick",Kfe="axis-title",Zfe="legend",ede="legend-band",tde="legend-entry",nde="legend-gradient",AI="legend-label",rde="legend-symbol",ide="legend-title",ode="title",sde="title-text",ade="title-subtitle";function lde(e,t,n,r,i){const o={},s={};let a,l,c,f;l="lineBreak",t==="text"&&i[l]!=null&&!Dc(l,e)&&Fb(o,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),f=n===d3?i.group:n===f3?Ge({},i.mark,i[t]):null;for(l in f)c=Dc(l,e)||(l==="fill"||l==="stroke")&&(Dc("fill",e)||Dc("stroke",e)),c||Fb(o,l,f[l]);_e(r).forEach(h=>{const p=i.style&&i.style[h];for(const m in p)Dc(m,e)||Fb(o,m,p[m])}),e=Ge({},e);for(l in o)f=o[l],f.signal?(a=a||{})[l]=f:s[l]=f;return e.enter=Ge(s,e.enter),a&&(e.update=Ge(a,e.update)),e}function Fb(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const CI=e=>xe(e)?he(e):e.signal?`(${e.signal})`:kI(e);function Fv(e){if(e.gradient!=null)return cde(e);let t=e.signal?`(${e.signal})`:e.color?ude(e.color):e.field!=null?kI(e.field):e.value!==void 0?he(e.value):void 0;return e.scale!=null&&(t=fde(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${Wm(e.exponent)})`),e.mult!=null&&(t+=`*${Wm(e.mult)}`),e.offset!=null&&(t+=`+${Wm(e.offset)}`),e.round&&(t=`round(${t})`),t}const um=(e,t,n,r)=>`(${e}(${[t,n,r].map(Fv).join(",")})+'')`;function ude(e){return e.c?um("hcl",e.h,e.c,e.l):e.h||e.s?um("hsl",e.h,e.s,e.l):e.l||e.a?um("lab",e.l,e.a,e.b):e.r||e.g||e.b?um("rgb",e.r,e.g,e.b):null}function cde(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:he(n));for(;t.length&&Ze(t)==null;)t.pop();return t.unshift(CI(e.gradient)),`gradient(${t.join(",")})`}function Wm(e){return ve(e)?"("+Fv(e)+")":e}function kI(e){return $I(ve(e)?e:{datum:e})}function $I(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Z("Invalid field reference: "+he(e));return e.signal||(r=xe(r)?Ho(r).map(he).join("]["):$I(r)),t+"["+r+"]"}function fde(e,t){const n=CI(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+Wm(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function dde(e){let t="";return e.forEach(n=>{const r=Fv(n);t+=n.test?`(${n.test})?${r}:`:r}),Ze(t)===":"&&(t+="null"),t}function MI(e,t,n,r,i,o){const s={};o=o||{},o.encoders={$encode:s},e=lde(e,t,n,r,i.config);for(const a in e)s[a]=hde(e[a],t,o,i);return o}function hde(e,t,n,r){const i={},o={};for(const s in e)e[s]!=null&&(i[s]=gde(pde(e[s]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function pde(e){return ne(e)?dde(e):Fv(e)}function gde(e,t,n,r){const i=Uo(e,t);return i.$fields.forEach(o=>r[o]=1),Ge(n,i.$params),i.$expr}const mde="outer",yde=["value","update","init","react","bind"];function O9(e,t){Z(e+' for "outer" push: '+he(t))}function NI(e,t){const n=e.name;if(e.push===mde)t.signals[n]||O9("No prior signal definition",n),yde.forEach(r=>{e[r]!==void 0&&O9("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function VS(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function Tv(e,t,n,r){return new VS(e,t,n,r)}function uy(e,t){return Tv("operator",e,t)}function Oe(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Sp(e,t){return t?{$field:e,$name:t}:{$field:e}}const XS=Sp("key");function D9(e,t){return{$compare:e,$order:t}}function vde(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const xde="ascending",_de="descending";function bde(e){return ve(e)?(e.order===_de?"-":"+")+Rv(e.op,e.field):""}function Rv(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const p3="scope",JS="view";function on(e){return e&&e.signal}function wde(e){return e&&e.expr}function jm(e){if(on(e))return!0;if(ve(e)){for(const t in e)if(jm(e[t]))return!0}return!1}function Ii(e,t){return e??t}function nu(e){return e&&e.signal||e}const F9="timer";function Ep(e,t){return(e.merge?Ede:e.stream?Ade:e.type?Cde:Z("Invalid stream specification: "+he(e)))(e,t)}function Sde(e){return e===p3?JS:e||JS}function Ede(e,t){const n=e.merge.map(i=>Ep(i,t)),r=g3({merge:n},e,t);return t.addStream(r).id}function Ade(e,t){const n=Ep(e.stream,t),r=g3({stream:n},e,t);return t.addStream(r).id}function Cde(e,t){let n;e.type===F9?(n=t.event(F9,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Sde(e.source),e.type);const r=g3({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function g3(e,t,n){let r=t.between;return r&&(r.length!==2&&Z('Stream "between" parameter must have 2 entries: '+he(t)),e.between=[Ep(r[0],n),Ep(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(kde(t.marktype,t.markname,t.markrole)),t.source===p3&&r.push("inScope(event.item)"),r.length&&(e.filter=Uo("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function kde(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const $de={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Mde(e,t,n){const r=e.encode,i={target:n};let o=e.events,s=e.update,a=[];o||Z("Signal update missing events specification."),xe(o)&&(o=sl(o,t.isSubscope()?p3:JS)),o=_e(o).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[Ode(a)]),o.length&&a.push(o.length>1?{merge:o}:o[0]),r!=null&&(s&&Z("Signal encode and update are mutually exclusive."),s="encode(item(),"+he(r)+")"),i.update=xe(s)?Uo(s,t):s.expr!=null?Uo(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:$de,$params:{$value:t.signalRef(s.signal)}}:Z("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(Ge(Nde(l,t),i)))}function Nde(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Ep(e,t)}}function Ode(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Dde(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Z("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Uo(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Mde(i,t,n.id))}const yt=e=>(t,n,r)=>Tv(e,n,t||void 0,r),OI=yt("aggregate"),Fde=yt("axisticks"),DI=yt("bound"),io=yt("collect"),T9=yt("compare"),Tde=yt("datajoin"),FI=yt("encode"),Rde=yt("expression"),Lde=yt("facet"),Pde=yt("field"),zde=yt("key"),Ide=yt("legendentries"),Ude=yt("load"),Wde=yt("mark"),jde=yt("multiextent"),Bde=yt("multivalues"),Hde=yt("overlap"),Gde=yt("params"),TI=yt("prefacet"),Yde=yt("projection"),qde=yt("proxy"),Vde=yt("relay"),RI=yt("render"),Xde=yt("scale"),Pu=yt("sieve"),Jde=yt("sortitems"),LI=yt("viewlayout"),Qde=yt("values");let Kde=0;const PI={min:"min",max:"max",count:"sum"};function Zde(e,t){const n=e.type||"linear";ER(n)||Z("Unrecognized scale type: "+he(n)),t.addScale(e.name,{type:n,domain:void 0})}function ehe(e,t){const n=t.getScale(e.name).params;let r;n.domain=zI(e.domain,e,t),e.range!=null&&(n.range=UI(e,t,n)),e.interpolate!=null&&che(e.interpolate,n),e.nice!=null&&(n.nice=uhe(e.nice,t)),e.bins!=null&&(n.bins=lhe(e.bins,t));for(r in e)we(n,r)||r==="name"||(n[r]=hi(e[r],t))}function hi(e,t){return ve(e)?e.signal?t.signalRef(e.signal):Z("Unsupported object: "+he(e)):e}function Bm(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>hi(n,t))}function Lv(e){Z("Can not find data set: "+he(e))}function zI(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Z("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(ne(e)?the:e.fields?rhe:nhe)(e,t,n)}function the(e,t,n){return e.map(r=>hi(r,n))}function nhe(e,t,n){const r=n.getData(e.data);return r||Lv(e.data),uf(t.type)?r.valuesRef(n,e.field,II(e.sort,!1)):kR(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function rhe(e,t,n){const r=e.data,i=e.fields.reduce((o,s)=>(s=xe(s)?{data:r,field:s}:ne(s)||s.signal?ihe(s,n):s,o.push(s),o),[]);return(uf(t.type)?ohe:kR(t.type)?she:ahe)(e,n,i)}function ihe(e,t){const n="_:vega:_"+Kde++,r=io({});if(ne(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+he(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Pu({})]),{data:n,field:"data"}}function ohe(e,t,n){const r=II(e.sort,!0);let i,o;const s=n.map(c=>{const f=t.getData(c.data);return f||Lv(c.data),f.countsRef(t,c.field,r)}),a={groupby:XS,pulse:s};r&&(i=r.op||"count",o=r.field?Rv(i,r.field):"count",a.ops=[PI[i]],a.fields=[t.fieldRef(o)],a.as=[o]),i=t.add(OI(a));const l=t.add(io({pulse:Oe(i)}));return o=t.add(Qde({field:XS,sort:t.sortRef(r),pulse:Oe(l)})),Oe(o)}function II(e,t){return e&&(!e.field&&!e.op?ve(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Z("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!PI[e.op]&&Z("Multiple domain scales can not be sorted using "+e.op)),e}function she(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||Lv(i.data),o.domainRef(t,i.field)});return Oe(t.add(Bde({values:r})))}function ahe(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||Lv(i.data),o.extentRef(t,i.field)});return Oe(t.add(jde({extents:r})))}function lhe(e,t){return e.signal||ne(e)?Bm(e,t):t.objectProperty(e)}function uhe(e,t){return e.signal?t.signalRef(e.signal):ve(e)?{interval:hi(e.interval),step:hi(e.step)}:hi(e)}function che(e,t){t.interpolate=hi(e.type||e),e.gamma!=null&&(t.interpolateGamma=hi(e.gamma))}function UI(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(xe(i)){if(r&&we(r,i))return e=Ge({},e,{range:r[i]}),UI(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=uf(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Z("Unrecognized scale range value: "+he(i))}else if(i.scheme){n.scheme=ne(i.scheme)?Bm(i.scheme,t):hi(i.scheme,t),i.extent&&(n.schemeExtent=Bm(i.extent,t)),i.count&&(n.schemeCount=hi(i.count,t));return}else if(i.step){n.rangeStep=hi(i.step,t);return}else{if(uf(e.type)&&!ne(i))return zI(i,e,t);ne(i)||Z("Unsupported range type: "+he(i))}return i.map(o=>(ne(o)?Bm:hi)(o,t))}function fhe(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=QS(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=QS(n[i],i,t));t.addProjection(e.name,r)}function QS(e,t,n){return ne(e)?e.map(r=>QS(r,t,n)):ve(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Z("Unsupported parameter object: "+he(e)):e}const oo="top",Qf="left",Kf="right",Va="bottom",WI="center",dhe="vertical",hhe="start",phe="middle",ghe="end",KS="index",m3="label",mhe="offset",vf="perc",yhe="perc2",gi="value",ug="guide-label",y3="guide-title",vhe="group-title",xhe="group-subtitle",R9="symbol",Hm="gradient",ZS="discrete",eE="size",_he="shape",bhe="fill",whe="stroke",She="strokeWidth",Ehe="strokeDash",Ahe="opacity",v3=[eE,_he,bhe,whe,She,Ehe,Ahe],cg={name:1,style:1,interactive:1},tt={value:0},mi={value:1},Pv="group",jI="rect",x3="rule",Che="symbol",zu="text";function Ap(e){return e.type=Pv,e.interactive=e.interactive||!1,e}function Tr(e,t){const n=(r,i)=>Ii(e[r],Ii(t[r],i));return n.isVertical=r=>dhe===Ii(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Ii(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Ii(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Ii(e.columns,Ii(t.columns,+n.isVertical(!0))),n}function BI(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function khe(e,t,n){const r=t.config.style[n];return r&&r[e]}function zv(e,t,n){return`item.anchor === '${hhe}' ? ${e} : item.anchor === '${ghe}' ? ${t} : ${n}`}const _3=zv(he(Qf),he(Kf),he(WI));function $he(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},ve(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function HI(e,t){return t?e?ve(e)?Object.assign({},e,{offset:HI(e.offset,t)}):{value:e,offset:t}:t:e}function ei(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Jf(e.encode,t,cg)):e.interactive=!1,e}function Mhe(e,t,n,r){const i=Tr(e,n),o=i.isVertical(),s=i.gradientThickness(),a=i.gradientLength();let l,c,f,h,p;o?(c=[0,1],f=[0,0],h=s,p=a):(c=[0,0],f=[1,0],h=a,p=s);const m={enter:l={opacity:tt,x:tt,y:tt,width:gn(h),height:gn(p)},update:Ge({},l,{opacity:mi,fill:{gradient:t,start:c,stop:f}}),exit:{opacity:tt}};return Nn(m,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),ei({type:jI,role:nde,encode:m},r)}function Nhe(e,t,n,r,i){const o=Tr(e,n),s=o.isVertical(),a=o.gradientThickness(),l=o.gradientLength();let c,f,h,p,m="";s?(c="y",h="y2",f="x",p="width",m="1-"):(c="x",h="x2",f="y",p="height");const y={opacity:tt,fill:{scale:t,field:gi}};y[c]={signal:m+"datum."+vf,mult:l},y[f]=tt,y[h]={signal:m+"datum."+yhe,mult:l},y[p]=gn(a);const v={enter:y,update:Ge({},y,{opacity:mi}),exit:{opacity:tt}};return Nn(v,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),ei({type:jI,role:ede,key:gi,from:i,encode:v},r)}const Ohe=`datum.${vf}<=0?"${Qf}":datum.${vf}>=1?"${Kf}":"${WI}"`,Dhe=`datum.${vf}<=0?"${Va}":datum.${vf}>=1?"${oo}":"${phe}"`;function L9(e,t,n,r){const i=Tr(e,t),o=i.isVertical(),s=gn(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),c,f,h,p,m="";const y={enter:c={opacity:tt},update:f={opacity:mi,text:{field:m3}},exit:{opacity:tt}};return Nn(y,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Ii(e.labelLimit,t.gradientLabelLimit)}),o?(c.align={value:"left"},c.baseline=f.baseline={signal:Dhe},h="y",p="x",m="1-"):(c.align=f.align={signal:Ohe},c.baseline={value:"top"},h="x",p="y"),c[h]=f[h]={signal:m+"datum."+vf,mult:a},c[p]=f[p]=s,s.offset=Ii(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+KS}:void 0,ei({type:zu,role:AI,style:ug,key:gi,from:r,encode:y,overlap:l},n)}function Fhe(e,t,n,r,i){const o=Tr(e,t),s=n.entries,a=!!(s&&s.interactive),l=s?s.name:void 0,c=o("clipHeight"),f=o("symbolOffset"),h={data:"value"},p=`(${i}) ? datum.${mhe} : datum.${eE}`,m=c?gn(c):{field:eE},y=`datum.${KS}`,v=`max(1, ${i})`;let _,b,S,A,C;m.mult=.5,_={enter:b={opacity:tt,x:{signal:p,mult:.5,offset:f},y:m},update:S={opacity:mi,x:b.x,y:b.y},exit:{opacity:tt}};let k=null,N=null;e.fill||(k=t.symbolBaseFillColor,N=t.symbolBaseStrokeColor),Nn(_,{fill:o("symbolFillColor",k),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",N),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),v3.forEach(P=>{e[P]&&(S[P]=b[P]={scale:e[P],field:gi})});const $=ei({type:Che,role:rde,key:gi,from:h,clip:c?!0:void 0,encode:_},n.symbols),O=gn(f);O.offset=o("labelOffset"),_={enter:b={opacity:tt,x:{signal:p,offset:O},y:m},update:S={opacity:mi,text:{field:m3},x:b.x,y:b.y},exit:{opacity:tt}},Nn(_,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const D=ei({type:zu,role:AI,style:ug,key:gi,from:h,encode:_},n.labels);return _={enter:{noBound:{value:!c},width:tt,height:c?gn(c):tt,opacity:tt},exit:{opacity:tt},update:S={opacity:mi,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(A=`ceil(item.mark.items.length / ${v})`,S.row.signal=`${y}%${A}`,S.column.signal=`floor(${y} / ${A})`,C={field:["row",y]}):(S.row.signal=`floor(${y} / ${v})`,S.column.signal=`${y} % ${v}`,C={field:y}),S.column.signal=`(${i})?${S.column.signal}:${y}`,r={facet:{data:r,name:"value",groupby:KS}},Ap({role:h3,from:r,encode:Jf(_,s,cg),marks:[$,D],name:l,interactive:a,sort:C})}function The(e,t){const n=Tr(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const b3='item.orient === "left"',w3='item.orient === "right"',Iv=`(${b3} || ${w3})`,Rhe=`datum.vgrad && ${Iv}`,Lhe=zv('"top"','"bottom"','"middle"'),Phe=zv('"right"','"left"','"center"'),zhe=`datum.vgrad && ${w3} ? (${Phe}) : (${Iv} && !(datum.vgrad && ${b3})) ? "left" : ${_3}`,Ihe=`item._anchor || (${Iv} ? "middle" : "start")`,Uhe=`${Rhe} ? (${b3} ? -90 : 90) : 0`,Whe=`${Iv} ? (datum.vgrad ? (${w3} ? "bottom" : "top") : ${Lhe}) : "top"`;function jhe(e,t,n,r){const i=Tr(e,t),o={enter:{opacity:tt},update:{opacity:mi,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:tt}};return Nn(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Ihe},angle:{signal:Uhe},align:{signal:zhe},baseline:{signal:Whe},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),ei({type:zu,role:ide,style:y3,from:r,encode:o},n)}function Bhe(e,t){let n;return ve(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+P9(e.path)+")":e.sphere&&(n="geoShape("+P9(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function P9(e){return ve(e)&&e.signal?e.signal:he(e)}function GI(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Pv?h3:t||f3}function Hhe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||GI(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Ghe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function S3(e,t){const n=C7(e.type);n||Z("Unrecognized transform type: "+he(e.type));const r=Tv(n.type.toLowerCase(),null,YI(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function YI(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const s=e.params[o];r[s.name]=Yhe(s,t,n)}return r}function Yhe(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return qhe(e,t,n);if(i===void 0){e.required&&Z("Missing required "+he(t.type)+" parameter: "+he(e.name));return}else{if(r==="param")return Vhe(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!on(i)?i.map(o=>z9(e,o,n)):z9(e,i,n)}function z9(e,t,n){const r=e.type;if(on(t))return U9(r)?Z("Expression references can not be signals."):Tb(r)?n.fieldRef(t):W9(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||Tb(r);return i&&Xhe(t)?n.exprRef(t.expr,t.as):i&&Jhe(t)?Sp(t.field,t.as):U9(r)?Uo(t,n):Qhe(r)?Oe(n.getData(t).values):Tb(r)?Sp(t):W9(r)?n.compareRef(t):t}}function qhe(e,t,n){return xe(t.from)||Z('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function Vhe(e,t,n){const r=t[e.name];return e.array?(ne(r)||Z("Expected an array of sub-parameters. Instead: "+he(r)),r.map(i=>I9(e,i,n))):I9(e,r,n)}function I9(e,t,n){const r=e.params.length;let i;for(let s=0;s<r;++s){i=e.params[s];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Z("Unsupported parameter: "+he(t));const o=Ge(YI(i,t,n),i.key);return Oe(n.add(Gde(o)))}const Xhe=e=>e&&e.expr,Jhe=e=>e&&e.field,Qhe=e=>e==="data",U9=e=>e==="expr",Tb=e=>e==="field",W9=e=>e==="compare";function Khe(e,t,n){let r,i,o,s,a;return e?(r=e.facet)&&(t||Z("Only group marks can be faceted."),r.field!=null?s=a=Gm(r,n):(e.data?a=Oe(n.getData(e.data).aggregate):(o=S3(Ge({type:"aggregate",groupby:_e(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=Gm(r,n),s=a=Oe(n.add(o))),i=n.keyRef(r.groupby,!0))):s=Oe(n.add(io(null,[{}]))),s||(s=Gm(e,n)),{key:i,pulse:s,parent:a}}function Gm(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Oe(t.getData(e.data).output)}function xu(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}xu.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],s=null,a=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Oe(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(s=t[a]);return new xu(e,o,i,r,s)};function qI(e){return xe(e)?e:null}function j9(e,t,n){const r=Rv(n.op,n.field);let i;if(t.ops){for(let o=0,s=t.as.length;o<s;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function dh(e,t,n,r,i,o,s){const a=t[n]||(t[n]={}),l=bde(o);let c=qI(i),f,h;if(c!=null&&(e=t.scope,c=c+(l?"|"+l:""),f=a[c]),!f){const p=o?{field:XS,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:Oe(t.output)};l&&(p.sort=e.sortRef(o)),h=e.add(Tv(r,void 0,p)),s&&(t.index[i]=h),f=Oe(h),c!=null&&(a[c]=f)}return f}xu.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=qI(t);let s,a,l;return o!=null&&(e=r.scope,s=i[o]),s?n&&n.field&&j9(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Oe(r.output)},n&&n.field&&j9(e,l,n),a=e.add(OI(l)),s=e.add(io({pulse:Oe(a)})),s={agg:a,ref:Oe(s)},o!=null&&(i[o]=s)),s.ref},tuplesRef(){return Oe(this.values)},extentRef(e,t){return dh(e,this,"extent","extent",t,!1)},domainRef(e,t){return dh(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return dh(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return dh(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return dh(e,this,"indata","tupleindex",t,!0,!0)}};function Zhe(e,t,n){const r=e.from.facet,i=r.name,o=Gm(r,t);let s;r.name||Z("Facet must have a name: "+he(r)),r.data||Z("Facet must reference a data set: "+he(r)),r.field?s=t.add(TI({field:t.fieldRef(r.field),pulse:o})):r.groupby?s=t.add(Lde({key:t.keyRef(r.groupby),group:Oe(t.proxy(n.parent)),pulse:o})):Z("Facet must specify groupby or field: "+he(r));const a=t.fork(),l=a.add(io()),c=a.add(Pu({pulse:Oe(l)}));a.addData(i,new xu(a,l,l,c)),a.addSignal("parent",null),s.params.subflow={$subflow:a.parse(e).toRuntime()}}function epe(e,t,n){const r=t.add(TI({pulse:n.pulse})),i=t.fork();i.add(Pu()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function VI(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,s=e.modify,a=e.values,l=t.add(uy()),c="if("+e.trigger+',modify("'+n+'",'+[i,r,o,s,a].map(h=>h??"null").join(",")+"),0)",f=Uo(c,t);l.update=f.$expr,l.params=f.$params}function Uv(e,t){const n=GI(e),r=e.type===Pv,i=e.from&&e.from.facet,o=e.overlap;let s=e.layout||n===h3||n===d3,a,l,c,f,h,p,m;const y=n===f3||s||i,v=Khe(e.from,r,t);l=t.add(Tde({key:v.key||(e.key?Sp(e.key):void 0),pulse:v.pulse,clean:!r}));const _=Oe(l);l=c=t.add(io({pulse:_})),l=t.add(Wde({markdef:Hhe(e),interactive:Ghe(e.interactive,t),clip:Bhe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Oe(l)}));const b=Oe(l);l=f=t.add(FI(MI(e.encode,e.type,n,e.style,t,{mod:!1,pulse:b}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(N=>{const $=S3(N,t),O=$.metadata;(O.generates||O.changes)&&Z("Mark transforms should not generate new data."),O.nomod||(f.params.mod=!0),$.params.pulse=Oe(l),t.add(l=$)}),e.sort&&(l=t.add(Jde({sort:t.compareRef(e.sort),pulse:Oe(l)})));const S=Oe(l);(i||s)&&(s=t.add(LI({layout:t.objectProperty(e.layout),legends:t.legends,mark:b,pulse:S})),p=Oe(s));const A=t.add(DI({mark:b,pulse:p||S}));m=Oe(A),r&&(y&&(a=t.operators,a.pop(),s&&a.pop()),t.pushState(S,p||m,_),i?Zhe(e,t,v):y?epe(e,t,v):t.parse(e),t.popState(),y&&(s&&a.push(s),a.push(A))),o&&(m=tpe(o,m,t));const C=t.add(RI({pulse:m})),k=t.add(Pu({pulse:Oe(C)},void 0,t.parent()));e.name!=null&&(h=e.name,t.addData(h,new xu(t,c,C,k)),e.on&&e.on.forEach(N=>{(N.insert||N.remove||N.toggle)&&Z("Marks only support modify triggers."),VI(N,t,h)}))}function tpe(e,t,n){const r=e.method,i=e.bound,o=e.separation,s={separation:on(o)?n.signalRef(o.signal):o,method:on(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;s.boundTolerance=on(a)?n.signalRef(a.signal):+a,s.boundScale=n.scaleRef(i.scale),s.boundOrient=i.orient}return Oe(n.add(Hde(s)))}function npe(e,t){const n=t.config.legend,r=e.encode||{},i=Tr(e,n),o=r.legend||{},s=o.name||void 0,a=o.interactive,l=o.style,c={};let f=0,h,p,m;v3.forEach(A=>e[A]?(c[A]=e[A],f=f||e[A]):0),f||Z("Missing valid scale for legend.");const y=rpe(e,t.scaleType(f)),v={title:e.title!=null,scales:c,type:y,vgrad:y!=="symbol"&&i.isVertical()},_=Oe(t.add(io(null,[v]))),b={enter:{x:{value:0},y:{value:0}}},S=Oe(t.add(Ide(p={type:y,scale:t.scaleRef(f),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return y===Hm?(m=[Mhe(e,f,n,r.gradient),L9(e,n,r.labels,S)],p.count=p.count||t.signalRef(`max(2,2*floor((${nu(i.gradientLength())})/100))`)):y===ZS?m=[Nhe(e,f,n,r.gradient,S),L9(e,n,r.labels,S)]:(h=The(e,n),m=[Fhe(e,n,r,S,nu(h.columns))],p.size=spe(e,t,m[0].marks)),m=[Ap({role:tde,from:_,encode:b,marks:m,layout:h,interactive:a})],v.title&&m.push(jhe(e,n,r.title,_)),Uv(Ap({role:Zfe,from:_,encode:Jf(ope(i,e,n),o,cg),marks:m,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:s,interactive:a,style:l}),t)}function rpe(e,t){let n=e.type||R9;return!e.type&&ipe(e)===1&&(e.fill||e.stroke)&&(n=SC(t)?Hm:Gw(t)?ZS:R9),n!==Hm?n:Gw(t)?ZS:Hm}function ipe(e){return v3.reduce((t,n)=>t+(e[n]?1:0),0)}function ope(e,t,n){const r={enter:{},update:{}};return Nn(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function spe(e,t,n){const r=nu(B9("size",e,n)),i=nu(B9("strokeWidth",e,n)),o=nu(ape(n[1].encode,t,ug));return Uo(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function B9(e,t,n){return t[e]?`scale("${t[e]}",datum)`:BI(e,n[0].encode)}function ape(e,t,n){return BI("fontSize",e)||khe("fontSize",t,n)}const lpe=`item.orient==="${Qf}"?-90:item.orient==="${Kf}"?90:0`;function upe(e,t){e=xe(e)?{text:e}:e;const n=Tr(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,s=i.interactive,a=i.style,l=[],c={},f=Oe(t.add(io(null,[c])));return l.push(dpe(e,n,cpe(e),f)),e.subtitle&&l.push(hpe(e,n,r.subtitle,f)),Uv(Ap({role:ode,from:f,encode:fpe(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:s,style:a}),t)}function cpe(e){const t=e.encode;return t&&t.title||Ge({name:e.name,interactive:e.interactive,style:e.style},t)}function fpe(e,t){const n={enter:{},update:{}};return Nn(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:_3},angle:{signal:lpe},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Jf(n,t,cg)}function dpe(e,t,n,r){const i={value:0},o=e.text,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Nn(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),ei({type:zu,role:sde,style:vhe,from:r,encode:s},n)}function hpe(e,t,n,r){const i={value:0},o=e.subtitle,s={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Nn(s,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),ei({type:zu,role:ade,style:xhe,from:r,encode:s},n)}function ppe(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(S3(r,t))}),e.on&&e.on.forEach(r=>{VI(r,t,e.name)}),t.addDataPipeline(e.name,gpe(e,t,n))}function gpe(e,t,n){const r=[];let i=null,o=!1,s=!1,a,l,c,f,h;for(e.values?on(e.values)||jm(e.format)?(r.push(H9(t,e)),r.push(i=Nl())):r.push(i=Nl({$ingest:e.values,$format:e.format})):e.url?jm(e.url)||jm(e.format)?(r.push(H9(t,e)),r.push(i=Nl())):r.push(i=Nl({$request:e.url,$format:e.format})):e.source&&(i=a=_e(e.source).map(p=>Oe(t.getData(p).output)),r.push(null)),l=0,c=n.length;l<c;++l)f=n[l],h=f.metadata,!i&&!h.source&&r.push(i=Nl()),r.push(f),h.generates&&(s=!0),h.modifies&&!s&&(o=!0),h.source?i=f:h.changes&&(i=null);return a&&(c=a.length-1,r[0]=Vde({derive:o,pulse:c?a:a[0]}),(o||c)&&r.splice(1,0,Nl())),i||r.push(Nl()),r.push(Pu({})),r}function Nl(e){const t=io({},e);return t.metadata={source:!0},t}function H9(e,t){return Ude({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const XI=e=>e===Va||e===oo,Wv=(e,t,n)=>on(e)?xpe(e.signal,t,n):e===Qf||e===oo?t:n,mn=(e,t,n)=>on(e)?ype(e.signal,t,n):XI(e)?t:n,Vi=(e,t,n)=>on(e)?vpe(e.signal,t,n):XI(e)?n:t,JI=(e,t,n)=>on(e)?_pe(e.signal,t,n):e===oo?{value:t}:{value:n},mpe=(e,t,n)=>on(e)?bpe(e.signal,t,n):e===Kf?{value:t}:{value:n},ype=(e,t,n)=>QI(`${e} === '${oo}' || ${e} === '${Va}'`,t,n),vpe=(e,t,n)=>QI(`${e} !== '${oo}' && ${e} !== '${Va}'`,t,n),xpe=(e,t,n)=>E3(`${e} === '${Qf}' || ${e} === '${oo}'`,t,n),_pe=(e,t,n)=>E3(`${e} === '${oo}'`,t,n),bpe=(e,t,n)=>E3(`${e} === '${Kf}'`,t,n),QI=(e,t,n)=>(t=t!=null?gn(t):t,n=n!=null?gn(n):n,G9(t)&&G9(n)?(t=t?t.signal||he(t.value):null,n=n?n.signal||he(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Ge({test:e},t)].concat(n||[])),G9=e=>e==null||Object.keys(e).length===1,E3=(e,t,n)=>({signal:`${e} ? (${Ic(t)}) : (${Ic(n)})`}),wpe=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${Qf}' ? (${Ic(r)}) : `:"")+(n!=null?`${e} === '${Va}' ? (${Ic(n)}) : `:"")+(i!=null?`${e} === '${Kf}' ? (${Ic(i)}) : `:"")+(t!=null?`${e} === '${oo}' ? (${Ic(t)}) : `:"")+"(null)"}),Ic=e=>on(e)?e.signal:e==null?null:he(e),Spe=(e,t)=>t===0?0:on(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Gc=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function kc(e,t,n,r){let i;if(t&&we(t,e))return t[e];if(we(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[y3][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[ug][i]}return null}function Y9(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function Epe(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,a,l,c;if(on(s)){const h=Y9([n.axisX,n.axisY]),p=Y9([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(c of h)a[c]=mn(s,kc(c,n.axisX,i,r),kc(c,n.axisY,i,r));l={};for(c of p)l[c]=wpe(s.signal,kc(c,n.axisTop,i,r),kc(c,n.axisBottom,i,r),kc(c,n.axisLeft,i,r),kc(c,n.axisRight,i,r))}else a=s===oo||s===Va?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return a||l||o?Ge({},i,a,l,o):i}function Ape(e,t,n,r){const i=Tr(e,t),o=e.orient;let s,a;const l={enter:s={opacity:tt},update:a={opacity:mi},exit:{opacity:tt}};Nn(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const c=q9(e,0),f=q9(e,1);return s.x=a.x=mn(o,c,tt),s.x2=a.x2=mn(o,f),s.y=a.y=Vi(o,c,tt),s.y2=a.y2=Vi(o,f),ei({type:x3,role:Vfe,from:r,encode:l},n)}function q9(e,t){return{scale:e.scale,range:t}}function Cpe(e,t,n,r,i){const o=Tr(e,t),s=e.orient,a=e.gridScale,l=Wv(s,1,-1),c=kpe(e.offset,l);let f,h,p;const m={enter:f={opacity:tt},update:p={opacity:mi},exit:h={opacity:tt}};Nn(m,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const y={scale:e.scale,field:gi,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},v=mn(s,{signal:"height"},{signal:"width"}),_=a?{scale:a,range:0,mult:l,offset:c}:{value:0,offset:c},b=a?{scale:a,range:1,mult:l,offset:c}:Ge(v,{mult:l,offset:c});return f.x=p.x=mn(s,y,_),f.y=p.y=Vi(s,y,_),f.x2=p.x2=Vi(s,b),f.y2=p.y2=mn(s,b),h.x=mn(s,y),h.y=Vi(s,y),ei({type:x3,role:Xfe,key:gi,from:r,encode:m},n)}function kpe(e,t){if(t!==1)if(!ve(e))e=on(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Ge({},e);for(;n.mult!=null;)if(ve(n.mult))n=n.mult=Ge({},n.mult);else return n.mult=on(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function $pe(e,t,n,r,i,o){const s=Tr(e,t),a=e.orient,l=Wv(a,-1,1);let c,f,h;const p={enter:c={opacity:tt},update:h={opacity:mi},exit:f={opacity:tt}};Nn(p,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const m=gn(i);m.mult=l;const y={scale:e.scale,field:gi,band:o.band,extra:o.extra,offset:o.offset,round:s("tickRound")};return h.y=c.y=mn(a,tt,y),h.y2=c.y2=mn(a,m),f.x=mn(a,y),h.x=c.x=Vi(a,tt,y),h.x2=c.x2=Vi(a,m),f.y=Vi(a,y),ei({type:x3,role:Qfe,key:gi,from:r,encode:p},n)}function Rb(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Mpe(e,t,n,r,i,o){const s=Tr(e,t),a=e.orient,l=e.scale,c=Wv(a,-1,1),f=nu(s("labelFlush")),h=nu(s("labelFlushOffset")),p=s("labelAlign"),m=s("labelBaseline");let y=f===0||!!f,v;const _=gn(i);_.mult=c,_.offset=gn(s("labelPadding")||0),_.offset.mult=c;const b={scale:l,field:gi,band:.5,offset:HI(o.offset,s("labelOffset"))},S=mn(a,y?Rb(l,f,'"left"','"right"','"center"'):{value:"center"},mpe(a,"left","right")),A=mn(a,JI(a,"bottom","top"),y?Rb(l,f,'"top"','"bottom"','"middle"'):{value:"middle"}),C=Rb(l,f,`-(${h})`,h,0);y=y&&h;const k={opacity:tt,x:mn(a,b,_),y:Vi(a,b,_)},N={enter:k,update:v={opacity:mi,text:{field:m3},x:k.x,y:k.y,align:S,baseline:A},exit:{opacity:tt,x:k.x,y:k.y}};Nn(N,{dx:!p&&y?mn(a,C):null,dy:!m&&y?Vi(a,C):null}),Nn(N,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:p,baseline:m});const $=s("labelBound");let O=s("labelOverlap");return O=O||$?{separation:s("labelSeparation"),method:O,order:"datum.index",bound:$?{scale:l,orient:a,tolerance:$}:null}:void 0,v.align!==S&&(v.align=Gc(v.align,S)),v.baseline!==A&&(v.baseline=Gc(v.baseline,A)),ei({type:zu,role:Jfe,style:ug,key:gi,from:r,encode:N,overlap:O},n)}function Npe(e,t,n,r){const i=Tr(e,t),o=e.orient,s=Wv(o,-1,1);let a,l;const c={enter:a={opacity:tt,anchor:gn(i("titleAnchor",null)),align:{signal:_3}},update:l=Ge({},a,{opacity:mi,text:gn(e.title)}),exit:{opacity:tt}},f={signal:`lerp(range("${e.scale}"), ${zv(0,1,.5)})`};return l.x=mn(o,f),l.y=Vi(o,f),a.angle=mn(o,tt,Spe(s,90)),a.baseline=mn(o,JI(o,Va,oo),{value:Va}),l.angle=a.angle,l.baseline=a.baseline,Nn(c,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Ope(i,o,c,n),c.update.align=Gc(c.update.align,a.align),c.update.angle=Gc(c.update.angle,a.angle),c.update.baseline=Gc(c.update.baseline,a.baseline),ei({type:zu,role:Kfe,style:y3,from:r,encode:c},n)}function Ope(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=Gc(gn(a),n.update[l]),!1):!Dc(l,r),o=i(e("titleX"),"x"),s=i(e("titleY"),"y");n.enter.auto=s===o?gn(s):mn(t,gn(s),gn(o))}function Dpe(e,t){const n=Epe(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,s=i.interactive,a=i.style,l=Tr(e,n),c=$he(l),f={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},h=Oe(t.add(io({},[f]))),p=Oe(t.add(Fde({scale:t.scaleRef(e.scale),extra:t.property(c.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),m=[];let y;return f.grid&&m.push(Cpe(e,n,r.grid,p,c)),f.ticks&&(y=l("tickSize"),m.push($pe(e,n,r.ticks,p,y,c))),f.labels&&(y=f.ticks?y:0,m.push(Mpe(e,n,r.labels,p,y,c))),f.domain&&m.push(Ape(e,n,r.domain,h)),f.title&&m.push(Npe(e,n,r.title,h)),Uv(Ap({role:qfe,from:h,encode:Jf(Fpe(l,e),i,cg),marks:m,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:s,style:a}),t)}function Fpe(e,t){const n={enter:{},update:{}};return Nn(n,{orient:e("orient"),offset:e("offset")||0,position:Ii(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function KI(e,t,n){const r=_e(e.signals),i=_e(e.scales);return n||r.forEach(o=>NI(o,t)),_e(e.projections).forEach(o=>fhe(o,t)),i.forEach(o=>Zde(o,t)),_e(e.data).forEach(o=>ppe(o,t)),i.forEach(o=>ehe(o,t)),(n||r).forEach(o=>Dde(o,t)),_e(e.axes).forEach(o=>Dpe(o,t)),_e(e.marks).forEach(o=>Uv(o,t)),_e(e.legends).forEach(o=>npe(o,t)),e.title&&upe(e.title,t),t.parseLambdas(),t}const Tpe=e=>Jf({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Rpe(e,t){const n=t.config,r=Oe(t.root=t.add(uy())),i=Lpe(e,n);i.forEach(c=>NI(c,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(io()),s=t.add(FI(MI(Tpe(e.encode),Pv,d3,e.style,t,{pulse:Oe(o)}))),a=t.add(LI({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Oe(s)}));t.operators.pop(),t.pushState(Oe(s),Oe(a),null),KI(e,t,i),t.operators.push(a);let l=t.add(DI({mark:r,pulse:Oe(a)}));return l=t.add(RI({pulse:Oe(l)})),l=t.add(Pu({pulse:Oe(l)})),t.addData("root",new xu(t,o,o,l)),t}function hh(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Lpe(e,t){const n=s=>Ii(e[s],t[s]),r=[hh("background",n("background")),hh("autosize",Hfe(n("autosize"))),hh("padding",Yfe(n("padding"))),hh("width",n("width")||0),hh("height",n("height")||0)],i=r.reduce((s,a)=>(s[a.name]=a,s),{}),o={};return _e(e.signals).forEach(s=>{we(i,s.name)?s=Ge(i[s.name],s):r.push(s),o[s.name]=s}),_e(t.signals).forEach(s=>{!we(o,s.name)&&!we(i,s.name)&&r.push(s)}),r}function ZI(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function V9(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}ZI.prototype=V9.prototype={parse(e){return KI(e,this)},fork(){return new V9(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof VS?Oe(e):e;return this.add(qde({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let s,a;r&&(s=r.data||(r.data={}),a=s[i]||(s[i]=[]),a.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Oe(this.add(Pu({pulse:e})))),this._parent.push(t),this._lookup.push(n?Oe(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Ze(this._parent)},encode(){return Ze(this._encode)},lookup(){return Ze(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(xe(e))return Sp(e,t);e.signal||Z("Unsupported field reference: "+he(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Oe(this.add(Pde(i)))}return r},compareRef(e){let t=!1;const n=o=>on(o)?(t=!0,this.signalRef(o.signal)):wde(o)?(t=!0,this.exprRef(o.expr)):o,r=_e(e.field).map(n),i=_e(e.order).map(n);return t?Oe(this.add(T9({fields:r,orders:i}))):D9(r,i)},keyRef(e,t){let n=!1;const r=o=>on(o)?(n=!0,Oe(i[o.signal])):o,i=this.signals;return e=_e(e).map(r),n?Oe(this.add(zde({fields:e,flat:t}))):vde(e,t)},sortRef(e){if(!e)return e;const t=Rv(e.op,e.field),n=e.order||xde;return n.signal?Oe(this.add(T9({fields:t,orders:this.signalRef(n.signal)}))):D9(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return we(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Z("Duplicate signal name: "+he(e));const n=t instanceof VS?t:this.add(uy(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Z("Unrecognized signal name: "+he(e)),this.signals[e]},signalRef(e){return this.signals[e]?Oe(this.signals[e]):(we(this.lambdas,e)||(this.lambdas[e]=this.add(uy(null))),Oe(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Uo(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!ve(e)?e:this.signalRef(e.signal||A3(e))},exprRef(e,t){const n={expr:Uo(e,this)};return t&&(n.expr.$name=t),Oe(this.add(Rde(n)))},addBinding(e,t){this.bindings||Z("Nested signals do not support binding: "+he(e)),this.bindings.push(Ge({signal:e},t))},addScaleProj(e,t){we(this.scales,e)&&Z("Duplicate scale or projection name: "+he(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Xde(t))},addProjection(e,t){this.addScaleProj(e,Yde(t))},getScale(e){return this.scales[e]||Z("Unrecognized scale name: "+he(e)),this.scales[e]},scaleRef(e){return Oe(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return we(this.data,e)&&Z("Duplicate data set name: "+he(e)),this.data[e]=t},getData(e){return this.data[e]||Z("Undefined data set name: "+he(e)),this.data[e]},addDataPipeline(e,t){return we(this.data,e)&&Z("Duplicate data set name: "+he(e)),this.addData(e,xu.fromEntries(this,t))}};function A3(e){return(ne(e)?Ppe:zpe)(e)}function Ppe(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(ve(i)?i.signal||A3(i):he(i))}return n+"]"}function zpe(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+he(r)+":"+(ve(i)?i.signal||A3(i):he(i));return t+"}"}function Ipe(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Upe(e,t,n){return ve(e)||Z("Input Vega specification must be an object."),t=Lf(Ipe(),t,e.config),Rpe(e,new ZI(t,n)).toRuntime()}var Wpe="6.2.0";Ge(rf,MJ,sne,zne,Sie,yoe,Hse,Sse,Yse,mae,Cae,Fae);const jpe=Wpe,Bpe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Jt,CanvasHandler:eg,CanvasRenderer:S1,DATE:$r,DAY:Wn,DAYOFYEAR:zo,Dataflow:Wc,Debug:X6,DisallowedObjectProperties:LE,Error:PE,EventStream:Wy,Gradient:jR,GroupItem:cv,HOURS:Qr,Handler:VC,HybridHandler:DL,HybridRenderer:nS,Info:V6,Item:uv,MILLISECONDS:Qi,MINUTES:Kr,MONTH:Gn,Marks:Zr,MultiPulse:lA,None:q6,Operator:vt,Parameters:Uy,Pulse:Ra,QUARTER:kr,RenderType:ka,Renderer:Zp,ResourceLoader:VR,SECONDS:_i,SVGHandler:xL,SVGRenderer:ek,SVGStringRenderer:OL,Scenegraph:fL,TIME_UNITS:KE,Transform:K,View:yI,WEEK:nn,Warn:zE,YEAR:Mn,accessor:Fr,accessorFields:Hn,accessorName:Ut,array:_e,ascending:zf,bandwidthNRD:dA,bin:M7,bootstrapCI:N7,boundClip:jL,boundContext:Xp,boundItem:Qw,boundMark:aL,boundStroke:Us,changeset:Fu,clampRange:sF,codegenExpression:Hz,compare:jE,constant:Xn,cumulativeLogNormal:vA,cumulativeNormal:By,cumulativeUniform:wA,dayofyear:LF,debounce:BE,defaultLocale:rA,definition:C7,densityLogNormal:yA,densityNormal:hA,densityUniform:bA,domChild:tn,domClear:ui,domCreate:Aa,domFind:qC,dotbin:O7,error:Z,expressionFunction:qt,extend:Ge,extent:Ro,extentIndex:aF,falsy:ga,fastmap:If,field:vi,flush:lF,font:gv,fontFamily:Kp,fontSize:qo,format:wm,formatLocale:t1,formats:sA,hasOwnProperty:we,id:Tp,identity:Vn,inferType:g7,inferTypes:m7,ingest:ut,inherits:ge,inrange:Tc,interpolate:EC,interpolateColors:av,interpolateRange:$R,intersect:zL,intersectBoxLine:Rc,intersectPath:DC,intersectPoint:FC,intersectRule:JR,isArray:ne,isBoolean:el,isDate:Fa,isFunction:He,isIterable:uF,isNumber:st,isObject:ve,isRegExp:HE,isString:xe,isTuple:zy,key:GE,lerp:cF,lineHeight:Ga,loader:Ly,locale:h7,logger:ky,lruCache:fF,markup:ZC,merge:dF,mergeConfig:Lf,multiLineOffset:HC,one:Rf,pad:hF,panLinear:eF,panLog:tF,panPow:nF,panSymlog:rF,parse:Upe,parseExpression:Zk,parseSelector:sl,path:Vy,pathCurves:MC,pathEqual:BL,pathParse:cf,pathRectangle:GR,pathRender:fp,pathSymbols:HR,pathTrail:YR,peek:Ze,point:yv,projection:xk,quantileLogNormal:xA,quantileNormal:Hy,quantileUniform:SA,quantiles:cA,quantizeInterpolator:MR,quarter:iF,quartiles:fA,get random(){return bi},randomInteger:FX,randomKDE:gA,randomLCG:DX,randomLogNormal:F7,randomMixture:T7,randomNormal:pA,randomUniform:R7,read:x7,regressionConstant:EA,regressionExp:P7,regressionLinear:AA,regressionLoess:U7,regressionLog:L7,regressionPoly:I7,regressionPow:z7,regressionQuad:CA,renderModule:vv,repeat:_h,resetDefaultLocale:NV,resetSVGDefIds:Ete,responseType:v7,runtimeContext:iI,sampleCurve:Yy,sampleLogNormal:mA,sampleNormal:jy,sampleUniform:_A,scale:lt,sceneEqual:tk,sceneFromJSON:uL,scenePickVisit:g1,sceneToJSON:lL,sceneVisit:Ki,sceneZOrder:TC,scheme:AC,serializeXML:kL,setHybridRendererOptions:_te,setRandom:NX,span:Rp,splitAccessPath:Ho,stringValue:he,textMetrics:qr,timeBin:ZF,timeFloor:BF,timeFormatLocale:op,timeInterval:Bf,timeOffset:YF,timeSequence:XF,timeUnitSpecifier:RF,timeUnits:ZE,toBoolean:YE,toDate:qE,toNumber:jn,toSet:Ji,toString:VE,transform:k7,transforms:rf,truncate:pF,truthy:xi,tupleid:De,typeParsers:Fw,utcFloor:HF,utcInterval:Hf,utcOffset:qF,utcSequence:JF,utcdayofyear:IF,utcquarter:oF,utcweek:UF,version:jpe,visitArray:va,week:PF,writeConfig:Pf,zero:Sa,zoomLinear:IE,zoomLog:UE,zoomPow:Xm,zoomSymlog:WE},Symbol.toStringTag,{value:"Module"}));function Hpe(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Gpe={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Ype={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},qpe={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Vpe=Array.prototype.slice,Ol=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,Vpe.call(t,1))},Xpe=(e,t=0,n=1,r=0,i=0,o=0,s=0)=>xe(e)?new Date(e):new Date(e,t,n,r,i,o,s);var Jpe={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:Xpe,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Ol("join",arguments)},indexof:function(){return Ol("indexOf",arguments)},lastindexof:function(){return Ol("lastIndexOf",arguments)},slice:function(){return Ol("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(zf),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Ol("substring",arguments,String)},split:function(){return Ol("split",arguments,String)},replace:function(){return Ol("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const Qpe=["view","item","group","xy","x","y"],tE=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&tE.add(setImmediate);const Kpe={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Gpe[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),tE.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||Jpe[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>Ype[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>qpe[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);e.memberDepth-=1;const o=e(r.value);return LE.has(i)?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):tE.has(o)?console.error(`Prevented interpretation of method "${i}" which could lead to insecure code execution`):n[i]=o,n},{})};function ph(e,t,n,r,i,o){const s=a=>Kpe[a.type](s,a);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=r,s.event=i,s.item=o,Qpe.forEach(a=>s.fn[a]=(...l)=>i.vega[a](...l)),s(e)}var Zpe={operator(e,t){const n=t.ast,r=e.functions;return i=>ph(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,o)=>ph(n,r,o,i)},event(e,t){const n=t.ast,r=e.functions;return i=>ph(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,o)=>{const s=o.item&&o.item.datum;return ph(n,r,i,s,o)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,a)=>{const l=s.datum;let c=0,f;for(const h in r)f=ph(r[h].ast,i,a,l,void 0,s),s[h]!==f&&(s[h]=f,c=1);return n!=="rule"&&Hpe(s,r,o),c}}},ege="6.4.1",tge={version:ege};function C3(e){return ae(e,"or")}function k3(e){return ae(e,"and")}function $3(e){return ae(e,"not")}function Ym(e,t){if($3(e))Ym(e.not,t);else if(k3(e))for(const n of e.and)Ym(n,t);else if(C3(e))for(const n of e.or)Ym(n,t);else t(e)}function Yc(e,t){return $3(e)?{not:Yc(e.not,t)}:k3(e)?{and:e.and.map(n=>Yc(n,t))}:C3(e)?{or:e.or.map(n=>Yc(n,t))}:t(e)}const We=structuredClone;function eU(e){throw new Error(e)}function xf(e,t){const n={};for(const r of t)we(e,r)&&(n[r]=e[r]);return n}function Xr(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>dt(e)).join(",")})`};function Qe(e){if(st(e))return e;const t=xe(e)?e:dt(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function nE(e){return e===!1||e===null}function Je(e,t){return e.includes(t)}function _f(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function M3(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function tU(e,...t){for(const n of t)nge(e,n??{});return e}function nge(e,t){for(const n of se(t))Pf(e,n,t[n],!0)}function ko(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function rge(e,t){const n=se(e),r=se(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function nU(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function N3(e,t){for(const n of e)if(t.has(n))return!0;return!1}function rE(e){const t=new Set;for(const n of e){const i=Ho(n).map((s,a)=>a===0?s:`[${s}]`),o=i.map((s,a)=>i.slice(0,a+1).join(""));for(const s of o)t.add(s)}return t}function O3(e,t){return e===void 0||t===void 0?!0:N3(rE(e),rE(t))}function xt(e){return se(e).length===0}const se=Object.keys,Xt=Object.values,Xa=Object.entries;function Cp(e){return e===!0||e===!1}function $t(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function ep(e,t){return $3(e)?`!(${ep(e.not,t)})`:k3(e)?`(${e.and.map(n=>ep(n,t)).join(") && (")})`:C3(e)?`(${e.or.map(n=>ep(n,t)).join(") || (")})`:t(e)}function cy(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&cy(e[n],t)&&delete e[n],xt(e)}function fg(e){return e.charAt(0).toUpperCase()+e.substr(1)}function D3(e,t="datum"){const n=Ho(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(he).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function rU(e,t="datum"){return`${t}[${he(Ho(e).join("."))}]`}function pt(e){return`datum['${e.replaceAll("'","\\'")}']`}function iU(e){return e.replaceAll("\\'","'").replaceAll("\\.",".")}function ige(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Si(e){return`${Ho(e).map(ige).join("\\.")}`}function _u(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Zf(e){return`${Ho(e).join(".")}`}function bf(e){return e?Ho(e).length:0}function Gt(...e){return e.find(t=>t!==void 0)}let oU=42;function sU(e){const t=++oU;return e?String(e)+t:t}function oge(){oU=42}function aU(e){return lU(e)?e:`__${e}`}function lU(e){return e.startsWith("__")}function kp(e){if(e!==void 0)return(e%360+360)%360}function jv(e){return st(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const X9=Object.getPrototypeOf(structuredClone({}));function Gr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Gr(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;for(const o of e.entries())if(!Gr(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==X9.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==X9.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!Gr(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function dt(e){const t=[];return(function n(r){if(r!=null&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?`${r}`:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return`${o}]`}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const s=t.push(r)-1,a=Object.keys(r).sort();for(o="",i=0;i<a.length;i++){const l=a[i],c=n(r[l]);c&&(o&&(o+=","),o+=`${JSON.stringify(l)}:${c}`)}return t.splice(s,1),`{${o}}`})(e)}function ae(e,t){return ve(e)&&we(e,t)&&e[t]!==void 0}const Ms="row",Ns="column",Bv="facet",Mt="x",_n="y",so="x2",Qo="y2",al="xOffset",ed="yOffset",ao="radius",js="radius2",Ci="theta",Bs="theta2",lo="latitude",uo="longitude",co="latitude2",Ei="longitude2",ll="time",Nr="color",Ko="fill",Zo="stroke",Or="shape",Hs="size",Iu="angle",Gs="opacity",ul="fillOpacity",cl="strokeOpacity",fl="strokeWidth",dl="strokeDash",dg="text",wf="order",hg="detail",Hv="key",bu="tooltip",Gv="href",Yv="url",qv="description",sge={x:1,y:1,x2:1,y2:1},uU={theta:1,theta2:1,radius:1,radius2:1};function cU(e){return we(uU,e)}const F3={longitude:1,longitude2:1,latitude:1,latitude2:1};function fU(e){switch(e){case lo:return"y";case co:return"y2";case uo:return"x";case Ei:return"x2"}}function dU(e){return we(F3,e)}const age=se(F3),T3={...sge,...uU,...F3,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function qc(e){return e===Nr||e===Ko||e===Zo}const hU={row:1,column:1,facet:1},pi=se(hU),R3={...T3,...hU},lge=se(R3),{order:Awe,detail:Cwe,tooltip:kwe,...uge}=R3,{row:$we,column:Mwe,facet:Nwe,...cge}=uge;function fge(e){return we(cge,e)}function pU(e){return we(R3,e)}const dge=[so,Qo,co,Ei,Bs,js];function gU(e){return Uu(e)!==e}function Uu(e){switch(e){case so:return Mt;case Qo:return _n;case co:return lo;case Ei:return uo;case Bs:return Ci;case js:return ao}return e}function Ja(e){if(cU(e))switch(e){case Ci:return"startAngle";case Bs:return"endAngle";case ao:return"outerRadius";case js:return"innerRadius"}return e}function es(e){switch(e){case Mt:return so;case _n:return Qo;case lo:return co;case uo:return Ei;case Ci:return Bs;case ao:return js}}function Dr(e){switch(e){case Mt:case so:return"width";case _n:case Qo:return"height"}}function mU(e){switch(e){case Mt:return"xOffset";case _n:return"yOffset";case so:return"x2Offset";case Qo:return"y2Offset";case Ci:return"thetaOffset";case ao:return"radiusOffset";case Bs:return"theta2Offset";case js:return"radius2Offset"}}function L3(e){switch(e){case Mt:return"xOffset";case _n:return"yOffset"}}function hge(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const pge=se(T3),{x:Owe,y:Dwe,x2:Fwe,y2:Twe,xOffset:Rwe,yOffset:Lwe,latitude:Pwe,longitude:zwe,latitude2:Iwe,longitude2:Uwe,theta:Wwe,theta2:jwe,radius:Bwe,radius2:Hwe,...P3}=T3,gge=se(P3),z3={x:1,y:1},Ys=se(z3);function Yt(e){return we(z3,e)}const I3={theta:1,radius:1},mge=se(I3);function Vv(e){return e==="width"?Mt:_n}const yU={xOffset:1,yOffset:1};function pg(e){return we(yU,e)}const yge={time:1};function Lb(e){return e in yge}const{text:Gwe,tooltip:Ywe,href:qwe,url:Vwe,description:Xwe,detail:Jwe,key:Qwe,order:Kwe,...vU}=P3,vge=se(vU);function xge(e){return we(P3,e)}function _ge(e){switch(e){case Nr:case Ko:case Zo:case Hs:case Or:case Gs:case fl:case dl:return!0;case ul:case cl:case Iu:case ll:return!1}}const xU={...z3,...I3,...yU,...vU},U3=se(xU);function ts(e){return we(xU,e)}function bge(e,t){return Sge(e)[t]}const _U={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Zwe,...wge}=_U;function Sge(e){switch(e){case Nr:case Ko:case Zo:case qv:case hg:case Hv:case bu:case Gv:case wf:case Gs:case ul:case cl:case fl:case Bv:case Ms:case Ns:return _U;case Mt:case _n:case al:case ed:case lo:case uo:case ll:return wge;case so:case Qo:case co:case Ei:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Hs:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case dl:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Or:return{point:"always",geoshape:"always"};case dg:return{text:"always"};case Iu:return{point:"always",square:"always",text:"always"};case Yv:return{image:"always"};case Ci:return{text:"always",arc:"always"};case ao:return{text:"always",arc:"always"};case Bs:case js:return{arc:"always"}}}function Pb(e){switch(e){case Mt:case _n:case Ci:case ao:case al:case ed:case Hs:case Iu:case fl:case Gs:case ul:case cl:case ll:case so:case Qo:case Bs:case js:return;case Bv:case Ms:case Ns:case Or:case dl:case dg:case bu:case Gv:case Yv:case qv:return"discrete";case Nr:case Ko:case Zo:return"flexible";case lo:case uo:case co:case Ei:case hg:case Hv:case wf:return}}const Ege={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Age={count:1,min:1,max:1};function Ps(e){return ae(e,"argmin")}function hl(e){return ae(e,"argmax")}function W3(e){return xe(e)&&we(Ege,e)}const Cge=new Set(["count","valid","missing","distinct"]);function Xv(e){return xe(e)&&Cge.has(e)}function kge(e){return xe(e)&&Je(["min","max"],e)}const $ge=new Set(["count","sum","distinct","valid","missing"]),Mge=new Set(["mean","average","median","q1","q3","min","max"]);function bU(e){return el(e)&&(e=a2(e,void 0)),`bin${se(e).map(t=>Jv(e[t])?$t(`_${t}_${Xa(e[t])}`):$t(`_${t}_${e[t]}`)).join("")}`}function bt(e){return e===!0||Wu(e)&&!e.binned}function Sn(e){return e==="binned"||Wu(e)&&e.binned===!0}function Wu(e){return ve(e)}function Jv(e){return ae(e,"param")}function J9(e){switch(e){case Ms:case Ns:case Hs:case Nr:case Ko:case Zo:case fl:case Gs:case ul:case cl:case Or:return 6;case dl:return 4;default:return 10}}function gg(e){return ae(e,"expr")}function En(e,{level:t}={level:0}){const n=se(e||{}),r={};for(const i of n)r[i]=t===0?Br(e[i]):En(e[i],{level:t-1});return r}function wU(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:s,color:a,subtitleColor:l,subtitleFont:c,subtitleFontSize:f,subtitleFontStyle:h,subtitleFontWeight:p,subtitleLineHeight:m,subtitlePadding:y,...v}=e,_={...v,...a?{fill:a}:{}},b={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...s!==void 0?{limit:s}:{}},S={...l?{subtitleColor:l}:{},...c?{subtitleFont:c}:{},...f?{subtitleFontSize:f}:{},...h?{subtitleFontStyle:h}:{},...p?{subtitleFontWeight:p}:{},...m?{subtitleLineHeight:m}:{},...y?{subtitlePadding:y}:{}},A=xf(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:_,subtitleMarkConfig:A,nonMarkTitleProperties:b,subtitle:S}}function wa(e){return xe(e)||ne(e)&&xe(e[0])}function Me(e){return ae(e,"signal")}function ju(e){return ae(e,"step")}function Nge(e){return ne(e)?!1:ae(e,"fields")&&!ae(e,"data")}function Oge(e){return ne(e)?!1:ae(e,"fields")&&ae(e,"data")}function As(e){return ne(e)?!1:ae(e,"field")&&ae(e,"data")}const Dge={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Fge=se(Dge),Tge={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},iE=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],Rge="  ";function SU(e){const t=ne(e.condition)?e.condition.map(Q9):Q9(e.condition);return{...Br(e),condition:t}}function Br(e){if(gg(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Q9(e){if(gg(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function At(e){if(gg(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Me(e)?e:e!==void 0?{value:e}:void 0}function Lge(e){return Me(e)?e.signal:he(e)}function K9(e){return Me(e)?e.signal:he(e.value)}function Yi(e){return Me(e)?e.signal:e==null?null:he(e)}function Pge(e,t,n){for(const r of n){const i=Wo(r,t.markDef,t.config);i!==void 0&&(e[r]=At(i))}return e}function EU(e){return[].concat(e.type,e.style??[])}function ft(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&ae(t,i)?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:Wo(e,t,n,r)}function Wo(e,t,n,{vgChannel:r}={}){const i=oE(e,t,n.style);return Gt(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function oE(e,t,n){return AU(e,EU(t),n)}function AU(e,t,n){t=_e(t);let r;for(const i of t){const o=n[i];ae(o,e)&&(r=o[e])}return r}function CU(e,t){return _e(e).reduce((n,r)=>(n.field.push(me(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function kU(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Gr(i,r))return;n.push(r)}),n}function $U(e,t){return Gr(e,t)||!t?e:e?[..._e(e),..._e(t)].join(", "):t}function MU(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((wa(n)||Me(n))&&(wa(r)||Me(r)))return{explicit:e.explicit,value:$U(n,r)};if(wa(n)||Me(n))return{explicit:e.explicit,value:n};if(wa(r)||Me(r))return{explicit:e.explicit,value:r};if(!wa(n)&&!Me(n)&&!wa(r)&&!Me(r))return{explicit:e.explicit,value:kU(n,r)};throw new Error("It should never reach here")}function j3(e){return`Invalid specification ${dt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const zge='Autosize "fit" only works for single views and layered views.';function Z9(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function e8(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function t8(e){return e?`Dropping "fit-${e}" because spec has discrete ${Dr(e)}.`:'Dropping "fit" because spec has discrete size.'}function B3(e){return`Unknown field for ${e}. Cannot calculate view size.`}function n8(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Ige(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Uge(e){return`The "nearest" transform is not supported for ${e} marks.`}function NU(e){return`Selection not supported for ${e} yet.`}function Wge(e){return`Cannot find a selection named "${e}".`}const jge="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Bge="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Hge="Legend bindings are only supported for selections over an individual field or encoding channel.";function Gge(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Yge(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const qge="The same selection must be used to override scale domains in a layered view.",Vge='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Xge(e){return`Unknown repeated value "${e}".`}function r8(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Jge="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",H3="Animation involving facet, layer, or concat is currently unsupported.";function Qge(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${he(e)}.`}function Kge(e,t,n,r){return`${e.length?"Multiple ":"No "}matching ${he(t)} encoding found for selection ${he(n.param)}. Using "field": ${he(r)}.`}const Zge="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function e0e(e){return`Unrecognized parse "${e}".`}function i8(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const t0e="Attempt to add the same child twice.";function n0e(e){return`Ignoring an invalid transform: ${dt(e)}.`}const r0e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function o8(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function i0e(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${dt(t)} is overridden by a child projection ${dt(n)}.`}const o0e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function s0e(e){return`${e}Offset dropped because ${e} is continuous`}function a0e(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${dt(n)}}.`}function OU(e){return`Invalid field type "${e}".`}function l0e(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function u0e(e){return`Invalid aggregation operator "${e}".`}function DU(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function c0e(e){return`Position range does not support relative band size for ${e}.`}function sE(e,t){return`Dropping ${dt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const f0e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Qv(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function d0e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function h0e(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function p0e(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function g0e(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function zb(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function m0e(e){return`The ${e} for range marks cannot be an expression`}function y0e(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function v0e(e,t){return`Specified orient "${e}" overridden with "${t}".`}function x0e(e){return`Cannot use the scale property "${e}" with non-color channel.`}function _0e(e){return`Cannot use the relative band size with ${e} scale.`}function b0e(e){return`Using unaggregated domain with raw field has no effect (${dt(e)}).`}function w0e(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function S0e(e){return`Unaggregated domain is currently unsupported for log scale (${dt(e)}).`}function E0e(e){return`Cannot apply size to non-oriented mark "${e}".`}function A0e(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function C0e(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function FU(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function TU(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function k0e(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${dt(n)} and ${dt(r)}). Using ${dt(n)}.`}function $0e(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${dt(n)} and ${dt(r)}). Using the union of the two domains.`}function M0e(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function N0e(e){return`Dropping sort property ${dt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const s8="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",O0e="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",D0e="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",F0e="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function T0e(e){return`Cannot stack "${e}" if there is already "${e}2".`}function R0e(e){return`Stack is applied to a non-linear scale (${e}).`}function L0e(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function fy(e,t){return`Invalid ${e}: ${dt(t)}.`}function P0e(e){return`Dropping day from datetime ${dt(e)} as day cannot be combined with other units.`}function z0e(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function I0e(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function U0e(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function a8(e){return`1D error band does not support ${e}.`}function RU(e){return`Channel ${e} is required for "binned" bin.`}function W0e(e){return`Channel ${e} should not be used with "binned" bin.`}function j0e(e){return`Domain for ${e} is required for threshold scale.`}const LU=ky(zE);let wu=LU;function B0e(e){return wu=e,wu}function H0e(){return wu=LU,wu}function G3(...e){wu.error(...e)}function fe(...e){wu.warn(...e)}function G0e(...e){wu.debug(...e)}function Bu(e){if(e&&ve(e)){for(const t of q3)if(ae(e,t))return!0}return!1}const PU=["january","february","march","april","may","june","july","august","september","october","november","december"],Y0e=PU.map(e=>e.substr(0,3)),zU=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],q0e=zU.map(e=>e.substr(0,3));function V0e(e){if(jv(e)&&(e=+e),st(e))return e>4&&fe(fy("quarter",e)),e-1;throw new Error(fy("quarter",e))}function X0e(e){if(jv(e)&&(e=+e),st(e))return e-1;{const t=e.toLowerCase(),n=PU.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Y0e.indexOf(r);if(i!==-1)return i;throw new Error(fy("month",e))}}function J0e(e){if(jv(e)&&(e=+e),st(e))return e%7;{const t=e.toLowerCase(),n=zU.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=q0e.indexOf(r);if(i!==-1)return i;throw new Error(fy("day",e))}}function Y3(e,t){const n=[];if(t&&e.day!==void 0&&se(e).length>1&&(fe(P0e(e)),e=We(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?X0e(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?V0e(e.quarter):e.quarter;n.push(st(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?J0e(e.day):e.day;n.push(st(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Su(e){const n=Y3(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Q0e(e){const n=Y3(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function K0e(e){const t=Y3(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const IU={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},q3=se(IU);function Z0e(e){return we(IU,e)}function Hu(e){return ve(e)?e.binned:UU(e)}function UU(e){return e==null?void 0:e.startsWith("binned")}function V3(e){return e.startsWith("utc")}function eme(e){return e.substring(3)}const tme={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Kv(e){return q3.filter(t=>jU(e,t))}function WU(e){const t=Kv(e);return t[t.length-1]}function jU(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function nme(e,t,{end:n}={end:!1}){const r=D3(t),i=V3(e)?"utc":"";function o(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let s;const a={};for(const l of q3)jU(e,l)&&(a[l]=o(l),s=l);return n&&(a[s]+="+1"),Q0e(a)}function BU(e){if(!e)return;const t=Kv(e);return`timeUnitSpecifier(${dt(t)}, ${dt(tme)})`}function rme(e,t,n){if(!e)return;const r=BU(e);return`${n||V3(e)?"utc":"time"}Format(${t}, ${r})`}function yn(e){if(!e)return;let t;return xe(e)?UU(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:ve(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),V3(t.unit)&&(t.utc=!0,t.unit=eme(t.unit)),t}function ime(e){const{utc:t,...n}=yn(e);return n.unit?(t?"utc":"")+se(n).map(r=>$t(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):`${t?"utc":""}timeunit${se(n).map(r=>$t(`_${r}_${n[r]}`)).join("")}`}function HU(e,t=n=>n){const n=yn(e),r=WU(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:s}=GU(r,n.step),a={...i,[s]:+i[s]+o};return`${t(Su(a))} - ${t(Su(i))}`}}const ome={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function sme(e){return we(ome,e)}function GU(e,t=1){if(sme(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function ame(e){return ae(e,"param")}function X3(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function J3(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Q3(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function K3(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Z3(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function e5(e){if(e!=null&&e.field){if(ne(e.range)&&e.range.length===2)return!0;if(Me(e.range))return!0}return!1}function t5(e){return!!(e!=null&&e.field)&&(ne(e.oneOf)||ne(e.in))}function lme(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function YU(e){return t5(e)||X3(e)||e5(e)||J3(e)||K3(e)||Q3(e)||Z3(e)}function xo(e,t){return l2(e,{timeUnit:t,wrapTime:!0})}function ume(e,t){return e.map(n=>xo(n,t))}function qU(e,t=!0){const{field:n}=e,r=yn(e.timeUnit),{unit:i,binned:o}=r||{},s=me(e,{expr:"datum"}),a=i?`time(${o?s:nme(i,n)})`:s;if(X3(e))return`${a}===${xo(e.equal,i)}`;if(J3(e)){const l=e.lt;return`${a}<${xo(l,i)}`}else if(K3(e)){const l=e.gt;return`${a}>${xo(l,i)}`}else if(Q3(e)){const l=e.lte;return`${a}<=${xo(l,i)}`}else if(Z3(e)){const l=e.gte;return`${a}>=${xo(l,i)}`}else{if(t5(e))return`indexof([${ume(e.oneOf,i).join(",")}], ${a}) !== -1`;if(lme(e))return Zv(a,e.valid);if(e5(e)){const{range:l}=En(e),c=Me(l)?{signal:`${l.signal}[0]`}:l[0],f=Me(l)?{signal:`${l.signal}[1]`}:l[1];if(c!==null&&f!==null&&t)return`inrange(${a}, [${xo(c,i)}, ${xo(f,i)}])`;const h=[];return c!==null&&h.push(`${a} >= ${xo(c,i)}`),f!==null&&h.push(`${a} <= ${xo(f,i)}`),h.length>0?h.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${dt(e)}`)}function Zv(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function cme(e){return YU(e)&&e.timeUnit?{...e,timeUnit:yn(e.timeUnit)}:e}const mg={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function fme(e){return e==="quantitative"||e==="temporal"}function n5(e){return e==="ordinal"||e==="nominal"}const Eu=mg.quantitative,r5=mg.ordinal,Sf=mg.temporal,i5=mg.nominal,td=mg.geojson;function dme(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Eu:return"quantitative";case"t":case Sf:return"temporal";case"o":case r5:return"ordinal";case"n":case i5:return"nominal";case td:return"geojson"}}const An={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},aE={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function hme(e,t){const n=aE[e],r=aE[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const pme={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function l8(e){return pme[e]}const VU=new Set(["linear","log","pow","sqrt","symlog"]),XU=new Set([...VU,"time","utc"]);function JU(e){return VU.has(e)}const QU=new Set(["quantile","quantize","threshold"]),gme=new Set([...XU,...QU,"sequential","identity"]),mme=new Set(["ordinal","bin-ordinal","point","band"]);function vn(e){return mme.has(e)}function Zi(e){return gme.has(e)}function $o(e){return XU.has(e)}function Ef(e){return QU.has(e)}const yme={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function vme(e){return!xe(e)&&ae(e,"name")}function KU(e){return ae(e,"param")}function xme(e){return ae(e,"unionWith")}function _me(e){return ve(e)&&"field"in e}const bme={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:eSe,domain:tSe,range:nSe,rangeMax:rSe,rangeMin:iSe,scheme:oSe,...wme}=bme,Sme=se(wme);function lE(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return $o(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return $o(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return $o(e);case"nice":return $o(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Zi(e)&&!Je(["log","time","utc","threshold","quantile"],e)}}function ZU(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return qc(e)?void 0:x0e(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Eme(e,t){return Je([r5,i5],t)?e===void 0||vn(e):t===Sf?Je([An.TIME,An.UTC,void 0],e):t===Eu?JU(e)||Ef(e)||e===void 0:!0}function Ame(e,t,n=!1){if(!ts(e))return!1;switch(e){case Mt:case _n:case al:case ed:case Ci:case ao:return $o(t)||t==="band"?!0:t==="point"?!n:!1;case ll:return Je(["linear","band"],t);case Hs:case fl:case Gs:case ul:case cl:case Iu:return $o(t)||Ef(t)||Je(["band","point","ordinal"],t);case Nr:case Ko:case Zo:return t!=="band";case dl:case Or:return t==="ordinal"||Ef(t)}}function Cme(e){return ve(e)&&"value"in e}const pr={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},eW=pr.arc,e2=pr.area,t2=pr.bar,kme=pr.image,n2=pr.line,r2=pr.point,$me=pr.rect,dy=pr.rule,tW=pr.text,o5=pr.tick,Mme=pr.trail,s5=pr.circle,a5=pr.square,nW=pr.geoshape;function pl(e){return["line","area","trail"].includes(e)}function $p(e){return["rect","bar","image","arc","tick"].includes(e)}const Nme=new Set(se(pr));function jo(e){return ae(e,"type")}const Ome=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Dme=["fill","fillOpacity"],Fme=[...Ome,...Dme],Tme={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},u8=se(Tme),Ib=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],Rme={area:["line","point"],bar:Ib,rect:Ib,line:["point"],tick:["bandSize","thickness",...Ib]},Lme={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},Pme={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},rW=se(Pme);function Au(e){return ae(e,"band")}const zme={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Ime=5,l5={binSpacing:0,continuousBandSize:Ime,minBandSize:.25,timeUnitBandPosition:.5},Ume={...l5,binSpacing:1},Wme={...l5,thickness:1};function jme(e){return jo(e)?e.type:e}function iW(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function u5({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!Zi(r)||i)return"always-valid";const o=iW(ft("invalid",e,t),{isPath:pl(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":o}function Bme(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function oW({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,o=`peek(${r})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:o})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:o})`}}function sW({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:o}){var f;const s=n==null?void 0:n.get("type"),a=to(t),l=Xv(a==null?void 0:a.aggregate),c=u5({scaleChannel:e,markDef:i,config:o,scaleType:s,isCountAggregate:l});if(a&&c==="show"){const h=((f=o.scale.invalid)==null?void 0:f[e])??"zero-or-min";return{test:Zv(me(a,{expr:"datum"}),!1),...Hme(h,n,r)}}}function Hme(e,t,n){if(Cme(e)){const{value:r}=e;return Me(r)?{signal:r.signal}:{value:r}}return oW({scale:t,scaleName:n,mode:"zeroOrMin"})}function c5(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:o,config:s}=e,a=Uu(t),l=f5(e),c=sW({scaleChannel:a,channelDef:n,scale:i,scaleName:o,markDef:r,config:s});return c!==void 0?[c,l]:l}function Gme(e){const{datum:t}=e;return Bu(t)?Su(t):`${dt(t)}`}function ru(e,t,n,r){const i={};if(t&&(i.scale=t),ns(e)){const{datum:o}=e;Bu(o)?i.signal=Su(o):Me(o)?i.signal=o.signal:gg(o)?i.signal=o.expr:i.value=o}else i.field=me(e,n);if(r){const{offset:o,band:s}=r;o&&(i.offset=o),s&&(i.band=s)}return i}function hy({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:s=.5}){const a=!Me(s)&&0<s&&s<1?"datum":void 0,l=me(t,{expr:a,suffix:i}),c=n!==void 0?me(n,{expr:a}):me(t,{suffix:o,expr:a}),f={};if(s===0||s===1){f.scale=e;const h=s===0?l:c;f.field=h}else{const h=Me(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${c}`:`${1-s} * ${l} + ${s} * ${c}`;f.signal=`scale("${e}", ${h})`}return r&&(f.offset=r),f}function Yme({scaleName:e,fieldDef:t}){const n=me(t,{expr:"datum"}),r=me(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function f5({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:c,bandPosition:f}){if(t){if(je(t)){const h=s==null?void 0:s.get("type");if(dr(t)){f??(f=Qa({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:p,timeUnit:m,type:y}=t;if(bt(p)||f&&m&&y===Sf)return a!=null&&a.impute?ru(t,o,{binSuffix:"mid"},{offset:l}):f&&!vn(h)?hy({scaleName:o,fieldOrDatumDef:t,bandPosition:f,offset:l}):ru(t,o,bg(t,e)?{binSuffix:"range"}:{},{offset:l});if(Sn(p)){if(ce(n))return hy({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:f,offset:l});fe(RU(e===Mt?so:Qo))}}return ru(t,o,vn(h)?{binSuffix:"range"}:{},{offset:l,band:h==="band"?f??t.bandPosition??.5:void 0})}else if(eo(t)){const h=t.value,p=l?{offset:l}:{};return{...tp(e,h),...p}}}return He(c)&&(c=c()),c&&{...c,...l?{offset:l}:{}}}function tp(e,t){return Je(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Je(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:At(t)}function Cu(e){return e&&e!=="number"&&e!=="time"}function aW(e,t,n){return`${e}(${t}${n?`, ${dt(n)}`:""})`}function d5({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var c;if(Cu(n))return qi({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const s=lW(e,r,i),a=Af(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(a==="quantitative"){if(i&&o.normalizedNumberFormatType)return qi({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return qi({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(a==="temporal"&&o.timeFormatType&&ce(e)&&e.timeUnit===void 0)return qi({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}function l(f){return ce(f)?yn(f.timeUnit)||{}:{unit:void 0,utc:void 0}}if(kf(e)){const{unit:f,utc:h}=l(e),p=Vme({field:s,timeUnit:f,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:h||Gu(e)&&((c=e.scale)==null?void 0:c.type)===An.UTC});return p?{signal:p}:void 0}if(t=uE({type:a,specifiedFormat:t,config:o,normalizeStack:i}),ce(e)&&bt(e.bin)){const f=me(e,{expr:r,binSuffix:"end"});return{signal:yg(s,f,t,n,o)}}else return t||Af(e)==="quantitative"?{signal:`${fW(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function lW(e,t,n){return ce(e)?n?`${me(e,{expr:t,suffix:"end"})}-${me(e,{expr:t,suffix:"start"})}`:me(e,{expr:t}):Gme(e)}function qi({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:s}){if(s??(s=lW(e,r,i)),s!=="datum.value"&&ce(e)&&bt(e.bin)){const a=me(e,{expr:r,binSuffix:"end"});return{signal:yg(s,a,t,n,o)}}return{signal:aW(n,s,t)}}function uW(e,t,n,r,i,o){var s;if(!(xe(r)&&Cu(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Af(e)==="quantitative"&&(i.normalizedNumberFormatType&&Cf(e)&&e.stack==="normalize"||i.numberFormatType))){if(Cf(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return uE({type:"quantitative",config:i,normalizeStack:!0});if(kf(e)){const a=ce(e)?(s=yn(e.timeUnit))==null?void 0:s.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:qme({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return uE({type:t,specifiedFormat:n,config:i})}}function cW(e,t,n){var r;if(e&&(Me(e)||e==="number"||e==="time"))return e;if(kf(t)&&n!=="time"&&n!=="utc")return ce(t)&&((r=yn(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function uE({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(xe(t))return t;if(e===Eu)return r?n.normalizedNumberFormat:n.numberFormat}function qme({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:BU(t)}:r?void 0:n.timeFormat)}function fW(e,t){return`format(${e}, "${t||""}")`}function c8(e,t,n,r){return Cu(n)?aW(n,e,t):fW(e,(xe(t)?t:void 0)??r.numberFormat)}function yg(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return yg(e,t,i.numberFormat,i.numberFormatType,i);const o=c8(e,n,r,i),s=c8(t,n,r,i);return`${Zv(e,!1)} ? "null" : ${o} + "${Rge}" + ${s}`}function Vme({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, ${dt(n)})`:(n=xe(n)?n:i,`${o?"utc":"time"}Format(${e}, ${dt(n)})`):rme(t,e,o)}const i2="min",Xme={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function f8(e){return we(Xme,e)}function Jme(e){return ae(e,"encoding")}function Os(e){return e&&(e.op==="count"||ae(e,"field"))}function dW(e){return e&&ne(e)}function vg(e){return ae(e,"row")||ae(e,"column")}function h5(e){return ae(e,"header")}function o2(e){return ae(e,"facet")}function Qme(e){return ae(e,"param")}function Kme(e){return!xe(e)&&ae(e,"repeat")}function d8(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function p5(e){return ae(e,"sort")}function Qa({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(je(e)&&e.bandPosition!==void 0)return e.bandPosition;if(ce(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return Wo("timeUnitBandPosition",n,r);if(bt(o))return .5}}function hW({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:s}){var c,f,h;const a=Dr(e),l=ft(s?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(ce(t)){const{timeUnit:p,bin:m}=t;if(p&&!n)return{band:Wo("timeUnitBandSize",r,i)};if(bt(m)&&!vn(o))return{band:1}}if($p(r.type))return o?vn(o)?((c=i[r.type])==null?void 0:c.discreteBandSize)||{band:1}:(f=i[r.type])==null?void 0:f.continuousBandSize:(h=i[r.type])==null?void 0:h.discreteBandSize}function pW(e,t,n,r){return bt(e.bin)||e.timeUnit&&dr(e)&&e.type==="temporal"?Qa({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function gW(e){return ae(e,"sort")&&!ae(e,"field")}function xg(e){return ae(e,"condition")}function s2(e){const t=e==null?void 0:e.condition;return!!t&&!ne(t)&&ce(t)}function _g(e){const t=e==null?void 0:e.condition;return!!t&&!ne(t)&&je(t)}function Zme(e){const t=e==null?void 0:e.condition;return!!t&&(ne(t)||eo(t))}function ce(e){return ae(e,"field")||(e==null?void 0:e.aggregate)==="count"}function Af(e){return e==null?void 0:e.type}function ns(e){return ae(e,"datum")}function Da(e){return dr(e)&&!gy(e)||py(e)}function h8(e){return dr(e)&&e.type==="quantitative"&&!e.bin||py(e)}function py(e){return ns(e)&&st(e.datum)}function je(e){return ce(e)||ns(e)}function dr(e){return e&&(ae(e,"field")||e.aggregate==="count")&&ae(e,"type")}function eo(e){return ae(e,"value")}function Gu(e){return ae(e,"scale")||ae(e,"sort")}function Cf(e){return ae(e,"axis")||ae(e,"stack")||ae(e,"impute")}function mW(e){return ae(e,"legend")}function yW(e){return ae(e,"format")||ae(e,"formatType")}function e1e(e){return Xr(e,["legend","axis","header","scale"])}function t1e(e){return ae(e,"op")}function me(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(r1e(e))n=aU("count");else{let s;if(!t.nofn)if(t1e(e))s=e.op;else{const{bin:a,aggregate:l,timeUnit:c}=e;bt(a)?(s=bU(a),i=(t.binSuffix??"")+(t.suffix??"")):l?hl(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):Ps(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):c&&!Hu(c)&&(s=ime(c),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?Zf(n):t.expr?rU(n,t.expr)+o:Si(n)+o}function gy(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ce(e)&&!!e.bin;case"temporal":return!1}throw new Error(OU(e.type))}function n1e(e){var t;return Gu(e)&&Ef((t=e.scale)==null?void 0:t.type)}function r1e(e){return e.aggregate==="count"}function i1e(e,t){var s;const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(bt(r))return`${n} (binned)`;if(i&&!Hu(i)){const a=(s=yn(i))==null?void 0:s.unit;if(a)return`${n} (${Kv(a).join("-")})`}else if(o)return hl(o)?`${n} for max ${o.argmax}`:Ps(o)?`${n} for min ${o.argmin}`:`${fg(o)} of ${n}`;return n}function o1e(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(hl(t))return`${i} for argmax(${t.argmax})`;if(Ps(t))return`${i} for argmin(${t.argmin})`;const o=r&&!Hu(r)?yn(r):void 0,s=t||(o==null?void 0:o.unit)||(o==null?void 0:o.maxbins)&&"timeunit"||bt(n)&&"bin";return s?`${s.toUpperCase()}(${i})`:i}const vW=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return o1e(e);default:return i1e(e,t)}};let xW=vW;function _W(e){xW=e}function s1e(){_W(vW)}function Vc(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=g5(e))==null?void 0:a.title;if(!ce(e))return i??e.title;const o=e,s=r?m5(o,t):void 0;return n?Gt(i,o.title,s):i??o.title??s}function g5(e){if(Cf(e)&&e.axis)return e.axis;if(mW(e)&&e.legend)return e.legend;if(h5(e)&&e.header)return e.header}function m5(e,t){return xW(e,t)}function my(e){if(yW(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=g5(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function a1e(e,t){var o;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(p5(e)&&ne(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!hl(n)&&!Ps(n))return"quantitative";if(Gu(e)&&((o=e.scale)!=null&&o.type))switch(aE[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function to(e){if(ce(e))return e;if(s2(e))return e.condition}function rn(e){if(je(e))return e;if(_g(e))return e.condition}function bW(e,t,n,r={}){if(xe(e)||st(e)||el(e)){const i=xe(e)?"string":st(e)?"number":"boolean";return fe(a0e(t,i,e)),{value:e}}return je(e)?yy(e,t,n,r):_g(e)?{...e,condition:yy(e.condition,t,n,r)}:e}function yy(e,t,n,r){if(yW(e)){const{format:i,formatType:o,...s}=e;if(Cu(o)&&!n.customFormatTypes)return fe(o8(t)),yy(s,t,n,r)}else{const i=Cf(e)?"axis":mW(e)?"legend":h5(e)?"header":null;if(i&&e[i]){const{format:o,formatType:s,...a}=e[i];if(Cu(s)&&!n.customFormatTypes)return fe(o8(t)),yy({...e,[i]:a},t,n,r)}}return ce(e)?y5(e,t,r):l1e(e)}function l1e(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=st(n)?"quantitative":xe(n)?"nominal":Bu(n)?"temporal":void 0,{...e,type:t}}function y5(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:s}=e,a={...e};if(!n&&r&&!W3(r)&&!hl(r)&&!Ps(r)&&(fe(u0e(r)),delete a.aggregate),i&&(a.timeUnit=yn(i)),s&&(a.field=`${s}`),bt(o)&&(a.bin=a2(o,t)),Sn(o)&&!Yt(t)&&fe(W0e(t)),dr(a)){const{type:l}=a,c=dme(l);l!==c&&(a.type=c),l!=="quantitative"&&Xv(r)&&(fe(l0e(l,r)),a.type="quantitative")}else if(!gU(t)){const l=a1e(a,t);a.type=l}if(dr(a)){const{compatible:l,warning:c}=u1e(a,t)||{};l===!1&&fe(c)}if(p5(a)&&xe(a.sort)){const{sort:l}=a;if(f8(l))return{...a,sort:{encoding:l}};const c=l.substring(1);if(l.charAt(0)==="-"&&f8(c))return{...a,sort:{encoding:c,order:"descending"}}}if(h5(a)){const{header:l}=a;if(l){const{orient:c,...f}=l;if(c)return{...a,header:{...f,labelOrient:l.labelOrient||c,titleOrient:l.titleOrient||c}}}}return a}function a2(e,t){return el(e)?{maxbins:J9(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:J9(t)}:e}const $c={compatible:!0};function u1e(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Ms:case Ns:case Bv:return gy(e)?$c:{compatible:!1,warning:h0e(t)};case Mt:case _n:case al:case ed:case Nr:case Ko:case Zo:case dg:case hg:case Hv:case bu:case Gv:case Yv:case Iu:case Ci:case ao:case qv:return $c;case uo:case Ei:case lo:case co:return n!==Eu?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:$c;case Gs:case ul:case cl:case fl:case Hs:case Bs:case js:case so:case Qo:case ll:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:$c;case Or:case dl:return!gy(e)&&!n1e(e)?{compatible:!1,warning:p0e(t)}:$c;case wf:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:$c}}function kf(e){const{formatType:t}=my(e);return t==="time"||!t&&c1e(e)}function c1e(e){return e&&(e.type==="temporal"||ce(e)&&!!e.timeUnit)}function l2(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const o=t&&((l=yn(t))==null?void 0:l.unit);let s=o||n==="temporal",a;return gg(e)?a=e.expr:Me(e)?a=e.signal:Bu(e)?(s=!0,a=Su(e)):(xe(e)||st(e))&&s&&(a=`datetime(${dt(e)})`,Z0e(o)&&(st(e)&&e<1e4||xe(e)&&isNaN(Date.parse(e)))&&(a=Su({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:dt(e)}function wW(e,t){const{type:n}=e;return t.map(r=>{const i=ce(e)&&!Hu(e.timeUnit)?e.timeUnit:void 0,o=l2(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function bg(e,t){return bt(e.bin)?ts(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const p8={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function wg(e){return e==null?void 0:e.condition}const SW=["domain","grid","labels","ticks","title"],f1e={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},EW={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},d1e={...EW,style:1,labelExpr:1,encoding:1};function g8(e){return we(d1e,e)}const h1e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},AW=se(h1e);function qs(e){return ae(e,"mark")}class u2{constructor(t,n){re(this,"name");re(this,"run");this.name=t,this.run=n}hasMatchingType(t){return qs(t)?jme(t.mark)===this.name:!1}}function iu(e,t){const n=e==null?void 0:e[t];return n?ne(n)?_f(n,r=>!!r.field):ce(n)||s2(n):!1}function CW(e,t){const n=e==null?void 0:e[t];return n?ne(n)?_f(n,r=>!!r.field):ce(n)||ns(n)||_g(n):!1}function kW(e,t){if(Yt(t)){const n=e[t];if((ce(n)||ns(n))&&(n5(n.type)||ce(n)&&n.timeUnit)){const r=L3(t);return CW(e,r)}}return!1}function $W(e){return _f(lge,t=>{if(iu(e,t)){const n=e[t];if(ne(n))return _f(n,r=>!!r.aggregate);{const r=to(n);return r&&!!r.aggregate}}return!1})}function MW(e,t){const n=[],r=[],i=[],o=[],s={};return v5(e,(a,l)=>{if(ce(a)){const{field:c,aggregate:f,bin:h,timeUnit:p,...m}=a;if(f||p||h){const y=g5(a),v=y==null?void 0:y.title;let _=me(a,{forAs:!0});const b={...v?[]:{title:Vc(a,t,{allowDisabling:!0})},...m,field:_};if(f){let S;if(hl(f)?(S="argmax",_=me({op:"argmax",field:f.argmax},{forAs:!0}),b.field=`${_}.${c}`):Ps(f)?(S="argmin",_=me({op:"argmin",field:f.argmin},{forAs:!0}),b.field=`${_}.${c}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(S=f),S){const A={op:S,as:_};c&&(A.field=c),o.push(A)}}else if(n.push(_),dr(a)&&bt(h)){if(r.push({bin:h,field:c,as:_}),n.push(me(a,{binSuffix:"end"})),bg(a,l)&&n.push(me(a,{binSuffix:"range"})),Yt(l)){const S={field:`${_}_end`};s[`${l}2`]=S}b.bin="binned",gU(l)||(b.type=Eu)}else if(p&&!Hu(p)){i.push({timeUnit:p,field:c,as:_});const S=dr(a)&&a.type!==Sf&&"time";S&&(l===dg||l===bu?b.formatType=S:xge(l)?b.legend={formatType:S,...b.legend}:Yt(l)&&(b.axis={formatType:S,...b.axis}))}s[l]=b}else n.push(c),s[l]=e[l]}else s[l]=e[l]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:s}}function p1e(e,t,n){const r=bge(t,n);if(r){if(r==="binned"){const i=e[t===so?Mt:_n];return!!(ce(i)&&ce(e[t])&&Sn(i.bin))}}else return!1;return!0}function g1e(e,t,n,r){const i={};for(const o of se(e))pU(o)||fe(d0e(o));for(let o of pge){if(!e[o])continue;const s=e[o];if(pg(o)){const a=hge(o),l=i[a];if(ce(l)&&fme(l.type)&&ce(s)&&!l.timeUnit){fe(s0e(a));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(fe(o0e),o=Ci),!p1e(e,o,t)){fe(Qv(o,t));continue}if(o===Hs&&t==="line"){const a=to(e[o]);if(a!=null&&a.aggregate){fe(f0e);continue}}if(o===Nr&&(n?"fill"in e:"stroke"in e)){fe(DU("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===hg||o===wf&&!ne(s)&&!eo(s)||o===bu&&ne(s)){if(s){if(o===wf){const a=e[o];if(gW(a)){i[o]=a;continue}}i[o]=_e(s).reduce((a,l)=>(ce(l)?a.push(y5(l,o)):fe(sE(l,o)),a),[])}}else{if(o===bu&&s===null)i[o]=null;else if(!ce(s)&&!ns(s)&&!eo(s)&&!xg(s)&&!Me(s)){fe(sE(s,o));continue}i[o]=bW(s,o,r)}}return i}function c2(e,t){const n={};for(const r of se(e)){const i=bW(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function m1e(e){const t=[];for(const n of se(e))if(iu(e,n)){const r=e[n],i=_e(r);for(const o of i)ce(o)?t.push(o):s2(o)&&t.push(o.condition)}return t}function v5(e,t,n){if(e)for(const r of se(e)){const i=e[r];if(ne(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function y1e(e,t,n,r){return e?se(e).reduce((i,o)=>{const s=e[o];return ne(s)?s.reduce((a,l)=>t.call(r,a,l,o),i):t.call(r,i,s,o)},n):n}function NW(e,t){return se(t).reduce((n,r)=>{switch(r){case Mt:case _n:case Gv:case qv:case Yv:case so:case Qo:case al:case ed:case Ci:case Bs:case ao:case js:case ll:case lo:case uo:case co:case Ei:case dg:case Or:case Iu:case bu:return n;case wf:if(e==="line"||e==="trail")return n;case hg:case Hv:{const i=t[r];if(ne(i)||ce(i))for(const o of _e(i))o.aggregate||n.push(me(o,{}));return n}case Hs:if(e==="trail")return n;case Nr:case Ko:case Zo:case Gs:case ul:case cl:case dl:case fl:{const i=to(t[r]);return i&&!i.aggregate&&n.push(me(i,{})),n}}},[])}function v1e(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(ne(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return ne(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function cE(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:s,titlePrefix:a})=>{const l=r?` of ${x5(t)}`:"";return{field:s+t.field,type:t.type,title:Me(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),o=m1e(n).map(e1e);return{tooltip:[...i,...ko(o,Qe)]}}function x5(e){const{title:t,field:n}=e;return Gt(t,n)}function _5(e,t,n,r,i){const{scale:o,axis:s}=n;return({partName:a,mark:l,positionPrefix:c,endPositionPrefix:f=void 0,extraEncoding:h={}})=>{const p=x5(n);return OW(e,a,i,{mark:l,encoding:{[t]:{field:`${c}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...o!==void 0?{scale:o}:{},...s!==void 0?{axis:s}:{}},...xe(f)?{[`${t}2`]:{field:`${f}_${n.field}`}}:{},...r,...h}})}}function OW(e,t,n,r){const{clip:i,color:o,opacity:s}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...s?{opacity:s}:{},...jo(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...el(e[t])?{}:e[t]}}]:[]}function DW(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],s=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:cm(o,n),continuousAxisChannelDef2:cm(s,n),continuousAxisChannelDefError:cm(a,n),continuousAxisChannelDefError2:cm(l,n),continuousAxis:i}}function cm(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&fe(U0e(n,t)),r}else return e}function FW(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(jo(n)&&n.orient)return n.orient;if(Da(i)){if(Da(o)){const s=ce(i)&&i.aggregate,a=ce(o)&&o.aggregate;if(!s&&a===t)return"vertical";if(!a&&s===t)return"horizontal";if(s===t&&a===t)throw new Error("Both x and y cannot have aggregate");return kf(o)&&!kf(i)?"horizontal":"vertical"}return"horizontal"}else{if(Da(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const vy="boxplot",x1e=["box","median","outliers","rule","ticks"],_1e=new u2(vy,RW);function TW(e){return st(e)?"tukey":e}function RW(e,{config:t}){e={...e,encoding:c2(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...s}=e,a=jo(n)?n:{type:n};i&&fe(NU("boxplot"));const l=a.extent??t.boxplot.extent,c=ft("size",a,t),f=a.invalid,h=TW(l),{bins:p,timeUnits:m,transform:y,continuousAxisChannelDef:v,continuousAxis:_,groupby:b,aggregate:S,encodingWithoutContinuousAxis:A,ticksOrient:C,boxOrient:k,customTooltipWithoutAggregatedField:N}=b1e(e,l,t),$=Zf(v.field),{color:O,size:D,...P}=A,R=Rr=>_5(a,_,v,Rr,t.boxplot),X=R(P),B=R(A),I=(ve(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=R({...P,...D?{size:D}:{},color:{condition:{test:`${pt(`lower_box_${v.field}`)} >= ${pt(`upper_box_${v.field}`)}`,...O||{value:I}}}}),W=cE([{fieldPrefix:h==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:h==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],v,A),V={type:"tick",color:"black",opacity:1,orient:C,invalid:f,aria:!1},j=h==="min-max"?W:cE([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],v,A),H=[...X({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:j}),...X({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:j}),...X({partName:"ticks",mark:V,positionPrefix:"lower_whisker",extraEncoding:j}),...X({partName:"ticks",mark:V,positionPrefix:"upper_whisker",extraEncoding:j})],Q=[...h!=="tukey"?H:[],...B({partName:"box",mark:{type:"bar",...c?{size:c}:{},orient:k,invalid:f,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:W}),...F({partName:"median",mark:{type:"tick",invalid:f,...ve(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...c?{size:c}:{},orient:C,aria:!1},positionPrefix:"mid_box",extraEncoding:W})];if(h==="min-max")return{...s,transform:(s.transform??[]).concat(y),layer:Q};const L=pt(`lower_box_${v.field}`),Y=pt(`upper_box_${v.field}`),ye=`(${Y} - ${L})`,Ae=`${L} - ${l} * ${ye}`,be=`${Y} + ${l} * ${ye}`,Ie=pt(v.field),et={joinaggregate:LW(v.field),groupby:b},qe={transform:[{filter:`(${Ae} <= ${Ie}) && (${Ie} <= ${be})`},{aggregate:[{op:"min",field:v.field,as:`lower_whisker_${$}`},{op:"max",field:v.field,as:`upper_whisker_${$}`},{op:"min",field:`lower_box_${v.field}`,as:`lower_box_${$}`},{op:"max",field:`upper_box_${v.field}`,as:`upper_box_${$}`},...S],groupby:b}],layer:H},{tooltip:de,...Te}=P,{scale:Be,axis:le}=v,Rt=x5(v),nt=OW(a,"outliers",t.boxplot,{transform:[{filter:`(${Ie} < ${Ae}) || (${Ie} > ${be})`}],mark:"point",encoding:{[_]:{field:v.field,type:v.type,...Rt!==void 0?{title:Rt}:{},...Be!==void 0?{scale:Be}:{},...le!==void 0?{axis:le}:{}},...Te,...O?{color:O}:{},...N?{tooltip:N}:{}}})[0];let Wt;const Qt=[...p,...m,et];return nt?Wt={transform:Qt,layer:[nt,qe]}:(Wt=qe,Wt.transform.unshift(...Qt)),{...s,layer:[Wt,{transform:y,layer:Q}]}}function LW(e){const t=Zf(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function b1e(e,t,n){const r=FW(e,vy),{continuousAxisChannelDef:i,continuousAxis:o}=DW(e,r,vy),s=i.field,a=Zf(s),l=TW(t),c=[...LW(s),{op:"median",field:s,as:`mid_box_${a}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+a}],f=l==="min-max"||l==="tukey"?[]:[{calculate:`${pt(`upper_box_${a}`)} - ${pt(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${pt(`upper_box_${a}`)} + ${pt(`iqr_${a}`)} * ${t}, ${pt(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${pt(`lower_box_${a}`)} - ${pt(`iqr_${a}`)} * ${t}, ${pt(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[o]:h,...p}=e.encoding,{customTooltipWithoutAggregatedField:m,filteredEncoding:y}=v1e(p),{bins:v,timeUnits:_,aggregate:b,groupby:S,encoding:A}=MW(y,n),C=r==="vertical"?"horizontal":"vertical",k=r,N=[...v,..._,{aggregate:[...b,...c],groupby:S},...f];return{bins:v,timeUnits:_,transform:N,groupby:S,aggregate:b,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:A,ticksOrient:C,boxOrient:k,customTooltipWithoutAggregatedField:m}}const b5="errorbar",w1e=["ticks","rule"],S1e=new u2(b5,PW);function PW(e,{config:t}){e={...e,encoding:c2(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:s,markDef:a,outerSpec:l,tooltipEncoding:c}=zW(e,b5,t);delete o.size;const f=_5(a,i,r,o,t.errorbar),h=a.thickness,p=a.size,m={type:"tick",orient:s,aria:!1,...h!==void 0?{thickness:h}:{},...p!==void 0?{size:p}:{}},y=[...f({partName:"ticks",mark:m,positionPrefix:"lower",extraEncoding:c}),...f({partName:"ticks",mark:m,positionPrefix:"upper",extraEncoding:c}),...f({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...h!==void 0?{size:h}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c})];return{...l,transform:n,...y.length>1?{layer:y}:{...y[0]}}}function E1e(e,t){const{encoding:n}=e;if(A1e(n))return{orient:FW(e,t),inputType:"raw"};const r=C1e(n),i=k1e(n),o=n.x,s=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(je(a)&&je(l))throw new Error(`${t} cannot have both x2 and y2`);if(je(a)){if(Da(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(je(l)){if(Da(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,c=n.yError,f=n.yError2;if(je(l)&&!je(a))throw new Error(`${t} cannot have xError2 without xError`);if(je(f)&&!je(c))throw new Error(`${t} cannot have yError2 without yError`);if(je(a)&&je(c))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(je(a)){if(Da(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(je(c)){if(Da(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function A1e(e){return(je(e.x)||je(e.y))&&!je(e.x2)&&!je(e.y2)&&!je(e.xError)&&!je(e.xError2)&&!je(e.yError)&&!je(e.yError2)}function C1e(e){return je(e.x2)||je(e.y2)}function k1e(e){return je(e.xError)||je(e.xError2)||je(e.yError)||je(e.yError2)}function zW(e,t,n){const{mark:r,encoding:i,params:o,projection:s,...a}=e,l=jo(r)?r:{type:r};o&&fe(NU(t));const{orient:c,inputType:f}=E1e(e,t),{continuousAxisChannelDef:h,continuousAxisChannelDef2:p,continuousAxisChannelDefError:m,continuousAxisChannelDefError2:y,continuousAxis:v}=DW(e,c,t),{errorBarSpecificAggregate:_,postAggregateCalculates:b,tooltipSummary:S,tooltipTitleWithFieldName:A}=$1e(l,h,p,m,y,f,t,n),{[v]:C,[v==="x"?"x2":"y2"]:k,[v==="x"?"xError":"yError"]:N,[v==="x"?"xError2":"yError2"]:$,...O}=i,{bins:D,timeUnits:P,aggregate:R,groupby:X,encoding:B}=MW(O,n),I=[...R,..._],F=f!=="raw"?[]:X,W=cE(S,h,B,A);return{transform:[...a.transform??[],...D,...P,...I.length===0?[]:[{aggregate:I,groupby:F}],...b],groupby:F,continuousAxisChannelDef:h,continuousAxis:v,encodingWithoutContinuousAxis:B,ticksOrient:c==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:W}}function $1e(e,t,n,r,i,o,s,a){let l=[],c=[];const f=t.field;let h,p=!1;if(o==="raw"){const m=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,y=e.extent?e.extent:m==="mean"?"stderr":"iqr";if(m==="median"!=(y==="iqr")&&fe(I0e(m,y,s)),y==="stderr"||y==="stdev")l=[{op:y,field:f,as:`extent_${f}`},{op:m,field:f,as:`center_${f}`}],c=[{calculate:`${pt(`center_${f}`)} + ${pt(`extent_${f}`)}`,as:`upper_${f}`},{calculate:`${pt(`center_${f}`)} - ${pt(`extent_${f}`)}`,as:`lower_${f}`}],h=[{fieldPrefix:"center_",titlePrefix:fg(m)},{fieldPrefix:"upper_",titlePrefix:m8(m,y,"+")},{fieldPrefix:"lower_",titlePrefix:m8(m,y,"-")}],p=!0;else{let v,_,b;y==="ci"?(v="mean",_="ci0",b="ci1"):(v="median",_="q1",b="q3"),l=[{op:_,field:f,as:`lower_${f}`},{op:b,field:f,as:`upper_${f}`},{op:v,field:f,as:`center_${f}`}],h=[{fieldPrefix:"upper_",titlePrefix:Vc({field:f,aggregate:b,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Vc({field:f,aggregate:_,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Vc({field:f,aggregate:v,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&fe(z0e(e.center,e.extent)),o==="aggregated-upper-lower"?(h=[],c=[{calculate:pt(n.field),as:`upper_${f}`},{calculate:pt(f),as:`lower_${f}`}]):o==="aggregated-error"&&(h=[{fieldPrefix:"",titlePrefix:f}],c=[{calculate:`${pt(f)} + ${pt(r.field)}`,as:`upper_${f}`}],i?c.push({calculate:`${pt(f)} + ${pt(i.field)}`,as:`lower_${f}`}):c.push({calculate:`${pt(f)} - ${pt(r.field)}`,as:`lower_${f}`}));for(const m of c)h.push({fieldPrefix:m.as.substring(0,6),titlePrefix:_u(_u(m.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:c,errorBarSpecificAggregate:l,tooltipSummary:h,tooltipTitleWithFieldName:p}}function m8(e,t,n){return`${fg(e)} ${n} ${t}`}const w5="errorband",M1e=["band","borders"],N1e=new u2(w5,IW);function IW(e,{config:t}){e={...e,encoding:c2(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:s,outerSpec:a,tooltipEncoding:l}=zW(e,w5,t),c=s,f=_5(c,i,r,o,t.errorband),h=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:h?"area":"rect"},m={type:h?"line":"rule"};const y={...c.interpolate?{interpolate:c.interpolate}:{},...c.tension&&c.interpolate?{tension:c.tension}:{}};return h?(p={...p,...y,ariaRoleDescription:"errorband"},m={...m,...y,aria:!1}):c.interpolate?fe(a8("interpolate")):c.tension&&fe(a8("tension")),{...a,transform:n,layer:[...f({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...f({partName:"borders",mark:m,positionPrefix:"lower",extraEncoding:l}),...f({partName:"borders",mark:m,positionPrefix:"upper",extraEncoding:l})]}}const UW={};function S5(e,t,n){const r=new u2(e,t);UW[e]={normalizer:r,parts:n}}function O1e(){return se(UW)}S5(vy,RW,x1e);S5(b5,PW,w1e);S5(w5,IW,M1e);const D1e=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],WW={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},jW={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},F1e=se(WW),T1e=se(jW),R1e={header:1,headerRow:1,headerColumn:1,headerFacet:1},BW=se(R1e),HW=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],L1e={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},P1e={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},no="_vgsid_",z1e={point:{on:"click",fields:[no],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function E5(e){return e==="legend"||!!(e!=null&&e.legend)}function Ub(e){return E5(e)&&ve(e)}function A5(e){return!!(e!=null&&e.select)}function GW(e){const t=[];for(const n of e||[]){if(A5(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const s={...o,bind:i,init:r};t.push(s)}else{const s={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(s)}}return t}function I1e(e){return f2(e)||k5(e)||C5(e)}function C5(e){return ae(e,"concat")}function f2(e){return ae(e,"vconcat")}function k5(e){return ae(e,"hconcat")}function YW({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Bo(e){return ae(e,"step")}function y8(e){return ae(e,"view")||ae(e,"width")||ae(e,"height")}const v8=20,U1e={align:1,bounds:1,center:1,columns:1,spacing:1},W1e=se(U1e);function j1e(e,t,n){const r=n[t],i={},{spacing:o,columns:s}=r;o!==void 0&&(i.spacing=o),s!==void 0&&(o2(e)&&!vg(e.facet)||C5(e))&&(i.columns=s),f2(e)&&(i.columns=1);for(const a of W1e)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=st(l)?l:{row:l.row??o,column:l.column??o}}else i[a]=e[a];return i}function fE(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function dE(e,t){const n=xy(e,t);return Bo(n)?n.step:qW}function xy(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Gt(n,{step:e.step})}const qW=20,B1e={continuousWidth:300,continuousHeight:300,step:qW},H1e={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:B1e,mark:Lme,arc:{},area:{},bar:Ume,circle:{},geoshape:{},image:{},line:{},point:{},rect:l5,rule:{color:"black"},square:{},text:{color:"black"},tick:Wme,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:yme,projection:{},legend:L1e,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:z1e,style:{},title:{},facet:{spacing:v8},concat:{spacing:v8},normalizedNumberFormat:".0%"},ps=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],x8={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},_8={blue:ps[0],orange:ps[1],red:ps[2],teal:ps[3],green:ps[4],yellow:ps[5],purple:ps[6],pink:ps[7],brown:ps[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function G1e(e={}){return{signals:[{name:"color",value:ve(e)?{..._8,...e}:_8}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Y1e(e){return{signals:[{name:"fontSize",value:ve(e)?{...x8,...e}:x8}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function q1e(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function VW(e){const t=se(e||{}),n={};for(const r of t){const i=e[r];n[r]=wg(i)?SU(i):Br(i)}return n}function V1e(e){const t=se(e),n={};for(const r of t)n[r]=VW(e[r]);return n}const X1e=[...rW,...AW,...BW,"background","padding","legend","lineBreak","scale","style","title","view"];function XW(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,s=Lf({},We(H1e),n?q1e(n):{},t?G1e(t):{},r?Y1e(r):{},o||{});i&&Pf(s,"selection",i,!0);const a=Xr(s,X1e);for(const l of["background","lineBreak","padding"])s[l]&&(a[l]=Br(s[l]));for(const l of rW)s[l]&&(a[l]=En(s[l]));for(const l of AW)s[l]&&(a[l]=VW(s[l]));for(const l of BW)s[l]&&(a[l]=En(s[l]));if(s.legend&&(a.legend=En(s.legend)),s.scale){const{invalid:l,...c}=s.scale,f=En(l,{level:1});a.scale={...En(c),...se(f).length>0?{invalid:f}:{}}}return s.style&&(a.style=V1e(s.style)),s.title&&(a.title=En(s.title)),s.view&&(a.view=En(s.view)),a}const J1e=new Set(["view",...Nme]),Q1e=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],K1e={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Rme};function Z1e(e){e=We(e);for(const t of Q1e)delete e[t];if(e.axis)for(const t in e.axis)wg(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of D1e)delete e.legend[t];if(e.mark){for(const t of u8)delete e.mark[t];e.mark.tooltip&&ve(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(GW(e.params)),delete e.params);for(const t of J1e){for(const r of u8)delete e[t][r];const n=K1e[t];if(n)for(const r of n)delete e[t][r];tye(e,t)}for(const t of O1e())delete e[t];eye(e);for(const t in e)ve(e[t])&&xt(e[t])&&delete e[t];return xt(e)?void 0:e}function eye(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=wU(e.title);xt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),xt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),xt(r)?delete e.title:e.title=r}function tye(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};xt(o)||(e.style[n??t]=o),delete e[t]}function d2(e){return ae(e,"layer")}function nye(e){return ae(e,"repeat")}function rye(e){return!ne(e.repeat)&&ae(e.repeat,"layer")}class $5{map(t,n){return o2(t)?this.mapFacet(t,n):nye(t)?this.mapRepeat(t,n):k5(t)?this.mapHConcat(t,n):f2(t)?this.mapVConcat(t,n):C5(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(d2(t))return this.mapLayer(t,n);if(qs(t))return this.mapUnit(t,n);throw new Error(j3(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const iye={zero:1,center:1,normalize:1};function oye(e){return we(iye,e)}const sye=new Set([eW,t2,e2,dy,r2,s5,a5,n2,tW,o5]),aye=new Set([t2,e2,eW]);function Mc(e){return ce(e)&&Af(e)==="quantitative"&&!e.bin}function b8(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),s=e[t],a=e[i];if(ce(s)&&ce(a))if(Mc(s)&&Mc(a)){if(s.stack)return t;if(a.stack)return i;const l=ce(s)&&!!s.aggregate,c=ce(a)&&!!a.aggregate;if(l!==c)return l?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(Mc(s))return t;if(Mc(a))return i}else{if(Mc(s))return o&&n==="vertical"?void 0:t;if(Mc(a))return o&&n==="horizontal"?void 0:i}}function lye(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function JW(e,t){var v,_;const n=jo(e)?e:{type:e},r=n.type;if(!sye.has(r))return null;const i=b8(t,"x",n)||b8(t,"theta",n);if(!i)return null;const o=t[i],s=ce(o)?me(o,{}):void 0,a=lye(i),l=[],c=new Set;if(t[a]){const b=t[a],S=ce(b)?me(b,{}):void 0;S&&S!==s&&(l.push(a),c.add(S))}const f=a==="x"?"xOffset":"yOffset",h=t[f],p=ce(h)?me(h,{}):void 0;p&&p!==s&&(l.push(f),c.add(p));const m=gge.reduce((b,S)=>{if(S!=="tooltip"&&iu(t,S)){const A=t[S];for(const C of _e(A)){const k=to(C);if(k.aggregate)continue;const N=me(k,{});(!N||!c.has(N))&&b.push({channel:S,fieldDef:k})}}return b},[]);let y;return o.stack!==void 0?el(o.stack)?y=o.stack?"zero":null:y=o.stack:aye.has(r)&&(y="zero"),!y||!oye(y)||$W(t)&&m.length===0?null:((v=o==null?void 0:o.scale)!=null&&v.type&&((_=o==null?void 0:o.scale)==null?void 0:_.type)!==An.LINEAR&&o!=null&&o.stack&&fe(R0e(o.scale.type)),je(t[es(i)])?(o.stack!==void 0&&fe(T0e(i)),null):(ce(o)&&o.aggregate&&!$ge.has(o.aggregate)&&fe(L0e(o.aggregate)),{groupbyChannels:l,groupbyFields:c,fieldChannel:i,impute:o.impute===null?!1:pl(r),stackBy:m,offset:y}))}function QW(e,t,n){const r=En(e),i=ft("orient",r,n);if(r.orient=dye(r.type,t,i),i!==void 0&&i!==r.orient&&fe(v0e(r.orient,i)),r.type==="bar"&&r.orient){const l=ft("cornerRadiusEnd",r,n);if(l!==void 0){const c=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:zme[r.orient];for(const f of c)r[f]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const o=ft("opacity",r,n),s=ft("fillOpacity",r,n);return o===void 0&&s===void 0&&(r.opacity=cye(r.type,t)),ft("cursor",r,n)===void 0&&(r.cursor=uye(r,t,n)),r}function uye(e,t,n){return t.href||e.href||ft("href",e,n)?"pointer":e.cursor}const KW=.7;function cye(e,t){if(Je([r2,o5,s5,a5],e)&&!$W(t))return KW}function fye(e,t,{graticule:n}){if(n)return!1;const r=Wo("filled",e,t),i=e.type;return Gt(r,i!==r2&&i!==n2&&i!==dy)}function dye(e,t,n){switch(e){case r2:case s5:case a5:case $me:case kme:return}const{x:r,y:i,x2:o,y2:s}=t;switch(e){case tW:case t2:if(ce(r)&&(Sn(r.bin)||ce(i)&&i.aggregate&&!r.aggregate))return"vertical";if(ce(i)&&(Sn(i.bin)||ce(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(s||o){if(n)return n;if(!o)return(ce(r)&&r.type===Eu&&!bt(r.bin)||py(r))&&ce(i)&&Sn(i.bin)?"horizontal":"vertical";if(!s)return(ce(i)&&i.type===Eu&&!bt(i.bin)||py(i))&&ce(r)&&Sn(r.bin)?"vertical":"horizontal"}case dy:if(o&&!(ce(r)&&Sn(r.bin))&&s&&!(ce(i)&&Sn(i.bin)))return;case e2:if(s)return ce(i)&&Sn(i.bin)?"horizontal":"vertical";if(o)return ce(r)&&Sn(r.bin)?"vertical":"horizontal";if(e===dy){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case n2:case o5:{const a=h8(r),l=h8(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const c=dr(r)&&r.type===Sf,f=dr(i)&&i.type===Sf;if(c&&!f)return"vertical";if(!c&&f)return"horizontal"}return}}return"vertical"}function hye(e){const{point:t,line:n,...r}=e;return se(r).length>1?r:r.type}function pye(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Xr(e[t],["point","line"])});return e}function Wb(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?ve(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?ve(t.point)?t.point:{}:void 0}function w8(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class gye{constructor(){re(this,"name","path-overlay")}hasMatchingType(t,n){if(qs(t)){const{mark:r,encoding:i}=t,o=jo(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!Wb(o,n[o.type],i);case"area":return!!Wb(o,n[o.type],i)||!!w8(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:s,mark:a,name:l,encoding:c,...f}=t,h=c2(c,i),p=jo(a)?a:{type:a},m=Wb(p,i[p.type],h),y=p.type==="area"&&w8(p,i[p.type]),v=[{name:l,...o?{params:o}:{},mark:hye({...p.type==="area"&&ft("opacity",p,i)==null&&ft("fillOpacity",p,i)==null?{opacity:KW}:{},...p}),encoding:Xr(h,["shape"])}],_=JW(QW(p,h,i),h);let b=h;if(_){const{fieldChannel:S,offset:A}=_;b={...h,[S]:{...h[S],...A?{stack:A}:{}}}}return b=Xr(b,["y2","x2"]),y&&v.push({...s?{projection:s}:{},mark:{type:"line",...xf(p,["clip","interpolate","tension","tooltip"]),...y},encoding:b}),m&&v.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...xf(p,["clip","tooltip"]),...m},encoding:b}),r({...f,layer:v},{...n,config:pye(i)})}}function mye(e,t){return t?vg(e)?ej(e,t):ZW(e,t):e}function jb(e,t){return t?ej(e,t):e}function hE(e,t,n){const r=t[e];if(Kme(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};fe(Xge(r.repeat));return}return t}function ZW(e,t){if(e=hE("field",e,t),e!==void 0){if(e===null)return null;if(p5(e)&&Os(e.sort)){const n=hE("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function S8(e,t){if(ce(e))return ZW(e,t);{const n=hE("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function E8(e,t){if(je(e)){const n=S8(e,t);if(n)return n;if(xg(e))return{condition:e.condition}}else{if(_g(e)){const n=S8(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function ej(e,t){const n={};for(const r in e)if(ae(e,r)){const i=e[r];if(ne(i))n[r]=i.map(o=>E8(o,t)).filter(o=>o);else{const o=E8(i,t);o!==void 0&&(n[r]=o)}}return n}class yye{constructor(){re(this,"name","RuleForRangedLine")}hasMatchingType(t){if(qs(t)){const{encoding:n,mark:r}=t;if(r==="line"||jo(r)&&r.type==="line")for(const i of dge){const o=Uu(i),s=n[o];if(n[i]&&(ce(s)&&!Sn(s.bin)||ns(s)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return fe(y0e(!!i.x2,!!i.y2)),r({...t,mark:ve(o)?{...o,type:"rule"}:"rule"},n)}}class vye extends $5{constructor(){super(...arguments);re(this,"nonFacetUnitNormalizers",[_1e,S1e,N1e,new gye,new yye])}map(n,r){if(qs(n)){const i=iu(n.encoding,Ms),o=iu(n.encoding,Ns),s=iu(n.encoding,Bv);if(i||o||s)return this.mapFacetedUnit(n,r)}return super.map(n,r)}mapUnit(n,r){const{parentEncoding:i,parentProjection:o}=r,s=jb(n.encoding,r.repeater),a={...n,...n.name?{name:[r.repeaterPrefix,n.name].filter(c=>c).join("_")}:{},...s?{encoding:s}:{}};if(i||o)return this.mapUnitWithParentEncodingOrProjection(a,r);const l=this.mapLayerOrUnit.bind(this);for(const c of this.nonFacetUnitNormalizers)if(c.hasMatchingType(a,r.config))return c.run(a,r,l);return a}mapRepeat(n,r){return rye(n)?this.mapLayerRepeat(n,r):this.mapNonLayerRepeat(n,r)}mapLayerRepeat(n,r){const{repeat:i,spec:o,...s}=n,{row:a,column:l,layer:c}=i,{repeater:f={},repeaterPrefix:h=""}=r;return a||l?this.mapRepeat({...n,repeat:{...a?{row:a}:{},...l?{column:l}:{}},spec:{repeat:{layer:c},spec:o}},r):{...s,layer:c.map(p=>{const m={...f,layer:p},y=`${(o.name?`${o.name}_`:"")+h}child__layer_${$t(p)}`,v=this.mapLayerOrUnit(o,{...r,repeater:m,repeaterPrefix:y});return v.name=y,v})}}mapNonLayerRepeat(n,r){const{repeat:i,spec:o,data:s,...a}=n;!ne(i)&&n.columns&&(n=Xr(n,["columns"]),fe(r8("repeat")));const l=[],{repeater:c={},repeaterPrefix:f=""}=r,h=!ne(i)&&i.row||[c?c.row:null],p=!ne(i)&&i.column||[c?c.column:null],m=ne(i)&&i||[c?c.repeat:null];for(const v of m)for(const _ of h)for(const b of p){const S={repeat:v,row:_,column:b,layer:c.layer},A=`${(o.name?`${o.name}_`:"")+f}child__${ne(i)?`${$t(v)}`:(i.row?`row_${$t(_)}`:"")+(i.column?`column_${$t(b)}`:"")}`,C=this.map(o,{...r,repeater:S,repeaterPrefix:A});C.name=A,l.push(Xr(C,["data"]))}const y=ne(i)?n.columns:i.column?i.column.length:1;return{data:o.data??s,align:"all",...a,columns:y,concat:l}}mapFacet(n,r){const{facet:i}=n;return vg(i)&&n.columns&&(n=Xr(n,["columns"]),fe(r8("facet"))),super.mapFacet(n,r)}mapUnitWithParentEncodingOrProjection(n,r){const{encoding:i,projection:o}=n,{parentEncoding:s,parentProjection:a,config:l}=r,c=C8({parentProjection:a,projection:o}),f=A8({parentEncoding:s,encoding:jb(i,r.repeater)});return this.mapUnit({...n,...c?{projection:c}:{},...f?{encoding:f}:{}},{config:l})}mapFacetedUnit(n,r){const{row:i,column:o,facet:s,...a}=n.encoding,{mark:l,width:c,projection:f,height:h,view:p,params:m,encoding:y,...v}=n,{facetMapping:_,layout:b}=this.getFacetMappingAndLayout({row:i,column:o,facet:s},r),S=jb(a,r.repeater);return this.mapFacet({...v,...b,facet:_,spec:{...c?{width:c}:{},...h?{height:h}:{},...p?{view:p}:{},...f?{projection:f}:{},mark:l,encoding:S,...m?{params:m}:{}}},r)}getFacetMappingAndLayout(n,r){const{row:i,column:o,facet:s}=n;if(i||o){s&&fe(g0e([...i?[Ms]:[],...o?[Ns]:[]]));const a={},l={};for(const c of[Ms,Ns]){const f=n[c];if(f){const{align:h,center:p,spacing:m,columns:y,...v}=f;a[c]=v;for(const _ of["align","center","spacing"])f[_]!==void 0&&(l[_]??(l[_]={}),l[_][c]=f[_])}}return{facetMapping:a,layout:l}}else{const{align:a,center:l,spacing:c,columns:f,...h}=s;return{facetMapping:mye(h,r.repeater),layout:{...a?{align:a}:{},...l?{center:l}:{},...c?{spacing:c}:{},...f?{columns:f}:{}}}}}mapLayer(n,{parentEncoding:r,parentProjection:i,...o}){const{encoding:s,projection:a,...l}=n,c={...o,parentEncoding:A8({parentEncoding:r,encoding:s,layer:!0}),parentProjection:C8({parentProjection:i,projection:a})};return super.mapLayer({...l,...n.name?{name:[c.repeaterPrefix,n.name].filter(f=>f).join("_")}:{}},c)}}function A8({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...se(e),...se(t)]);for(const o of i){const s=t[o],a=e[o];if(je(s)){const l={...a,...s};r[o]=l}else _g(s)?r[o]={...s,condition:{...a,...s.condition}}:s||s===null?r[o]=s:(n||eo(a)||Me(a)||je(a)||ne(a))&&(r[o]=a)}}else r=t;return!r||xt(r)?void 0:r}function C8(e){const{parentProjection:t,projection:n}=e;return t&&n&&fe(i0e({parentProjection:t,projection:n})),n??t}function M5(e){return ae(e,"filter")}function xye(e){return ae(e,"stop")}function tj(e){return ae(e,"lookup")}function _ye(e){return ae(e,"data")}function bye(e){return ae(e,"param")}function wye(e){return ae(e,"pivot")}function Sye(e){return ae(e,"density")}function Eye(e){return ae(e,"quantile")}function Aye(e){return ae(e,"regression")}function Cye(e){return ae(e,"loess")}function kye(e){return ae(e,"sample")}function $ye(e){return ae(e,"window")}function Mye(e){return ae(e,"joinaggregate")}function Nye(e){return ae(e,"flatten")}function Oye(e){return ae(e,"calculate")}function nj(e){return ae(e,"bin")}function Dye(e){return ae(e,"impute")}function Fye(e){return ae(e,"timeUnit")}function Tye(e){return ae(e,"aggregate")}function Rye(e){return ae(e,"stack")}function Lye(e){return ae(e,"fold")}function Pye(e){return ae(e,"extent")&&!ae(e,"density")&&!ae(e,"regression")}function zye(e){return e.map(t=>M5(t)?{filter:Yc(t.filter,cme)}:t)}class Iye extends $5{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=k8(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=k8(t,n),t.encoding){const r={};for(const[i,o]of Xa(t.encoding))r[i]=rj(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Xa(r).map(([o,s])=>{const{init:a,bind:l,empty:c,...f}=s;f.type==="single"?(f.type="point",f.toggle=!1):f.type==="multi"&&(f.type="point"),n.emptySelections[o]=c!=="none";for(const h of Xt(n.selectionPredicates[o]??{}))h.empty=c!=="none";return{name:o,value:a,select:f,bind:l}})}:t}}function k8(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(M5(o))return{filter:pE(o,t)};if(nj(o)&&Wu(o.bin))return{...o,bin:ij(o.bin)};if(tj(o)){const{selection:s,...a}=o.from;return s?{...o,from:{param:s,...a}}:o}return o});return{...r,transform:i}}return e}function rj(e,t){var r,i;const n=We(e);if(ce(n)&&Wu(n.bin)&&(n.bin=ij(n.bin)),Gu(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:o,...s}=n.scale.domain;n.scale.domain={...s,...o?{param:o}:{}}}if(xg(n))if(ne(n.condition))n.condition=n.condition.map(o=>{const{selection:s,param:a,test:l,...c}=o;return a?o:{...c,test:pE(o,t)}});else{const{selection:o,param:s,test:a,...l}=rj(n.condition,t);n.condition=s?n.condition:{...l,test:pE(n.condition,t)}}return n}function ij(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function pE(e,t){const n=r=>Yc(r,i=>{var a;const o=t.emptySelections[i]??!0,s={param:i,empty:o};return(a=t.selectionPredicates)[i]??(a[i]=[]),t.selectionPredicates[i].push(s),s});return e.selection?n(e.selection):Yc(e.test||e.filter,r=>r.selection?n(r.selection):r)}class gE extends $5{map(t,n){const r=n.selections??[];if(t.params&&!qs(t)){const i=[];for(const o of t.params)A5(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const s of r)if(!s.views||!s.views.length)o.push(s);else for(const a of s.views)(xe(a)&&(a===t.name||i.includes(a))||ne(a)&&a.map(l=>i.indexOf(l)).every((l,c,f)=>l!==-1&&(c===0||l>f[c-1])))&&o.push(s);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=gE.prototype[e];gE.prototype[e]=function(n,r){return t.call(this,n,Uye(n,r))}}function Uye(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function oj(e,t){t===void 0&&(t=XW(e.config));const n=Hye(e,t),{width:r,height:i}=e,o=Gye(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const Wye=new vye,jye=new Iye,Bye=new gE;function Hye(e,t={}){const n={config:t};return Bye.map(Wye.map(jye.map(e,n),n),n)}function $8(e){return xe(e)?{type:e}:e??{}}function Gye(e,t,n){let{width:r,height:i}=t;const o=qs(e)||d2(e),s={};o?r=="container"&&i=="container"?(s.type="fit",s.contains="padding"):r=="container"?(s.type="fit-x",s.contains="padding"):i=="container"&&(s.type="fit-y",s.contains="padding"):(r=="container"&&(fe(Z9("width")),r=void 0),i=="container"&&(fe(Z9("height")),i=void 0));const a={type:"pad",...s,...n?$8(n.autosize):{},...$8(e.autosize)};if(a.type==="fit"&&!o&&(fe(zge),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&fe(e8("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&fe(e8("height")),!Gr(a,{type:"pad"}))return a}function Yye(e){return["fit","fit-x","fit-y"].includes(e)}function qye(e){return e?`fit-${Vv(e)}`:"fit"}const Vye=["background","padding"];function M8(e,t){const n={};for(const r of Vye)e&&e[r]!==void 0&&(n[r]=Br(e[r]));return t&&(n.params=e.params),n}class Vs{constructor(t={},n={}){re(this,"explicit");re(this,"implicit");this.explicit=t,this.implicit=n}clone(){return new Vs(We(this.explicit),We(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Gt(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of se(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function wo(e){return{explicit:!0,value:e}}function Ur(e){return{explicit:!1,value:e}}function sj(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:h2(t,n,r,i)}}function h2(e,t,n,r){return e.explicit&&t.explicit&&fe(k0e(n,r,e.value,t.value)),e}function Ka(e,t,n,r,i=h2){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Gr(e.value,t.value)?e:i(e,t,n,r)}class Xye extends Vs{constructor(n={},r={},i=!1){super(n,r);re(this,"explicit");re(this,"implicit");re(this,"parseNothing");this.explicit=n,this.implicit=r,this.parseNothing=i}clone(){const n=super.clone();return n.parseNothing=this.parseNothing,n}}function $f(e){return ae(e,"url")}function Mp(e){return ae(e,"values")}function aj(e){return ae(e,"name")&&!$f(e)&&!Mp(e)&&!za(e)}function za(e){return e&&(lj(e)||uj(e)||N5(e))}function lj(e){return ae(e,"sequence")}function uj(e){return ae(e,"sphere")}function N5(e){return ae(e,"graticule")}var Tt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Tt||(Tt={}));function cj({invalid:e,isPath:t}){switch(iW(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function Jye(e){const{marks:t,scales:n}=cj(e);return t===n?Tt.Main:n==="include-invalid-values"?Tt.PreFilterInvalid:Tt.PostFilterInvalid}class mt{constructor(t,n){re(this,"debugName");re(this,"_children",[]);re(this,"_parent",null);re(this,"_hash");this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){fe(t0e);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Cr extends mt{constructor(n,r,i,o){super(n,r);re(this,"type");re(this,"refCounts");re(this,"_source");re(this,"_name");this.type=i,this.refCounts=o,this._source=this._name=r,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const n=new this.constructor;return n.debugName=`clone_${this.debugName}`,n._source=this._source,n._name=`clone_${this._name}`,n.type=this.type,n.refCounts=this.refCounts,n.refCounts[n._name]=0,n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${sU()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(n){this._source=n}}function Bb(e){return e.as!==void 0}function N8(e){return`${e}_end`}class Do extends mt{constructor(n,r){super(n);re(this,"timeUnits");this.timeUnits=r}clone(){return new Do(null,We(this.timeUnits))}static makeFromEncoding(n,r){const i=r.reduceFieldDef((o,s,a)=>{const{field:l,timeUnit:c}=s;if(c){let f;if(Hu(c)){if(Ft(r)){const{mark:h,markDef:p,config:m}=r,y=Qa({fieldDef:s,markDef:p,config:m});($p(h)||y)&&(f={timeUnit:yn(c),field:l})}}else f={as:me(s,{forAs:!0}),field:l,timeUnit:c};if(Ft(r)){const{mark:h,markDef:p,config:m}=r,y=Qa({fieldDef:s,markDef:p,config:m});$p(h)&&Yt(a)&&y!==.5&&(f.rectBandPosition=y)}f&&(o[Qe(f)]=f)}return o},{});return xt(i)?null:new Do(n,i)}static makeFromTransform(n,r){const{timeUnit:i,...o}={...r},s=yn(i),a={...o,timeUnit:s};return new Do(n,{[Qe(a)]:a})}merge(n){this.timeUnits={...this.timeUnits};for(const r in n.timeUnits)this.timeUnits[r]||(this.timeUnits[r]=n.timeUnits[r]);for(const r of n.children)n.removeChild(r),r.parent=this;n.remove()}removeFormulas(n){const r={};for(const[i,o]of Xa(this.timeUnits)){const s=Bb(o)?o.as:`${o.field}_end`;n.has(s)||(r[i]=o)}this.timeUnits=r}producedFields(){return new Set(Xt(this.timeUnits).map(n=>Bb(n)?n.as:N8(n.field)))}dependentFields(){return new Set(Xt(this.timeUnits).map(n=>n.field))}hash(){return`TimeUnit ${Qe(this.timeUnits)}`}assemble(){const n=[];for(const r of Xt(this.timeUnits)){const{rectBandPosition:i}=r,o=yn(r.timeUnit);if(Bb(r)){const{field:s,as:a}=r,{unit:l,utc:c,...f}=o,h=[a,`${a}_end`];n.push({field:Si(s),type:"timeunit",...l?{units:Kv(l)}:{},...c?{timezone:"utc"}:{},...f,as:h}),n.push(...O8(h,i,o))}else if(r){const{field:s}=r,a=iU(s),l=fj({timeUnit:o,field:a}),c=N8(a);n.push({type:"formula",expr:l,as:c}),n.push(...O8([a,c],i,o))}}return n}}const p2="offsetted_rect_start",g2="offsetted_rect_end";function fj({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=WU(r),{part:s,step:a}=GU(o,e.step);return`${i?"utcOffset":"timeOffset"}('${s}', ${pt(t)}, ${n?-a:a})`}function O8([e,t],n,r){if(n!==void 0&&n!==.5){const i=pt(e),o=pt(t);return[{type:"formula",expr:D8([fj({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${p2}`},{type:"formula",expr:D8([i,o],n+.5),as:`${e}_${g2}`}]}return[]}function D8([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const Sg="_tuple_fields";class Qye{constructor(...t){re(this,"hasChannel");re(this,"hasField");re(this,"hasSelectionId");re(this,"timeUnit");re(this,"items");this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Kye={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Qye),o={},s={},a=new Set,l=(y,v)=>{const _=v==="visual"?y.channel:y.field;let b=$t(`${r}_${_}`);for(let S=1;a.has(b);S++)b=$t(`${r}_${_}_${S}`);return a.add(b),{[v]:b}},c=t.type,f=e.config.selection[c],h=n.value!==void 0?_e(n.value):null;let{fields:p,encodings:m}=ve(n.select)?n.select:{};if(!p&&!m&&h){for(const y of h)if(ve(y))for(const v of se(y))fge(v)?(m||(m=[])).push(v):c==="interval"?(fe(Vge),m=f.encodings):(p??(p=[])).push(v)}!p&&!m&&(m=f.encodings,"fields"in f&&(p=f.fields));for(const y of m??[]){const v=e.fieldDef(y);if(v){let _=v.field;if(v.aggregate){fe(Ige(y,v.aggregate));continue}else if(!_){fe(n8(y));continue}if(v.timeUnit&&!Hu(v.timeUnit)){_=e.vgField(y);const b={timeUnit:v.timeUnit,as:_,field:v.field};s[Qe(b)]=b}if(!o[_]){const b=c==="interval"&&ts(y)&&Zi(e.getScaleComponent(y).get("type"))?"R":v.bin?"R-RE":"E",S={field:_,channel:y,type:b,index:i.items.length};S.signals={...l(S,"data"),...l(S,"visual")},i.items.push(o[_]=S),i.hasField[_]=o[_],i.hasSelectionId=i.hasSelectionId||_===no,dU(y)?(S.geoChannel=y,S.channel=fU(y),i.hasChannel[S.channel]=o[_]):i.hasChannel[y]=o[_]}}else fe(n8(y))}for(const y of p??[]){if(i.hasField[y])continue;const v={type:"E",field:y,index:i.items.length};v.signals={...l(v,"data")},i.items.push(v),i.hasField[y]=v,i.hasSelectionId=i.hasSelectionId||y===no}h&&(t.init=h.map(y=>i.items.map(v=>ve(y)?y[v.geoChannel||v.channel]!==void 0?y[v.geoChannel||v.channel]:y[v.field]:y))),xt(s)||(i.timeUnit=new Do(null,s))},signals:(e,t,n)=>{const r=t.name+Sg;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(gj)})}},dj="_curr",qm="anim_value",Fc="anim_clock",mE="eased_anim_clock",hj="min_extent",pj="max_range_extent",Hb="last_tick_at",Gb="is_playing",Zye=1/60*1e3,eve=(e,t)=>[{name:mE,update:Fc},{name:`${e}_domain`,init:`domain('${t}')`},{name:hj,init:`extent(${e}_domain)[0]`},{name:pj,init:`extent(range('${t}'))[1]`},{name:qm,update:`invert('${t}', ${mE})`}],tve={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Fo(t)&&(n=n.concat([{name:Fc,init:"0",on:[{events:{type:"timer",throttle:Zye},update:`${Gb} ? (${Fc} + (now() - ${Hb}) > ${pj} ? 0 : ${Fc} + (now() - ${Hb})) : ${Fc}`}]},{name:Hb,init:"now()",on:[{events:[{signal:Fc},{signal:Gb}],update:"now()"}]},{name:Gb,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+Sg,o=t.project,s="(item().isVoronoi ? datum.datum : datum)",a=Xt(e.component.selection??{}).reduce((f,h)=>h.type==="interval"?f.concat(h.name+Xc):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let c=`unit: ${ou(e)}, `;if(t.project.hasSelectionId)c+=`${no}: ${s}[${he(no)}]`;else if(Fo(t))c+=`fields: ${i}, values: [${qm} ? ${qm} : ${hj}]`;else{const f=o.items.map(h=>{const p=e.fieldDef(h.channel);return p!=null&&p.bin?`[${s}[${he(e.vgField(h.channel,{}))}], ${s}[${he(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${s}[${he(h.field)}]`}).join(", ");c+=`fields: ${i}, values: [${f}]`}if(Fo(t))return n.concat(eve(t.name,e.scaleName(ll)),[{name:r+Is,on:[{events:[{signal:mE},{signal:qm}],update:`{${c}}`,force:!0}]}]);{const f=t.events;return n.concat([{name:r+Is,on:f?[{events:f,update:`${l} ? {${c}} : null`,force:!0}]:[]}])}}};function gj(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Si(i.field),i}function ku(e,t=!0,n=Vn){if(ne(e)){const r=e.map(i=>ku(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Bu(e))return n(t?Su(e):K0e(e));return t?n(dt(e)):e}function nve(e,t){for(const n of Xt(e.component.selection??{})){const r=n.name;let i=`${r}${Is}, ${n.resolve==="global"?"true":`{unit: ${ou(e)}}`}`;for(const o of m2)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+Mve,on:[{events:{signal:n.name+Is},update:`modify(${he(n.name+$u)}, ${i})`}]})}return O5(t)}function rve(e,t){if(e.component.selection&&se(e.component.selection).length){const n=he(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:sl("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return O5(t)}function ive(e,t){let n=!1;for(const r of Xt(e.component.selection??{})){const i=r.name,o=he(i+$u);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${Fj}(${o}, ${he(a)}${l}`})}n=!0;for(const a of m2)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),O5(t)}function ove(e,t){const n=[],r=[],i=ou(e,{escape:!1});for(const o of Xt(e.component.selection??{})){const s={name:o.name+$u};if(o.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:no}}]),o.init){const l=o.project.items.map(gj);s.values=o.project.hasSelectionId?o.init.map(c=>({unit:i,[no]:ku(c,!1)[0]})):o.init.map(c=>({unit:i,fields:l,values:ku(c,!1)}))}if([...n,...t].filter(l=>l.name===o.name+$u).length||n.push(s),Fo(o)&&t.length){const l=e.lookupDataSource(e.getDataName(Tt.Main)),c=t.find(h=>h.name===l),f=c.transform.find(h=>h.type==="filter"&&h.expr.includes("vlSelectionTest"));if(f){c.transform=c.transform.filter(p=>p!==f);const h={name:c.name+dj,source:c.name,transform:[f]};r.push(h)}}}return n.concat(t,r)}function mj(e,t){for(const n of Xt(e.component.selection??{}))for(const r of m2)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function sve(e,t){for(const n of e.children)Ft(n)&&(t=mj(n,t));return t}function ave(e,t,n,r){const i=zj(e,t.param,t);return{signal:Zi(n.get("type"))&&ne(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function O5(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const Ds={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!ts(i))continue;const o=e.getScaleComponent(i),s=o?o.get("type"):void 0;if(s=="sequential"&&fe(Bge),!o||!Zi(s)){fe(jge);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(s=>n.filter(a=>a.name===s.signals.data).length===0);if(!e.parent||vE(e)||r.length===0)return n;const i=n.find(s=>s.name===t.name);let o=i.update;if(o.includes(Fj))i.update=`{${r.map(s=>`${he(Si(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of r){const a=`${he(Si(s.field))}: ${s.signals.data}`;o.includes(a)||(o=`${o.substring(0,o.length-1)}, ${a}}`)}i.update=o}return n.concat(r.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!vE(e))for(const r of t.scales){const i=n.find(o=>o.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function yE(e,t){return`domain(${he(e.scaleName(t))})`}function vE(e){return e.parent&&sd(e.parent)&&(!e.parent.parent||vE(e.parent.parent))}const Xc="_brush",yj="_scale_trigger",gh="geo_interval_init_tick",vj="_init",lve="_center",uve={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...ve(n.select)?n.select:{}};i.fields=[no],i.encodings||(i.encodings=n.value?se(n.value):[uo,lo]),n.select={type:"interval",...i}}if(t.translate&&!Ds.defined(t)){const i=`!event.item || event.item.mark.name !== ${he(t.name+Xc)}`;for(const o of t.events){if(!o.between){fe(`${o} is not an ordered event stream for interval selections.`);continue}const s=_e((r=o.between[0]).filter??(r.filter=[]));s.includes(i)||s.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Is,o=Xt(t.project.hasChannel).filter(a=>a.channel===Mt||a.channel===_n),s=t.init?t.init[0]:null;if(n.push(...o.reduce((a,l)=>a.concat(cve(e,t,l,s==null?void 0:s[l.index])),[])),e.hasProjection){const a=he(e.projectionName()),l=e.projectionName()+lve,{x:c,y:f}=t.project.hasChannel,h=c==null?void 0:c.signals.visual,p=f==null?void 0:f.signals.visual,m=c?s==null?void 0:s[c.index]:`${l}[0]`,y=f?s==null?void 0:s[f.index]:`${l}[1]`,v=k=>e.getSizeSignalRef(k).signal,_=`[[${h?`${h}[0]`:"0"}, ${p?`${p}[0]`:"0"}],[${h?`${h}[1]`:v("width")}, ${p?`${p}[1]`:v("height")}]]`;s&&(n.unshift({name:r+vj,init:`[scale(${a}, [${c?m[0]:m}, ${f?y[0]:y}]), scale(${a}, [${c?m[1]:m}, ${f?y[1]:y}])]`}),(!c||!f)&&(n.find(N=>N.name===l)||n.unshift({name:l,update:`invert(${a}, [${v("width")}/2, ${v("height")}/2])`})));const b=`intersect(${_}, {markname: ${he(e.getName("marks"))}}, unit.mark)`,S=`{unit: ${ou(e)}}`,A=`vlSelectionTuples(${b}, ${S})`,C=o.map(k=>k.signals.visual);return n.concat({name:i,on:[{events:[...C.length?[{signal:C.join(" || ")}]:[],...s?[{signal:gh}]:[]],update:A}]})}else{if(!Ds.defined(t)){const c=r+yj,f=o.map(h=>{const p=h.channel,{data:m,visual:y}=h.signals,v=he(e.scaleName(p)),_=e.getScaleComponent(p).get("type"),b=Zi(_)?"+":"";return`(!isArray(${m}) || (${b}invert(${v}, ${y})[0] === ${b}${m}[0] && ${b}invert(${v}, ${y})[1] === ${b}${m}[1]))`});f.length&&n.push({name:c,value:{},on:[{events:o.map(h=>({scale:e.scaleName(h.channel)})),update:`${f.join(" && ")} ? ${c} : {}`}]})}const a=o.map(c=>c.signals.data),l=`unit: ${ou(e)}, fields: ${r+Sg}, values`;return n.concat({name:i,...s?{init:`{${l}: ${ku(s)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Ft(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===gh).length||n.unshift({name:gh,value:null,on:[{events:"timer{1}",update:`${gh} === null ? {} : ${gh}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,s=i==null?void 0:i.signals.visual,a=o==null?void 0:o.signals.visual,l=`data(${he(t.name+$u)})`;if(Ds.defined(t)||!i&&!o)return n;const c={x:i!==void 0?{signal:`${s}[0]`}:{value:0},y:o!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const _ of se(c))c[_]=[{test:`${l}.length && ${l}[0].unit === ${ou(e)}`,...c[_]},{value:0}];const{fill:f,fillOpacity:h,cursor:p,...m}=t.mark,y=se(m).reduce((_,b)=>(_[b]=[{test:[i!==void 0&&`${s}[0] !== ${s}[1]`,o!==void 0&&`${a}[0] !== ${a}[1]`].filter(S=>S).join(" && "),value:m[b]},{value:null}],_),{}),v=p??(t.translate?"move":null);return[{name:`${r+Xc}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:f},fillOpacity:{value:h}},update:c}},...n,{name:r+Xc,type:"rect",clip:!0,encode:{enter:{...v?{cursor:{value:v}}:{},fill:{value:"transparent"}},update:{...c,...y}}}]}};function cve(e,t,n,r){const i=!e.hasProjection,o=n.channel,s=n.signals.visual,a=he(i?e.scaleName(o):e.projectionName()),l=p=>`scale(${a}, ${p})`,c=e.getSizeSignalRef(o===Mt?"width":"height").signal,f=`${o}(unit)`,h=t.events.reduce((p,m)=>[...p,{events:m.between[0],update:`[${f}, ${f}]`},{events:m,update:`[${s}[0], clamp(${f}, 0, ${c})]`}],[]);if(i){const p=n.signals.data,m=Ds.defined(t),y=e.getScaleComponent(o),v=y?y.get("type"):void 0,_=r?{init:ku(r,!0,l)}:{value:[]};return h.push({events:{signal:t.name+yj},update:Zi(v)?`[${l(`${p}[0]`)}, ${l(`${p}[1]`)}]`:"[0, 0]"}),m?[{name:p,on:[]}]:[{name:s,..._,on:h},{name:p,...r?{init:ku(r)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${a}, ${s})`}]}]}else{const p=o===Mt?0:1,m=t.name+vj,y=r?{init:`[${m}[0][${p}], ${m}[1][${p}]]`}:{value:[]};return[{name:s,...y,on:h}]}}function nd({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const o=xg(t)&&t.condition;let s=[];o&&(s=_e(o).map(c=>{const f=i(c);if(Qme(c)){const{param:h,empty:p}=c;return{test:Pj(e,{param:h,empty:p}),...f}}else return{test:wy(e,c.test),...f}})),r!==void 0&&s.push(r);const a=i(t);return a!==void 0&&s.push(a),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function D5(e,t="text"){const n=e.encoding[t];return nd({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>F5(r,e.config),invalidValueRef:void 0})}function F5(e,t,n="datum"){if(e){if(eo(e))return At(e.value);if(je(e)){const{format:r,formatType:i}=my(e);return d5({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function xj(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,s=n.tooltip;if(ne(s))return{tooltip:F8({tooltip:s},o,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return nd({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:c=>{const f=bj(c,i,a);if(f)return f;if(c===null)return;let h=ft("tooltip",r,i);if(h===!0&&(h={content:"encoding"}),xe(h))return{value:h};if(ve(h))return Me(h)?h:h.content==="encoding"?F8(n,o,i,t):{signal:a}},invalidValueRef:void 0})}}function _j(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o=new Set,s=r?"datum.datum":"datum",a=[];function l(f,h){const p=Uu(h),m=dr(f)?f:{...f,type:e[p].type},y=m.title||m5(m,i),v=_e(y).join(", ").replaceAll(/"/g,'\\"');let _;if(Yt(h)){const b=h==="x"?"x2":"y2",S=to(e[b]);if(Sn(m.bin)&&S){const A=me(m,{expr:s}),C=me(S,{expr:s}),{format:k,formatType:N}=my(m);_=yg(A,C,k,N,i),o.add(b)}}if((Yt(h)||h===Ci||h===ao)&&t&&t.fieldChannel===h&&t.offset==="normalize"){const{format:b,formatType:S}=my(m);_=d5({fieldOrDatumDef:m,format:b,formatType:S,expr:s,config:i,normalizeStack:!0}).signal}_??(_=bj(m,i,s).signal),a.push({channel:h,key:v,value:_})}v5(e,(f,h)=>{ce(f)?l(f,h):s2(f)&&l(f.condition,h)});const c={};for(const{channel:f,key:h,value:p}of a)!o.has(f)&&!c[h]&&(c[h]=p);return c}function F8(e,t,n,{reactiveGeom:r}={}){const i=_j(e,t,n,{reactiveGeom:r}),o=Xa(i).map(([s,a])=>`"${s}": ${a}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function bj(e,t,n="datum"){if(ce(e)&&n5(e.type)&&!ae(e,"format")){const r=`datum["${e.field}"]`;return{signal:`isValid(${r}) ? isArray(${r}) ? join(${r}, '\\n') : ${r} : ""+${r}`}}return F5(e,t,n)}function fve(e){const{markDef:t,config:n}=e,r=ft("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...dve(e),...hve(e)}}function dve(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=ft("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:we(Tge,t)?{}:{ariaRoleDescription:{value:t}}}function hve(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return nd({model:e,channelDef:o,vgChannel:"description",mainRefFn:l=>F5(l,e.config),invalidValueRef:void 0});const s=ft("description",n,r);if(s!=null)return{description:At(s)};if(r.aria===!1)return{};const a=_j(t,i,r);if(!xt(a))return{description:{signal:Xa(a).filter(([l])=>!l.startsWith("_")).map(([l,c])=>[l,c.replaceAll("\\n"," ")]).map(([l,c],f)=>`"${f>0?"; ":""}${l}: " + (${c})`).join(" + ")}}}function Cn(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:s}=n;let{defaultRef:a,defaultValue:l}=n;const c=i[e];a===void 0&&(l??(l=ft(e,r,o,{vgChannel:s,ignoreVgConfig:!xg(c)})),l!==void 0&&(a=At(l)));const f={markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},h=sW({...f,scaleChannel:e,channelDef:c});return nd({model:t,channelDef:c,vgChannel:s??e,invalidValueRef:h,mainRefFn:m=>f5({...f,channel:e,channelDef:m,stack:null,defaultRef:a})})}function wj(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,s=t.filled??ft("filled",n,i),a=Je(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=ft(s===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[s===!0&&"color"]??a,c=ft(s===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[s===!1&&"color"],f=s?"fill":"stroke",h={...l?{fill:At(l)}:{},...c?{stroke:At(c)}:{}};return n.color&&(s?n.fill:n.stroke)&&fe(DU("property",{fill:"fill"in n,stroke:"stroke"in n})),{...h,...Cn("color",e,{vgChannel:f,defaultValue:s?l:c}),...Cn("fill",e,{defaultValue:r.fill?l:void 0}),...Cn("stroke",e,{defaultValue:r.stroke?c:void 0})}}function pve(e){const{encoding:t,mark:n}=e,r=t.order;return!pl(n)&&eo(r)?nd({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>At(i.value),invalidValueRef:void 0}):{}}function Mf({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,s=t[o],a=n[o];if((o==="xOffset"||o==="yOffset")&&a)return{offsetType:"encoding",offset:f5({channel:o,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:At(s),bandPosition:i})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function ar(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:s,stack:a}=t,l=i[e],c=i[es(e)],f=t.scaleName(e),h=t.getScaleComponent(e),{offset:p,offsetType:m}=Mf({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),y=T5({model:t,defaultPos:n,channel:e,scaleName:f,scale:h}),v=!l&&Yt(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:gve({channel:e,channelDef:l,channel2Def:c,markDef:o,config:s,scaleName:f,scale:h,stack:a,offset:p,defaultRef:y,bandPosition:m==="encoding"?0:void 0});return v?{[r||e]:v}:void 0}function gve(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:s}=e;if(je(n)&&i&&t===i.fieldChannel){if(ce(n)){let a=n.bandPosition;if(a===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return hy({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:o})}return ru(n,r,{suffix:"end"},{offset:o})}return c5(e)}function T5({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:s}=e;return()=>{const a=Uu(n),l=Ja(n),c=ft(n,o,s,{vgChannel:l});if(c!==void 0)return tp(n,c);switch(t){case"zeroOrMin":return T8({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:s});case"zeroOrMax":return T8({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:s});case"mid":return{...e[Dr(n)],mult:.5}}}}function T8({mainChannel:e,config:t,...n}){const r=oW(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:o,heightSignal:s}=i.zeroOrMax;return{signal:`min(${o},${s})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const mve={left:"x",center:"xc",right:"x2"},yve={top:"y",middle:"yc",bottom:"y2"};function Sj(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Ja(e);const i=e==="x"?"align":"baseline",o=ft(i,t,n);let s;return Me(o)?(fe(m0e(i)),s=void 0):s=o,e==="x"?mve[s||(r==="top"?"left":"center")]:yve[s||r]}function _y(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?Ej(e,t,{defaultPos:n,defaultPos2:r}):ar(e,t,{defaultPos:n})}function Ej(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,s=es(e),a=Dr(e),l=vve(t,r,s),c=l[a]?Sj(e,i,o):Ja(e);return{...ar(e,t,{defaultPos:n,vgChannel:c}),...l}}function vve(e,t,n){const{encoding:r,mark:i,markDef:o,stack:s,config:a}=e,l=Uu(n),c=Dr(n),f=Ja(n),h=r[l],p=e.scaleName(l),m=e.getScaleComponent(l),{offset:y}=n in r||n in o?Mf({channel:n,markDef:o,encoding:r,model:e}):Mf({channel:l,markDef:o,encoding:r,model:e});if(!h&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const _=Dr(n),b=e.markDef[_];return b!=null?{[_]:{value:b}}:{[f]:{field:e.getName(n)}}}const v=xve({channel:n,channelDef:h,channel2Def:r[n],markDef:o,config:a,scaleName:p,scale:m,stack:s,offset:y,defaultRef:void 0});return v!==void 0?{[f]:v}:fm(n,o)||fm(n,{[n]:oE(n,o,a.style),[c]:oE(c,o,a.style)})||fm(n,a[i])||fm(n,a.mark)||{[f]:T5({model:e,defaultPos:t,channel:n,scaleName:p,scale:m})()}}function xve({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:s,stack:a,offset:l,defaultRef:c}){return je(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?ru(t,o,{suffix:"start"},{offset:l}):c5({channel:e,channelDef:n,scaleName:o,scale:s,stack:a,markDef:r,config:i,offset:l,defaultRef:c})}function fm(e,t){const n=Dr(e),r=Ja(e);if(t[r]!==void 0)return{[r]:tp(e,t[r])};if(t[e]!==void 0)return{[r]:tp(e,t[e])};if(t[n]){const i=t[n];if(Au(i))fe(c0e(n));else return{[n]:tp(e,i)}}}function zs(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,s=es(t),a=Dr(t),l=r[t],c=r[s],f=e.getScaleComponent(t),h=f?f.get("type"):void 0,p=i.orient,m=r[a]??r.size??ft("size",i,n,{vgChannel:a}),y=mU(t),v=o==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||o==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return ce(l)&&(bt(l.bin)||Sn(l.bin)||l.timeUnit&&!c)&&!(m&&!Au(m))&&!r[y]&&!vn(h)?wve({fieldDef:l,fieldDef2:c,channel:t,model:e}):(je(l)&&vn(h)||v)&&!c?bve(l,t,e):Ej(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function _ve(e,t,n,r,i,o,s){if(Au(i))if(n){const l=n.get("type");if(l==="band"){let c=`bandwidth('${t}')`;i.band!==1&&(c=`${i.band} * ${c}`);const f=Wo("minBandSize",{type:s},r);return{signal:f?`max(${Yi(f)}, ${c})`:c}}else i.band!==1&&(fe(_0e(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Me(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(ju(l)&&st(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:c,rectBandPaddingInner:f,tickBandPaddingInner:h}=r.scale,p=Gt(l,s==="tick"?h:s==="bar"?c:f);if(Me(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(st(p))return{signal:`${1-p} * ${e}`}}return{value:dE(r.view,e)-2}}function bve(e,t,n){var D,P;const{markDef:r,encoding:i,config:o,stack:s}=n,a=r.orient,l=n.scaleName(t),c=n.getScaleComponent(t),f=Dr(t),h=es(t),p=mU(t),m=n.scaleName(p),y=n.getScaleComponent(L3(t)),v=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let _;(i.size||r.size)&&(v?_=Cn("size",n,{vgChannel:f,defaultRef:At(r.size)}):fe(E0e(r.type)));const b=!!_,S=hW({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(D=c||y)==null?void 0:D.get("type"),useVlSizeChannel:v});_=_||{[f]:_ve(f,m||l,y||c,o,S,!!e,r.type)};const A=((P=c||y)==null?void 0:P.get("type"))==="band"&&Au(S)&&!b?"top":"middle",C=Sj(t,r,o,A),k=C==="xc"||C==="yc",{offset:N,offsetType:$}=Mf({channel:t,markDef:r,encoding:i,model:n,bandPosition:k?.5:0}),O=c5({channel:t,channelDef:e,markDef:r,config:o,scaleName:l,scale:c,stack:s,offset:N,defaultRef:T5({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:c}),bandPosition:k?$==="encoding"?0:.5:Me(S)?{signal:`(1-${S})/2`}:Au(S)?(1-S.band)/2:0});if(f)return{[C]:O,..._};{const R=Ja(h),X=_[f],B=N?{...X,offset:N}:X;return{[C]:O,[R]:ne(O)?[O[0],{...O[1],offset:B}]:{...O,offset:B}}}}function R8(e,t,n,r,i,o,s){if(cU(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if(Me(n)||Me(i)||Me(r)||o){const c=Yi(n),f=Yi(i),h=Yi(r),p=Yi(o),y=o?`(${s} < ${p} ? ${a?"":"-"}0.5 * (${p} - (${s})) : ${l})`:l,v=h?`${h} + `:"",_=c?`(${c} ? -1 : 1) * `:"",b=f?`(${f} + ${y})`:y;return{signal:v+_+b}}else return i=i||0,r+(n?-i-l:+i+l)}function wve({fieldDef:e,fieldDef2:t,channel:n,model:r}){var P;const{config:i,markDef:o,encoding:s}=r,a=r.getScaleComponent(n),l=r.scaleName(n),c=a?a.get("type"):void 0,f=a.get("reverse"),h=hW({channel:n,fieldDef:e,markDef:o,config:i,scaleType:c}),p=(P=r.component.axes[n])==null?void 0:P[0],m=(p==null?void 0:p.get("translate"))??.5,y=Yt(n)?ft("binSpacing",o,i)??0:0,v=es(n),_=Ja(n),b=Ja(v),S=Wo("minBandSize",o,i),{offset:A}=Mf({channel:n,markDef:o,encoding:s,model:r,bandPosition:0}),{offset:C}=Mf({channel:v,markDef:o,encoding:s,model:r,bandPosition:0}),k=Yme({fieldDef:e,scaleName:l}),N=R8(n,y,f,m,A,S,k),$=R8(v,y,f,m,C??A,S,k),O=Me(h)?{signal:`(1-${h.signal})/2`}:Au(h)?(1-h.band)/2:.5,D=Qa({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(bt(e.bin)||e.timeUnit){const R=e.timeUnit&&D!==.5;return{[b]:L8({fieldDef:e,scaleName:l,bandPosition:O,offset:$,useRectOffsetField:R}),[_]:L8({fieldDef:e,scaleName:l,bandPosition:Me(O)?{signal:`1-${O.signal}`}:1-O,offset:N,useRectOffsetField:R})}}else if(Sn(e.bin)){const R=ru(e,l,{},{offset:$});if(ce(t))return{[b]:R,[_]:ru(t,l,{},{offset:N})};if(Wu(e.bin)&&e.bin.step)return{[b]:R,[_]:{signal:`scale("${l}", ${me(e,{expr:"datum"})} + ${e.bin.step})`,offset:N}}}fe(RU(v))}function L8({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return hy({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:p2,endSuffix:g2}:{}})}const Sve=new Set(["aria","width","height"]);function ki(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?wj(e):{};return{...Eve(e.markDef,t),...P8("fill",n),...P8("stroke",r),...Cn("opacity",e),...Cn("fillOpacity",e),...Cn("strokeOpacity",e),...Cn("strokeWidth",e),...Cn("strokeDash",e),...pve(e),...xj(e),...D5(e,"href"),...fve(e)}}function P8(e,t){return t?{[e]:t}:{}}function Eve(e,t){return Fge.reduce((n,r)=>(!Sve.has(r)&&ae(e,r)&&t[r]!=="ignore"&&(n[r]=At(e[r])),n),{})}function R5(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,o)=>{var c;let s;if(!ts(o)||!(s=e.getScaleType(o)))return;const a=Xv(i.aggregate),l=u5({scaleChannel:o,markDef:n,config:t,scaleType:s,isCountAggregate:a});if(Bme(l)){const f=e.vgField(o,{expr:"datum",binSuffix:(c=e.stack)!=null&&c.impute?"mid":void 0});f&&r.add(f)}}),r.size>0)return{defined:{signal:[...r].map(o=>Zv(o,!0)).join(" && ")}}}function z8(e,t){if(t!==void 0)return{[e]:At(t)}}const Yb="voronoi",Aj={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(Yb)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(pl(o))return fe(Uge(o)),n;const s={name:e.getName(Yb),type:"path",interactive:!0,aria:!1,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...xj(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((c,f)=>{const h=c.name??"";h===e.component.mark[0].name?a=f:h.includes(Yb)&&(l=!0)}),l||n.splice(a+1,0,s),n}},Cj={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!E5(e.bind),parse:(e,t,n)=>Tj(t,n),topLevelSignals:(e,t,n)=>{var l;const r=t.name,i=t.project,o=t.bind,s=(l=t.init)==null?void 0:l[0],a=Aj.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((c,f)=>{const h=$t(`${r}_${c.field}`);n.filter(m=>m.name===h).length||n.unshift({name:h,...s?{init:ku(s[f])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${he(c.field)}] : null`}]:[],bind:o[c.field]??o[c.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(c=>c.name===r+Is),s=r+Sg,a=i.items.map(c=>$t(`${r}_${c.field}`)),l=a.map(c=>`${c} !== null`).join(" && ");return a.length&&(o.update=`${l} ? {fields: ${s}, values: [${a.join(", ")}]} : null`),delete o.value,delete o.on,n}},by="_toggle",kj={defined:e=>e.type==="point"&&!Fo(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+by,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Is,r=t.name+by;return`${r} ? null : ${n}, ${t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${ou(e)}}, `}${r} ? ${n} : null`}},Ave={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Fo(e),parse:(e,t)=>{t.clear&&(t.clear=xe(t.clear)?sl(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Cj.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===$t(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(s=>s.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const s=n.findIndex(a=>a.name===i.signals.data);r(s,"null")}}else{let i=n.findIndex(o=>o.name===t.name+Is);r(i,"null"),kj.defined(t)&&(i=n.findIndex(o=>o.name===t.name+by),r(i,"false"))}return n}},$j={defined:e=>{const t=e.resolve==="global"&&e.bind&&E5(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==no;return t&&!n&&fe(Hge),t&&n},parse:(e,t,n)=>{const r=We(n);if(r.select=xe(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},Tj(t,r),ve(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=_e(a.filter??[]),a.filter.includes(s)||a.filter.push(s)}const i=Ub(t.bind)?t.bind.legend:"click",o=xe(i)?sl(i,"view"):_e(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=Ub(t.bind)&&t.bind.legend,o=s=>a=>{const l=We(a);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const a=`${$t(s.field)}_legend`,l=`${r}_${a}`;if(n.filter(f=>f.name===l).length===0){const f=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:f,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(p=>p.name===r+Is),s=r+Sg,a=i.items.filter(p=>p.hasLegend).map(p=>$t(`${r}_${$t(p.field)}_legend`)),c=`${a.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${s}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?o.on.push({events:a.map(p=>({signal:p})),update:c}):a.length>0&&(o.update=c,delete o.value,delete o.on);const f=n.find(p=>p.name===r+by),h=Ub(t.bind)&&t.bind.legend;return f&&(t.events?f.on.push({...f.on[0],events:h}):f.on[0].events=h),n}};function Cve(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const o of Xt(e.component.selection??{})){const s=o.project.hasField[r]??o.project.hasChannel[t];if(s&&$j.defined(o)){const a=n.get("selections")??[];a.push(o.name),n.set("selections",a,!1),s.hasLegend=!0}}}const Mj="_translate_anchor",Nj="_translate_delta",kve={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Ds.defined(t),o=r+Mj,{x:s,y:a}=t.project.hasChannel;let l=sl(t.translate,"scope");return i||(l=l.map(c=>(c.between[0].markname=r+Xc,c))),n.push({name:o,value:{},on:[{events:l.map(c=>c.between[0]),update:`{x: x(unit), y: y(unit)${s!==void 0?`, extent_x: ${i?yE(e,Mt):`slice(${s.signals.visual})`}`:""}${a!==void 0?`, extent_y: ${i?yE(e,_n):`slice(${a.signals.visual})`}`:""}}`}]},{name:r+Nj,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),s!==void 0&&I8(e,t,s,"width",n),a!==void 0&&I8(e,t,a,"height",n),n}};function I8(e,t,n,r,i){const o=t.name,s=o+Mj,a=o+Nj,l=n.channel,c=Ds.defined(t),f=i.find(k=>k.name===n.signals[c?"data":"visual"]),h=e.getSizeSignalRef(r).signal,p=e.getScaleComponent(l),m=p==null?void 0:p.get("type"),y=p==null?void 0:p.get("reverse"),v=c?l===Mt?y?"":"-":y?"-":"":"",_=`${s}.extent_${l}`,b=`${v}${a}.${l} / ${c?`${h}`:`span(${_})`}`,S=!c||!p?"panLinear":m==="log"?"panLog":m==="symlog"?"panSymlog":m==="pow"?"panPow":"panLinear",A=c?m==="pow"?`, ${p.get("exponent")??1}`:m==="symlog"?`, ${p.get("constant")??1}`:"":"",C=`${S}(${_}, ${b}${A})`;f.on.push({events:{signal:a},update:c?C:`clampRange(${C}, 0, ${h})`})}const Oj="_zoom_anchor",Dj="_zoom_delta",$ve={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Ds.defined(t),o=r+Dj,{x:s,y:a}=t.project.hasChannel,l=he(e.scaleName(Mt)),c=he(e.scaleName(_n));let f=sl(t.zoom,"scope");return i||(f=f.map(h=>(h.markname=r+Xc,h))),n.push({name:r+Oj,on:[{events:f,update:i?`{${[l?`x: invert(${l}, x(unit))`:"",c?`y: invert(${c}, y(unit))`:""].filter(h=>h).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&U8(e,t,s,"width",n),a!==void 0&&U8(e,t,a,"height",n),n}};function U8(e,t,n,r,i){const o=t.name,s=n.channel,a=Ds.defined(t),l=i.find(S=>S.name===n.signals[a?"data":"visual"]),c=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(s),h=f==null?void 0:f.get("type"),p=a?yE(e,s):l.name,m=o+Dj,y=`${o}${Oj}.${s}`,v=!a||!f?"zoomLinear":h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear",_=a?h==="pow"?`, ${f.get("exponent")??1}`:h==="symlog"?`, ${f.get("constant")??1}`:"":"",b=`${v}(${p}, ${y}, ${m}${_})`;l.on.push({events:{signal:m},update:a?b:`clampRange(${b}, 0, ${c})`})}const $u="_store",Is="_tuple",Mve="_modify",Fj="vlSelectionResolve",m2=[tve,uve,Kye,kj,Cj,Ds,$j,Ave,kve,$ve,Aj];function Nve(e){let t=e.parent;for(;t&&!Jr(t);)t=t.parent;return t}function ou(e,{escape:t}={escape:!0}){let n=t?he(e.name):e.name;const r=Nve(e);if(r){const{facet:i}=r;for(const o of pi)i[o]&&(n+=` + '__facet_${o}_' + (facet[${he(r.vgField(o))}])`)}return n}function L5(e){return Xt(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function Tj(e,t){(xe(t.select)||!t.select.on)&&delete e.events,(xe(t.select)||!t.select.clear)&&delete e.clear,(xe(t.select)||!t.select.toggle)&&delete e.toggle}function Fo(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function xE(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...xE(e.object)),t.push(...xE(e.property))),t)}function Rj(e){return e.object.type==="MemberExpression"?Rj(e.object):e.object.name==="datum"}function Lj(e){const t=Zk(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&Rj(r)&&n.add(xE(r).slice(1).join("."))}),n}class rd extends mt{constructor(n,r,i){super(n);re(this,"model");re(this,"filter");re(this,"expr");re(this,"_dependentFields");this.model=r,this.filter=i,this.expr=wy(this.model,this.filter,this),this._dependentFields=Lj(this.expr)}clone(){return new rd(null,this.model,We(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Ove(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const o of t){const s=$t(o.name),a=o.select,l=xe(a)?a:a.type,c=ve(a)?We(a):{type:l},f=r[l];for(const m in f)m==="fields"||m==="encodings"||(m==="mark"&&(c.mark={...f.mark,...c.mark}),(c[m]===void 0||c[m]===!0)&&(c[m]=We(f[m]??c[m])));const h=n[s]={...c,name:s,type:l,init:o.value,bind:o.bind,events:xe(c.on)?sl(c.on,"scope"):_e(We(c.on))};if(Fo(h)&&(i++,i>1)){delete n[s];continue}const p=We(o);for(const m of m2)m.defined(h)&&m.parse&&m.parse(e,h,p)}return i>1&&fe(Jge),n}function Pj(e,t,n,r="datum"){const i=xe(t)?t:t.param,o=$t(i),s=he(o+$u);let a;try{a=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(a.project.timeUnit){const p=n??e.component.data.raw,m=a.project.timeUnit.clone();p.parent?m.insertAsParentOf(p):p.parent=m}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",c=a.resolve==="global"?")":`, ${he(a.resolve)})`,f=`${l}${s}, ${r}${c}`,h=`length(data(${s}))`;return t.empty===!1?`${h} && ${f}`:`!${h} || ${f}`}function zj(e,t,n){const r=$t(t),i=n.encoding;let o=n.field,s;try{s=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=s.project.items[0].field,s.project.items.length>1&&fe(Qge(o));else if(i&&!o){const a=s.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(o=s.project.items[0].field,fe(Kge(a,i,n,o))):o=a[0].field}return`${s.name}[${he(Si(o))}]`}function Dve(e,t){for(const[n,r]of Xa(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Cr(new rd(t,e,{param:n}),i,Tt.Lookup,e.component.data.outputNodeRefCounts)}}function wy(e,t,n){return ep(t,r=>xe(r)?r:ame(r)?Pj(e,r,n):qU(r))}function Fve(e,t){if(e)return ne(e)&&!wa(e)?e.map(n=>m5(n,t)).join(", "):e}function qb(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function Wh(e,t,n,r={header:!1}){var h,p;const{disable:i,orient:o,scale:s,labelExpr:a,title:l,zindex:c,...f}=e.combine();if(!i){for(const m in f){const y=m,v=f1e[y],_=f[y];if(v&&v!==t&&v!=="both")delete f[y];else if(wg(_)){const{condition:b,...S}=_,A=_e(b),C=p8[y];if(C){const{vgProp:k,part:N}=C,$=[...A.map(O=>{const{test:D,...P}=O;return{test:wy(null,D),...P}}),S];qb(f,N,k,$),delete f[y]}else if(C===null){const k={signal:A.map(N=>{const{test:$,...O}=N;return`${wy(null,$)} ? ${K9(O)} : `}).join("")+K9(S)};f[y]=k}}else if(Me(_)){const b=p8[y];if(b){const{vgProp:S,part:A}=b;qb(f,A,S,_),delete f[y]}}Je(["labelAlign","labelBaseline"],y)&&f[y]===null&&delete f[y]}if(t==="grid"){if(!f.grid)return;if(f.encode){const{grid:m}=f.encode;f.encode={...m?{grid:m}:{}},xt(f.encode)&&delete f.encode}return{scale:s,orient:o,...f,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Gt(c,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let y=a;(p=(h=f.encode)==null?void 0:h.labels)!=null&&p.update&&Me(f.encode.labels.update.text)&&(y=_u(a,"datum.label",f.encode.labels.update.text.signal)),qb(f,"labels","text",{signal:y})}if(f.labelAlign===null&&delete f.labelAlign,f.encode){for(const y of SW)e.hasAxisPart(y)||delete f.encode[y];xt(f.encode)&&delete f.encode}const m=Fve(l,n);return{scale:s,orient:o,grid:!1,...m?{title:m}:{},...f,...n.aria===!1?{aria:!1}:{},zindex:Gt(c,0)}}}}function Ij(e){const{axes:t}=e.component,n=[];for(const r of Ys)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",s=e.getSizeSignalRef(o).signal;o!==s&&n.push({name:o,update:s})}}return n}function Tve(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>Wh(i,"grid",t)),...r.map(i=>Wh(i,"grid",t)),...n.map(i=>Wh(i,"main",t)),...r.map(i=>Wh(i,"main",t))].filter(i=>i)}function W8(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...se(s),...se(a)]),c={};for(const f of l.values())c[f]={signal:`${r.signal} === "${o}" ? ${Yi(s[f])} : ${Yi(a[f])}`};return c}return t[i]})])}function Rve(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:JU(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",s=Me(n)?"axisOrient":`axis${fg(n)}`,a=[...i,...i.map(c=>o+c.substr(4))],l=["axis",s,o];return{vlOnlyAxisConfig:W8(a,r,e,n),vgAxisConfig:W8(l,r,e,n),axisConfigStyle:Lve([...l,...a],r)}}function Lve(e,t){var r;const n=[{}];for(const i of e){let o=(r=t[i])==null?void 0:r.style;if(o){o=_e(o);for(const s of o)n.push(t.style[s])}}return Object.assign.apply(null,n)}function _E(e,t,n,r={}){var o;const i=AU(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((o=r[s])==null?void 0:o[e])!==void 0)return{configFrom:s,configValue:r[s][e]};return{}}const j8={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Pve(n,e),gridScale:({model:e,channel:t})=>zve(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||Wj(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||Uj(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Uve(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Wve(t.type,n,ce(t)&&!!t.timeUnit,ce(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,s=o?t.getSizeSignalRef(o):void 0;return n.tickCount??Bve({fieldOrDatumDef:r,scaleType:i,size:s,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??Hve({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=jj(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",s=t.fieldDef(o);return kU(i?[d8(i)]:[],ce(s)?[d8(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Gve(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Yve(n,t)};function Pve(e,t){return!vn(e)&&ce(t)&&!bt(t==null?void 0:t.bin)&&!Sn(t==null?void 0:t.bin)}function zve(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Ive(e,t,n,r,i){const o=t==null?void 0:t.labelAngle;if(o!==void 0)return Me(o)?o:kp(o);{const{configValue:s}=_E("labelAngle",r,t==null?void 0:t.style,i);return s!==void 0?kp(s):n===Mt&&Je([i5,r5],e.type)&&!(ce(e)&&e.timeUnit)?270:void 0}}function bE(e){return`(((${e.signal} % 360) + 360) % 360)`}function Uj(e,t,n,r){if(e!==void 0)if(n==="x"){if(Me(e)){const i=bE(e),o=Me(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Me(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Me(e)){const i=bE(e),o=Me(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Me(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function Wj(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(Me(e)){const s=bE(e),a=Me(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${s} + 90)`:s} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${s} && ${s} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Me(t)){const s=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${s} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function Uve(e,t){if(t==="x"&&Je(["quantitative","temporal"],e))return!0}function Wve(e,t,n,r){if(n&&!ve(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function jve(e){return e==="x"?"bottom":"left"}function Bve({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!vn(t)&&t!=="log"){if(ce(e)){if(bt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Je(["month","hours","day","quarter"],(i=yn(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Hve({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(ce(t)){const{timeUnit:n}=t;if(n){const r=HU(n);if(r)return{signal:r}}}}function jj(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,s=i?i.title:void 0;if(o&&s)return $U(o,s);if(o)return o;if(s)return s;if(o!==void 0)return o;if(s!==void 0)return s}function Gve(e,t){const n=e.values;if(ne(n))return wW(t,n);if(Me(n))return n}function Yve(e,t){return e==="rect"&&gy(t)?1:0}class Nf extends mt{constructor(n,r){super(n);re(this,"transform");re(this,"_dependentFields");this.transform=r,this._dependentFields=Lj(this.transform.calculate)}clone(){return new Nf(null,We(this.transform))}static parseAllForSortIndex(n,r){return r.forEachFieldDef((i,o)=>{if(Gu(i)&&dW(i.sort)){const{field:s,timeUnit:a}=i,l=i.sort,c=l.map((f,h)=>`${qU({field:s,timeUnit:a,equal:f})} ? ${h} : `).join("")+l.length;n=new Nf(n,{calculate:c,as:Of(i,o,{forAs:!0})})}}),n}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Qe(this.transform)}`}}function Of(e,t,n){return me(e,{prefix:t,suffix:"sort_index",...n})}function y2(e,t){return Je(["top","bottom"],t)?"column":Je(["left","right"],t)||e==="row"?"row":"column"}function Df(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Gt((t||{})[e],i[e],n.header[e])}function v2(e,t,n,r){const i={};for(const o of e){const s=Df(o,t||{},n,r);s!==void 0&&(i[o]=s)}return i}const P5=["row","column"],z5=["header","footer"];function qve(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:s,titleOrient:a}=v2(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=y2(t,a),c=kp(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Hj(c,l),...Bj(l,c,o),...Gj(r,i,t,F1e,WW)}}}function Bj(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=Wj(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function Hj(e,t){const n=Uj(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Vve(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of z5)if(n[i])for(const o of n[i]){const s=Jve(e,t,i,n,o);s!=null&&r.push(s)}return r}function Xve(e,t){const{sort:n}=e;return Os(n)?{field:me(n,{expr:"datum"}),order:n.order??"ascending"}:ne(n)?{field:Of(e,t,{expr:"datum"}),order:"ascending"}:{field:me(e,{expr:"datum"}),order:n??"ascending"}}function wE(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:s,labelOrient:a,labelExpr:l}=v2(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),c=d5({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,f=y2(t,a);return{text:{signal:l?_u(_u(l,"datum.label",c),"datum.value",me(e,{expr:"parent"})):c},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Hj(o,f),...Bj(f,o,s),...Gj(n,e,t,T1e,jW)}}function Jve(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:s}=r,a=e.config?e.config:void 0;if(s&&i.labels){const{labelOrient:h}=v2(["labelOrient"],s.header,a,t);(t==="row"&&!Je(["top","bottom"],h)||t==="column"&&!Je(["left","right"],h))&&(o=wE(s,t,a))}const l=Jr(e)&&!vg(e.facet),c=i.axes,f=(c==null?void 0:c.length)>0;if(o||f){const h=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Xve(s,t)}:{},...f&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[h]:i.sizeSignal}}}:{},...f?{axes:c}:{}}}}return null}const Qve={column:{start:0,end:1},row:{start:1,end:0}};function Kve(e,t){return Qve[t][e]}function Zve(e,t){const n={};for(const r of pi){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:o,titleOrient:s}=v2(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=y2(r,s),l=Kve(o,a);l!==void 0&&(n[a]=l)}}return xt(n)?void 0:n}function Gj(e,t,n,r,i){const o={};for(const s of r){if(!i[s])continue;const a=Df(s,t==null?void 0:t.header,e,n);a!==void 0&&(o[i[s]]=a)}return o}function I5(e){return[...dm(e,"width"),...dm(e,"height"),...dm(e,"childWidth"),...dm(e,"childHeight")]}function dm(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(r==null||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const s=o.get("type"),a=o.get("range");if(vn(s)&&ju(a)){const l=e.scaleName(n);return Jr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[B8(l,a)]:[B8(l,a),{name:i,update:Yj(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),s=o?"containerSize()[0]":"containerSize()[1]",a=fE(e.config.view,o?"width":"height"),l=`isFinite(${s}) ? ${s} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function B8(e,t){const n=`${e}_step`;return Me(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Yj(e,t,n){const r=t.get("type"),i=t.get("padding"),o=Gt(t.get("paddingOuter"),i);let s=t.get("paddingInner");return s=r==="band"?s!==void 0?s:i:1,`bandspace(${n}, ${Yi(s)}, ${Yi(o)}) * ${e}_step`}function qj(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function Vj(e,t){return se(e).reduce((n,r)=>({...n,...nd({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>At(i.value),invalidValueRef:void 0})}),{})}function Xj(e,t){if(Jr(t))return e==="theta"?"independent":"shared";if(sd(t))return"shared";if(Y5(t))return Yt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function U5(e,t){const n=e.scale[t],r=Yt(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&fe(M0e(t)),"independent"):e[r][t]||"shared"}const e2e={...P1e,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Jj=se(e2e);class t2e extends Vs{}const H8={symbols:n2e,gradient:r2e,labels:i2e,entries:o2e};function n2e(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:s,encoding:a,config:l,mark:c}=n,f=s.filled&&c!=="trail";let h={...Pge({},n,Fme),...wj(n,{filled:f})};const p=i.get("symbolOpacity")??l.legend.symbolOpacity,m=i.get("symbolFillColor")??l.legend.symbolFillColor,y=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,v=p===void 0?Qj(a.opacity)??s.opacity:void 0;if(h.fill){if(r==="fill"||f&&r===Nr)delete h.fill;else if(ae(h.fill,"field"))m?delete h.fill:(h.fill=At(l.legend.symbolBaseFillColor??"black"),h.fillOpacity=At(v??1));else if(ne(h.fill)){const _=SE(a.fill??a.color)??s.fill??(f&&s.color);_&&(h.fill=At(_))}}if(h.stroke){if(r==="stroke"||!f&&r===Nr)delete h.stroke;else if(ae(h.stroke,"field")||y)delete h.stroke;else if(ne(h.stroke)){const _=Gt(SE(a.stroke||a.color),s.stroke,f?s.color:void 0);_&&(h.stroke={value:_})}}if(r!==Gs){const _=ce(t)&&Zj(n,i,t);_?h.opacity=[{test:_,...At(v??1)},At(l.legend.unselectedOpacity)]:v&&(h.opacity=At(v))}return h={...h,...e},xt(h)?void 0:h}function r2e(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:s}=t;let a={};const c=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?Qj(s.opacity)||o.opacity:void 0;return c&&(a.opacity=At(c)),a={...a,...e},xt(a)?void 0:a}function i2e(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},s=n.config,a=ce(t)?Zj(n,i,t):void 0,l=a?[{test:a,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:c,formatType:f}=o;let h;Cu(f)?h=qi({fieldOrDatumDef:t,field:"datum.value",format:c,formatType:f,config:s}):c===void 0&&f===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?h=qi({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&ce(t)&&t.timeUnit===void 0&&(h=qi({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const p={...l?{opacity:l}:{},...h?{text:h}:{},...e};return xt(p)?void 0:p}function o2e(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function Qj(e){return Kj(e,(t,n)=>Math.max(t,n.value))}function SE(e){return Kj(e,(t,n)=>Gt(t,n.value))}function Kj(e,t){if(Zme(e))return _e(e.condition).reduce(t,e.value);if(eo(e))return e.value}function Zj(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=he(n.field);return r.map(o=>`(!length(data(${he($t(o)+$u)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const G8={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return uW(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return cW(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??d2e(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??h2e(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??a2e(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Vc(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(qc(n)&&$o(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>s2e(t,e)};function s2e(e,t){const n=e.values;if(ne(n))return wW(t,n);if(Me(n))return n}function a2e(e,t,n,r){if(t!=="shape"){const i=SE(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function l2e(e){const{legend:t}=e;return Gt(t.type,u2e(e))}function u2e({channel:e,timeUnit:t,scaleType:n}){if(qc(e)){if(Je(["quarter","month","day"],t))return"symbol";if($o(n))return"gradient"}return"symbol"}function c2e({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??f2e(n,t)}function f2e(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function d2e({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:s,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if($o(i))return n==="horizontal"?r==="top"||r==="bottom"?Y8(t,"width",s,o):s:Y8(t,"height",l,a)}function Y8(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function h2e(e){if(Je(["quantile","threshold","log","symlog"],e))return"greedy"}function eB(e){const t=Ft(e)?p2e(e):v2e(e);return e.component.legends=t,t}function p2e(e){const{encoding:t}=e,n={};for(const r of[Nr,...HW]){const i=rn(t[r]);!i||!e.getScaleComponent(r)||r===Or&&ce(i)&&i.type===td||(n[r]=y2e(e,r))}return n}function g2e(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function m2e(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function y2e(e,t){var C;let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,s=o.legend,a=new t2e({},g2e(e,t));Cve(e,t,a);const l=n!==void 0?!n:s.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const c=e.getScaleComponent(t).get("type"),f=rn(i[t]),h=ce(f)?(C=yn(f.timeUnit))==null?void 0:C.unit:void 0,p=n.orient||o.legend.orient||"right",m=l2e({legend:n,channel:t,timeUnit:h,scaleType:c}),y=c2e({legend:n,legendType:m,orient:p,legendConfig:s}),v={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:f,legendConfig:s,config:o,scaleType:c,orient:p,legendType:m,direction:y};for(const k of Jj){if(m==="gradient"&&k.startsWith("symbol")||m==="symbol"&&k.startsWith("gradient"))continue;const N=k in G8?G8[k](v):n[k];if(N!==void 0){const $=m2e(N,k,n,e.fieldDef(t));($||o.legend[k]===void 0)&&a.set(k,N,$)}}const _=(n==null?void 0:n.encoding)??{},b=a.get("selections"),S={},A={fieldOrDatumDef:f,model:e,channel:t,legendCmpt:a,legendType:m};for(const k of["labels","legend","title","symbols","gradient","entries"]){const N=Vj(_[k]??{},e),$=k in H8?H8[k](N,A):N;$!==void 0&&!xt($)&&(S[k]={...b!=null&&b.length&&ce(f)?{name:`${$t(f.field)}_legend_${k}`}:{},...b!=null&&b.length?{interactive:!0}:{},update:b!=null&&b.length?{...$,cursor:{value:"pointer"}}:$})}return xt(S)||a.set("encode",S,!!(n!=null&&n.encoding)),a}function v2e(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){eB(r);for(const i of se(r.component.legends))n.legend[i]=U5(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=tB(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of se(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function tB(e,t){var o,s,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const c of Jj){const f=Ka(e.getWithExplicit(c),t.getWithExplicit(c),c,"legend",(h,p)=>{switch(c){case"symbolType":return x2e(h,p);case"title":return MU(h,p);case"type":return i=!0,Ur("symbol")}return h2(h,p,c,"legend")});e.setWithExplicit(c,f)}return i&&((s=(o=e.implicit)==null?void 0:o.encode)!=null&&s.gradient&&cy(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&cy(e.explicit,["encode","gradient"])),e}function x2e(e,t){return t.value==="circle"?t:e}function _2e(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function nB(e){const t=e.component.legends,n={};for(const i of se(t)){const o=e.getScaleComponent(i),s=dt(o.get("domains"));if(n[s])for(const a of n[s])tB(a,t[i])||n[s].push(t[i]);else n[s]=[t[i].clone()]}return Xt(n).flat().map(i=>b2e(i,e.config)).filter(i=>i!==void 0)}function b2e(e,t){var s,a,l;const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),(s=o.encode)!=null&&s.symbols){const c=o.encode.symbols.update;c.fill&&c.fill.value!=="transparent"&&!c.stroke&&!o.stroke&&(c.stroke={value:"transparent"});for(const f of HW)o[f]&&delete c[f]}if(o.title||delete o.title,r!==void 0){let c=r;(l=(a=o.encode)==null?void 0:a.labels)!=null&&l.update&&Me(o.encode.labels.update.text)&&(c=_u(r,"datum.label",o.encode.labels.update.text.signal)),_2e(o,"labels","text",{signal:c})}return o}}function w2e(e){return sd(e)||Y5(e)?S2e(e):rB(e)}function S2e(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),rB(e))}function rB(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},o=t.data.reduce((s,a)=>{const l=Me(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Je(s,l)||s.push(l),s},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const E2e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class iB extends Vs{constructor(n,r,i,o){super({...r},{name:n});re(this,"specifiedProjection");re(this,"size");re(this,"data");re(this,"merged",!1);this.specifiedProjection=r,this.size=i,this.data=o}get isFit(){return!!this.data}}function oB(e){e.component.projection=Ft(e)?A2e(e):$2e(e)}function A2e(e){if(e.hasProjection){const t=En(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?C2e(e):void 0,o=new iB(e.projectionName(!0),{...En(e.config.projection),...t},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function C2e(e){const t=[],{encoding:n}=e;for(const r of[[uo,lo],[Ei,co]])(rn(n[r[0]])||rn(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Or)&&e.typedFieldDef(Or).type===td&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Tt.Main)),t}function k2e(e,t){const n=M3(E2e,i=>!!(!we(e.explicit,i)&&!we(t.explicit,i)||we(e.explicit,i)&&we(t.explicit,i)&&Gr(e.get(i),t.get(i))));if(Gr(e.size,t.size)){if(n)return e;if(Gr(e.explicit,{}))return t;if(Gr(t.explicit,{}))return e}return null}function $2e(e){if(e.children.length===0)return;let t;for(const r of e.children)oB(r);const n=M3(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=k2e(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new iB(r,t.specifiedProjection,t.size,We(t.data));for(const o of e.children){const s=o.component.projection;s&&(s.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(s.get("name"),r),s.merged=!0)}return i}}function M2e(e,t,n,r){if(bg(t,n)){const i=Ft(e)?e.axis(n)??e.legend(n)??{}:{},o=me(t,{expr:"datum"}),s=me(t,{expr:"datum",binSuffix:"end"});return{formulaAs:me(t,{binSuffix:"range",forAs:!0}),formula:yg(o,s,i.format,i.formatType,r)}}return{}}function sB(e,t){return`${bU(e)}_${t}`}function N2e(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function W5(e,t,n){const r=a2(n,void 0)??{},i=sB(r,t);return e.getName(`${i}_bins`)}function O2e(e){return"as"in e}function q8(e,t,n){let r,i;O2e(e)?r=xe(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[me(e,{forAs:!0}),me(e,{binSuffix:"end",forAs:!0})];const o={...a2(t,void 0)},s=sB(o,e.field),{signal:a,extentSignal:l}=N2e(n,s);if(Jv(o.extent)){const f=o.extent;i=zj(n,f.param,f),delete o.extent}const c={bin:o,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:s,binComponent:c}}class To extends mt{constructor(n,r){super(n);re(this,"bins");this.bins=r}clone(){return new To(null,We(this.bins))}static makeFromEncoding(n,r){const i=r.reduceFieldDef((o,s,a)=>{if(dr(s)&&bt(s.bin)){const{key:l,binComponent:c}=q8(s,s.bin,r);o[l]={...c,...o[l],...M2e(r,s,a,r.config)}}return o},{});return xt(i)?null:new To(n,i)}static makeFromTransform(n,r,i){const{key:o,binComponent:s}=q8(r,r.bin,i);return new To(n,{[o]:s})}merge(n,r){for(const i of se(n.bins))i in this.bins?(r(n.bins[i].signal,this.bins[i].signal),this.bins[i].as=ko([...this.bins[i].as,...n.bins[i].as],Qe)):this.bins[i]=n.bins[i];for(const i of n.children)n.removeChild(i),i.parent=this;n.remove()}producedFields(){return new Set(Xt(this.bins).map(n=>n.as).flat(2))}dependentFields(){return new Set(Xt(this.bins).map(n=>n.field))}hash(){return`Bin ${Qe(this.bins)}`}assemble(){return Xt(this.bins).flatMap(n=>{const r=[],[i,...o]=n.as,{extent:s,...a}=n.bin,l={type:"bin",field:Si(n.field),as:i,signal:n.signal,...Jv(s)?{extent:null}:{extent:s},...n.span?{span:{signal:`span(${n.span})`}}:{},...a};!s&&n.extentSignal&&(r.push({type:"extent",field:Si(n.field),signal:n.extentSignal}),l.extent={signal:n.extentSignal}),r.push(l);for(const c of o)for(let f=0;f<2;f++)r.push({type:"formula",expr:me({field:i[f]},{expr:"datum"}),as:c[f]});return n.formula&&r.push({type:"formula",expr:n.formula,as:n.formulaAs}),r})}}function D2e(e,t,n,r){var o;const i=Ft(r)?r.encoding[es(t)]:void 0;if(dr(n)&&Ft(r)&&pW(n,i,r.markDef,r.config)){e.add(me(n,{})),e.add(me(n,{suffix:"end"}));const{mark:s,markDef:a,config:l}=r,c=Qa({fieldDef:n,markDef:a,config:l});$p(s)&&c!==.5&&Yt(t)&&(e.add(me(n,{suffix:p2})),e.add(me(n,{suffix:g2}))),n.bin&&bg(n,t)&&e.add(me(n,{binSuffix:"range"}))}else if(dU(t)){const s=fU(t);e.add(r.getName(s))}else e.add(me(n));return Gu(n)&&_me((o=n.scale)==null?void 0:o.range)&&e.add(n.scale.range.field),e}function F2e(e,t){for(const n of se(t)){const r=t[n];for(const i of se(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Xi extends mt{constructor(n,r,i){super(n);re(this,"dimensions");re(this,"measures");this.dimensions=r,this.measures=i}clone(){return new Xi(null,new Set(this.dimensions),We(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(n,r){let i=!1;r.forEachFieldDef(a=>{a.aggregate&&(i=!0)});const o={},s=new Set;return!i||(r.forEachFieldDef((a,l)=>{const{aggregate:c,field:f}=a;if(c)if(c==="count")o["*"]??(o["*"]={}),o["*"].count=new Set([me(a,{forAs:!0})]);else{if(Ps(c)||hl(c)){const h=Ps(c)?"argmin":"argmax",p=c[h];o[p]??(o[p]={}),o[p][h]=new Set([me({op:h,field:p},{forAs:!0})])}else o[f]??(o[f]={}),o[f][c]=new Set([me(a,{forAs:!0})]);ts(l)&&r.scaleDomain(l)==="unaggregated"&&(o[f]??(o[f]={}),o[f].min=new Set([me({field:f,aggregate:"min"},{forAs:!0})]),o[f].max=new Set([me({field:f,aggregate:"max"},{forAs:!0})]))}else D2e(s,l,a,r)}),s.size+se(o).length===0)?null:new Xi(n,s,o)}static makeFromTransform(n,r){var s;const i=new Set,o={};for(const a of r.aggregate){const{op:l,field:c,as:f}=a;l&&(l==="count"?(o["*"]??(o["*"]={}),o["*"].count=new Set([f||me(a,{forAs:!0})])):(o[c]??(o[c]={}),(s=o[c])[l]??(s[l]=new Set),o[c][l].add(f||me(a,{forAs:!0}))))}for(const a of r.groupby??[])i.add(a);return i.size+se(o).length===0?null:new Xi(n,i,o)}merge(n){return nU(this.dimensions,n.dimensions)?(F2e(this.measures,n.measures),!0):(G0e("different dimensions, cannot merge"),!1)}addDimensions(n){n.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...se(this.measures)])}producedFields(){const n=new Set;for(const r of se(this.measures))for(const i of se(this.measures[r])){const o=this.measures[r][i];o.size===0?n.add(`${i}_${r}`):o.forEach(n.add,n)}return n}hash(){return`Aggregate ${Qe({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const n=[],r=[],i=[];for(const s of se(this.measures))for(const a of se(this.measures[s]))for(const l of this.measures[s][a])i.push(l),n.push(a),r.push(s==="*"?null:Si(s));return{type:"aggregate",groupby:[...this.dimensions].map(Si),ops:n,fields:r,as:i}}}class id extends mt{constructor(n,r,i,o){super(n);re(this,"model");re(this,"name");re(this,"data");re(this,"column");re(this,"row");re(this,"facet");re(this,"childModel");this.model=r,this.name=i,this.data=o;for(const s of pi){const a=r.facet[s];if(a){const{bin:l,sort:c}=a;this[s]={name:r.getName(`${s}_domain`),fields:[me(a),...bt(l)?[me(a,{binSuffix:"end"})]:[]],...Os(c)?{sortField:c}:ne(c)?{sortIndexField:Of(a,s)}:{}}}}this.childModel=r.child}hash(){let n="Facet";for(const r of pi)this[r]&&(n+=` ${r.charAt(0)}:${Qe(this[r])}`);return n}get fields(){var r;const n=[];for(const i of pi)(r=this[i])!=null&&r.fields&&n.push(...this[i].fields);return n}dependentFields(){const n=new Set(this.fields);for(const r of pi)this[r]&&(this[r].sortField&&n.add(this[r].sortField.field),this[r].sortIndexField&&n.add(this[r].sortIndexField));return n}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const n={};for(const r of Ys){const i=this.childModel.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(vn(o)&&ju(s)){const a=x2(this.childModel,r),l=G5(a);l?n[r]=l:fe(B3(r))}}}return n}assembleRowColumnHeaderData(n,r,i){const o={row:"y",column:"x",facet:void 0}[n],s=[],a=[],l=[];o&&i&&i[o]&&(r?(s.push(`distinct_${i[o]}`),a.push("max")):(s.push(i[o]),a.push("distinct")),l.push(`distinct_${i[o]}`));const{sortField:c,sortIndexField:f}=this[n];if(c){const{op:h=i2,field:p}=c;s.push(p),a.push(h),l.push(me(c,{forAs:!0}))}else f&&(s.push(f),a.push("max"),l.push(f));return{name:this[n].name,source:r??this.data,transform:[{type:"aggregate",groupby:this[n].fields,...s.length?{fields:s,ops:a,as:l}:{}}]}}assembleFacetHeaderData(n){var c,f;const{columns:r}=this.model.layout,{layoutHeaders:i}=this.model.component,o=[],s={};for(const h of P5){for(const p of z5){const m=((c=i[h])==null?void 0:c[p])??[];for(const y of m)if(((f=y.axes)==null?void 0:f.length)>0){s[h]=!0;break}}if(s[h]){const p=`length(data("${this.facet.name}"))`,m=h==="row"?r?{signal:`ceil(${p} / ${r})`}:1:r?{signal:`min(${p}, ${r})`}:{signal:p};o.push({name:`${this.facet.name}_${h}`,transform:[{type:"sequence",start:0,stop:m}]})}}const{row:a,column:l}=s;return(a||l)&&o.unshift(this.assembleRowColumnHeaderData("facet",null,n)),o}assemble(){const n=[];let r=null;const i=this.getChildIndependentFieldsWithStep(),{column:o,row:s,facet:a}=this;if(o&&s&&(i.x||i.y)){r=`cross_${this.column.name}_${this.row.name}`;const l=[].concat(i.x??[],i.y??[]),c=l.map(()=>"distinct");n.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:l,ops:c}]})}for(const l of[Ns,Ms])this[l]&&n.push(this.assembleRowColumnHeaderData(l,r,i));if(a){const l=this.assembleFacetHeaderData(i);l&&n.push(...l)}return n}}function V8(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function T2e(e,t){const n=D3(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=V8(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=V8(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return fe(e0e(t)),null}function R2e(e){const t={};return Ym(e.filter,n=>{if(YU(n)){let r=null;X3(n)?r=Br(n.equal):Q3(n)?r=Br(n.lte):J3(n)?r=Br(n.lt):K3(n)?r=Br(n.gt):Z3(n)?r=Br(n.gte):e5(n)?r=n.range[0]:t5(n)&&(r=(n.oneOf??n.in)[0]),r&&(Bu(r)?t[n.field]="date":st(r)?t[n.field]="number":xe(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function L2e(e){const t={};function n(r){kf(r)?t[r.field]="date":r.type==="quantitative"&&kge(r.aggregate)?t[r.field]="number":bf(r.field)>1?r.field in t||(t[r.field]="flatten"):Gu(r)&&Os(r.sort)&&bf(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Ft(e)||Jr(e))&&e.forEachFieldDef((r,i)=>{if(dr(r))n(r);else{const o=Uu(i),s=e.fieldDef(o);n({...r,type:s.type})}}),Ft(e)){const{mark:r,markDef:i,encoding:o}=e;if(pl(r)&&!e.encoding.order){const s=i.orient==="horizontal"?"y":"x",a=o[s];ce(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function P2e(e){const t={};if(Ft(e)&&e.component.selection)for(const n of se(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&bf(i.field)>1&&(t[i.field]="flatten")}return t}class Bn extends mt{constructor(n,r){super(n);re(this,"_parse");this._parse=r}clone(){return new Bn(null,We(this._parse))}hash(){return`Parse ${Qe(this._parse)}`}static makeExplicit(n,r,i){var a;let o={};const s=r.data;return!za(s)&&((a=s==null?void 0:s.format)!=null&&a.parse)&&(o=s.format.parse),this.makeWithAncestors(n,o,{},i)}static makeWithAncestors(n,r,i,o){for(const l of se(i)){const c=o.getWithExplicit(l);c.value!==void 0&&(c.explicit||c.value===i[l]||c.value==="derived"||i[l]==="flatten"?delete i[l]:fe(i8(l,i[l],c.value)))}for(const l of se(r)){const c=o.get(l);c!==void 0&&(c===r[l]?delete r[l]:fe(i8(l,r[l],c)))}const s=new Vs(r,i);o.copyAll(s);const a={};for(const l of se(s.combine())){const c=s.get(l);c!==null&&(a[l]=c)}return se(a).length===0||o.parseNothing?null:new Bn(n,a)}get parse(){return this._parse}merge(n){this._parse={...this._parse,...n.parse},n.remove()}assembleFormatParse(){const n={};for(const r of se(this._parse)){const i=this._parse[r];bf(r)===1&&(n[r]=i)}return n}producedFields(){return new Set(se(this._parse))}dependentFields(){return new Set(se(this._parse))}assembleTransforms(n=!1){return se(this._parse).filter(r=>n?bf(r)>1:!0).map(r=>{const i=T2e(r,this._parse[r]);return i?{type:"formula",expr:i,as:Zf(r)}:null}).filter(r=>r!==null)}}class Za extends mt{clone(){return new Za(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([no])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:no}}}class Eg extends mt{constructor(n,r){super(n);re(this,"params");this.params=r}clone(){return new Eg(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Qe(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class Ag extends mt{constructor(n,r){super(n);re(this,"params");this.params=r}clone(){return new Ag(null,this.params)}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Qe(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Mu extends mt{constructor(n){super(null);re(this,"_data");re(this,"_name");re(this,"_generator");n??(n={name:"source"});let r;if(za(n)||(r=n.format?{...Xr(n.format,["parse"])}:{}),Mp(n))this._data={values:n.values};else if($f(n)){if(this._data={url:n.url},!r.type){let i=/(?:\.([^.]+))?$/.exec(n.url)[1];Je(["json","csv","tsv","dsv","topojson"],i)||(i="json"),r.type=i}}else uj(n)?this._data={values:[{type:"Sphere"}]}:(aj(n)||za(n))&&(this._data={});this._generator=za(n),n.name&&(this._name=n.name),r&&!xt(r)&&(this._data.format=r)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(n){this._name=n}set parent(n){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function j5(e){return e instanceof Mu||e instanceof Eg||e instanceof Ag}var Qc;class B5{constructor(){eN(this,Qc);E_(this,Qc,!1)}setModified(){E_(this,Qc,!0)}get modifiedFlag(){return ZM(this,Qc)}}Qc=new WeakMap;class Yu extends B5{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class H5 extends B5{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class z2e extends H5{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of se(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class I2e extends H5{constructor(n){super();re(this,"requiresSelectionId");this.requiresSelectionId=n&&L5(n)}run(n){n instanceof Za&&(this.requiresSelectionId&&(j5(n.parent)||n.parent instanceof Xi||n.parent instanceof Bn)||(this.setModified(),n.remove()))}}class U2e extends B5{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Do&&(r=t.producedFields(),N3(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class W2e extends H5{constructor(){super()}run(t){t instanceof Cr&&!t.isRequired()&&(this.setModified(),t.remove())}}class j2e extends Yu{run(t){if(!j5(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Bn)if(t instanceof Bn)this.setModified(),t.merge(n);else{if(O3(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class B2e extends Yu{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Bn);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const s of r){const a=s.parse;for(const l of se(a))l in i?i[l]!==a[l]&&o.add(l):i[l]=a[l]}for(const s of o)delete i[s];if(!xt(i)){this.setModified();const s=new Bn(t,i);for(const a of n){if(a instanceof Bn)for(const l of se(i))delete a.parse[l];t.removeChild(a),a.parent=s,a instanceof Bn&&se(a.parse).length===0&&a.remove()}}}}}class H2e extends Yu{run(t){t instanceof Cr||t.numChildren()>0||t instanceof id||t instanceof Mu||(this.setModified(),t.remove())}}class G2e extends Yu{run(t){const n=t.children.filter(i=>i instanceof Do),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Y2e extends Yu{run(t){const n=t.children.filter(i=>i instanceof Xi),r={};for(const i of n){const o=Qe(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of se(r)){const o=r[i];if(o.length>1){const s=o.pop();for(const a of o)s.merge(a)&&(t.removeChild(a),a.parent=s,a.remove(),this.setModified())}}}}class q2e extends Yu{constructor(n){super();re(this,"model");this.model=n}run(n){const r=!(j5(n)||n instanceof rd||n instanceof Bn||n instanceof Za),i=[],o=[];for(const s of n.children)s instanceof To&&(r&&!O3(n.producedFields(),s.dependentFields())?i.push(s):o.push(s));if(i.length>0){const s=i.pop();for(const a of i)s.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),n instanceof To?n.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(o.length>1){const s=o.pop();for(const a of o)s.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}}class V2e extends Yu{run(t){const n=[...t.children];if(!_f(n,s=>s instanceof Cr)||t.numChildren()<=1)return;const i=[];let o;for(const s of n)if(s instanceof Cr){let a=s;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof Cr)a=l;else break}i.push(...a.children),o?(t.removeChild(s),s.parent=o.parent,o.parent.removeChild(o),o.parent=a,this.setModified()):o=a}else i.push(s);if(i.length){this.setModified();for(const s of i)s.parent.removeChild(s),s.parent=o}}}class qu extends mt{constructor(n,r){super(n);re(this,"transform");this.transform=r}clone(){return new qu(null,We(this.transform))}addDimensions(n){this.transform.groupby=ko(this.transform.groupby.concat(n),r=>r)}dependentFields(){const n=new Set;return this.transform.groupby&&this.transform.groupby.forEach(n.add,n),this.transform.joinaggregate.map(r=>r.field).filter(r=>r!==void 0).forEach(n.add,n),n}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(n){return n.as??me(n)}hash(){return`JoinAggregateTransform ${Qe(this.transform)}`}assemble(){const n=[],r=[],i=[];for(const s of this.transform.joinaggregate)r.push(s.op),i.push(this.getDefaultName(s)),n.push(s.field===void 0?null:s.field);const o=this.transform.groupby;return{type:"joinaggregate",as:i,ops:r,fields:n,...o!==void 0?{groupby:o}:{}}}}class Ff extends mt{constructor(n,r){super(n);re(this,"filter");this.filter=r}clone(){return new Ff(null,{...this.filter})}static make(n,r,i){const{config:o,markDef:s}=r,{marks:a,scales:l}=i;if(a==="include-invalid-values"&&l==="include-invalid-values")return null;const c=r.reduceFieldDef((f,h,p)=>{const m=ts(p)&&r.getScaleComponent(p);if(m){const y=m.get("type"),{aggregate:v}=h,_=u5({scaleChannel:p,markDef:s,config:o,scaleType:y,isCountAggregate:Xv(v)});_!=="show"&&_!=="always-valid"&&(f[h.field]=h)}return f},{});return se(c).length?new Ff(n,c):null}dependentFields(){return new Set(se(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Qe(this.filter)}`}assemble(){const n=se(this.filter).reduce((r,i)=>{const o=this.filter[i],s=me(o,{expr:"datum"});return o!==null&&(o.type==="temporal"?r.push(`(isDate(${s}) || (${EE(s)}))`):o.type==="quantitative"&&r.push(EE(s))),r},[]);return n.length>0?{type:"filter",expr:n.join(" && ")}:null}}function EE(e){return`isValid(${e}) && isFinite(+${e})`}function X2e(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=me(r);return i&&t.push(i),t},[])}function J2e(e){return ne(e)&&e.every(t=>xe(t))&&e.length>1}class Fs extends mt{constructor(n,r){super(n);re(this,"_stack");this._stack=r}clone(){return new Fs(null,We(this._stack))}static makeFromTransform(n,r){const{stack:i,groupby:o,as:s,offset:a="zero"}=r,l=[],c=[];if(r.sort!==void 0)for(const p of r.sort)l.push(p.field),c.push(Gt(p.order,"ascending"));const f={field:l,order:c};let h;return J2e(s)?h=s:xe(s)?h=[s,`${s}_end`]:h=[`${r.stack}_start`,`${r.stack}_end`],new Fs(n,{dimensionFieldDefs:[],stackField:i,groupby:o,offset:a,sort:f,facetby:[],as:h})}static makeFromEncoding(n,r){const i=r.stack,{encoding:o}=r;if(!i)return null;const{groupbyChannels:s,fieldChannel:a,offset:l,impute:c}=i,f=s.map(y=>{const v=o[y];return to(v)}).filter(y=>!!y),h=X2e(r),p=r.encoding.order;let m;if(ne(p)||ce(p))m=CU(p);else{const y=gW(p)?p.sort:a==="y"?"descending":"ascending";m=h.reduce((v,_)=>(v.field.includes(_)||(v.field.push(_),v.order.push(y)),v),{field:[],order:[]})}return new Fs(n,{dimensionFieldDefs:f,stackField:r.vgField(a),facetby:[],stackby:h,sort:m,offset:l,impute:c,as:[r.vgField(a,{suffix:"start",forAs:!0}),r.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(n){this._stack.facetby.push(...n)}dependentFields(){const n=new Set;return n.add(this._stack.stackField),this.getGroupbyFields().forEach(n.add,n),this._stack.facetby.forEach(n.add,n),this._stack.sort.field.forEach(n.add,n),n}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Qe(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:n,impute:r,groupby:i}=this._stack;return n.length>0?n.map(o=>o.bin?r?[me(o,{binSuffix:"mid"})]:[me(o,{}),me(o,{binSuffix:"end"})]:[me(o)]).flat():i??[]}assemble(){const n=[],{facetby:r,dimensionFieldDefs:i,stackField:o,stackby:s,sort:a,offset:l,impute:c,as:f}=this._stack;if(c)for(const h of i){const{bandPosition:p=.5,bin:m}=h;if(m){const y=me(h,{expr:"datum"}),v=me(h,{expr:"datum",binSuffix:"end"});n.push({type:"formula",expr:`${EE(y)} ? ${p}*${y}+${1-p}*${v} : ${y}`,as:me(h,{binSuffix:"mid",forAs:!0})})}n.push({type:"impute",field:o,groupby:[...s,...r],key:me(h,{binSuffix:"mid"}),method:"value",value:0})}return n.push({type:"stack",groupby:[...this.getGroupbyFields(),...r],field:o,sort:a,as:f,offset:l}),n}}class od extends mt{constructor(n,r){super(n);re(this,"transform");this.transform=r}clone(){return new od(null,We(this.transform))}addDimensions(n){this.transform.groupby=ko(this.transform.groupby.concat(n),r=>r)}dependentFields(){const n=new Set;return(this.transform.groupby??[]).forEach(n.add,n),(this.transform.sort??[]).forEach(r=>n.add(r.field)),this.transform.window.map(r=>r.field).filter(r=>r!==void 0).forEach(n.add,n),n}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(n){return n.as??me(n)}hash(){return`WindowTransform ${Qe(this.transform)}`}assemble(){const n=[],r=[],i=[],o=[];for(const p of this.transform.window)r.push(p.op),i.push(this.getDefaultName(p)),o.push(p.param===void 0?null:p.param),n.push(p.field===void 0?null:p.field);const s=this.transform.frame,a=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&r.every(p=>W3(p)))return{type:"joinaggregate",as:i,ops:r,fields:n,...a!==void 0?{groupby:a}:{}};const l=[],c=[];if(this.transform.sort!==void 0)for(const p of this.transform.sort)l.push(p.field),c.push(p.order??"ascending");const f={field:l,order:c},h=this.transform.ignorePeers;return{type:"window",params:o,as:i,ops:r,fields:n,sort:f,...h!==void 0?{ignorePeers:h}:{},...a!==void 0?{groupby:a}:{},...s!==void 0?{frame:s}:{}}}}function Q2e(e){function t(n){if(!(n instanceof id)){const r=n.clone();if(r instanceof Cr){const i=CE+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Xi||r instanceof Fs||r instanceof od||r instanceof qu)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function AE(e){if(e instanceof id)if(e.numChildren()===1&&!(e.children[0]instanceof Cr)){const t=e.children[0];(t instanceof Xi||t instanceof Fs||t instanceof od||t instanceof qu)&&t.addDimensions(e.fields),t.swapWithParent(),AE(e)}else{const t=e.model.component.data.main;aB(t);const n=Q2e(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(AE)}function aB(e){if(e instanceof Cr&&e.type===Tt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof id||(t.swapWithParent(),aB(e))}}const CE="scale_",hm=5;function kE(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!kE(t.children))return!1}return!0}function Ri(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function X8(e,t,n){let r=e.sources,i=!1;return i=Ri(new W2e,r)||i,i=Ri(new I2e(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=Ri(new H2e,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=Ri(new j2e,r)||i,i=Ri(new q2e(t),r)||i,i=Ri(new U2e,r)||i,i=Ri(new B2e,r)||i,i=Ri(new Y2e,r)||i,i=Ri(new G2e,r)||i,i=Ri(new z2e,r)||i,i=Ri(new V2e,r)||i),e.sources=r,i}function K2e(e,t){kE(e.sources);let n=0,r=0;for(let i=0;i<hm&&X8(e,t,!0);i++)n++;e.sources.map(AE);for(let i=0;i<hm&&X8(e,t,!1);i++)r++;kE(e.sources),Math.max(n,r)===hm&&fe(`Maximum optimization runs(${hm}) reached.`)}class fn{constructor(t){re(this,"signal");Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new fn(()=>t(n))}}function lB(e){Ft(e)?Z2e(e):exe(e)}function Z2e(e){const t=e.component.scales;for(const n of se(t)){const r=nxe(e,n);if(t[n].setWithExplicit("domains",r),ixe(e,n),e.component.data.isFaceted){let o=e;for(;!Jr(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const a of r.value)As(a)&&(a.data=CE+a.data.replace(CE,""))}}}function exe(e){for(const n of e.children)lB(n);const t=e.component.scales;for(const n of se(t)){let r,i=null;for(const o of e.children){const s=o.component.scales[n];if(s){r===void 0?r=s.getWithExplicit("domains"):r=Ka(r,s.getWithExplicit("domains"),"domains","scale",$E);const a=s.get("selectionExtent");i&&a&&i.param!==a.param&&fe(qge),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function txe(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=J8(t,n);if(!i){fe(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=J8(t,n);if(i)return"unaggregated"}return e}function nxe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=txe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&rn(r.x2)?rn(r.x)?Ka(ya(n,i,e,"x"),ya(n,i,e,"x2"),"domain","scale",$E):ya(n,i,e,"x2"):t==="y"&&rn(r.y2)?rn(r.y)?Ka(ya(n,i,e,"y"),ya(n,i,e,"y2"),"domain","scale",$E):ya(n,i,e,"y2"):ya(n,i,e,t)}function rxe(e,t,n){return e.map(r=>({signal:`{data: ${l2(r,{timeUnit:n,type:t})}}`}))}function Vb(e,t,n){var i;const r=(i=yn(n))==null?void 0:i.unit;return t==="temporal"||r?rxe(e,t,r):[e]}function ya(e,t,n,r){const{encoding:i,markDef:o,mark:s,config:a,stack:l}=n,c=rn(i[r]),{type:f}=c,h=c.timeUnit,p=Jye({invalid:Wo("invalid",o,a),isPath:pl(s)});if(xme(t)){const v=ya(e,void 0,n,r),_=Vb(t.unionWith,f,h);return wo([..._,...v.value])}else{if(Me(t))return wo([t]);if(t&&t!=="unaggregated"&&!KU(t))return wo(Vb(t,f,h))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Ur([[0,1]]);const v=n.requestDataName(p);return Ur([{data:v,field:n.vgField(r,{suffix:"start"})},{data:v,field:n.vgField(r,{suffix:"end"})}])}const m=ts(r)&&ce(c)?oxe(n,r,e):void 0;if(ns(c)){const v=Vb([c.datum],f,h);return Ur(v)}const y=c;if(t==="unaggregated"){const{field:v}=c;return Ur([{data:n.requestDataName(p),field:me({field:v,aggregate:"min"})},{data:n.requestDataName(p),field:me({field:v,aggregate:"max"})}])}else if(bt(y.bin)){if(vn(e))return Ur(e==="bin-ordinal"?[]:[{data:Cp(m)?n.requestDataName(p):n.requestDataName(Tt.Raw),field:n.vgField(r,bg(y,r)?{binSuffix:"range"}:{}),sort:m===!0||!ve(m)?{field:n.vgField(r,{}),op:"min"}:m}]);{const{bin:v}=y;if(bt(v)){const _=W5(n,y.field,v);return Ur([new fn(()=>{const b=n.getSignalName(_);return`[${b}.start, ${b}.stop]`})])}else return Ur([{data:n.requestDataName(p),field:n.vgField(r,{})}])}}else if(y.timeUnit&&Je(["time","utc"],e)){const v=i[es(r)];if(pW(y,v,o,a)){const _=n.requestDataName(p),b=Qa({fieldDef:y,fieldDef2:v,markDef:o,config:a}),S=$p(s)&&b!==.5&&Yt(r);return Ur([{data:_,field:n.vgField(r,S?{suffix:p2}:{})},{data:_,field:n.vgField(r,{suffix:S?g2:"end"})}])}}return Ur(m?[{data:Cp(m)?n.requestDataName(p):n.requestDataName(Tt.Raw),field:n.vgField(r),sort:m}]:[{data:n.requestDataName(p),field:n.vgField(r)}])}function Xb(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":i2),...r?{field:Si(r)}:{},...i?{order:i}:{}}}function ixe(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,o=KU(r)?r:void 0,s=Wu(i)&&Jv(i.extent)?i.extent:void 0;(o||s)&&n.set("selectionExtent",o??s,!0)}function oxe(e,t,n){if(!vn(n))return;const r=e.fieldDef(t),i=r.sort;if(dW(i))return{op:"min",field:Of(r,t),order:"ascending"};const{stack:o}=e,s=o?new Set([...o.groupbyFields,...o.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Os(i)){const a=o&&!s.has(i.field);return Xb(i,a)}else if(Jme(i)){const{encoding:a,order:l}=i,c=e.fieldDef(a),{aggregate:f,field:h}=c,p=o&&!s.has(h);if(Ps(f)||hl(f))return Xb({field:me(c),order:l},p);if(W3(f)||!f)return Xb({op:f,field:h,order:l},p)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Je(["ascending",void 0],i))return!0}}function J8(e,t){const{aggregate:n,type:r}=e;return n?xe(n)&&!Mge.has(n)?{valid:!1,reason:w0e(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:S0e(e)}:{valid:!0}:{valid:!1,reason:b0e(e)}}function $E(e,t,n,r){return e.explicit&&t.explicit&&fe($0e(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function sxe(e){const t=ko(e.map(s=>{if(As(s)){const{sort:a,...l}=s;return l}return s}),Qe),n=ko(e.map(s=>{if(As(s)){const a=s.sort;return a!==void 0&&!Cp(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(s=>s!==void 0),Qe);if(t.length===0)return;if(t.length===1){const s=e[0];if(As(s)&&n.length>0){let a=n[0];if(n.length>1){fe(s8);const l=n.filter(c=>ve(c)&&"op"in c&&c.op!=="min");n.every(c=>ve(c)&&"op"in c)&&l.length===1?a=l[0]:a=!0}else if(ve(a)&&"field"in a){const l=a.field;s.field===l&&(a=a.order?{order:a.order}:!0)}return{...s,sort:a}}return s}const r=ko(n.map(s=>Cp(s)||!("op"in s)||xe(s.op)&&we(Age,s.op)?s:(fe(N0e(s)),!0)),Qe);let i;r.length===1?i=r[0]:r.length>1&&(fe(s8),i=!0);const o=ko(e.map(s=>As(s)?s.data:null),s=>s);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function G5(e){if(As(e)&&xe(e.field))return e.field;if(Nge(e)){let t;for(const n of e.fields)if(As(n)&&xe(n.field)){if(!t)t=n.field;else if(t!==n.field)return fe(O0e),t}return fe(D0e),t}else if(Oge(e)){fe(F0e);const t=e.fields[0];return xe(t)?t:void 0}}function x2(e,t){const r=e.component.scales[t].get("domains").map(i=>(As(i)&&(i.data=e.lookupDataSource(i.data)),i));return sxe(r)}function uB(e){return sd(e)||Y5(e)?e.children.reduce((t,n)=>t.concat(uB(n)),Q8(e)):Q8(e)}function Q8(e){return se(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:s,selectionExtent:a,domains:l,range:c,reverse:f,...h}=i,p=axe(i.range,o,n,e),m=x2(e,n),y=a?ave(e,a,r,m):null;return t.push({name:o,type:s,...m?{domain:m}:{},...y?{domainRaw:y}:{},range:p,...f!==void 0?{reverse:f}:{},...h}),t},[])}function axe(e,t,n,r){if(Yt(n)){if(ju(e))return{step:{signal:`${t}_step`}}}else if(ve(e)&&As(e))return{...e,data:r.lookupDataSource(e.data)};return e}class cB extends Vs{constructor(n,r){super({},{name:n});re(this,"merged",!1);this.setWithExplicit("type",r)}domainHasZero(){const n=this.get("type");if(Je([An.LOG,An.TIME,An.UTC],n))return"definitely-not";const r=this.get("zero");if(r===!0||r===void 0&&Je([An.LINEAR,An.SQRT,An.POW],n))return"definitely";const i=this.get("domains");if(i.length>0){let o=!1,s=!1,a=!1;for(const l of i){if(ne(l)){const c=l[0],f=l[l.length-1];if(st(c)&&st(f))if(c<=0&&f>=0){o=!0;continue}else{s=!0;continue}}a=!0}if(o)return"definitely";if(s&&!a)return"definitely-not"}return"maybe"}}const lxe=["range","scheme"];function uxe(e){const t=e.component.scales;for(const n of U3){const r=t[n];if(!r)continue;const i=cxe(n,e);r.setWithExplicit("range",i)}}function K8(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,o=Dr(t),s=e.getName(o);if(ve(r)&&r.binned&&r.step!==void 0)return new fn(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(s)} / (${l})`});if(bt(r)){const a=W5(e,i,r);return new fn(()=>{const l=e.getSignalName(a),c=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${c})`})}}}function cxe(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const h of lxe)if(n[h]!==void 0){const p=lE(o,h),m=ZU(e,h);if(!p)fe(FU(o,h,e));else if(m)fe(m);else switch(h){case"range":{const y=n.range;if(ne(y)){if(Yt(e))return wo(y.map(v=>{if(v==="width"||v==="height"){const _=t.getName(v),b=t.getSignalName.bind(t);return fn.fromName(b,_)}return v}))}else if(ve(y))return wo({data:t.requestDataName(Tt.Main),field:y.field,sort:{op:"min",field:t.vgField(e)}});return wo(y)}case"scheme":return wo(fxe(n[h]))}}const s=e===Mt||e==="xOffset"?"width":"height",a=r[s];if(Bo(a)){if(Yt(e))if(vn(o)){const h=dB(a,t,e);if(h)return wo({step:h})}else fe(TU(s));else if(pg(e)){const h=e===al?"x":"y";if(t.getScaleComponent(h).get("type")==="band"){const y=hB(a,o);if(y)return wo(y)}}}const{rangeMin:l,rangeMax:c}=n,f=dxe(e,t);return(l!==void 0||c!==void 0)&&lE(o,"rangeMin")&&ne(f)&&f.length===2?wo([l??f[0],c??f[1]]):Ur(f)}function fxe(e){return vme(e)?{scheme:e.name,...Xr(e,["name"])}:{scheme:e}}function fB(e,t,n,{center:r}={}){const i=Dr(e),o=t.getName(i),s=t.getSignalName.bind(t);return e===_n&&Zi(n)?r?[fn.fromName(a=>`${s(a)}/2`,o),fn.fromName(a=>`-${s(a)}/2`,o)]:[fn.fromName(s,o),0]:r?[fn.fromName(a=>`-${s(a)}/2`,o),fn.fromName(a=>`${s(a)}/2`,o)]:[0,fn.fromName(s,o)]}function dxe(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:s}=rn(o[e]),l=t.getScaleComponent(e).get("type"),{domain:c,domainMid:f}=t.specifiedScales[e];switch(e){case Mt:case _n:{if(Je(["point","band"],l)){const h=pB(e,n,r.view);if(Bo(h))return{step:dB(h,t,e)}}return fB(e,t,l)}case al:case ed:return hxe(e,t,l);case Hs:{const h=mxe(i,r),p=yxe(i,n,t,r);return Ef(l)?gxe(h,p,pxe(l,r,c,e)):[h,p]}case Ci:return[0,Math.PI*2];case Iu:return[0,360];case ao:return[0,new fn(()=>{const h=t.getSignalName(Jr(t.parent)?"child_width":"width"),p=t.getSignalName(Jr(t.parent)?"child_height":"height");return`min(${h},${p})/2`})];case ll:return{step:1e3/r.scale.framesPerSecond};case fl:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case dl:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Or:return"symbol";case Nr:case Ko:case Zo:return l==="ordinal"?s==="nominal"?"category":"ordinal":f!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Gs:case ul:case cl:return[r.scale.minOpacity,r.scale.maxOpacity]}}function dB(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=L3(n),s=r[o];if(YW({step:e,offsetIsDiscrete:je(s)&&n5(s.type)})==="offset"&&CW(r,o)){const l=t.getScaleComponent(o);let f=`domain('${t.scaleName(o)}').length`;if(l.get("type")==="band"){const p=l.get("paddingInner")??l.get("padding")??0,m=l.get("paddingOuter")??l.get("padding")??0;f=`bandspace(${f}, ${p}, ${m})`}const h=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${f} / (1-${Lge(h)})`}}else return e.step}function hB(e,t){if(YW({step:e,offsetIsDiscrete:vn(t)})==="offset")return{step:e.step}}function hxe(e,t,n){const r=e===al?"x":"y",i=t.getScaleComponent(r);if(!i)return fB(r,t,n,{center:!0});const o=i.get("type"),s=t.scaleName(r),{markDef:a,config:l}=t;if(o==="band"){const c=pB(r,t.size,t.config.view);if(Bo(c)){const f=hB(c,n);if(f)return f}return[0,{signal:`bandwidth('${s}')`}]}else{const c=t.encoding[r];if(ce(c)&&c.timeUnit){const f=HU(c.timeUnit,y=>`scale('${s}', ${y})`),h=t.config.scale.bandWithNestedOffsetPaddingInner,p=Qa({fieldDef:c,markDef:a,config:l})-.5,m=p!==0?` + ${p}`:"";if(h){const y=Me(h)?`${h.signal}/2${m}`:`${h/2+p}`,v=Me(h)?`(1 - ${h.signal}/2)${m}`:`${1-h/2+p}`;return[{signal:`${y} * (${f})`},{signal:`${v} * (${f})`}]}return[0,{signal:f}]}return eU(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function pB(e,t,n){const r=e===Mt?"width":"height",i=t[r];return i!==void 0?i:xy(n,r)}function pxe(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ne(n)?n.length+1:(fe(j0e(r)),3)}}function gxe(e,t,n){const r=()=>{const i=Yi(t),o=Yi(e),s=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${s}, ${s})`};return Me(t)?new fn(r):{signal:r()}}function mxe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(Qv("size",e))}const Z8=.95;function yxe(e,t,n,r){const i={x:K8(n,"x"),y:K8(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=e6(t,i,r.view);return st(o)?o-1:new fn(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=e6(t,i,r.view);return st(o)?Math.pow(Z8*o,2):new fn(()=>`pow(${Z8} * ${o.signal}, 2)`)}}throw new Error(Qv("size",e))}function e6(e,t,n){const r=Bo(e.width)?e.width.step:dE(n,"width"),i=Bo(e.height)?e.height.step:dE(n,"height");return t.x||t.y?new fn(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function gB(e,t){Ft(e)?vxe(e,t):yB(e,t)}function vxe(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:s}=e;for(const a of se(n)){const l=s[a],c=n[a],f=e.getScaleComponent(a),h=rn(i[a]),p=l[t],m=f.get("type"),y=f.get("padding"),v=f.get("paddingInner"),_=lE(m,t),b=ZU(a,t);if(p!==void 0&&(_?b&&fe(b):fe(FU(m,t,a))),_&&b===void 0)if(p!==void 0){const S=h.timeUnit,A=h.type;switch(t){case"domainMax":case"domainMin":Bu(l[t])||A==="temporal"||S?c.set(t,{signal:l2(l[t],{type:A,timeUnit:S})},!0):c.set(t,l[t],!0);break;default:c.copyKeyFromObject(t,l)}}else{const S=ae(t6,t)?t6[t]({model:e,channel:a,fieldOrDatumDef:h,scaleType:m,scalePadding:y,scalePaddingInner:v,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:r,hasNestedOffsetScale:kW(i,a),hasSecondaryRangeChannel:!!i[es(a)]}):r.scale[t];S!==void 0&&c.set(t,S,!1)}}}const t6={bins:({model:e,fieldOrDatumDef:t})=>ce(t)?xxe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>_xe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>bxe(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>wxe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>Sxe(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>Exe(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=ce(e)?e.sort:void 0;return Axe(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:s})=>Cxe(e,t,n,r,i,o.scale,s)};function mB(e){Ft(e)?uxe(e):yB(e,"range")}function yB(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?mB(r):gB(r,t);for(const r of se(n)){let i;for(const o of e.children){const s=o.component.scales[r];if(s){const a=s.getWithExplicit(t);i=Ka(i,a,t,"scale",sj((l,c)=>{switch(t){case"range":return l.step&&c.step?l.step-c.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function xxe(e,t){const n=t.bin;if(bt(n)){const r=W5(e,t.field,n);return new fn(()=>e.getSignalName(r))}else if(Sn(n)&&Wu(n)&&n.step!==void 0)return{step:n.step}}function _xe(e,t){if(Je([Nr,Ko,Zo],e)&&t!=="nominal")return"hcl"}function bxe(e,t,n,r,i,o){var s;if(!((s=to(o))!=null&&s.bin||ne(n)||i!=null||r!=null||Je([An.TIME,An.UTC],e)))return Yt(t)?!0:void 0}function wxe(e,t,n,r,i,o){if(Yt(e)){if($o(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:a}=i;if(s==="bar"&&!(ce(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===An.POINT)return n.pointPadding}}function Sxe(e,t,n,r,i,o=!1){if(e===void 0){if(Yt(t)){const{bandPaddingInner:s,barBandPaddingInner:a,rectBandPaddingInner:l,tickBandPaddingInner:c,bandWithNestedOffsetPaddingInner:f}=i;return o?f:Gt(s,n==="bar"?a:n==="tick"?c:l)}else if(pg(t)&&r===An.BAND)return i.offsetBandPaddingInner}}function Exe(e,t,n,r,i,o=!1){if(e===void 0){if(Yt(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:a}=i;if(o)return a;if(n===An.BAND)return Gt(s,Me(r)?{signal:`${r.signal}/2`}:r/2)}else if(pg(t)){if(n===An.POINT)return .5;if(n===An.BAND)return i.offsetBandPaddingOuter}}}function Axe(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Zi(e)&&t==="descending"?Me(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Zi(e)&&t==="descending")return!0}function Cxe(e,t,n,r,i,o,s){if(!!n&&n!=="unaggregated"&&Zi(i)){if(ne(n)){const l=n[0],c=n[n.length-1];if(st(l)&&l<=0&&st(c)&&c>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Ef(i))return!0;if(!(ce(t)&&t.bin)&&Je([...Ys,...mge],e)){const{orient:l,type:c}=r;return Je(["bar","area","line","trail"],c)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Je(["bar","area"],c)&&!s?!0:o==null?void 0:o.zero}return!1}function kxe(e,t,n,r,i=!1){const o=$xe(t,n,r,i),{type:s}=e;return ts(t)?s!==void 0?Ame(t,s)?ce(n)&&!Eme(s,n.type)?(fe(C0e(s,o)),o):s:(fe(A0e(t,s,o)),o):o:null}function $xe(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(qc(e)||Pb(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&fe(zb(e,"ordinal")),"ordinal";if(Lb(e))return"band";if(Yt(e)||pg(e)){if(Je(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in I3)return"band";const o=n[Dr(e)];return Au(o)||Cf(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return qc(e)?"time":Pb(e)==="discrete"?(fe(zb(e,"temporal")),"ordinal"):ce(t)&&t.timeUnit&&yn(t.timeUnit).utc?"utc":Lb(e)?"band":"time";case"quantitative":return qc(e)?ce(t)&&bt(t.bin)?"bin-ordinal":"linear":Pb(e)==="discrete"?(fe(zb(e,"quantitative")),"ordinal"):Lb(e)?"band":"linear";case"geojson":return}throw new Error(OU(t.type))}function Mxe(e,{ignoreRange:t}={}){vB(e),lB(e);for(const n of Sme)gB(e,n);t||mB(e)}function vB(e){Ft(e)?e.component.scales=Nxe(e):e.component.scales=Dxe(e)}function Nxe(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of U3){const s=rn(t[o]);if(s&&n===nW&&o===Or&&s.type===td)continue;let a=s&&s.scale;if(s&&a!==null&&a!==!1){a??(a={});const l=kW(t,o),c=kxe(a,o,s,r,l);i[o]=new cB(e.scaleName(`${o}`,!0),{value:c,explicit:a.type===c})}}return i}const Oxe=sj((e,t)=>l8(e)-l8(t));function Dxe(e){var i;const t=e.component.scales={},n={},r=e.component.resolve;for(const o of e.children){vB(o);for(const s of se(o.component.scales))if((i=r.scale)[s]??(i[s]=Xj(s,e)),r.scale[s]==="shared"){const a=n[s],l=o.component.scales[s].getWithExplicit("type");a?hme(a.value,l.value)?n[s]=Ka(a,l,"type","scale",Oxe):(r.scale[s]="independent",delete n[s]):n[s]=l}}for(const o of se(n)){const s=e.scaleName(o,!0),a=n[o];t[o]=new cB(s,a);for(const l of e.children){const c=l.component.scales[o];c&&(l.renameScale(c.get("name"),s),c.merged=!0)}}return t}class Jb{constructor(){re(this,"nameMap");this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Ft(e){return(e==null?void 0:e.type)==="unit"}function Jr(e){return(e==null?void 0:e.type)==="facet"}function Y5(e){return(e==null?void 0:e.type)==="concat"}function sd(e){return(e==null?void 0:e.type)==="layer"}class q5{constructor(t,n,r,i,o,s,a){re(this,"type");re(this,"parent");re(this,"config");re(this,"name");re(this,"size");re(this,"title");re(this,"description");re(this,"data");re(this,"transforms");re(this,"layout");re(this,"scaleNameMap");re(this,"projectionNameMap");re(this,"signalNameMap");re(this,"component");re(this,"view");this.type=n,this.parent=r,this.config=o,this.parent=r,this.config=o,this.view=En(a),this.name=t.name??i,this.title=wa(t.title)?{text:t.title}:t.title?En(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Jb,this.projectionNameMap=r?r.projectionNameMap:new Jb,this.signalNameMap=r?r.signalNameMap:new Jb,this.data=t.data,this.description=t.description,this.transforms=zye(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:j1e(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:o2(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Vs,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?We(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Mxe(this)}parseProjection(){oB(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){eB(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of se(r)){const s=r[o];s!==void 0&&(i[o]=At(s))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=At(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:xt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=Zve(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of pi)t[r].title&&n.push(qve(this,r));for(const r of P5)n=n.concat(Vve(this,r));return n}assembleAxes(){return Tve(this.component.axes,this.config)}assembleLegends(){return nB(this)}assembleProjections(){return w2e(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...wU(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Je(["unit","layer"],this.type)?Je(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),xt(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Jr(this.parent)?uB(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return $t((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Tt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Jr(this.parent)){const n=qj(t),r=Vv(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),s=i.get("range");if(vn(o)&&ju(s)){const a=i.get("name"),l=x2(this,r),c=G5(l);if(c){const f=me({aggregate:"distinct",field:c},{expr:"datum"});return{signal:Yj(a,i,f)}}else return fe(B3(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(pU(t)&&ts(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(Wge(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class xB extends q5{vgField(t,n={}){const r=this.fieldDef(t);if(r)return me(r,n)}reduceFieldDef(t,n){return y1e(this.getMapping(),(r,i,o)=>{const s=to(i);return s?t(r,s,o):r},n)}forEachFieldDef(t,n){v5(this.getMapping(),(r,i)=>{const o=to(r);o&&t(o,i)},n)}}class _2 extends mt{constructor(n,r){super(n);re(this,"transform");this.transform=r,this.transform=We(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const o=this.transform.resolve??"shared";this.transform.resolve=o}clone(){return new _2(null,We(this.transform))}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Qe(this.transform)}`}assemble(){const{density:n,...r}=this.transform,i={type:"kde",field:n,...r};return i.resolve=this.transform.resolve,i}}class b2 extends mt{constructor(n,r){super(n);re(this,"transform");this.transform=r,this.transform=We(r)}clone(){return new b2(null,We(this.transform))}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Qe(this.transform)}`}assemble(){const{extent:n,param:r}=this.transform;return{type:"extent",field:n,signal:r}}}class w2 extends mt{constructor(n,r){super(n);re(this,"transform");this.transform=r,this.transform=We(r);const{flatten:i,as:o=[]}=this.transform;this.transform.as=i.map((s,a)=>o[a]??s)}clone(){return new w2(this.parent,We(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Qe(this.transform)}`}assemble(){const{flatten:n,as:r}=this.transform;return{type:"flatten",fields:n,as:r}}}class S2 extends mt{constructor(n,r){super(n);re(this,"transform");this.transform=r,this.transform=We(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}clone(){return new S2(null,We(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Qe(this.transform)}`}assemble(){const{fold:n,as:r}=this.transform;return{type:"fold",fields:n,as:r}}}class Jc extends mt{constructor(n,r,i,o){super(n);re(this,"fields");re(this,"geojson");re(this,"signal");this.fields=r,this.geojson=i,this.signal=o}clone(){return new Jc(null,We(this.fields),this.geojson,this.signal)}static parseAll(n,r){if(r.component.projection&&!r.component.projection.isFit)return n;let i=0;for(const o of[[uo,lo],[Ei,co]]){const s=o.map(a=>{const l=rn(r.encoding[a]);return ce(l)?l.field:ns(l)?{expr:`${l.datum}`}:eo(l)?{expr:`${l.value}`}:void 0});(s[0]||s[1])&&(n=new Jc(n,s,null,r.getName(`geojson_${i++}`)))}if(r.channelHasField(Or)){const o=r.typedFieldDef(Or);o.type===td&&(n=new Jc(n,null,o.field,r.getName(`geojson_${i++}`)))}return n}dependentFields(){const n=(this.fields??[]).filter(xe);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Qe(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Np extends mt{constructor(n,r,i,o){super(n);re(this,"projection");re(this,"fields");re(this,"as");this.projection=r,this.fields=i,this.as=o}clone(){return new Np(null,this.projection,We(this.fields),We(this.as))}static parseAll(n,r){if(!r.projectionName())return n;for(const i of[[uo,lo],[Ei,co]]){const o=i.map(a=>{const l=rn(r.encoding[a]);return ce(l)?l.field:ns(l)?{expr:`${l.datum}`}:eo(l)?{expr:`${l.value}`}:void 0}),s=i[0]===Ei?"2":"";(o[0]||o[1])&&(n=new Np(n,r.projectionName(),o,[r.getName(`x${s}`),r.getName(`y${s}`)]))}return n}dependentFields(){return new Set(this.fields.filter(xe))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Qe(this.fields)} ${Qe(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class su extends mt{constructor(n,r){super(n);re(this,"transform");this.transform=r}clone(){return new su(null,We(this.transform))}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(n){const{start:r=0,stop:i,step:o}=n;return{signal:`sequence(${[r,i,...o?[o]:[]].join(",")})`}}static makeFromTransform(n,r){return new su(n,r)}static makeFromEncoding(n,r){const i=r.encoding,o=i.x,s=i.y;if(ce(o)&&ce(s)){const a=o.impute?o:s.impute?s:void 0;if(a===void 0)return;const l=o.impute?s:s.impute?o:void 0,{method:c,value:f,frame:h,keyvals:p}=a.impute,m=NW(r.mark,i);return new su(n,{impute:a.field,key:l.field,...c?{method:c}:{},...f!==void 0?{value:f}:{},...h?{frame:h}:{},...p!==void 0?{keyvals:p}:{},...m.length?{groupby:m}:{}})}return null}hash(){return`Impute ${Qe(this.transform)}`}assemble(){const{impute:n,key:r,keyvals:i,method:o,groupby:s,value:a,frame:l=[null,null]}=this.transform,c={type:"impute",field:n,key:r,...i?{keyvals:xye(i)?this.processSequence(i):i}:{},method:"value",...s?{groupby:s}:{},value:!o||o==="value"?a:null};if(o&&o!=="value"){const f={type:"window",as:[`imputed_${n}_value`],ops:[o],fields:[n],frame:l,ignorePeers:!1,...s?{groupby:s}:{}},h={type:"formula",expr:`datum.${n} === null ? datum.imputed_${n}_value : datum.${n}`,as:n};return[c,f,h]}else return[c]}}class E2 extends mt{constructor(n,r){super(n);re(this,"transform");this.transform=r,this.transform=We(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??r.on,i[1]??r.loess]}clone(){return new E2(null,We(this.transform))}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Qe(this.transform)}`}assemble(){const{loess:n,on:r,...i}=this.transform;return{type:"loess",x:r,y:n,...i}}}class Op extends mt{constructor(n,r,i){super(n);re(this,"transform");re(this,"secondary");this.transform=r,this.secondary=i}clone(){return new Op(null,We(this.transform),this.secondary)}static make(n,r,i,o){const s=r.component.data.sources,{from:a}=i;let l=null;if(_ye(a)){let c=wB(a.data,s);c||(c=new Mu(a.data),s.push(c));const f=r.getName(`lookup_${o}`);l=new Cr(c,f,Tt.Lookup,r.component.data.outputNodeRefCounts),r.component.data.outputNodes[f]=l}else if(bye(a)){const c=a.param;i={as:c,...i};let f;try{f=r.getSelectionComponent($t(c),c)}catch{throw new Error(Gge(c))}if(l=f.materialized,!l)throw new Error(Yge(c))}return new Op(n,i,l.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?_e(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Qe({transform:this.transform,secondary:this.secondary})}`}assemble(){let n;if(this.transform.from.fields)n={values:this.transform.from.fields,...this.transform.as?{as:_e(this.transform.as)}:{}};else{let r=this.transform.as;xe(r)||(fe(r0e),r="_lookup"),n={as:[r]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...n,...this.transform.default?{default:this.transform.default}:{}}}}class A2 extends mt{constructor(n,r){super(n);re(this,"transform");this.transform=r,this.transform=We(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}clone(){return new A2(null,We(this.transform))}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Qe(this.transform)}`}assemble(){const{quantile:n,...r}=this.transform;return{type:"quantile",field:n,...r}}}class C2 extends mt{constructor(n,r){super(n);re(this,"transform");this.transform=r,this.transform=We(r);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??r.on,i[1]??r.regression]}clone(){return new C2(null,We(this.transform))}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Qe(this.transform)}`}assemble(){const{regression:n,on:r,...i}=this.transform;return{type:"regression",x:r,y:n,...i}}}class k2 extends mt{constructor(n,r){super(n);re(this,"transform");this.transform=r}clone(){return new k2(null,We(this.transform))}addDimensions(n){this.transform.groupby=ko((this.transform.groupby??[]).concat(n),r=>r)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Qe(this.transform)}`}assemble(){const{pivot:n,value:r,groupby:i,limit:o,op:s}=this.transform;return{type:"pivot",field:n,value:r,...o!==void 0?{limit:o}:{},...s!==void 0?{op:s}:{},...i!==void 0?{groupby:i}:{}}}}class $2 extends mt{constructor(n,r){super(n);re(this,"transform");this.transform=r}clone(){return new $2(null,We(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Qe(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function _B(e){let t=0;function n(r,i){if(r instanceof Mu&&!r.isGenerator&&!$f(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Bn&&(r.parent instanceof Mu&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof id){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof Eg||r instanceof Ag||r instanceof Ff||r instanceof rd||r instanceof Nf||r instanceof Np||r instanceof Xi||r instanceof Op||r instanceof od||r instanceof qu||r instanceof S2||r instanceof w2||r instanceof _2||r instanceof E2||r instanceof A2||r instanceof C2||r instanceof Za||r instanceof $2||r instanceof k2||r instanceof b2)&&i.transform.push(r.assemble()),(r instanceof To||r instanceof Do||r instanceof su||r instanceof Fs||r instanceof Jc)&&i.transform.push(...r.assemble()),r instanceof Cr&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Cr?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Cr&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const s of r.children)n(s,{name:null,source:o,transform:[]});break}}}return n}function Fxe(e){const t=[],n=_B(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Txe(e,t){const n=[],r=_B(n);let i=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${i++}`);const a=s.assemble();r(s,a)}for(const s of n)s.transform.length===0&&delete s.transform;let o=0;for(const[s,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(o++,0,n.splice(s,1)[0]);for(const s of n)for(const a of s.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function Rxe(e){return e==="top"||e==="left"||Me(e)?"header":"footer"}function Lxe(e){for(const t of pi)Pxe(e,t);n6(e,"x"),n6(e,"y")}function Pxe(e,t){var s;const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],l=Df("title",null,r,t);let c=Vc(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(c=ne(c)?c.join(", "):c,c+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const f=Df("labelOrient",a.header,r,t),h=a.header!==null?Gt((s=a.header)==null?void 0:s.labels,r.header.labels,!0):!1,p=Je(["bottom","right"],f)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?c:null,facetFieldDef:a,[p]:t==="facet"?[]:[bB(e,t,h)]}}}function bB(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function n6(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=U5(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",s=r[o];for(const a of n.component.axes[t]){const l=Rxe(a.get("orient"));s[l]??(s[l]=[bB(e,o,!1)]);const c=Wh(a,"main",e.config,{header:!0});c&&s[l][0].axes.push(c),a.mainExtracted=!0}}}}function zxe(e){V5(e),Sy(e,"width"),Sy(e,"height")}function Ixe(e){V5(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Sy(e,t),Sy(e,n)}function V5(e){for(const t of e.children)t.parseLayoutSize()}function Sy(e,t){const n=qj(t),r=Vv(n),i=e.component.resolve,o=e.component.layoutSize;let s;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),c=i.scale[r]??Xj(r,e);if(c==="independent"&&l.value==="step"){s=void 0;break}if(s){if(c==="independent"&&s.value!==l.value){s=void 0;break}s=Ka(s,l,n,"")}else s=l}if(s){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,s)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function Uxe(e){const{size:t,component:n}=e;for(const r of Ys){const i=Dr(r);if(t[i]!=null&&t[i]!=null){const o=t[i];n.layoutSize.set(i,Bo(o)?"step":o,!0)}else{const o=Wxe(e,i);n.layoutSize.set(i,o,!1)}}}function Wxe(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),s=i.get("range");if(vn(o)){const a=xy(r.view,t);return ju(s)||Bo(a)?"step":a}else return fE(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return fE(r.view,t);{const o=xy(r.view,t);return Bo(o)?o.step:o}}}function ME(e,t,n){return me(t,{suffix:`by_${me(e)}`,...n})}class np extends xB{constructor(n,r,i,o){super(n,"facet",r,i,o,n.resolve);re(this,"facet");re(this,"child");re(this,"children");this.child=Z5(n.spec,this,this.getName("child"),void 0,o),this.children=[this.child],this.facet=this.initFacet(n.facet)}initFacet(n){if(!vg(n))return{facet:this.initFacetFieldDef(n,"facet")};const r=se(n),i={};for(const o of r){if(![Ms,Ns].includes(o)){fe(Qv(o,"facet"));break}const s=n[o];if(s.field===void 0){fe(sE(s,o));break}i[o]=this.initFacetFieldDef(s,o)}return i}initFacetFieldDef(n,r){const i=y5(n,r);return i.header?i.header=En(i.header):i.header===null&&(i.header=null),i}channelHasField(n){return ae(this.facet,n)}fieldDef(n){return this.facet[n]}parseData(){this.component.data=M2(this),this.child.parseData()}parseLayoutSize(){V5(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Xt(this.component.selection).some(n=>Fo(n))&&G3(H3)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Lxe(this)}assembleSelectionTopLevelSignals(n){return this.child.assembleSelectionTopLevelSignals(n)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(n){return this.child.assembleSelectionData(n)}getHeaderLayoutMixins(){const n={};for(const r of pi)for(const i of z5){const o=this.component.layoutHeaders[r],s=o[i],{facetFieldDef:a}=o;if(a){const l=Df("titleOrient",a.header,this.config,r);if(["right","bottom"].includes(l)){const c=y2(r,l);n.titleAnchor??(n.titleAnchor={}),n.titleAnchor[c]="end"}}if(s!=null&&s[0]){const l=r==="row"?"height":"width",c=i==="header"?"headerBand":"footerBand";r!=="facet"&&!this.child.component.layoutSize.get(l)&&(n[c]??(n[c]={}),n[c][r]=.5),o.title&&(n.offset??(n.offset={}),n.offset[r==="row"?"rowTitle":"columnTitle"]=10)}}return n}assembleDefaultLayout(){const{column:n,row:r}=this.facet,i=n?this.columnDistinctSignal():r?1:void 0;let o="all";return(!r&&this.component.resolve.scale.x==="independent"||!n&&this.component.resolve.scale.y==="independent")&&(o="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:o}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof np))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(n){return this.parent&&this.parent instanceof np?{...this.channelHasField("column")?{encode:{update:{columns:{field:me(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(n)}:super.assembleGroup(n)}getCardinalityAggregateForChild(){const n=[],r=[],i=[];if(this.child instanceof np){if(this.child.channelHasField("column")){const o=me(this.child.facet.column);n.push(o),r.push("distinct"),i.push(`distinct_${o}`)}}else for(const o of Ys){const s=this.child.component.scales[o];if(s&&!s.merged){const a=s.get("type"),l=s.get("range");if(vn(a)&&ju(l)){const c=x2(this.child,o),f=G5(c);f?(n.push(f),r.push("distinct"),i.push(`distinct_${f}`)):fe(B3(o))}}}return{fields:n,ops:r,as:i}}assembleFacet(){const{name:n,data:r}=this.component.data.facetRoot,{row:i,column:o}=this.facet,{fields:s,ops:a,as:l}=this.getCardinalityAggregateForChild(),c=[];for(const h of pi){const p=this.facet[h];if(p){c.push(me(p));const{bin:m,sort:y}=p;if(bt(m)&&c.push(me(p,{binSuffix:"end"})),Os(y)){const{field:v,op:_=i2}=y,b=ME(p,y);i&&o?(s.push(b),a.push("max"),l.push(b)):(s.push(v),a.push(_),l.push(b))}else if(ne(y)){const v=Of(p,h);s.push(v),a.push("max"),l.push(v)}}}const f=!!i&&!!o;return{name:n,data:r,groupby:c,...f||s.length>0?{aggregate:{...f?{cross:f}:{},...s.length?{fields:s,ops:a,as:l}:{}}}:{}}}facetSortFields(n){const{facet:r}=this,i=r[n];return i?Os(i.sort)?[ME(i,i.sort,{expr:"datum"})]:ne(i.sort)?[Of(i,n,{expr:"datum"})]:[me(i,{expr:"datum"})]:[]}facetSortOrder(n){const{facet:r}=this,i=r[n];if(i){const{sort:o}=i;return[(Os(o)?o.order:!ne(o)&&o)||"ascending"]}return[]}assembleLabelTitle(){var o;const{facet:n,config:r}=this;if(n.facet)return wE(n.facet,"facet",r);const i={row:["top","bottom"],column:["left","right"]};for(const s of P5)if(n[s]){const a=Df("labelOrient",(o=n[s])==null?void 0:o.header,r,s);if(i[s].includes(a))return wE(n[s],s,r)}}assembleMarks(){const{child:n}=this,r=this.component.data.facetRoot,i=Fxe(r),o=n.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||n.assembleTitle(),a=n.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...a?{style:a}:{},from:{facet:this.assembleFacet()},sort:{field:pi.map(c=>this.facetSortFields(c)).flat(),order:pi.map(c=>this.facetSortOrder(c)).flat()},...i.length>0?{data:i}:{},...o?{encode:{update:o}}:{},...n.assembleGroup(rve(this,[]))}]}getMapping(){return this.facet}}function jxe(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(Os(o.sort)){const{field:s,op:a=i2}=o.sort;e=i=new qu(e,{joinaggregate:[{op:a,field:s,as:ME(o,o.sort,{forAs:!0})}],groupby:[me(o)]})}return i}return null}function wB(e,t){var n,r,i,o;for(const s of t){const a=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,c=(r=a.format)==null?void 0:r.feature;if(l&&c)continue;const f=(i=e.format)==null?void 0:i.feature;if((f||c)&&f!==c)continue;const h=(o=a.format)==null?void 0:o.mesh;if(!((l||h)&&l!==h)){if(Mp(e)&&Mp(a)){if(Gr(e.values,a.values))return s}else if($f(e)&&$f(a)){if(e.url===a.url)return s}else if(aj(e)&&e.name===s.dataName)return s}}return null}function Bxe(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Mu({values:[]});return t.push(r),r}const n=wB(e.data,t);if(n)return za(e.data)||(n.data.format=tU({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Mu(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Hxe(e,t,n){let r=0;for(const i of t.transforms){let o,s;if(Oye(i))s=e=new Nf(e,i),o="derived";else if(M5(i)){const a=R2e(i);s=e=Bn.makeWithAncestors(e,{},a,n)??e,e=new rd(e,t,i.filter)}else if(nj(i))s=e=To.makeFromTransform(e,i,t),o="number";else if(Fye(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new Bn(e,{[i.field]:o}),n.set(i.field,o,!1)),s=e=Do.makeFromTransform(e,i);else if(Tye(i))s=e=Xi.makeFromTransform(e,i),o="number",L5(t)&&(e=new Za(e));else if(tj(i))s=e=Op.make(e,t,i,r++),o="derived";else if($ye(i))s=e=new od(e,i),o="number";else if(Mye(i))s=e=new qu(e,i),o="number";else if(Rye(i))s=e=Fs.makeFromTransform(e,i),o="derived";else if(Lye(i))s=e=new S2(e,i),o="derived";else if(Pye(i))s=e=new b2(e,i),o="derived";else if(Nye(i))s=e=new w2(e,i),o="derived";else if(wye(i))s=e=new k2(e,i),o="derived";else if(kye(i))e=new $2(e,i);else if(Dye(i))s=e=su.makeFromTransform(e,i),o="derived";else if(Sye(i))s=e=new _2(e,i),o="derived";else if(Eye(i))s=e=new A2(e,i),o="derived";else if(Aye(i))s=e=new C2(e,i),o="derived";else if(Cye(i))s=e=new E2(e,i),o="derived";else{fe(n0e(i));continue}if(s&&o!==void 0)for(const a of s.producedFields()??[])n.set(a,o,!1)}return e}function M2(e){var _;let t=Bxe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,s=!(i&&(za(i)||$f(i)||Mp(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Xye;za(i)?(lj(i)?t=new Ag(t,i.sequence):N5(i)&&(t=new Eg(t,i.graticule)),s.parseNothing=!0):((_=i==null?void 0:i.format)==null?void 0:_.parse)===null&&(s.parseNothing=!0),t=Bn.makeExplicit(t,e,s)??t,t=new Za(t);const a=e.parent&&sd(e.parent);(Ft(e)||Jr(e))&&a&&(t=To.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Hxe(t,e,s));const l=P2e(e),c=L2e(e);t=Bn.makeWithAncestors(t,{},{...l,...c},s)??t,Ft(e)&&(t=Jc.parseAll(t,e),t=Np.parseAll(t,e)),(Ft(e)||Jr(e))&&(a||(t=To.makeFromEncoding(t,e)??t),t=Do.makeFromEncoding(t,e)??t,t=Nf.parseAllForSortIndex(t,e));const f=t=pm(Tt.Raw,e,t);if(Ft(e)){const b=Xi.makeFromEncoding(t,e);b&&(t=b,L5(e)&&(t=new Za(t))),t=su.makeFromEncoding(t,e)??t,t=Fs.makeFromEncoding(t,e)??t}let h,p;if(Ft(e)){const{markDef:b,mark:S,config:A}=e,C=ft("invalid",b,A),{marks:k,scales:N}=p=cj({invalid:C,isPath:pl(S)});k!==N&&N==="include-invalid-values"&&(h=t=pm(Tt.PreFilterInvalid,e,t)),k==="exclude-invalid-values"&&(t=Ff.make(t,e,p)??t)}const m=t=pm(Tt.Main,e,t);let y;if(Ft(e)&&p){const{marks:b,scales:S}=p;b==="include-invalid-values"&&S==="exclude-invalid-values"&&(t=Ff.make(t,e,p)??t,y=t=pm(Tt.PostFilterInvalid,e,t))}Ft(e)&&Dve(e,m);let v=null;if(Jr(e)){const b=e.getName("facet");t=jxe(t,e.facet)??t,v=new id(t,e,b,m.getSource()),n[b]=v}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:m,facetRoot:v,ancestorParse:s,preFilterInvalid:h,postFilterInvalid:y}}function pm(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,o=t.getDataName(e),s=new Cr(n,o,e,i);return r[o]=s,s}class Gxe extends q5{constructor(n,r,i,o){var s,a,l,c;super(n,"concat",r,i,o,n.resolve);re(this,"children");(((a=(s=n.resolve)==null?void 0:s.axis)==null?void 0:a.x)==="shared"||((c=(l=n.resolve)==null?void 0:l.axis)==null?void 0:c.y)==="shared")&&fe(Zge),this.children=this.getChildren(n).map((f,h)=>Z5(f,this,this.getName(`concat_${h}`),void 0,o))}parseData(){this.component.data=M2(this);for(const n of this.children)n.parseData()}parseSelections(){this.component.selection={};for(const n of this.children){n.parseSelections();for(const r of se(n.component.selection))this.component.selection[r]=n.component.selection[r]}Xt(this.component.selection).some(n=>Fo(n))&&G3(H3)}parseMarkGroup(){for(const n of this.children)n.parseMarkGroup()}parseAxesAndHeaders(){for(const n of this.children)n.parseAxesAndHeaders()}getChildren(n){return f2(n)?n.vconcat:k5(n)?n.hconcat:n.concat}parseLayoutSize(){Ixe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(n){return this.children.reduce((r,i)=>i.assembleSelectionTopLevelSignals(r),n)}assembleSignals(){return this.children.forEach(n=>n.assembleSignals()),[]}assembleLayoutSignals(){const n=I5(this);for(const r of this.children)n.push(...r.assembleLayoutSignals());return n}assembleSelectionData(n){return this.children.reduce((r,i)=>i.assembleSelectionData(r),n)}assembleMarks(){return this.children.map(n=>{const r=n.assembleTitle(),i=n.assembleGroupStyle(),o=n.assembleGroupEncodeEntry(!1);return{type:"group",name:n.getName("group"),...r?{title:r}:{},...i?{style:i}:{},...o?{encode:{update:o}}:{},...n.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const n=this.layout.columns;return{...n!=null?{columns:n}:{},bounds:"full",align:"each"}}}function Yxe(e){return e===!1||e===null}const qxe={disable:1,gridScale:1,scale:1,...EW,labelExpr:1,encode:1},SB=se(qxe);class X5 extends Vs{constructor(n={},r={},i=!1){super();re(this,"explicit");re(this,"implicit");re(this,"mainExtracted");this.explicit=n,this.implicit=r,this.mainExtracted=i}clone(){return new X5(We(this.explicit),We(this.implicit),this.mainExtracted)}hasAxisPart(n){return n==="axis"?!0:n==="grid"||n==="title"?!!this.get(n):!Yxe(this.get(n))}hasOrientSignalRef(){return Me(this.explicit.orient)}}function Vxe(e,t,n){const{encoding:r,config:i}=e,o=rn(r[t])??rn(r[es(t)]),s=e.axis(t)||{},{format:a,formatType:l}=s;if(Cu(l))return{text:qi({fieldOrDatumDef:o,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(Af(o)==="quantitative"){if(Cf(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:qi({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:qi({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Af(o)==="temporal"&&i.timeFormatType&&ce(o)&&!o.timeUnit)return{text:qi({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Xxe(e){return Ys.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[n_e(n,e)]),t),{})}const Jxe={bottom:"top",top:"bottom",left:"right",right:"left"};function Qxe(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of se(i.component.axes))n.axis[o]=U5(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=Kxe(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of Ys){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const s of o.component.axes[i]){const{value:a,explicit:l}=s.getWithExplicit("orient");if(!Me(a)){if(r[a]>0&&!l){const c=Jxe[a];r[a]>r[c]&&s.set("orient",c,!1)}r[a]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[o,s]of(t[i]||[]).entries())o>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function Kxe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const s=i.getWithExplicit("orient"),a=o.getWithExplicit("orient");if(s.explicit&&a.explicit&&s.value!==a.value)return;e[r]=Zxe(i,o)}}}else return t.map(n=>n.clone());return e}function Zxe(e,t){for(const n of SB){const r=Ka(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return MU(i,o);case"gridScale":return{explicit:i.explicit,value:Gt(i.value,o.value)}}return h2(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function e_e(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Me(n.labelAngle)?n.labelAngle:kp(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===jj(r,i))return!0}return e===n[t]}const t_e=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function n_e(e,t){var b,S;let n=t.axis(e);const r=new X5,i=rn(t.encoding[e]),{mark:o,config:s}=t,a=(n==null?void 0:n.orient)||((b=s[e==="x"?"axisX":"axisY"])==null?void 0:b.orient)||((S=s.axis)==null?void 0:S.orient)||jve(e),l=t.getScaleComponent(e).get("type"),c=Rve(e,l,a,t.config),f=n!==void 0?!n:_E("disable",s.style,n==null?void 0:n.style,c).configValue;if(r.set("disable",f,n!==void 0),f)return r;n=n||{};const h=Ive(i,n,e,s.style,c),p=cW(n.formatType,i,l),m=uW(i,i.type,n.format,n.formatType,s,!0),y={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:h,format:m,formatType:p,mark:o,config:s};for(const A of SB){const C=A in j8?j8[A](y):g8(A)?n[A]:void 0,k=C!==void 0,N=e_e(C,A,n,t,e);if(k&&N)r.set(A,C,N);else{const{configValue:$=void 0,configFrom:O=void 0}=g8(A)&&A!=="values"?_E(A,s.style,n.style,c):{},D=$!==void 0;k&&!D?r.set(A,C,N):(O!=="vgAxisConfig"||t_e.has(A)&&D||wg($)||Me($))&&r.set(A,$,!1)}}const v=n.encoding??{},_=SW.reduce((A,C)=>{if(!r.hasAxisPart(C))return A;const k=Vj(v[C]??{},t),N=C==="labels"?Vxe(t,e,k):k;return N!==void 0&&!xt(N)&&(A[C]={update:N}),A},{});return xt(_)||r.set("encode",_,!!n.encoding||n.labelAngle!==void 0),r}function r_e({encoding:e,size:t}){for(const n of Ys){const r=Dr(n);Bo(t[r])&&Da(e[n])&&(delete t[r],fe(TU(r)))}return t}const i_e={vgMark:"arc",encodeEntry:e=>({...ki(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ar("x",e,{defaultPos:"mid"}),...ar("y",e,{defaultPos:"mid"}),...zs(e,"radius"),...zs(e,"theta")})},o_e={vgMark:"area",encodeEntry:e=>({...ki(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),..._y("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),..._y("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...R5(e)})},s_e={vgMark:"rect",encodeEntry:e=>({...ki(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...zs(e,"x"),...zs(e,"y")})},a_e={vgMark:"shape",encodeEntry:e=>({...ki(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&ce(n)&&n.type===td?{field:me(n,{expr:"datum"})}:{}}]}},l_e={vgMark:"image",encodeEntry:e=>({...ki(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...zs(e,"x"),...zs(e,"y"),...D5(e,"url")})},u_e={vgMark:"line",encodeEntry:e=>({...ki(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ar("x",e,{defaultPos:"mid"}),...ar("y",e,{defaultPos:"mid"}),...Cn("size",e,{vgChannel:"strokeWidth"}),...R5(e)})},c_e={vgMark:"trail",encodeEntry:e=>({...ki(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ar("x",e,{defaultPos:"mid"}),...ar("y",e,{defaultPos:"mid"}),...Cn("size",e),...R5(e)})};function J5(e,t){const{config:n}=e;return{...ki(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ar("x",e,{defaultPos:"mid"}),...ar("y",e,{defaultPos:"mid"}),...Cn("size",e),...Cn("angle",e),...f_e(e,n,t)}}function f_e(e,t,n){return n?{shape:{value:n}}:Cn("shape",e)}const d_e={vgMark:"symbol",encodeEntry:e=>J5(e)},h_e={vgMark:"symbol",encodeEntry:e=>J5(e,"circle")},p_e={vgMark:"symbol",encodeEntry:e=>J5(e,"square")},g_e={vgMark:"rect",encodeEntry:e=>({...ki(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...zs(e,"x"),...zs(e,"y")})},m_e={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...ki(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),..._y("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),..._y("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Cn("size",e,{vgChannel:"strokeWidth"})}}},y_e={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...ki(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ar("x",e,{defaultPos:"mid"}),...ar("y",e,{defaultPos:"mid"}),...D5(e),...Cn("size",e,{vgChannel:"fontSize"}),...Cn("angle",e),...z8("align",v_e(e.markDef,n,t)),...z8("baseline",x_e(e.markDef,n,t)),...ar("radius",e,{defaultPos:null}),...ar("theta",e,{defaultPos:null})}}};function v_e(e,t,n){if(ft("align",e,n)===void 0)return"center"}function x_e(e,t,n){if(ft("baseline",e,n)===void 0)return"middle"}const __e={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",o=r==="horizontal"?"y":"x",s=r==="horizontal"?"height":"width";return{...ki(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...zs(e,i),...ar(o,e,{defaultPos:"mid",vgChannel:o==="y"?"yc":"xc"}),[s]:At(ft("thickness",n,t))}}},gm={arc:i_e,area:o_e,bar:s_e,circle:h_e,geoshape:a_e,image:l_e,line:u_e,point:d_e,rect:g_e,rule:m_e,square:p_e,text:y_e,tick:__e,trail:c_e};function b_e(e){if(Je([n2,e2,Mme],e.mark)){const t=NW(e.mark,e.encoding);if(t.length>0)return w_e(e,t)}else if(e.mark===t2){const t=iE.some(n=>ft(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return S_e(e)}return Q5(e)}const r6="faceted_path_";function w_e(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:r6+e.requestDataName(Tt.Main),data:e.requestDataName(Tt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Q5(e,{fromPrefix:r6})}]}const i6="stack_group_";function S_e(e){var c;const[t]=Q5(e,{fromPrefix:i6}),n=e.scaleName(e.stack.fieldChannel),r=(f={})=>e.vgField(e.stack.fieldChannel,f),i=(f,h)=>{const p=[r({prefix:"min",suffix:"start",expr:h}),r({prefix:"max",suffix:"start",expr:h}),r({prefix:"min",suffix:"end",expr:h}),r({prefix:"max",suffix:"end",expr:h})];return`${f}(${p.map(m=>`scale('${n}',${m})`).join(",")})`};let o,s;e.stack.fieldChannel==="x"?(o={...xf(t.encode.update,["y","yc","y2","height",...iE]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Xr(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...xf(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Xr(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const f of iE){const h=Wo(f,e.markDef,e.config);t.encode.update[f]?(o[f]=t.encode.update[f],delete t.encode.update[f]):h&&(o[f]=At(h)),h&&(t.encode.update[f]={value:0})}const a=[];if(((c=e.stack.groupbyChannels)==null?void 0:c.length)>0)for(const f of e.stack.groupbyChannels){const h=e.fieldDef(f),p=me(h);p&&a.push(p),(h!=null&&h.bin||h!=null&&h.timeUnit)&&a.push(me(h,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,h)=>{if(t.encode.update[h])return{...f,[h]:t.encode.update[h]};{const p=Wo(h,e.markDef,e.config);return p!==void 0?{...f,[h]:At(p)}:f}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Tt.Main),name:i6+e.requestDataName(Tt.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function E_e(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,s=t.order;if(!(!ne(s)&&eo(s)&&nE(s.value)||!s&&nE(ft("order",i,o)))){if((ne(s)||ce(s))&&!n)return CU(s,{expr:"datum"});if(pl(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(ce(l))return{field:a}}}}function Q5(e,t={fromPrefix:""}){var m;const{mark:n,markDef:r,encoding:i,config:o}=e,s=Gt(r.clip,A_e(e),C_e(e)),a=EU(r),l=i.key,c=E_e(e),f=k_e(e);f&&Object.values(e.component.selection).some(y=>y.type==="point"&&!y.bind&&y.on!=="pointerover")&&((m=e.markDef).cursor??(m.cursor="pointer"));const h=ft("aria",r,o),p=gm[n].postEncodingTransform?gm[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:gm[n].vgMark,...s?{clip:s}:{},...a?{style:a}:{},...l?{key:l.field}:{},...c?{sort:c}:{},...f||{},...h===!1?{aria:h}:{},from:{data:t.fromPrefix+e.requestDataName(Tt.Main)},encode:{update:gm[n].encodeEntry(e)},...p?{transform:p}:{}}]}function A_e(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function C_e(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function k_e(e){if(!e.component.selection)return null;const t=se(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=se(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class EB extends xB{constructor(n,r,i,o={},s){super(n,"unit",r,i,s,void 0,y8(n)?n.view:void 0);re(this,"markDef");re(this,"encoding");re(this,"specifiedScales",{});re(this,"stack");re(this,"specifiedAxes",{});re(this,"specifiedLegends",{});re(this,"specifiedProjection",{});re(this,"selection",[]);re(this,"children",[]);re(this,"correctDataNames",n=>{var r,i,o;return(r=n.from)!=null&&r.data&&(n.from.data=this.lookupDataSource(n.from.data),"time"in this.encoding&&(n.from.data=n.from.data+dj)),(o=(i=n.from)==null?void 0:i.facet)!=null&&o.data&&(n.from.facet.data=this.lookupDataSource(n.from.facet.data)),n});const a=jo(n.mark)?{...n.mark}:{type:n.mark},l=a.type;a.filled===void 0&&(a.filled=fye(a,s,{graticule:n.data&&N5(n.data)}));const c=this.encoding=g1e(n.encoding||{},l,a.filled,s);this.markDef=QW(a,c,s),this.size=r_e({encoding:c,size:y8(n)?{...o,...n.width!==void 0?{width:n.width}:{},...n.height!==void 0?{height:n.height}:{}}:o}),this.stack=JW(this.markDef,c),this.specifiedScales=this.initScales(l,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegends(c),this.specifiedProjection=n.projection,this.selection=(n.params??[]).filter(f=>A5(f)),this.alignStackOrderWithColorDomain()}get hasProjection(){const{encoding:n}=this,r=this.mark===nW,i=n&&age.some(o=>je(n[o]));return r||i}scaleDomain(n){const r=this.specifiedScales[n];return r?r.domain:void 0}axis(n){return this.specifiedAxes[n]}legend(n){return this.specifiedLegends[n]}initScales(n,r){return U3.reduce((i,o)=>{const s=rn(r[o]);return s&&(i[o]=this.initScale(s.scale??{})),i},{})}initScale(n){const{domain:r,range:i}=n,o=En(n);return ne(r)&&(o.domain=r.map(Br)),ne(i)&&(o.range=i.map(Br)),o}initAxes(n){return Ys.reduce((r,i)=>{const o=n[i];if(je(o)||i===Mt&&je(n.x2)||i===_n&&je(n.y2)){const s=je(o)?o.axis:void 0;r[i]=s&&this.initAxis({...s})}return r},{})}initAxis(n){const r=se(n),i={};for(const o of r){const s=n[o];i[o]=wg(s)?SU(s):Br(s)}return i}initLegends(n){return vge.reduce((r,i)=>{const o=rn(n[i]);if(o&&_ge(i)){const s=o.legend;r[i]=s&&En(s)}return r},{})}alignStackOrderWithColorDomain(){var _;const{color:n,fill:r,order:i,xOffset:o,yOffset:s}=this.encoding,a=r||n,l=ce(a)?a:void 0,c=l==null?void 0:l.field,f=l==null?void 0:l.scale,h=l==null?void 0:l.type,p=f==null?void 0:f.domain,m=o||s,y=ce(m)?m:void 0,v=`_${c}_sort_index`;if(!i&&Array.isArray(p)&&typeof c=="string"&&h==="nominal")if(y&&!y.sort)y.sort=p;else{if(!this.stack)return;const b=`indexof(${he(p)}, datum['${c}'])`,S=((_=this.markDef)==null?void 0:_.orient)==="horizontal"?"ascending":"descending";this.transforms.push({calculate:b,as:v}),this.encoding.order={field:v,type:"quantitative",sort:S}}}parseData(){this.component.data=M2(this)}parseLayoutSize(){Uxe(this)}parseSelections(){this.component.selection=Ove(this,this.selection)}parseMarkGroup(){this.component.mark=b_e(this)}parseAxesAndHeaders(){this.component.axes=Xxe(this)}assembleSelectionTopLevelSignals(n){return ive(this,n)}assembleSignals(){return[...Ij(this),...nve(this,[])]}assembleSelectionData(n){return ove(this,n)}assembleLayout(){return null}assembleLayoutSignals(){return I5(this)}assembleMarks(){let n=this.component.mark??[];return(!this.parent||!sd(this.parent))&&(n=mj(this,n)),n.map(this.correctDataNames)}assembleGroupStyle(){const{style:n}=this.view||{};return n!==void 0?n:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(n){return iu(this.encoding,n)}fieldDef(n){const r=this.encoding[n];return to(r)}typedFieldDef(n){const r=this.fieldDef(n);return dr(r)?r:null}}class K5 extends q5{constructor(n,r,i,o,s){super(n,"layer",r,i,s,n.resolve,n.view);re(this,"children");const a={...o,...n.width?{width:n.width}:{},...n.height?{height:n.height}:{}};this.children=n.layer.map((l,c)=>{if(d2(l))return new K5(l,this,this.getName(`layer_${c}`),a,s);if(qs(l))return new EB(l,this,this.getName(`layer_${c}`),a,s);throw new Error(j3(l))})}parseData(){this.component.data=M2(this);for(const n of this.children)n.parseData()}parseLayoutSize(){zxe(this)}parseSelections(){this.component.selection={};for(const n of this.children){n.parseSelections();for(const r of se(n.component.selection))this.component.selection[r]=n.component.selection[r]}Xt(this.component.selection).some(n=>Fo(n))&&G3(H3)}parseMarkGroup(){for(const n of this.children)n.parseMarkGroup()}parseAxesAndHeaders(){Qxe(this)}assembleSelectionTopLevelSignals(n){return this.children.reduce((r,i)=>i.assembleSelectionTopLevelSignals(r),n)}assembleSignals(){return this.children.reduce((n,r)=>n.concat(r.assembleSignals()),Ij(this))}assembleLayoutSignals(){return this.children.reduce((n,r)=>n.concat(r.assembleLayoutSignals()),I5(this))}assembleSelectionData(n){return this.children.reduce((r,i)=>i.assembleSelectionData(r),n)}assembleGroupStyle(){const n=new Set;for(const i of this.children)for(const o of _e(i.assembleGroupStyle()))n.add(o);const r=Array.from(n);return r.length>1?r:r.length===1?r[0]:void 0}assembleTitle(){let n=super.assembleTitle();if(n)return n;for(const r of this.children)if(n=r.assembleTitle(),n)return n}assembleLayout(){return null}assembleMarks(){return sve(this,this.children.flatMap(n=>n.assembleMarks()))}assembleLegends(){return this.children.reduce((n,r)=>n.concat(r.assembleLegends()),nB(this))}}function Z5(e,t,n,r,i){if(o2(e))return new np(e,t,n,i);if(d2(e))return new K5(e,t,n,r,i);if(qs(e))return new EB(e,t,n,r,i);if(I1e(e))return new Gxe(e,t,n,i);throw new Error(j3(e))}function $_e(e,t={}){t.logger&&B0e(t.logger),t.fieldTitle&&_W(t.fieldTitle);try{const n=XW(Lf(t.config,e.config)),r=oj(e,n),i=Z5(r,null,"",void 0,n);return i.parse(),K2e(i.component.data,i),{spec:N_e(i,M_e(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&H0e(),t.fieldTitle&&s1e()}}function M_e(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):xe(t)&&(t={type:t}),i&&o&&Yye(t.type)){if(i==="step"&&o==="step")fe(t8()),t.type="pad";else if(i==="step"||o==="step"){const s=i==="step"?"width":"height";fe(t8(Vv(s)));const a=s==="width"?"height":"width";t.type=qye(a)}}return{...se(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...M8(n,!1),...M8(e,!0)}}function N_e(e,t,n={},r){const i=e.config?Z1e(e.config):void 0,o=Txe(e.component.data,n),s=e.assembleSelectionData(o),a=e.assembleProjections(),l=e.assembleTitle(),c=e.assembleGroupStyle(),f=e.assembleGroupEncodeEntry(!0);let h=e.assembleLayoutSignals();h=h.filter(y=>(y.name==="width"||y.name==="height")&&y.value!==void 0?(t[y.name]=+y.value,!1):!0);const{params:p,...m}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...m,...l?{title:l}:{},...c?{style:c}:{},...f?{encode:{update:f}}:{},data:s,...a.length>0?{projections:a}:{},...e.assembleGroup([...h,...e.assembleSelectionTopLevelSignals([]),...GW(p)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const O_e=tge.version,D_e=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:bf,accessPathWithDatum:D3,accessWithDatumToUnescapedPath:pt,compile:$_e,contains:Je,deepEqual:Gr,deleteNestedProperty:cy,duplicate:We,entries:Xa,every:M3,fieldIntersection:O3,flatAccessWithDatum:rU,getFirstDefined:Gt,hasIntersection:N3,hasProperty:ae,hash:Qe,internalField:aU,isBoolean:Cp,isEmpty:xt,isEqual:rge,isInternalField:lU,isNullOrFalse:nE,isNumeric:jv,keys:se,logicalExpr:ep,mergeDeep:tU,never:eU,normalize:oj,normalizeAngle:kp,omit:Xr,pick:xf,prefixGenerator:rE,removePathFromField:Zf,replaceAll:_u,replacePathInField:Si,resetIdCounter:oge,setEqual:nU,some:_f,stringify:dt,titleCase:fg,unescapeSingleQuoteAndPathDot:iU,unique:ko,uniqueId:sU,vals:Xt,varName:$t,version:O_e},Symbol.toStringTag,{value:"Module"}));function AB(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var F_e="3.0.0",T_e={version:F_e};const Nc="#fff",o6="#888",R_e={background:"#333",view:{stroke:o6},title:{color:Nc,subtitleColor:Nc},style:{"guide-label":{fill:Nc},"guide-title":{fill:Nc}},axis:{domainColor:Nc,gridColor:o6,tickColor:Nc}},Dl="#4572a7",L_e={background:"#fff",arc:{fill:Dl},area:{fill:Dl},line:{stroke:Dl,strokeWidth:2},path:{stroke:Dl},rect:{fill:Dl},shape:{stroke:Dl},symbol:{fill:Dl,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Fl="#30a2da",Qb="#cbcbcb",P_e="#999",z_e="#333",s6="#f0f0f0",a6="#333",I_e={arc:{fill:Fl},area:{fill:Fl},axis:{domainColor:Qb,grid:!0,gridColor:Qb,gridWidth:1,labelColor:P_e,labelFontSize:10,titleColor:z_e,tickColor:Qb,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:s6,group:{fill:s6},legend:{labelColor:a6,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:a6,titleFontSize:14,titlePadding:10},line:{stroke:Fl,strokeWidth:2},path:{stroke:Fl,strokeWidth:.5},rect:{fill:Fl},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Fl},bar:{binSpacing:2,fill:Fl,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Tl="#000",U_e={group:{fill:"#e5e5e5"},arc:{fill:Tl},area:{fill:Tl},line:{stroke:Tl},path:{stroke:Tl},rect:{fill:Tl},shape:{stroke:Tl},symbol:{fill:Tl,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},W_e=22,j_e="normal",l6="Benton Gothic, sans-serif",u6=11.5,B_e="normal",Rl="#82c6df",Kb="Benton Gothic Bold, sans-serif",c6="normal",f6=13,mh={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},H_e={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Kb,fontSize:W_e,fontWeight:j_e},arc:{fill:Rl},area:{fill:Rl},line:{stroke:Rl,strokeWidth:2},path:{stroke:Rl},rect:{fill:Rl},shape:{stroke:Rl},symbol:{fill:Rl,size:30},axis:{labelFont:l6,labelFontSize:u6,labelFontWeight:B_e,titleFont:Kb,titleFontSize:f6,titleFontWeight:c6},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:l6,labelFontSize:u6,symbolType:"square",titleFont:Kb,titleFontSize:f6,titleFontWeight:c6},range:{category:mh["category-6"],diverging:mh["fireandice-6"],heatmap:mh["fire-7"],ordinal:mh["fire-7"],ramp:mh["fire-7"]}},Ll="#ab5787",mm="#979797",G_e={background:"#f9f9f9",arc:{fill:Ll},area:{fill:Ll},line:{stroke:Ll},path:{stroke:Ll},rect:{fill:Ll},shape:{stroke:Ll},symbol:{fill:Ll,size:30},axis:{domainColor:mm,domainWidth:.5,gridWidth:.2,labelColor:mm,tickColor:mm,tickWidth:.2,titleColor:mm},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Pl="#3e5c69",Y_e={background:"#fff",arc:{fill:Pl},area:{fill:Pl},line:{stroke:Pl},path:{stroke:Pl},rect:{fill:Pl},shape:{stroke:Pl},symbol:{fill:Pl},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},li="#1696d2",d6="#000000",q_e="#FFFFFF",ym="Lato",Zb="Lato",V_e="Lato",X_e="#DEDDDD",J_e=18,yh={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Q_e={background:q_e,title:{anchor:"start",fontSize:J_e,font:ym},axisX:{domain:!0,domainColor:d6,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Zb,labelAngle:0,tickColor:d6,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:ym},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:X_e,gridWidth:1,labelFontSize:12,labelFont:Zb,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:ym,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Zb,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:ym,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:yh["six-groups-cat-1"],diverging:yh["diverging-colors"],heatmap:yh["diverging-colors"],ordinal:yh["six-groups-seq"],ramp:yh["shades-blue"]},area:{fill:li},rect:{fill:li},line:{color:li,stroke:li,strokeWidth:5},trail:{color:li,stroke:li,strokeWidth:0,size:1},path:{stroke:li,strokeWidth:.5},point:{filled:!0},text:{font:V_e,color:li,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:li,stroke:null}},arc:{fill:li},shape:{stroke:li},symbol:{fill:li,size:30}},zl="#3366CC",h6="#ccc",vm="Arial, sans-serif",K_e={arc:{fill:zl},area:{fill:zl},path:{stroke:zl},rect:{fill:zl},shape:{stroke:zl},symbol:{stroke:zl},circle:{fill:zl},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:vm,fontSize:12},"guide-title":{font:vm,fontSize:12},"group-title":{font:vm,fontSize:12}},title:{font:vm,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:h6,tickColor:h6,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},e4=e=>e*(1/3+1),p6=e4(9),g6=e4(10),m6=e4(12),vh="Segoe UI",y6="wf_standard-font, helvetica, arial, sans-serif",v6="#252423",xh="#605E5C",x6="transparent",Z_e="#C8C6C4",Pi="#118DFF",ebe="#12239E",tbe="#E66C37",nbe="#6B007B",rbe="#E044A7",ibe="#744EC2",obe="#D9B300",sbe="#D64550",CB=Pi,kB="#DEEFFF",_6=[kB,CB],abe=[kB,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",CB],lbe={view:{stroke:x6},background:x6,font:vh,header:{titleFont:y6,titleFontSize:m6,titleColor:v6,labelFont:vh,labelFontSize:g6,labelColor:xh},axis:{ticks:!1,grid:!1,domain:!1,labelColor:xh,labelFontSize:p6,titleFont:y6,titleColor:v6,titleFontSize:m6,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Z_e,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Pi},line:{stroke:Pi,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:vh,fontSize:p6,fill:xh},arc:{fill:Pi},area:{fill:Pi,line:!0,opacity:.6},path:{stroke:Pi},rect:{fill:Pi},point:{fill:Pi,filled:!0,size:75},shape:{stroke:Pi},symbol:{fill:Pi,strokeWidth:1.5,size:50},legend:{titleFont:vh,titleFontWeight:"bold",titleColor:xh,labelFont:vh,labelFontSize:g6,labelColor:xh,symbolType:"circle",symbolSize:75},range:{category:[Pi,ebe,tbe,nbe,rbe,ibe,obe,sbe],diverging:_6,heatmap:_6,ordinal:abe}},ew='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',ube='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',tw=400,xm={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},cbe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],fbe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function N2({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=xm.gridBg[e],i=xm.textPrimary[e],o=xm.textSecondary[e],s=n==="dark"?cbe:fbe,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:ew,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:ube,labelFontWeight:tw,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:xm.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:ew,fill:o,fontWeight:tw},"guide-title":{font:ew,fill:o,fontWeight:tw}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const dbe=N2({theme:"white",background:"#ffffff"}),hbe=N2({theme:"g10",background:"#f4f4f4"}),pbe=N2({theme:"g90",background:"#262626"}),gbe=N2({theme:"g100",background:"#161616"}),mbe=T_e.version,ybe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:hbe,carbong100:gbe,carbong90:pbe,carbonwhite:dbe,dark:R_e,excel:L_e,fivethirtyeight:I_e,ggplot2:U_e,googlecharts:K_e,latimes:H_e,powerbi:lbe,quartz:G_e,urbaninstitute:Q_e,version:mbe,vox:Y_e},Symbol.toStringTag,{value:"Module"}));function vbe(e,t,n,r){if(ne(e))return`[${e.map(i=>t(xe(i)?i:b6(i,n))).join(", ")}]`;if(ve(e)){let i="";const{title:o,image:s,...a}=e;o&&(i+=`<h2>${t(o)}</h2>`),s&&(i+=`<img src="${new URL(t(s),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const c of l){let f=a[c];f!==void 0&&(ve(f)&&(f=b6(f,n)),i+=`<tr><td class="key">${t(c)}</td><td class="value">${t(f)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function xbe(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function b6(e,t){return JSON.stringify(e,xbe(t))}var _be=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const $B="vg-tooltip-element",bbe={offsetX:10,offsetY:10,id:$B,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:wbe,maxDepth:2,formatTooltip:vbe,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function wbe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Sbe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return _be.toString().replaceAll($B,e)}function MB(e,t,{offsetX:n,offsetY:r}){const i=NB({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,r),o=["bottom-right","bottom-left","top-right","top-left"];for(const s of o)if(OB(i[s],t))return i[s];return i["top-left"]}function Ebe(e,t,n,r,i){const{position:o,offsetX:s,offsetY:a}=i,l=e._el.getBoundingClientRect(),c=e._origin,f=Abe(l,c,n),h=NB(f,r,s,a),p=Array.isArray(o)?o:[o];for(const m of p)if(OB(h[m],r)&&!Cbe(t,h[m],r))return h[m];return MB(t,r,i)}function Abe(e,t,n){const r=n.isVoronoi?n.datum.bounds:n.bounds;let i=e.left+t[0]+r.x1,o=e.top+t[1]+r.y1,s=n;for(;s.mark.group;)s=s.mark.group,i+=s.x??0,o+=s.y??0;const a=r.x2-r.x1,l=r.y2-r.y1;return{x1:i,x2:i+a,y1:o,y2:o+l}}function NB(e,t,n,r){const i=(e.x1+e.x2)/2,o=(e.y1+e.y2)/2,s=e.x1-t.width-n,a=i-t.width/2,l=e.x2+n,c=e.y1-t.height-r,f=o-t.height/2,h=e.y2+r;return{top:{x:a,y:c},bottom:{x:a,y:h},left:{x:s,y:f},right:{x:l,y:f},"top-left":{x:s,y:c},"top-right":{x:l,y:c},"bottom-left":{x:s,y:h},"bottom-right":{x:l,y:h}}}function OB(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function Cbe(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class kbe{constructor(t){re(this,"call");re(this,"options");re(this,"el");this.options={...bbe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Sbe(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:s}=this.options.anchor==="mark"?Ebe(t,n,r,this.el.getBoundingClientRect(),this.options):MB(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${o}px`}}var nw={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var $be=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Mbe=Object.prototype.hasOwnProperty;function NE(e,t){return Mbe.call(e,t)}function OE(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)NE(e,i)&&r.push(i);return r}function Yr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function DE(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function jl(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function DB(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function FE(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(FE(e[t]))return!0}else if(typeof e=="object"){for(var r=OE(e),i=r.length,o=0;o<i;o++)if(FE(e[r[o]]))return!0}}return!1}function w6(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var FB=(function(e){$be(t,e);function t(n,r,i,o,s){var a=this.constructor,l=e.call(this,w6(n,{name:r,index:i,operation:o,tree:s}))||this;return l.name=r,l.index=i,l.operation=o,l.tree=s,Object.setPrototypeOf(l,a.prototype),l.message=w6(n,{name:r,index:i,operation:o,tree:s}),l}return t})(Error),zt=FB,Nbe=Yr,Uc={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Ey(n,this.path);r&&(r=Yr(r));var i=au(n,{op:"remove",path:this.from}).removed;return au(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Ey(n,this.from);return au(n,{op:"add",path:this.path,value:Yr(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Dp(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Obe={add:function(e,t,n){return DE(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Uc.move,copy:Uc.copy,test:Uc.test,_get:Uc._get};function Ey(e,t){if(t=="")return e;var n={op:"_get",path:t};return au(e,n),n.value}function au(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):Ay(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=Ey(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=Dp(e,t.value),s.test===!1)throw new zt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new zt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return s}}else{r||(e=Yr(e));var a=t.path||"",l=a.split("/"),c=e,f=1,h=l.length,p=void 0,m=void 0,y=void 0;for(typeof n=="function"?y=n:y=Ay;;){if(m=l[f],m&&m.indexOf("~")!=-1&&(m=DB(m)),i&&(m=="__proto__"||m=="prototype"&&f>0&&l[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(c[m]===void 0?p=l.slice(0,f).join("/"):f==h-1&&(p=t.path),p!==void 0&&y(t,0,e,p)),f++,Array.isArray(c)){if(m==="-")m=c.length;else{if(n&&!DE(m))throw new zt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);DE(m)&&(m=~~m)}if(f>=h){if(n&&t.op==="add"&&m>c.length)throw new zt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var s=Obe[t.op].call(t,c,m,e);if(s.test===!1)throw new zt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}}else if(f>=h){var s=Uc[t.op].call(t,c,m,e);if(s.test===!1)throw new zt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return s}if(c=c[m],n&&f<h&&(!c||typeof c!="object"))throw new zt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function O2(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new zt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Yr(e));for(var o=new Array(t.length),s=0,a=t.length;s<a;s++)o[s]=au(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function Dbe(e,t,n){var r=au(e,t);if(r.test===!1)throw new zt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Ay(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new zt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Uc[e.op]){if(typeof e.path!="string")throw new zt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new zt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new zt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new zt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&FE(e.value))throw new zt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new zt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new zt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},a=TB([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new zt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new zt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function TB(e,t,n){try{if(!Array.isArray(e))throw new zt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)O2(Yr(t),Yr(e),n||!0);else{n=n||Ay;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof zt)return i;throw i}}function Dp(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,s;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!Dp(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(o=a.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=o;i--!==0;)if(s=a[i],!Dp(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}var Fbe=Object.freeze({__proto__:null,JsonPatchError:zt,_areEquals:Dp,applyOperation:au,applyPatch:O2,applyReducer:Dbe,deepClone:Nbe,getValueByPointer:Ey,validate:TB,validator:Ay});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var t4=new WeakMap,Tbe=(function(){function e(t){this.observers=new Map,this.obj=t}return e})(),Rbe=(function(){function e(t,n){this.callback=t,this.observer=n}return e})();function Lbe(e){return t4.get(e)}function Pbe(e,t){return e.observers.get(t)}function zbe(e,t){e.observers.delete(t.callback)}function Ibe(e,t){t.unobserve()}function Ube(e,t){var n=[],r,i=Lbe(e);if(!i)i=new Tbe(e),t4.set(e,i);else{var o=Pbe(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=Yr(e),t){r.callback=t,r.next=null;var s=function(){TE(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){TE(r),clearTimeout(r.next),zbe(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new Rbe(t,r)),r}function TE(e,t){t===void 0&&(t=!1);var n=t4.get(e.object);n4(n.value,e.object,e.patches,"",t),e.patches.length&&O2(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function n4(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=OE(t),s=OE(e),a=!1,l=s.length-1;l>=0;l--){var c=s[l],f=e[c];if(NE(t,c)&&!(t[c]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var h=t[c];typeof f=="object"&&f!=null&&typeof h=="object"&&h!=null&&Array.isArray(f)===Array.isArray(h)?n4(f,h,n,r+"/"+jl(c),i):f!==h&&(i&&n.push({op:"test",path:r+"/"+jl(c),value:Yr(f)}),n.push({op:"replace",path:r+"/"+jl(c),value:Yr(h)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+jl(c),value:Yr(f)}),n.push({op:"remove",path:r+"/"+jl(c)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&o.length==s.length))for(var l=0;l<o.length;l++){var c=o[l];!NE(e,c)&&t[c]!==void 0&&n.push({op:"add",path:r+"/"+jl(c),value:Yr(t[c])})}}}function Wbe(e,t,n){n===void 0&&(n=!1);var r=[];return n4(e,t,r,"",n),r}var jbe=Object.freeze({__proto__:null,compare:Wbe,generate:TE,observe:Ube,unobserve:Ibe});Object.assign({},Fbe,jbe,{JsonPatchError:FB,deepClone:Yr,escapePathComponent:jl,unescapePathComponent:DB});function Bbe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rw,S6;function Hbe(){if(S6)return rw;S6=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(n,r)}return this}}return rw=e,rw}var iw,E6;function r4(){if(E6)return iw;E6=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return iw=r=>r?typeof r!="object"?e:r:t,iw}var _m={exports:{}},ow,A6;function i4(){if(A6)return ow;A6=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=t-6;return ow={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ow}var sw,C6;function D2(){return C6||(C6=1,sw=typeof process=="object"&&nw&&nw.NODE_DEBUG&&/\bsemver\b/i.test(nw.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),sw}var k6;function o4(){return k6||(k6=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=i4(),o=D2();t=e.exports={};const s=t.re=[],a=t.safeRe=[],l=t.src=[],c=t.safeSrc=[],f=t.t={};let h=0;const p="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",i],[p,r]],y=_=>{for(const[b,S]of m)_=_.split(`${b}*`).join(`${b}{0,${S}}`).split(`${b}+`).join(`${b}{1,${S}}`);return _},v=(_,b,S)=>{const A=y(b),C=h++;o(_,C,b),f[_]=C,l[C]=b,c[C]=A,s[C]=new RegExp(b,S?"g":void 0),a[C]=new RegExp(A,S?"g":void 0)};v("NUMERICIDENTIFIER","0|[1-9]\\d*"),v("NUMERICIDENTIFIERLOOSE","\\d+"),v("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),v("MAINVERSION",`(${l[f.NUMERICIDENTIFIER]})\\.(${l[f.NUMERICIDENTIFIER]})\\.(${l[f.NUMERICIDENTIFIER]})`),v("MAINVERSIONLOOSE",`(${l[f.NUMERICIDENTIFIERLOOSE]})\\.(${l[f.NUMERICIDENTIFIERLOOSE]})\\.(${l[f.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASEIDENTIFIER",`(?:${l[f.NONNUMERICIDENTIFIER]}|${l[f.NUMERICIDENTIFIER]})`),v("PRERELEASEIDENTIFIERLOOSE",`(?:${l[f.NONNUMERICIDENTIFIER]}|${l[f.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASE",`(?:-(${l[f.PRERELEASEIDENTIFIER]}(?:\\.${l[f.PRERELEASEIDENTIFIER]})*))`),v("PRERELEASELOOSE",`(?:-?(${l[f.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[f.PRERELEASEIDENTIFIERLOOSE]})*))`),v("BUILDIDENTIFIER",`${p}+`),v("BUILD",`(?:\\+(${l[f.BUILDIDENTIFIER]}(?:\\.${l[f.BUILDIDENTIFIER]})*))`),v("FULLPLAIN",`v?${l[f.MAINVERSION]}${l[f.PRERELEASE]}?${l[f.BUILD]}?`),v("FULL",`^${l[f.FULLPLAIN]}$`),v("LOOSEPLAIN",`[v=\\s]*${l[f.MAINVERSIONLOOSE]}${l[f.PRERELEASELOOSE]}?${l[f.BUILD]}?`),v("LOOSE",`^${l[f.LOOSEPLAIN]}$`),v("GTLT","((?:<|>)?=?)"),v("XRANGEIDENTIFIERLOOSE",`${l[f.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),v("XRANGEIDENTIFIER",`${l[f.NUMERICIDENTIFIER]}|x|X|\\*`),v("XRANGEPLAIN",`[v=\\s]*(${l[f.XRANGEIDENTIFIER]})(?:\\.(${l[f.XRANGEIDENTIFIER]})(?:\\.(${l[f.XRANGEIDENTIFIER]})(?:${l[f.PRERELEASE]})?${l[f.BUILD]}?)?)?`),v("XRANGEPLAINLOOSE",`[v=\\s]*(${l[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[f.XRANGEIDENTIFIERLOOSE]})(?:${l[f.PRERELEASELOOSE]})?${l[f.BUILD]}?)?)?`),v("XRANGE",`^${l[f.GTLT]}\\s*${l[f.XRANGEPLAIN]}$`),v("XRANGELOOSE",`^${l[f.GTLT]}\\s*${l[f.XRANGEPLAINLOOSE]}$`),v("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),v("COERCE",`${l[f.COERCEPLAIN]}(?:$|[^\\d])`),v("COERCEFULL",l[f.COERCEPLAIN]+`(?:${l[f.PRERELEASE]})?(?:${l[f.BUILD]})?(?:$|[^\\d])`),v("COERCERTL",l[f.COERCE],!0),v("COERCERTLFULL",l[f.COERCEFULL],!0),v("LONETILDE","(?:~>?)"),v("TILDETRIM",`(\\s*)${l[f.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",v("TILDE",`^${l[f.LONETILDE]}${l[f.XRANGEPLAIN]}$`),v("TILDELOOSE",`^${l[f.LONETILDE]}${l[f.XRANGEPLAINLOOSE]}$`),v("LONECARET","(?:\\^)"),v("CARETTRIM",`(\\s*)${l[f.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",v("CARET",`^${l[f.LONECARET]}${l[f.XRANGEPLAIN]}$`),v("CARETLOOSE",`^${l[f.LONECARET]}${l[f.XRANGEPLAINLOOSE]}$`),v("COMPARATORLOOSE",`^${l[f.GTLT]}\\s*(${l[f.LOOSEPLAIN]})$|^$`),v("COMPARATOR",`^${l[f.GTLT]}\\s*(${l[f.FULLPLAIN]})$|^$`),v("COMPARATORTRIM",`(\\s*)${l[f.GTLT]}\\s*(${l[f.LOOSEPLAIN]}|${l[f.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",v("HYPHENRANGE",`^\\s*(${l[f.XRANGEPLAIN]})\\s+-\\s+(${l[f.XRANGEPLAIN]})\\s*$`),v("HYPHENRANGELOOSE",`^\\s*(${l[f.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[f.XRANGEPLAINLOOSE]})\\s*$`),v("STAR","(<|>)?=?\\s*\\*"),v("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),v("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(_m,_m.exports)),_m.exports}var aw,$6;function Gbe(){if($6)return aw;$6=1;const e=/^[0-9]+$/,t=(r,i)=>{const o=e.test(r),s=e.test(i);return o&&s&&(r=+r,i=+i),r===i?0:o&&!s?-1:s&&!o?1:r<i?-1:1};return aw={compareIdentifiers:t,rcompareIdentifiers:(r,i)=>t(i,r)},aw}var lw,M6;function s4(){if(M6)return lw;M6=1;const e=D2(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=i4(),{safeRe:r,t:i}=o4(),o=r4(),{compareIdentifiers:s}=Gbe();class a{constructor(c,f){if(f=o(f),c instanceof a){if(c.loose===!!f.loose&&c.includePrerelease===!!f.includePrerelease)return c;c=c.version}else if(typeof c!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof c}".`);if(c.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",c,f),this.options=f,this.loose=!!f.loose,this.includePrerelease=!!f.includePrerelease;const h=c.trim().match(f.loose?r[i.LOOSE]:r[i.FULL]);if(!h)throw new TypeError(`Invalid Version: ${c}`);if(this.raw=c,this.major=+h[1],this.minor=+h[2],this.patch=+h[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");h[4]?this.prerelease=h[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const m=+p;if(m>=0&&m<n)return m}return p}):this.prerelease=[],this.build=h[5]?h[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(c){if(e("SemVer.compare",this.version,this.options,c),!(c instanceof a)){if(typeof c=="string"&&c===this.version)return 0;c=new a(c,this.options)}return c.version===this.version?0:this.compareMain(c)||this.comparePre(c)}compareMain(c){return c instanceof a||(c=new a(c,this.options)),s(this.major,c.major)||s(this.minor,c.minor)||s(this.patch,c.patch)}comparePre(c){if(c instanceof a||(c=new a(c,this.options)),this.prerelease.length&&!c.prerelease.length)return-1;if(!this.prerelease.length&&c.prerelease.length)return 1;if(!this.prerelease.length&&!c.prerelease.length)return 0;let f=0;do{const h=this.prerelease[f],p=c.prerelease[f];if(e("prerelease compare",f,h,p),h===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(h===void 0)return-1;if(h===p)continue;return s(h,p)}while(++f)}compareBuild(c){c instanceof a||(c=new a(c,this.options));let f=0;do{const h=this.build[f],p=c.build[f];if(e("build compare",f,h,p),h===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(h===void 0)return-1;if(h===p)continue;return s(h,p)}while(++f)}inc(c,f,h){if(c.startsWith("pre")){if(!f&&h===!1)throw new Error("invalid increment argument: identifier is empty");if(f){const p=`-${f}`.match(this.options.loose?r[i.PRERELEASELOOSE]:r[i.PRERELEASE]);if(!p||p[1]!==f)throw new Error(`invalid identifier: ${f}`)}}switch(c){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",f,h);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",f,h);break;case"prepatch":this.prerelease.length=0,this.inc("patch",f,h),this.inc("pre",f,h);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",f,h),this.inc("pre",f,h);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(h)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let m=this.prerelease.length;for(;--m>=0;)typeof this.prerelease[m]=="number"&&(this.prerelease[m]++,m=-2);if(m===-1){if(f===this.prerelease.join(".")&&h===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(f){let m=[f,p];h===!1&&(m=[f]),s(this.prerelease[0],f)===0?isNaN(this.prerelease[1])&&(this.prerelease=m):this.prerelease=m}break}default:throw new Error(`invalid increment argument: ${c}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return lw=a,lw}var uw,N6;function ad(){if(N6)return uw;N6=1;const e=s4();return uw=(n,r,i)=>new e(n,i).compare(new e(r,i)),uw}var cw,O6;function Ybe(){if(O6)return cw;O6=1;const e=ad();return cw=(n,r,i)=>e(n,r,i)===0,cw}var fw,D6;function qbe(){if(D6)return fw;D6=1;const e=ad();return fw=(n,r,i)=>e(n,r,i)!==0,fw}var dw,F6;function Vbe(){if(F6)return dw;F6=1;const e=ad();return dw=(n,r,i)=>e(n,r,i)>0,dw}var hw,T6;function Xbe(){if(T6)return hw;T6=1;const e=ad();return hw=(n,r,i)=>e(n,r,i)>=0,hw}var pw,R6;function Jbe(){if(R6)return pw;R6=1;const e=ad();return pw=(n,r,i)=>e(n,r,i)<0,pw}var gw,L6;function Qbe(){if(L6)return gw;L6=1;const e=ad();return gw=(n,r,i)=>e(n,r,i)<=0,gw}var mw,P6;function Kbe(){if(P6)return mw;P6=1;const e=Ybe(),t=qbe(),n=Vbe(),r=Xbe(),i=Jbe(),o=Qbe();return mw=(a,l,c,f)=>{switch(l){case"===":return typeof a=="object"&&(a=a.version),typeof c=="object"&&(c=c.version),a===c;case"!==":return typeof a=="object"&&(a=a.version),typeof c=="object"&&(c=c.version),a!==c;case"":case"=":case"==":return e(a,c,f);case"!=":return t(a,c,f);case">":return n(a,c,f);case">=":return r(a,c,f);case"<":return i(a,c,f);case"<=":return o(a,c,f);default:throw new TypeError(`Invalid operator: ${l}`)}},mw}var yw,z6;function Zbe(){if(z6)return yw;z6=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(f,h){if(h=n(h),f instanceof t){if(f.loose===!!h.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),s("comparator",f,h),this.options=h,this.loose=!!h.loose,this.parse(f),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(f){const h=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],p=f.match(h);if(!p)throw new TypeError(`Invalid comparator: ${f}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new a(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(f){if(s("Comparator.test",f,this.options.loose),this.semver===e||f===e)return!0;if(typeof f=="string")try{f=new a(f,this.options)}catch{return!1}return o(f,this.operator,this.semver,this.options)}intersects(f,h){if(!(f instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(f.value,h).test(this.value):f.operator===""?f.value===""?!0:new l(this.value,h).test(f.semver):(h=n(h),h.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||o(this.semver,"<",f.semver,h)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||o(this.semver,">",f.semver,h)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}yw=t;const n=r4(),{safeRe:r,t:i}=o4(),o=Kbe(),s=D2(),a=s4(),l=RB();return yw}var vw,I6;function RB(){if(I6)return vw;I6=1;const e=/\s+/g;class t{constructor(F,W){if(W=i(W),F instanceof t)return F.loose===!!W.loose&&F.includePrerelease===!!W.includePrerelease?F:new t(F.raw,W);if(F instanceof o)return this.raw=F.value,this.set=[[F]],this.formatted=void 0,this;if(this.options=W,this.loose=!!W.loose,this.includePrerelease=!!W.includePrerelease,this.raw=F.trim().replace(e," "),this.set=this.raw.split("||").map(V=>this.parseRange(V.trim())).filter(V=>V.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const V=this.set[0];if(this.set=this.set.filter(j=>!v(j[0])),this.set.length===0)this.set=[V];else if(this.set.length>1){for(const j of this.set)if(j.length===1&&_(j[0])){this.set=[j];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let F=0;F<this.set.length;F++){F>0&&(this.formatted+="||");const W=this.set[F];for(let V=0;V<W.length;V++)V>0&&(this.formatted+=" "),this.formatted+=W[V].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(F){const V=((this.options.includePrerelease&&m)|(this.options.loose&&y))+":"+F,j=r.get(V);if(j)return j;const H=this.options.loose,Q=H?l[c.HYPHENRANGELOOSE]:l[c.HYPHENRANGE];F=F.replace(Q,X(this.options.includePrerelease)),s("hyphen replace",F),F=F.replace(l[c.COMPARATORTRIM],f),s("comparator trim",F),F=F.replace(l[c.TILDETRIM],h),s("tilde trim",F),F=F.replace(l[c.CARETTRIM],p),s("caret trim",F);let L=F.split(" ").map(be=>S(be,this.options)).join(" ").split(/\s+/).map(be=>R(be,this.options));H&&(L=L.filter(be=>(s("loose invalid filter",be,this.options),!!be.match(l[c.COMPARATORLOOSE])))),s("range list",L);const Y=new Map,ye=L.map(be=>new o(be,this.options));for(const be of ye){if(v(be))return[be];Y.set(be.value,be)}Y.size>1&&Y.has("")&&Y.delete("");const Ae=[...Y.values()];return r.set(V,Ae),Ae}intersects(F,W){if(!(F instanceof t))throw new TypeError("a Range is required");return this.set.some(V=>b(V,W)&&F.set.some(j=>b(j,W)&&V.every(H=>j.every(Q=>H.intersects(Q,W)))))}test(F){if(!F)return!1;if(typeof F=="string")try{F=new a(F,this.options)}catch{return!1}for(let W=0;W<this.set.length;W++)if(B(this.set[W],F,this.options))return!0;return!1}}vw=t;const n=Hbe(),r=new n,i=r4(),o=Zbe(),s=D2(),a=s4(),{safeRe:l,t:c,comparatorTrimReplace:f,tildeTrimReplace:h,caretTrimReplace:p}=o4(),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:y}=i4(),v=I=>I.value==="<0.0.0-0",_=I=>I.value==="",b=(I,F)=>{let W=!0;const V=I.slice();let j=V.pop();for(;W&&V.length;)W=V.every(H=>j.intersects(H,F)),j=V.pop();return W},S=(I,F)=>(s("comp",I,F),I=N(I,F),s("caret",I),I=C(I,F),s("tildes",I),I=O(I,F),s("xrange",I),I=P(I,F),s("stars",I),I),A=I=>!I||I.toLowerCase()==="x"||I==="*",C=(I,F)=>I.trim().split(/\s+/).map(W=>k(W,F)).join(" "),k=(I,F)=>{const W=F.loose?l[c.TILDELOOSE]:l[c.TILDE];return I.replace(W,(V,j,H,Q,L)=>{s("tilde",I,V,j,H,Q,L);let Y;return A(j)?Y="":A(H)?Y=`>=${j}.0.0 <${+j+1}.0.0-0`:A(Q)?Y=`>=${j}.${H}.0 <${j}.${+H+1}.0-0`:L?(s("replaceTilde pr",L),Y=`>=${j}.${H}.${Q}-${L} <${j}.${+H+1}.0-0`):Y=`>=${j}.${H}.${Q} <${j}.${+H+1}.0-0`,s("tilde return",Y),Y})},N=(I,F)=>I.trim().split(/\s+/).map(W=>$(W,F)).join(" "),$=(I,F)=>{s("caret",I,F);const W=F.loose?l[c.CARETLOOSE]:l[c.CARET],V=F.includePrerelease?"-0":"";return I.replace(W,(j,H,Q,L,Y)=>{s("caret",I,j,H,Q,L,Y);let ye;return A(H)?ye="":A(Q)?ye=`>=${H}.0.0${V} <${+H+1}.0.0-0`:A(L)?H==="0"?ye=`>=${H}.${Q}.0${V} <${H}.${+Q+1}.0-0`:ye=`>=${H}.${Q}.0${V} <${+H+1}.0.0-0`:Y?(s("replaceCaret pr",Y),H==="0"?Q==="0"?ye=`>=${H}.${Q}.${L}-${Y} <${H}.${Q}.${+L+1}-0`:ye=`>=${H}.${Q}.${L}-${Y} <${H}.${+Q+1}.0-0`:ye=`>=${H}.${Q}.${L}-${Y} <${+H+1}.0.0-0`):(s("no pr"),H==="0"?Q==="0"?ye=`>=${H}.${Q}.${L}${V} <${H}.${Q}.${+L+1}-0`:ye=`>=${H}.${Q}.${L}${V} <${H}.${+Q+1}.0-0`:ye=`>=${H}.${Q}.${L} <${+H+1}.0.0-0`),s("caret return",ye),ye})},O=(I,F)=>(s("replaceXRanges",I,F),I.split(/\s+/).map(W=>D(W,F)).join(" ")),D=(I,F)=>{I=I.trim();const W=F.loose?l[c.XRANGELOOSE]:l[c.XRANGE];return I.replace(W,(V,j,H,Q,L,Y)=>{s("xRange",I,V,j,H,Q,L,Y);const ye=A(H),Ae=ye||A(Q),be=Ae||A(L),Ie=be;return j==="="&&Ie&&(j=""),Y=F.includePrerelease?"-0":"",ye?j===">"||j==="<"?V="<0.0.0-0":V="*":j&&Ie?(Ae&&(Q=0),L=0,j===">"?(j=">=",Ae?(H=+H+1,Q=0,L=0):(Q=+Q+1,L=0)):j==="<="&&(j="<",Ae?H=+H+1:Q=+Q+1),j==="<"&&(Y="-0"),V=`${j+H}.${Q}.${L}${Y}`):Ae?V=`>=${H}.0.0${Y} <${+H+1}.0.0-0`:be&&(V=`>=${H}.${Q}.0${Y} <${H}.${+Q+1}.0-0`),s("xRange return",V),V})},P=(I,F)=>(s("replaceStars",I,F),I.trim().replace(l[c.STAR],"")),R=(I,F)=>(s("replaceGTE0",I,F),I.trim().replace(l[F.includePrerelease?c.GTE0PRE:c.GTE0],"")),X=I=>(F,W,V,j,H,Q,L,Y,ye,Ae,be,Ie)=>(A(V)?W="":A(j)?W=`>=${V}.0.0${I?"-0":""}`:A(H)?W=`>=${V}.${j}.0${I?"-0":""}`:Q?W=`>=${W}`:W=`>=${W}${I?"-0":""}`,A(ye)?Y="":A(Ae)?Y=`<${+ye+1}.0.0-0`:A(be)?Y=`<${ye}.${+Ae+1}.0-0`:Ie?Y=`<=${ye}.${Ae}.${be}-${Ie}`:I?Y=`<${ye}.${Ae}.${+be+1}-0`:Y=`<=${Y}`,`${W} ${Y}`.trim()),B=(I,F,W)=>{for(let V=0;V<I.length;V++)if(!I[V].test(F))return!1;if(F.prerelease.length&&!W.includePrerelease){for(let V=0;V<I.length;V++)if(s(I[V].semver),I[V].semver!==o.ANY&&I[V].semver.prerelease.length>0){const j=I[V].semver;if(j.major===F.major&&j.minor===F.minor&&j.patch===F.patch)return!0}return!1}return!0};return vw}var xw,U6;function ewe(){if(U6)return xw;U6=1;const e=RB();return xw=(n,r,i)=>{try{r=new e(r,i)}catch{return!1}return r.test(n)},xw}var twe=ewe(),LB=Bbe(twe);function nwe(e,t,n){const r=e.open(t),i=250,{origin:o}=new URL(t);let s=40;function a(c){c.source===r&&(s=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function l(){s<=0||(r.postMessage(n,o),setTimeout(l,i),s-=1)}setTimeout(l,i)}var rwe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function PB(e,...t){for(const n of t)iwe(e,n);return e}function iwe(e,t){for(const n of Object.keys(t))Pf(e,n,t[n],!0)}const _o=Bpe;let Fp=D_e;const bm=typeof window<"u"?window:void 0;var H6;Fp===void 0&&((H6=bm==null?void 0:bm.vl)!=null&&H6.compile)&&(Fp=bm.vl);const owe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},swe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},jh={vega:"Vega","vega-lite":"Vega-Lite"},Cy={vega:_o.version,"vega-lite":Fp?Fp.version:"not available"},awe={vega:e=>e,"vega-lite":(e,t,n)=>Fp.compile(e,{config:n,logger:t}).spec},lwe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,uwe="chart-wrapper";function cwe(e){return typeof e=="function"}function W6(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(i+e+o),s.document.title=`${jh[r]} JSON Source`}function fwe(e,t,n){if(e.$schema){const r=AB(e.$schema);n&&n!==r.library&&t.warn(`The given visualization spec is written in ${jh[r.library]}, but mode argument sets ${jh[n]??n}.`);const i=r.library;return LB(Cy[i],`^${r.version.slice(1)}`)||t.warn(`The input spec uses ${jh[i]} ${r.version}, but the current version of ${jh[i]} is v${Cy[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":n??"vega"}function zB(e){return!!(e&&"load"in e)}function j6(e){return zB(e)?e:_o.loader(e)}function dwe(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return xe(t.defaultStyle)&&(t.defaultStyle=!1),t}async function hwe(e,t,n={}){let r,i;xe(t)?(i=j6(n.loader),r=JSON.parse(await i.load(t))):r=t;const o=dwe(r),s=o.loader;(!i||s)&&(i=j6(n.loader??s));const a=await B6(o,i),l=await B6(n,i),c={...PB(l,a),config:Lf(l.config??{},a.config??{})};return await gwe(e,r,c,i)}async function B6(e,t){const n=xe(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=xe(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function pwe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function gwe(e,t,n={},r){const i=n.theme?Lf(ybe[n.theme],n.config??{}):n.config,o=el(n.actions)?n.actions:PB({},owe,n.actions??{}),s={...swe,...n.i18n},a=n.renderer??"svg",l=n.logger??ky(_o.Warn);n.logLevel!==void 0&&l.level(n.logLevel);const c=n.downloadFileName??"visualization",f=typeof e=="string"?document.querySelector(e):e;if(!f)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const k="vega-embed-style",{root:N,rootContainer:$}=pwe(f);if(!N.getElementById(k)){const O=document.createElement("style");O.id=k,O.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?rwe.toString():n.defaultStyle,$.appendChild(O)}}const h=fwe(t,l,n.mode);let p=awe[h](t,l,i);if(h==="vega-lite"&&p.$schema){const k=AB(p.$schema);LB(Cy.vega,`^${k.version.slice(1)}`)||l.warn(`The compiled spec uses Vega ${k.version}, but current version is v${Cy.vega}.`)}f.classList.add("vega-embed"),o&&f.classList.add("has-actions"),f.innerHTML="";let m=f;if(o){const k=document.createElement("div");k.classList.add(uwe),f.appendChild(k),m=k}const y=n.patch;if(y&&(p=y instanceof Function?y(p):O2(p,y,!0,!1).newDocument),n.formatLocale&&_o.formatLocale(n.formatLocale),n.timeFormatLocale&&_o.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const k in n.expressionFunctions){const N=n.expressionFunctions[k];"fn"in N?_o.expressionFunction(k,N.fn,N.visitor):N instanceof Function&&_o.expressionFunction(k,N)}const{ast:v}=n,_=_o.parse(p,h==="vega-lite"?{}:i,{ast:v}),b=new(n.viewClass||_o.View)(_,{loader:r,logger:l,renderer:a,...v?{expr:_o.expressionInterpreter??n.expr??Zpe}:{}});if(b.addSignalListener("autosize",(k,N)=>{const{type:$}=N;$=="fit-x"?(m.classList.add("fit-x"),m.classList.remove("fit-y")):$=="fit-y"?(m.classList.remove("fit-x"),m.classList.add("fit-y")):$=="fit"?m.classList.add("fit-x","fit-y"):m.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:k,tooltip:N}=n,$=k&&!zB(k)?k==null?void 0:k.baseURL:void 0,O=cwe(N)?N:new kbe({baseURL:$,...N===!0?{}:N}).call;b.tooltip(O)}let{hover:S}=n;if(S===void 0&&(S=h==="vega"),S){const{hoverSet:k,updateSet:N}=typeof S=="boolean"?{}:S;b.hover(k,N)}n&&(n.width!=null&&b.width(n.width),n.height!=null&&b.height(n.height),n.padding!=null&&b.padding(n.padding)),await b.initialize(m,n.bind).runAsync();let A;if(o!==!1){let k=f;if(n.defaultStyle!==!1||n.forceActionsMenu){const $=document.createElement("details");$.title=s.CLICK_TO_VIEW_ACTIONS,f.append($),k=$;const O=document.createElement("summary");O.innerHTML=lwe,$.append(O),A=D=>{$.contains(D.target)||$.removeAttribute("open")},document.addEventListener("click",A)}const N=document.createElement("div");if(k.append(N),N.classList.add("vega-actions"),o===!0||o.export!==!1){for(const $ of["svg","png"])if(o===!0||o.export===!0||o.export[$]){const O=s[`${$.toUpperCase()}_ACTION`],D=document.createElement("a"),P=ve(n.scaleFactor)?n.scaleFactor[$]:n.scaleFactor;D.text=O,D.href="#",D.target="_blank",D.download=`${c}.${$}`,D.addEventListener("mousedown",async function(R){R.preventDefault();const X=await b.toImageURL($,P);this.href=X}),N.append(D)}}if(o===!0||o.source!==!1){const $=document.createElement("a");$.text=s.SOURCE_ACTION,$.href="#",$.addEventListener("click",function(O){W6(N_(t),n.sourceHeader??"",n.sourceFooter??"",h),O.preventDefault()}),N.append($)}if(h==="vega-lite"&&(o===!0||o.compiled!==!1)){const $=document.createElement("a");$.text=s.COMPILED_ACTION,$.href="#",$.addEventListener("click",function(O){W6(N_(p),n.sourceHeader??"",n.sourceFooter??"","vega"),O.preventDefault()}),N.append($)}if(o===!0||o.editor!==!1){const $=n.editorUrl??"https://vega.github.io/editor/",O=document.createElement("a");O.text=s.EDITOR_ACTION,O.href="#",O.addEventListener("click",function(D){nwe(window,$,{config:i,mode:y?"vega":h,renderer:a,spec:N_(y?p:t)}),D.preventDefault()}),N.append(O)}}function C(){A&&document.removeEventListener("click",A),b.finalize()}return{view:b,spec:t,vgSpec:p,finalize:C,embedOptions:n}}function mwe(e){const{x:t,y:n}=e;if(t&&n){if(t.type==="quantitative"&&n.type==="quantitative")return"point";if((t.type==="nominal"||t.type==="ordinal")&&n.type==="quantitative"||t.type==="quantitative"&&(n.type==="nominal"||n.type==="ordinal"))return"bar";if(t.type==="temporal"&&n.type==="quantitative"||n.type==="temporal"&&t.type==="quantitative")return"line";if((t.type==="nominal"||t.type==="ordinal")&&(n.type==="nominal"||n.type==="ordinal"))return"rect"}return t&&!n||n&&!t?"bar":"point"}function Il(e){const t={field:e.name,type:e.type};return e.type==="temporal"&&(t.timeUnit="year"),t}function ywe(e,t){if(!e.x&&!e.y)return null;const n=mwe(e),r={};return e.x&&(r.x=Il(e.x)),e.y&&(r.y=Il(e.y)),e.color&&(r.color=Il(e.color)),e.size&&(r.size=Il(e.size)),e.shape&&(r.shape=Il(e.shape)),e.row&&(r.row=Il(e.row)),e.column&&(r.column=Il(e.column)),{$schema:"https://vega.github.io/schema/vega-lite/v6.json",data:{values:t},mark:{type:n,tooltip:!0},encoding:r,width:"container",height:400}}function vwe(){const{state:e}=Tf(),t=yi.useRef(null),n=ywe(e.encodings,e.data);yi.useEffect(()=>{if(!t.current)return;if(!n){t.current.innerHTML="";return}(async()=>{try{await hwe(t.current,n,{actions:{export:!0,source:!1,compiled:!1,editor:!1},renderer:"svg",config:{background:"transparent",axis:{labelColor:"#a3a3a3",titleColor:"#fafafa",gridColor:"rgba(255, 255, 255, 0.06)",domainColor:"rgba(255, 255, 255, 0.15)",tickColor:"rgba(255, 255, 255, 0.15)",labelFont:"DM Sans, sans-serif",titleFont:"Instrument Serif, serif",labelFontSize:11,titleFontSize:13,titleFontWeight:400,titleFontStyle:"italic"},legend:{labelColor:"#a3a3a3",titleColor:"#fafafa",labelFont:"DM Sans, sans-serif",titleFont:"DM Sans, sans-serif",labelFontSize:11,titleFontSize:11,titleFontWeight:600},title:{color:"#fafafa",font:"Instrument Serif, serif",fontSize:18,fontWeight:400,fontStyle:"italic"},view:{stroke:"transparent"},range:{category:["#3b82f6","#f97316","#a855f7","#22c55e","#ef4444","#eab308","#06b6d4","#ec4899"]}}})}catch(o){console.error("Vega embed error:",o)}})()},[n]);const r=Object.keys(e.encodings).length>0;return ee.jsxs("main",{style:{padding:"32px",backgroundColor:"var(--color-bg-primary)",height:"100%",overflow:"auto",display:"flex",flexDirection:"column",position:"relative"},children:[ee.jsx("div",{style:{position:"absolute",inset:0,backgroundImage:`
            radial-gradient(circle at 25% 25%, rgba(255, 107, 74, 0.03) 0%, transparent 50%),
            radial-gradient(circle at 75% 75%, rgba(59, 130, 246, 0.03) 0%, transparent 50%)
          `,pointerEvents:"none"}}),ee.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"24px",position:"relative",zIndex:1},children:[ee.jsxs("div",{children:[ee.jsx("h2",{style:{fontFamily:"var(--font-display)",fontSize:"18px",fontWeight:400,color:"var(--color-text-primary)",marginBottom:"4px",fontStyle:"italic"},children:"Visualization"}),ee.jsx("p",{style:{fontSize:"12px",color:"var(--color-text-muted)"},children:r?n?"Your chart is ready":"Add X or Y axis to render":"Start by dragging fields to encodings"})]}),n&&ee.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 12px",backgroundColor:"var(--color-bg-tertiary)",borderRadius:"6px",fontSize:"11px",color:"var(--color-text-secondary)"},children:[ee.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:ee.jsx("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),"Live Preview"]})]}),r?n?ee.jsx("div",{ref:t,style:{flex:1,backgroundColor:"var(--color-bg-secondary)",borderRadius:"16px",padding:"24px",border:"1px solid var(--color-border)",position:"relative",zIndex:1,display:"flex",alignItems:"center",justifyContent:"center",animation:"fadeIn 0.4s ease-out",overflow:"hidden"}}):ee.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",zIndex:1},children:ee.jsxs("div",{style:{textAlign:"center",maxWidth:"320px",animation:"fadeIn 0.5s ease-out"},children:[ee.jsxs("div",{style:{width:"80px",height:"80px",margin:"0 auto 24px",position:"relative"},children:[ee.jsx("div",{style:{position:"absolute",left:"20px",top:"10px",bottom:"20px",width:"2px",backgroundColor:"var(--color-accent)",borderRadius:"1px",opacity:.5}}),ee.jsx("div",{style:{position:"absolute",left:"20px",bottom:"20px",right:"10px",height:"2px",backgroundColor:"var(--color-accent)",borderRadius:"1px",opacity:.5}}),ee.jsx("div",{style:{position:"absolute",left:"30px",top:"20px",right:"15px",bottom:"30px",border:"2px dashed var(--color-border)",borderRadius:"8px"}})]}),ee.jsx("h3",{style:{fontFamily:"var(--font-display)",fontSize:"20px",fontWeight:400,color:"var(--color-text-primary)",marginBottom:"8px",fontStyle:"italic"},children:"Almost There"}),ee.jsxs("p",{style:{fontSize:"13px",color:"var(--color-text-muted)",lineHeight:1.6},children:["Add a field to the ",ee.jsx("span",{style:{color:"var(--color-accent)"},children:"X"})," or"," ",ee.jsx("span",{style:{color:"var(--color-accent)"},children:"Y"})," axis to render your chart"]})]})}):ee.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",zIndex:1},children:ee.jsxs("div",{style:{textAlign:"center",maxWidth:"320px",animation:"fadeIn 0.5s ease-out"},children:[ee.jsxs("div",{style:{width:"80px",height:"80px",margin:"0 auto 24px",borderRadius:"20px",background:"linear-gradient(135deg, var(--color-bg-tertiary) 0%, var(--color-bg-elevated) 100%)",border:"1px solid var(--color-border)",display:"flex",alignItems:"flex-end",justifyContent:"center",gap:"6px",padding:"16px"},children:[ee.jsx("div",{style:{width:"12px",height:"20px",backgroundColor:"var(--color-quantitative)",borderRadius:"3px 3px 0 0",opacity:.6}}),ee.jsx("div",{style:{width:"12px",height:"32px",backgroundColor:"var(--color-nominal)",borderRadius:"3px 3px 0 0",opacity:.8}}),ee.jsx("div",{style:{width:"12px",height:"24px",backgroundColor:"var(--color-ordinal)",borderRadius:"3px 3px 0 0",opacity:.7}})]}),ee.jsx("h3",{style:{fontFamily:"var(--font-display)",fontSize:"20px",fontWeight:400,color:"var(--color-text-primary)",marginBottom:"8px",fontStyle:"italic"},children:"Create Your Chart"}),ee.jsx("p",{style:{fontSize:"13px",color:"var(--color-text-muted)",lineHeight:1.6},children:"Drag data fields from the left panel to encoding channels to build your visualization"})]})}),ee.jsx("div",{style:{position:"absolute",bottom:0,left:"32px",right:"32px",height:"1px",background:"linear-gradient(90deg, transparent 0%, var(--color-border) 50%, transparent 100%)"}})]})}function xwe(){const{state:e}=Tf();return e.isLoading?ee.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",gap:"24px",background:"linear-gradient(135deg, var(--color-bg-primary) 0%, var(--color-bg-secondary) 100%)"},children:[ee.jsx("div",{style:{width:"48px",height:"48px",border:"2px solid var(--color-border)",borderTopColor:"var(--color-accent)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),ee.jsx("span",{style:{fontFamily:"var(--font-display)",fontSize:"18px",color:"var(--color-text-secondary)",fontStyle:"italic"},children:"Loading your data..."}),ee.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):e.error?ee.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",gap:"16px",background:"var(--color-bg-primary)"},children:[ee.jsx("div",{style:{width:"64px",height:"64px",borderRadius:"50%",backgroundColor:"rgba(239, 68, 68, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"28px"},children:"!"}),ee.jsx("span",{style:{fontFamily:"var(--font-display)",fontSize:"20px",color:"#ef4444"},children:e.error})]}):ee.jsxs("div",{style:{display:"grid",gridTemplateColumns:"240px 280px 1fr",gridTemplateRows:"64px 1fr",height:"100vh",overflow:"hidden",background:"var(--color-bg-primary)"},children:[ee.jsxs("header",{style:{gridColumn:"1 / -1",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 32px",borderBottom:"1px solid var(--color-border)",background:"var(--color-bg-secondary)"},children:[ee.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[ee.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:"linear-gradient(135deg, var(--color-accent) 0%, #ff8f75 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px var(--color-accent-glow)"},children:ee.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[ee.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),ee.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),ee.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"14"})]})}),ee.jsxs("h1",{style:{fontFamily:"var(--font-display)",fontSize:"22px",fontWeight:400,color:"var(--color-text-primary)",letterSpacing:"-0.02em"},children:["DataViz ",ee.jsx("span",{style:{fontStyle:"italic",color:"var(--color-accent)"},children:"Studio"})]})]}),ee.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 12px",backgroundColor:"var(--color-bg-tertiary)",borderRadius:"6px",fontSize:"12px",color:"var(--color-text-muted)"},children:[ee.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"var(--color-temporal)"}}),e.data.length," records loaded"]})]}),ee.jsx(oY,{}),ee.jsx(cY,{}),ee.jsx(vwe,{}),ee.jsx("div",{className:"noise-overlay"})]})}function _we(){return ee.jsx(eY,{children:ee.jsx(xwe,{})})}GG.createRoot(document.getElementById("root")).render(ee.jsx(yi.StrictMode,{children:ee.jsx(_we,{})}));
